---
title: "Encoders"
slug: MarshallEncoders
---

The <a href="/site/apidocs/org/apache/juneau/encoders/package-summary.html" target="_blank">org.apache.juneau.encoders</a> package defines an API for handling encoding-based matching
of `Accept-Encoding`/`Content-Encoding` HTTP headers.

It consists of the following classes:

<tree>
<node-0><java-class><a href="/site/apidocs/org/apache/juneau/encoders/EncoderSet.html" target="_blank">EncoderSet</a></java-class></node-0>
<node-0><java-abstract-class><a href="/site/apidocs/org/apache/juneau/encoders/Encoder.html" target="_blank">Encoder</a></java-abstract-class></node-0>
<node-1><java-class><a href="/site/apidocs/org/apache/juneau/encoders/IdentityEncoder.html" target="_blank">IdentityEncoder</a></java-class></node-1>
<node-1><java-class><a href="/site/apidocs/org/apache/juneau/encoders/GzipEncoder.html" target="_blank">GzipEncoder</a></java-class></node-1>
</tree>

#### EncoderSet

The <a href="/site/apidocs/org/apache/juneau/encoders/EncoderSet.html" target="_blank">EncoderSet</a> class represents the set of <a href="/site/apidocs/org/apache/juneau/encoders/Encoder.html" target="_blank">org.apache.juneau.encoders</a> keyed by codings.
It maintains a set of encoders and the codings that they can handle.

The <a href="/site/apidocs/org/apache/juneau/encoders/EncoderSet.html#getEncoderMatch(java.lang.String)" target="_blank">getEncoderMatch(String)</a> and <a href="/site/apidocs/org/apache/juneau/encoders/EncoderSet.html#getEncoder(java.lang.String)" target="_blank">EncoderSet.getEncoder(String)</a> methods are then used to find appropriate encoders for specific `Accept-Encoding` and `Content-Encoding` header values.

#### Match ordering

Encoders are tried in the order they appear in the set.
The <a href="/site/apidocs/org/apache/juneau/encoders/EncoderSet.Builder.html#add(java.lang.Class...)" target="_blank">EncoderSet.Builder.add(Class...)</a> / <a href="/site/apidocs/org/apache/juneau/encoders/EncoderSet.Builder.html#add(org.apache.juneau.encoders.Encoder...)" target="_blank">EncoderSet.Builder.add(Encoder...)</a> methods prepend the values to the list to allow them the opportunity to override encoders already in the list.

For example, calling `builder.add(E1.class,E2.class).add(E3.class, E4.class)` will result in the order `E3, E4, E1, E2`.

:::tip Example
```java
// Create an encoder group with support for gzip compression.
EncoderSet encoders = EncoderSet
    .create()
    .add(GzipEncoder.class)
    .build();

// Should return "gzip"
String matchedCoding = encoders.findMatch("compress;q=1.0, gzip;q=0.8, identity;q=0.5, *;q=0");

// Get the encoder
Encoder encoder = encoders.getEncoder(matchedCoding);
```
:::

#### Encoder API

The <a href="/site/apidocs/org/apache/juneau/encoders/Encoder.html" target="_blank">Encoder</a> interface is used for enabling decompression on
requests and compression on responses, such as support for GZIP compression.
It is used to wrap input and output streams within compression/decompression streams.

<tree>
<node-0><java-abstract-class><a href="/site/apidocs/org/apache/juneau/encoders/Encoder.html" target="_blank">Encoder</a></java-abstract-class></node-0>
<node-1><java-method><a href="/site/apidocs/org/apache/juneau/encoders/Encoder.html#getCodings()" target="_blank">getCodings()</a></java-method></node-1>
<node-1><java-method><a href="/site/apidocs/org/apache/juneau/encoders/Encoder.html#getInputStream(java.io.InputStream)" target="_blank">getInputStream(InputStream)</a></java-method></node-1>
<node-1><java-method><a href="/site/apidocs/org/apache/juneau/encoders/Encoder.html#getOutputStream(java.io.OutputStream)" target="_blank">getOutputStream(OutputStream)</a></java-method></node-1>
</tree>

:::note
Encoders are registered with <a href="/site/apidocs/org/apache/juneau/rest/servlet/RestServlet.html" target="_blank">RestServlets</a> through the <a href="/site/apidocs/org/apache/juneau/rest/annotation/Rest.html#encoders()" target="_blank">@Rest(encoders)</a> annotation.
:::
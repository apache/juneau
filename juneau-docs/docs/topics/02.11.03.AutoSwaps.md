---
title: "Auto-detected swaps"
slug: AutoSwaps
---

Various methods can be defined on a class directly to affect how it gets serialized.
This can often be simpler than using `ObjectSwaps`.

Objects serialized as `Strings` can be parsed back into their original objects by implementing one of the following methods on the class:

- `public static T fromString(String)` method.
  
  Any of the following method names also work:
  - `valueOf(String)`
  - `parse(String)`
  - `parseString(String)`
  - `forName(String)`
  - `forString(String)`

- `public T(String)` constructor.

Note that these methods cover conversion from several built-in Java types, meaning the parsers can automatically construct these objects from strings:

- `fromString(String)` - <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/UUID.html" target="_blank">UUID</a>
- `valueOf(String)` - <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Boolean.html" target="_blank">Boolean</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Byte.html" target="_blank">Byte</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Double.html" target="_blank">Double</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Float.html" target="_blank">Float</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Integer.html" target="_blank">Integer</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Long.html" target="_blank">Long</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Short.html" target="_blank">Short</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Date.html" target="_blank">Date</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Time.html" target="_blank">Time</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/Timestamp.html" target="_blank">Timestamp</a>
- `parse(String)` - <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/text/DateFormat.html" target="_blank">DateFormat</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/text/MessageFormat.html" target="_blank">MessageFormat</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/text/NumberFormat.html" target="_blank">NumberFormat</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Date.html" target="_blank">Date</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.logging/java/util/logging/Level.html" target="_blank">Level</a>
- `parseString(String)` - <a href="https://docs.oracle.com/javase/8/docs/api/javax/xml/bind/DatatypeConverter.html" target="_blank">DatatypeConverter</a>
- `forName(String)` - <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Class.html" target="_blank">Class</a>

If you want to force a bean-like class to be serialized as a string, you can use the <a href="/site/apidocs/org/apache/juneau/annotation/BeanIgnore.html" target="_blank">@BeanIgnore</a> annotation on the class to force it to be serialized to a string using the `toString()` method.

Serializing to other intermediate objects can be accomplished by defining a swap method directly on the class:

- `public X swap()` method, where `X` is any serializable object.
- `public X swap(BeanSession)` method, where `X` is any serializable object.
- `public static MyPojo unswap(X)` method, where `X` is any serializable object.
- `public static MyPojo unswap(X,BeanSession)` method, where `X` is any serializable object.

Serializing to and from `Maps` can be accomplished by defining any of the following methods:

- `public Map toMap()` method.
  
  Can be any type of map with string keys and object vals.

- `public JsonMap toMap()` method.
- `public Map toMap(BeanSession)` method.
  
  Can be any type of map with string keys and object vals.

- `public JsonMap toMap(BeanSession)` method.
- `public static MyPojo fromMap(Map)` method.
  
  Can be any type of map with string keys and object vals.

- `public static MyPojo fromMap(JsonMap)` method.
- `public static MyPojo fromMap(Map,BeanSession)` method.
  
  Can be any type of map with string keys and object vals.

- `public static MyPojo fromMap(JsonMap,BeanSession)` method.

The `BeanSession` parameter allows you access to various information about the current serialization session.
For example, you could provide customized results based on the media type being produced (<a href="/site/apidocs/org/apache/juneau/BeanSession.html#getMediaType()" target="_blank">BeanSession.getMediaType()</a>).

The following example shows how an HTML5 form template object can be created that gets serialized as a populated HTML5 <a href="/site/apidocs/org/apache/juneau/bean/html5/Form.html" target="_blank">Form</a> bean.

```java
import static org.apache.juneau.bean.html5.HtmlBuilder.*;

/**
 * A simple HTML form template whose serialized form is an HTML5 Form object.
 */
public class FormTemplate {

    private String action;
    private int value1;
    private boolean value2;

    // Some constructor that initializes our fields.
    public FormTemplate(String action, int value1, boolean value2) {
        this.action = action;
        this.value1 = value1;
        this.value2 = value2;
    }

    // Special swap method that converts this template to a serializable bean
    public Form swap(BeanSession session) {
        return form(action,
            input("text").name("v1").value(value1),
            input("text").name("v2").value(value2)
        );
    }
}
```

Swapped objects can be converted back into their original form by the parsers by specifying one of the following methods:

- `public static T unswap(BeanSession, X)` method where `X` is the swap class type.
- `public T(X)` constructor where `X` is the swap class type.

The following shows how our form template class can be modified to allow the parsers to reconstruct our original object:

```java
import static org.apache.juneau.bean.html5.HtmlBuilder.*;

/**
 * A simple HTML form template whose serialized form is an HTML5 Form object.
 * This time with parsing support.
 */
@Bean(dictionary=HtmlBeanDictionary.class)
public class FormTemplate {

    private String action;
    private int value1;
    private boolean value2;

    // Our 'unswap' constructor
    public FormTemplate(Form form) {
        this.action = form.getAttr("action");
        this.value1 = form.getChild(Input.class, 0)
            .getAttr(int.class, "value");
        this.value2 = form.getChild(Input.class, 1)
            .getAttr(boolean.class, "value");
    }

    public FormTemplate(String action, int value1, boolean value2) {
        this.action = action;
        this.value1 = value1;
        this.value2 = value2;
    }

    public Form swap(BeanSession session) {
        return form(action,
            input("text").name("v1").value(value1),
            input("text").name("v2").value(value2)
        );
    }
}
```
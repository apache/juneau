<!DOCTYPE HTML>
<html lang>
<head>
<!-- Generated by javadoc (17) -->
<title>Source code</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="source: package: org.apache.juneau.commons.utils, class: StringUtils">
<meta name="generator" content="javadoc/SourceToHTMLConverter">
<link rel="stylesheet" type="text/css" href="../../../../../../javadoc.css" title="Style">
</head>
<body class="source-page">
<main role="main">
<div class="source-container">
<pre><span class="source-line-no">001</span><span id="line-1">/*</span>
<span class="source-line-no">002</span><span id="line-2"> * Licensed to the Apache Software Foundation (ASF) under one or more</span>
<span class="source-line-no">003</span><span id="line-3"> * contributor license agreements.  See the NOTICE file distributed with</span>
<span class="source-line-no">004</span><span id="line-4"> * this work for additional information regarding copyright ownership.</span>
<span class="source-line-no">005</span><span id="line-5"> * The ASF licenses this file to You under the Apache License, Version 2.0</span>
<span class="source-line-no">006</span><span id="line-6"> * (the "License"); you may not use this file except in compliance with</span>
<span class="source-line-no">007</span><span id="line-7"> * the License.  You may obtain a copy of the License at</span>
<span class="source-line-no">008</span><span id="line-8"> *</span>
<span class="source-line-no">009</span><span id="line-9"> *      http://www.apache.org/licenses/LICENSE-2.0</span>
<span class="source-line-no">010</span><span id="line-10"> *</span>
<span class="source-line-no">011</span><span id="line-11"> * Unless required by applicable law or agreed to in writing, software</span>
<span class="source-line-no">012</span><span id="line-12"> * distributed under the License is distributed on an "AS IS" BASIS,</span>
<span class="source-line-no">013</span><span id="line-13"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<span class="source-line-no">014</span><span id="line-14"> * See the License for the specific language governing permissions and</span>
<span class="source-line-no">015</span><span id="line-15"> * limitations under the License.</span>
<span class="source-line-no">016</span><span id="line-16"> */</span>
<span class="source-line-no">017</span><span id="line-17">package org.apache.juneau.commons.utils;</span>
<span class="source-line-no">018</span><span id="line-18"></span>
<span class="source-line-no">019</span><span id="line-19">import static java.lang.Character.*;</span>
<span class="source-line-no">020</span><span id="line-20">import static java.nio.charset.StandardCharsets.*;</span>
<span class="source-line-no">021</span><span id="line-21">import static java.util.stream.Collectors.*;</span>
<span class="source-line-no">022</span><span id="line-22">import static org.apache.juneau.commons.lang.StateEnum.*;</span>
<span class="source-line-no">023</span><span id="line-23">import static org.apache.juneau.commons.utils.AssertionUtils.*;</span>
<span class="source-line-no">024</span><span id="line-24">import static org.apache.juneau.commons.utils.CollectionUtils.*;</span>
<span class="source-line-no">025</span><span id="line-25">import static org.apache.juneau.commons.utils.IoUtils.*;</span>
<span class="source-line-no">026</span><span id="line-26">import static org.apache.juneau.commons.utils.ThrowableUtils.*;</span>
<span class="source-line-no">027</span><span id="line-27">import static org.apache.juneau.commons.utils.Utils.*;</span>
<span class="source-line-no">028</span><span id="line-28"></span>
<span class="source-line-no">029</span><span id="line-29">import java.io.*;</span>
<span class="source-line-no">030</span><span id="line-30">import java.lang.reflect.*;</span>
<span class="source-line-no">031</span><span id="line-31">import java.math.*;</span>
<span class="source-line-no">032</span><span id="line-32">import java.net.*;</span>
<span class="source-line-no">033</span><span id="line-33">import java.nio.*;</span>
<span class="source-line-no">034</span><span id="line-34">import java.text.*;</span>
<span class="source-line-no">035</span><span id="line-35">import java.time.*;</span>
<span class="source-line-no">036</span><span id="line-36">import java.time.format.*;</span>
<span class="source-line-no">037</span><span id="line-37">import java.util.*;</span>
<span class="source-line-no">038</span><span id="line-38">import java.util.concurrent.*;</span>
<span class="source-line-no">039</span><span id="line-39">import java.util.concurrent.atomic.*;</span>
<span class="source-line-no">040</span><span id="line-40">import java.util.function.*;</span>
<span class="source-line-no">041</span><span id="line-41">import java.util.regex.*;</span>
<span class="source-line-no">042</span><span id="line-42">import java.util.stream.*;</span>
<span class="source-line-no">043</span><span id="line-43">import java.util.zip.*;</span>
<span class="source-line-no">044</span><span id="line-44"></span>
<span class="source-line-no">045</span><span id="line-45">import org.apache.juneau.commons.collections.*;</span>
<span class="source-line-no">046</span><span id="line-46">import org.apache.juneau.commons.lang.*;</span>
<span class="source-line-no">047</span><span id="line-47">import org.apache.juneau.commons.reflect.*;</span>
<span class="source-line-no">048</span><span id="line-48"></span>
<span class="source-line-no">049</span><span id="line-49">/**</span>
<span class="source-line-no">050</span><span id="line-50"> * Reusable string utility methods.</span>
<span class="source-line-no">051</span><span id="line-51"> */</span>
<span class="source-line-no">052</span><span id="line-52">public class StringUtils {</span>
<span class="source-line-no">053</span><span id="line-53"></span>
<span class="source-line-no">054</span><span id="line-54">   /** Characters considered common separators (comma/semicolon/colon/pipe/tab). */</span>
<span class="source-line-no">055</span><span id="line-55">   public static final AsciiSet COMMON_SEPARATORS = AsciiSet.of(",;:|\t");</span>
<span class="source-line-no">056</span><span id="line-56"></span>
<span class="source-line-no">057</span><span id="line-57">   /** Windows-style carriage-return/line-feed sequence. */</span>
<span class="source-line-no">058</span><span id="line-58">   public static final String CRLF = "\r\n";</span>
<span class="source-line-no">059</span><span id="line-59"></span>
<span class="source-line-no">060</span><span id="line-60">   /** Digits 0-9 represented as an {@link AsciiSet}. */</span>
<span class="source-line-no">061</span><span id="line-61">   public static final AsciiSet DECIMAL_CHARS = AsciiSet.of("0123456789");</span>
<span class="source-line-no">062</span><span id="line-62"></span>
<span class="source-line-no">063</span><span id="line-63">   /** Digits 0-9 represented as an {@link AsciiSet}. */</span>
<span class="source-line-no">064</span><span id="line-64">   public static final AsciiSet DIGIT = AsciiSet.of("0123456789");</span>
<span class="source-line-no">065</span><span id="line-65"></span>
<span class="source-line-no">066</span><span id="line-66">   /** Zero-length string constant. */</span>
<span class="source-line-no">067</span><span id="line-67">   public static final String EMPTY = "";</span>
<span class="source-line-no">068</span><span id="line-68"></span>
<span class="source-line-no">069</span><span id="line-69">   /** Characters allowed at the beginning of a numeric literal. */</span>
<span class="source-line-no">070</span><span id="line-70">   public static final AsciiSet FIRST_NUMBER_CHARS = AsciiSet.of("+-.#0123456789");</span>
<span class="source-line-no">071</span><span id="line-71"></span>
<span class="source-line-no">072</span><span id="line-72">   /** Hexadecimal digit characters. */</span>
<span class="source-line-no">073</span><span id="line-73">   public static final AsciiSet HEXADECIMAL_CHARS = AsciiSet.of("0123456789abcdefABCDEF");</span>
<span class="source-line-no">074</span><span id="line-74"></span>
<span class="source-line-no">075</span><span id="line-75">   /** Characters allowed in HTTP headers (including quoted strings and comments). */</span>
<span class="source-line-no">076</span><span id="line-76">   public static final AsciiSet HTTP_HEADER_CHARS = AsciiSet.create().chars("\t -").ranges("!-[","]-}").build();</span>
<span class="source-line-no">077</span><span id="line-77"></span>
<span class="source-line-no">078</span><span id="line-78">   /** Letters a-z and A-Z represented as an {@link AsciiSet}. */</span>
<span class="source-line-no">079</span><span id="line-79">   public static final AsciiSet LETTER = AsciiSet.create().ranges("a-z", "A-Z").build();</span>
<span class="source-line-no">080</span><span id="line-80"></span>
<span class="source-line-no">081</span><span id="line-81">   /** Lowercase letters a-z represented as an {@link AsciiSet}. */</span>
<span class="source-line-no">082</span><span id="line-82">   public static final AsciiSet LETTER_LC = AsciiSet.create().range('a', 'z').build();</span>
<span class="source-line-no">083</span><span id="line-83"></span>
<span class="source-line-no">084</span><span id="line-84">   /** Uppercase letters A-Z represented as an {@link AsciiSet}. */</span>
<span class="source-line-no">085</span><span id="line-85">   public static final AsciiSet LETTER_UC = AsciiSet.create().range('A', 'Z').build();</span>
<span class="source-line-no">086</span><span id="line-86"></span>
<span class="source-line-no">087</span><span id="line-87">   /** Characters escaped when parsing key/value pairs. */</span>
<span class="source-line-no">088</span><span id="line-88">   public static final AsciiSet MAP_ESCAPE_SET = AsciiSet.of(",=\\");</span>
<span class="source-line-no">089</span><span id="line-89"></span>
<span class="source-line-no">090</span><span id="line-90">   /** Unix-style newline character. */</span>
<span class="source-line-no">091</span><span id="line-91">   public static final String NEWLINE = "\n";</span>
<span class="source-line-no">092</span><span id="line-92"></span>
<span class="source-line-no">093</span><span id="line-93">   /** Predicate that filters out {@code null} and empty strings. */</span>
<span class="source-line-no">094</span><span id="line-94">   public static final Predicate&lt;String&gt; NOT_EMPTY = Utils::ne;</span>
<span class="source-line-no">095</span><span id="line-95"></span>
<span class="source-line-no">096</span><span id="line-96">   /** Characters that can appear anywhere in a numeric literal. */</span>
<span class="source-line-no">097</span><span id="line-97">   public static final AsciiSet NUMBER_CHARS = AsciiSet.of("-xX.+-#pP0123456789abcdefABCDEF");</span>
<span class="source-line-no">098</span><span id="line-98"></span>
<span class="source-line-no">099</span><span id="line-99">   /** Octal digit characters. */</span>
<span class="source-line-no">100</span><span id="line-100">   public static final AsciiSet OCTAL_CHARS = AsciiSet.of("01234567");</span>
<span class="source-line-no">101</span><span id="line-101"></span>
<span class="source-line-no">102</span><span id="line-102">   /** Characters escaped when parsing quoted strings. */</span>
<span class="source-line-no">103</span><span id="line-103">   public static final AsciiSet QUOTE_ESCAPE_SET = AsciiSet.of("\"'\\");</span>
<span class="source-line-no">104</span><span id="line-104"></span>
<span class="source-line-no">105</span><span id="line-105">   /** Single-space character constant. */</span>
<span class="source-line-no">106</span><span id="line-106">   public static final String SPACE = " ";</span>
<span class="source-line-no">107</span><span id="line-107"></span>
<span class="source-line-no">108</span><span id="line-108">   /** Horizontal tab character constant. */</span>
<span class="source-line-no">109</span><span id="line-109">   public static final String TAB = "\t";</span>
<span class="source-line-no">110</span><span id="line-110"></span>
<span class="source-line-no">111</span><span id="line-111">   /** Characters considered part of a URI when encoding paths. */</span>
<span class="source-line-no">112</span><span id="line-112">   public static final AsciiSet URI_CHARS = AsciiSet.create().chars("?#+%;/:@&amp;=+$,-_.!~*'()").range('0', '9').range('A', 'Z').range('a', 'z').build();</span>
<span class="source-line-no">113</span><span id="line-113"></span>
<span class="source-line-no">114</span><span id="line-114">   /** Characters that may appear unescaped in path segments when URL-encoding. */</span>
<span class="source-line-no">115</span><span id="line-115">   public static final AsciiSet URL_ENCODE_PATHINFO_VALIDCHARS = AsciiSet.create().ranges("a-z", "A-Z", "0-9").chars("-_.*/()").build();</span>
<span class="source-line-no">116</span><span id="line-116"></span>
<span class="source-line-no">117</span><span id="line-117">   /** Characters that never require URL encoding per RFC 3986. */</span>
<span class="source-line-no">118</span><span id="line-118">   public static final AsciiSet URL_UNENCODED_CHARS = AsciiSet.create().ranges("a-z", "A-Z", "0-9").chars("-_.!~*'()\\").build();</span>
<span class="source-line-no">119</span><span id="line-119"></span>
<span class="source-line-no">120</span><span id="line-120">   /** Extended set of characters that are typically safe to leave unencoded. */</span>
<span class="source-line-no">121</span><span id="line-121">   public static final AsciiSet URL_UNENCODED_LAX_CHARS = URL_UNENCODED_CHARS.copy().chars(":@$,").chars("{}|\\^[]`").build();</span>
<span class="source-line-no">122</span><span id="line-122"></span>
<span class="source-line-no">123</span><span id="line-123">   /** Vowel characters a, e, i, o, u (both uppercase and lowercase) represented as an {@link AsciiSet}. */</span>
<span class="source-line-no">124</span><span id="line-124">   public static final AsciiSet VOWEL = AsciiSet.of("aeiouAEIOU");</span>
<span class="source-line-no">125</span><span id="line-125"></span>
<span class="source-line-no">126</span><span id="line-126">   /**</span>
<span class="source-line-no">127</span><span id="line-127">    * All standard whitespace characters (space, tab, newline, carriage return, form feed, vertical tab).</span>
<span class="source-line-no">128</span><span id="line-128">    */</span>
<span class="source-line-no">129</span><span id="line-129">   public static final AsciiSet WHITESPACE_CHARS = AsciiSet.of(" \t\n\r\f\u000B");</span>
<span class="source-line-no">130</span><span id="line-130"></span>
<span class="source-line-no">131</span><span id="line-131">   // Maps 6-bit nibbles to BASE64 characters.</span>
<span class="source-line-no">132</span><span id="line-132">   private static final char[] BASE64M1 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".toCharArray();</span>
<span class="source-line-no">133</span><span id="line-133"></span>
<span class="source-line-no">134</span><span id="line-134">   // Maps BASE64 characters to 6-bit nibbles.</span>
<span class="source-line-no">135</span><span id="line-135">   private static final byte[] BASE64M2 = new byte[128];</span>
<span class="source-line-no">136</span><span id="line-136"></span>
<span class="source-line-no">137</span><span id="line-137">   static {</span>
<span class="source-line-no">138</span><span id="line-138">      for (var i = 0; i &lt; 64; i++)</span>
<span class="source-line-no">139</span><span id="line-139">         BASE64M2[BASE64M1[i]] = (byte)i;</span>
<span class="source-line-no">140</span><span id="line-140">   }</span>
<span class="source-line-no">141</span><span id="line-141">   private static final Random RANDOM = new Random();</span>
<span class="source-line-no">142</span><span id="line-142"></span>
<span class="source-line-no">143</span><span id="line-143">   /**</span>
<span class="source-line-no">144</span><span id="line-144">    * Floating-point literal validation pattern used by {@link Double#valueOf(String)}.</span>
<span class="source-line-no">145</span><span id="line-145">    *</span>
<span class="source-line-no">146</span><span id="line-146">    * &lt;p&gt;</span>
<span class="source-line-no">147</span><span id="line-147">    * Matches decimal, hexadecimal, and scientific-notation literals, as well as {@code NaN} and {@code Infinity},</span>
<span class="source-line-no">148</span><span id="line-148">    * with optional sign, exponent, and type suffixes. Copied from the JDK source to keep parsing logic consistent.</span>
<span class="source-line-no">149</span><span id="line-149">    */</span>
<span class="source-line-no">150</span><span id="line-150">   public static final Pattern FP_REGEX = Pattern.compile(</span>
<span class="source-line-no">151</span><span id="line-151">      "[+-]?(NaN|Infinity|((((\\p{Digit}+)(\\.)?((\\p{Digit}+)?)([eE][+-]?(\\p{Digit}+))?)|(\\.((\\p{Digit}+))([eE][+-]?(\\p{Digit}+))?)|(((0[xX](\\p{XDigit}+)(\\.)?)|(0[xX](\\p{XDigit}+)?(\\.)(\\p{XDigit}+)))[pP][+-]?(\\p{Digit}+)))[fFdD]?))[\\x00-\\x20]*"  // NOSONAR</span>
<span class="source-line-no">152</span><span id="line-152">   );</span>
<span class="source-line-no">153</span><span id="line-153"></span>
<span class="source-line-no">154</span><span id="line-154">   static final Map&lt;Character,AsciiSet&gt; ESCAPE_SETS = new ConcurrentHashMap&lt;&gt;();</span>
<span class="source-line-no">155</span><span id="line-155"></span>
<span class="source-line-no">156</span><span id="line-156">   private static final List&lt;Readifier&gt; READIFIERS = loadReadifiers();</span>
<span class="source-line-no">157</span><span id="line-157">   private static final Cache&lt;Class&lt;?&gt;,Function&lt;Object,String&gt;&gt; READIFIER_CACHE = Cache.&lt;Class&lt;?&gt;,Function&lt;Object,String&gt;&gt;create().weak().build();</span>
<span class="source-line-no">158</span><span id="line-158"></span>
<span class="source-line-no">159</span><span id="line-159">   private static final char[] HEX = "0123456789ABCDEF".toCharArray();</span>
<span class="source-line-no">160</span><span id="line-160"></span>
<span class="source-line-no">161</span><span id="line-161">   /**</span>
<span class="source-line-no">162</span><span id="line-162">    * Abbreviates a string using ellipses if it exceeds the specified length.</span>
<span class="source-line-no">163</span><span id="line-163">    *</span>
<span class="source-line-no">164</span><span id="line-164">    * &lt;p&gt;</span>
<span class="source-line-no">165</span><span id="line-165">    * If the string is longer than the specified length, it is truncated and &lt;js&gt;"..."&lt;/js&gt; is appended.</span>
<span class="source-line-no">166</span><span id="line-166">    * The total length of the result will be exactly &lt;c&gt;length&lt;/c&gt; characters (including the ellipses).</span>
<span class="source-line-no">167</span><span id="line-167">    *</span>
<span class="source-line-no">168</span><span id="line-168">    * &lt;p&gt;</span>
<span class="source-line-no">169</span><span id="line-169">    * If the string is &lt;jk&gt;null&lt;/jk&gt;, shorter than or equal to &lt;c&gt;length&lt;/c&gt;, or has length 3 or less,</span>
<span class="source-line-no">170</span><span id="line-170">    * the original string is returned unchanged.</span>
<span class="source-line-no">171</span><span id="line-171">    *</span>
<span class="source-line-no">172</span><span id="line-172">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">173</span><span id="line-173">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">174</span><span id="line-174">    *    abbreviate(&lt;js&gt;"Hello World"&lt;/js&gt;, 8);        &lt;jc&gt;// "Hello..."&lt;/jc&gt;</span>
<span class="source-line-no">175</span><span id="line-175">    *    abbreviate(&lt;js&gt;"Hello World"&lt;/js&gt;, 20);       &lt;jc&gt;// "Hello World" (no change)&lt;/jc&gt;</span>
<span class="source-line-no">176</span><span id="line-176">    *    abbreviate(&lt;js&gt;"Hi"&lt;/js&gt;, 5);                 &lt;jc&gt;// "Hi" (too short to abbreviate)&lt;/jc&gt;</span>
<span class="source-line-no">177</span><span id="line-177">    *    abbreviate(&lt;jk&gt;null&lt;/jk&gt;, 10);                &lt;jc&gt;// null&lt;/jc&gt;</span>
<span class="source-line-no">178</span><span id="line-178">    * &lt;/p&gt;</span>
<span class="source-line-no">179</span><span id="line-179">    *</span>
<span class="source-line-no">180</span><span id="line-180">    * @param in The input string. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">181</span><span id="line-181">    * @param length The maximum length of the resulting string (must be at least 4 for abbreviation to occur).</span>
<span class="source-line-no">182</span><span id="line-182">    * @return The abbreviated string with ellipses, or the original string if no abbreviation is needed.</span>
<span class="source-line-no">183</span><span id="line-183">    */</span>
<span class="source-line-no">184</span><span id="line-184">   public static String abbreviate(String in, int length) {</span>
<span class="source-line-no">185</span><span id="line-185">      if (in == null || in.length() &lt;= length || in.length() &lt;= 3)</span>
<span class="source-line-no">186</span><span id="line-186">         return in;</span>
<span class="source-line-no">187</span><span id="line-187">      return in.substring(0, length - 3) + "...";</span>
<span class="source-line-no">188</span><span id="line-188">   }</span>
<span class="source-line-no">189</span><span id="line-189"></span>
<span class="source-line-no">190</span><span id="line-190">   /**</span>
<span class="source-line-no">191</span><span id="line-191">    * Appends a string to a StringBuilder, creating a new one if null.</span>
<span class="source-line-no">192</span><span id="line-192">    *</span>
<span class="source-line-no">193</span><span id="line-193">    * @param sb The StringBuilder to append to, or &lt;jk&gt;null&lt;/jk&gt; to create a new one.</span>
<span class="source-line-no">194</span><span id="line-194">    * @param in The string to append.</span>
<span class="source-line-no">195</span><span id="line-195">    * @return The StringBuilder with the string appended.</span>
<span class="source-line-no">196</span><span id="line-196">    */</span>
<span class="source-line-no">197</span><span id="line-197">   public static StringBuilder append(StringBuilder sb, String in) {</span>
<span class="source-line-no">198</span><span id="line-198">      if (sb == null)</span>
<span class="source-line-no">199</span><span id="line-199">         return new StringBuilder(in);</span>
<span class="source-line-no">200</span><span id="line-200">      sb.append(in);</span>
<span class="source-line-no">201</span><span id="line-201">      return sb;</span>
<span class="source-line-no">202</span><span id="line-202">   }</span>
<span class="source-line-no">203</span><span id="line-203"></span>
<span class="source-line-no">204</span><span id="line-204">   /**</span>
<span class="source-line-no">205</span><span id="line-205">    * Appends a string to a StringBuilder if the string is not blank.</span>
<span class="source-line-no">206</span><span id="line-206">    *</span>
<span class="source-line-no">207</span><span id="line-207">    * &lt;p&gt;</span>
<span class="source-line-no">208</span><span id="line-208">    * Returns the same StringBuilder instance for method chaining.</span>
<span class="source-line-no">209</span><span id="line-209">    * If the string is &lt;jk&gt;null&lt;/jk&gt;, empty, or contains only whitespace, nothing is appended.</span>
<span class="source-line-no">210</span><span id="line-210">    * If &lt;c&gt;sb&lt;/c&gt; is &lt;jk&gt;null&lt;/jk&gt; and an append is going to occur, a new StringBuilder is automatically created.</span>
<span class="source-line-no">211</span><span id="line-211">    *</span>
<span class="source-line-no">212</span><span id="line-212">    * &lt;h5 class='section'&gt;Examples:&lt;/h5&gt;</span>
<span class="source-line-no">213</span><span id="line-213">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">214</span><span id="line-214">    *    StringBuilder &lt;jv&gt;sb&lt;/jv&gt; = &lt;jk&gt;new&lt;/jk&gt; StringBuilder();</span>
<span class="source-line-no">215</span><span id="line-215">    *    appendIfNotBlank(&lt;jv&gt;sb&lt;/jv&gt;, &lt;js&gt;"hello"&lt;/js&gt;);  &lt;jc&gt;// Appends "hello"&lt;/jc&gt;</span>
<span class="source-line-no">216</span><span id="line-216">    *    appendIfNotBlank(&lt;jv&gt;sb&lt;/jv&gt;, &lt;js&gt;"   "&lt;/js&gt;);    &lt;jc&gt;// Does nothing&lt;/jc&gt;</span>
<span class="source-line-no">217</span><span id="line-217">    *    appendIfNotBlank(&lt;jv&gt;sb&lt;/jv&gt;, &lt;jk&gt;null&lt;/jk&gt;);     &lt;jc&gt;// Does nothing&lt;/jc&gt;</span>
<span class="source-line-no">218</span><span id="line-218">    *    appendIfNotBlank(&lt;jv&gt;sb&lt;/jv&gt;, &lt;js&gt;"world"&lt;/js&gt;);  &lt;jc&gt;// Appends "world"&lt;/jc&gt;</span>
<span class="source-line-no">219</span><span id="line-219">    *    &lt;jc&gt;// Result: "helloworld"&lt;/jc&gt;</span>
<span class="source-line-no">220</span><span id="line-220">    *</span>
<span class="source-line-no">221</span><span id="line-221">    *    &lt;jc&gt;// Auto-create StringBuilder if null and append occurs&lt;/jc&gt;</span>
<span class="source-line-no">222</span><span id="line-222">    *    StringBuilder &lt;jv&gt;sb2&lt;/jv&gt; = appendIfNotBlank(&lt;jk&gt;null&lt;/jk&gt;, &lt;js&gt;"test"&lt;/js&gt;);  &lt;jc&gt;// Creates new StringBuilder with "test"&lt;/jc&gt;</span>
<span class="source-line-no">223</span><span id="line-223">    *    StringBuilder &lt;jv&gt;sb3&lt;/jv&gt; = appendIfNotBlank(&lt;jk&gt;null&lt;/jk&gt;, &lt;js&gt;"   "&lt;/js&gt;);   &lt;jc&gt;// Returns null (no append occurred)&lt;/jc&gt;</span>
<span class="source-line-no">224</span><span id="line-224">    * &lt;/p&gt;</span>
<span class="source-line-no">225</span><span id="line-225">    *</span>
<span class="source-line-no">226</span><span id="line-226">    * @param sb The StringBuilder to append to. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">227</span><span id="line-227">    * @param str The string to append if not blank. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">228</span><span id="line-228">    * @return The same StringBuilder instance for method chaining, or a new StringBuilder if &lt;c&gt;sb&lt;/c&gt; was &lt;jk&gt;null&lt;/jk&gt; and an append occurred, or &lt;jk&gt;null&lt;/jk&gt; if &lt;c&gt;sb&lt;/c&gt; was &lt;jk&gt;null&lt;/jk&gt; and no append occurred.</span>
<span class="source-line-no">229</span><span id="line-229">    */</span>
<span class="source-line-no">230</span><span id="line-230">   public static StringBuilder appendIfNotBlank(StringBuilder sb, String str) {</span>
<span class="source-line-no">231</span><span id="line-231">      if (isNotBlank(str)) {</span>
<span class="source-line-no">232</span><span id="line-232">         if (sb == null)</span>
<span class="source-line-no">233</span><span id="line-233">            sb = new StringBuilder();</span>
<span class="source-line-no">234</span><span id="line-234">         sb.append(str);</span>
<span class="source-line-no">235</span><span id="line-235">      }</span>
<span class="source-line-no">236</span><span id="line-236">      return sb;</span>
<span class="source-line-no">237</span><span id="line-237">   }</span>
<span class="source-line-no">238</span><span id="line-238"></span>
<span class="source-line-no">239</span><span id="line-239">   /**</span>
<span class="source-line-no">240</span><span id="line-240">    * Appends a string to a StringBuilder if the string is not empty.</span>
<span class="source-line-no">241</span><span id="line-241">    *</span>
<span class="source-line-no">242</span><span id="line-242">    * &lt;p&gt;</span>
<span class="source-line-no">243</span><span id="line-243">    * Returns the same StringBuilder instance for method chaining.</span>
<span class="source-line-no">244</span><span id="line-244">    * If the string is &lt;jk&gt;null&lt;/jk&gt; or empty, nothing is appended.</span>
<span class="source-line-no">245</span><span id="line-245">    * If &lt;c&gt;sb&lt;/c&gt; is &lt;jk&gt;null&lt;/jk&gt; and an append is going to occur, a new StringBuilder is automatically created.</span>
<span class="source-line-no">246</span><span id="line-246">    *</span>
<span class="source-line-no">247</span><span id="line-247">    * &lt;h5 class='section'&gt;Examples:&lt;/h5&gt;</span>
<span class="source-line-no">248</span><span id="line-248">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">249</span><span id="line-249">    *    StringBuilder &lt;jv&gt;sb&lt;/jv&gt; = &lt;jk&gt;new&lt;/jk&gt; StringBuilder();</span>
<span class="source-line-no">250</span><span id="line-250">    *    appendIfNotEmpty(&lt;jv&gt;sb&lt;/jv&gt;, &lt;js&gt;"hello"&lt;/js&gt;);  &lt;jc&gt;// Appends "hello"&lt;/jc&gt;</span>
<span class="source-line-no">251</span><span id="line-251">    *    appendIfNotEmpty(&lt;jv&gt;sb&lt;/jv&gt;, &lt;js&gt;""&lt;/js&gt;);       &lt;jc&gt;// Does nothing&lt;/jc&gt;</span>
<span class="source-line-no">252</span><span id="line-252">    *    appendIfNotEmpty(&lt;jv&gt;sb&lt;/jv&gt;, &lt;jk&gt;null&lt;/jk&gt;);     &lt;jc&gt;// Does nothing&lt;/jc&gt;</span>
<span class="source-line-no">253</span><span id="line-253">    *    appendIfNotEmpty(&lt;jv&gt;sb&lt;/jv&gt;, &lt;js&gt;"world"&lt;/js&gt;);  &lt;jc&gt;// Appends "world"&lt;/jc&gt;</span>
<span class="source-line-no">254</span><span id="line-254">    *    &lt;jc&gt;// Result: "helloworld"&lt;/jc&gt;</span>
<span class="source-line-no">255</span><span id="line-255">    *</span>
<span class="source-line-no">256</span><span id="line-256">    *    &lt;jc&gt;// Auto-create StringBuilder if null and append occurs&lt;/jc&gt;</span>
<span class="source-line-no">257</span><span id="line-257">    *    StringBuilder &lt;jv&gt;sb2&lt;/jv&gt; = appendIfNotEmpty(&lt;jk&gt;null&lt;/jk&gt;, &lt;js&gt;"test"&lt;/js&gt;);  &lt;jc&gt;// Creates new StringBuilder with "test"&lt;/jc&gt;</span>
<span class="source-line-no">258</span><span id="line-258">    *    StringBuilder &lt;jv&gt;sb3&lt;/jv&gt; = appendIfNotEmpty(&lt;jk&gt;null&lt;/jk&gt;, &lt;jk&gt;null&lt;/jk&gt;);   &lt;jc&gt;// Returns null (no append occurred)&lt;/jc&gt;</span>
<span class="source-line-no">259</span><span id="line-259">    * &lt;/p&gt;</span>
<span class="source-line-no">260</span><span id="line-260">    *</span>
<span class="source-line-no">261</span><span id="line-261">    * @param sb The StringBuilder to append to. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">262</span><span id="line-262">    * @param str The string to append if not empty. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">263</span><span id="line-263">    * @return The same StringBuilder instance for method chaining, or a new StringBuilder if &lt;c&gt;sb&lt;/c&gt; was &lt;jk&gt;null&lt;/jk&gt; and an append occurred, or &lt;jk&gt;null&lt;/jk&gt; if &lt;c&gt;sb&lt;/c&gt; was &lt;jk&gt;null&lt;/jk&gt; and no append occurred.</span>
<span class="source-line-no">264</span><span id="line-264">    */</span>
<span class="source-line-no">265</span><span id="line-265">   public static StringBuilder appendIfNotEmpty(StringBuilder sb, String str) {</span>
<span class="source-line-no">266</span><span id="line-266">      if (ne(str)) {</span>
<span class="source-line-no">267</span><span id="line-267">         if (sb == null)</span>
<span class="source-line-no">268</span><span id="line-268">            sb = new StringBuilder();</span>
<span class="source-line-no">269</span><span id="line-269">         sb.append(str);</span>
<span class="source-line-no">270</span><span id="line-270">      }</span>
<span class="source-line-no">271</span><span id="line-271">      return sb;</span>
<span class="source-line-no">272</span><span id="line-272">   }</span>
<span class="source-line-no">273</span><span id="line-273"></span>
<span class="source-line-no">274</span><span id="line-274">   /**</span>
<span class="source-line-no">275</span><span id="line-275">    * Appends a string to a StringBuilder with a separator, only adding the separator if the StringBuilder is not empty.</span>
<span class="source-line-no">276</span><span id="line-276">    *</span>
<span class="source-line-no">277</span><span id="line-277">    * &lt;p&gt;</span>
<span class="source-line-no">278</span><span id="line-278">    * Returns the same StringBuilder instance for method chaining.</span>
<span class="source-line-no">279</span><span id="line-279">    * If the StringBuilder is empty, only the string is appended (no separator).</span>
<span class="source-line-no">280</span><span id="line-280">    * If the StringBuilder is not empty, the separator is appended first, then the string.</span>
<span class="source-line-no">281</span><span id="line-281">    * If &lt;c&gt;sb&lt;/c&gt; is &lt;jk&gt;null&lt;/jk&gt; and an append is going to occur, a new StringBuilder is automatically created.</span>
<span class="source-line-no">282</span><span id="line-282">    *</span>
<span class="source-line-no">283</span><span id="line-283">    * &lt;h5 class='section'&gt;Examples:&lt;/h5&gt;</span>
<span class="source-line-no">284</span><span id="line-284">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">285</span><span id="line-285">    *    StringBuilder &lt;jv&gt;sb&lt;/jv&gt; = &lt;jk&gt;new&lt;/jk&gt; StringBuilder();</span>
<span class="source-line-no">286</span><span id="line-286">    *    appendWithSeparator(&lt;jv&gt;sb&lt;/jv&gt;, &lt;js&gt;"first"&lt;/js&gt;, &lt;js&gt;", "&lt;/js&gt;);   &lt;jc&gt;// Appends "first"&lt;/jc&gt;</span>
<span class="source-line-no">287</span><span id="line-287">    *    appendWithSeparator(&lt;jv&gt;sb&lt;/jv&gt;, &lt;js&gt;"second"&lt;/js&gt;, &lt;js&gt;", "&lt;/js&gt;);  &lt;jc&gt;// Appends ", second"&lt;/jc&gt;</span>
<span class="source-line-no">288</span><span id="line-288">    *    appendWithSeparator(&lt;jv&gt;sb&lt;/jv&gt;, &lt;js&gt;"third"&lt;/js&gt;, &lt;js&gt;", "&lt;/js&gt;);   &lt;jc&gt;// Appends ", third"&lt;/jc&gt;</span>
<span class="source-line-no">289</span><span id="line-289">    *    &lt;jc&gt;// Result: "first, second, third"&lt;/jc&gt;</span>
<span class="source-line-no">290</span><span id="line-290">    *</span>
<span class="source-line-no">291</span><span id="line-291">    *    &lt;jc&gt;// Auto-create StringBuilder if null and append occurs&lt;/jc&gt;</span>
<span class="source-line-no">292</span><span id="line-292">    *    StringBuilder &lt;jv&gt;sb2&lt;/jv&gt; = appendWithSeparator(&lt;jk&gt;null&lt;/jk&gt;, &lt;js&gt;"test"&lt;/js&gt;, &lt;js&gt;", "&lt;/js&gt;);  &lt;jc&gt;// Creates new StringBuilder with "test"&lt;/jc&gt;</span>
<span class="source-line-no">293</span><span id="line-293">    *    StringBuilder &lt;jv&gt;sb3&lt;/jv&gt; = appendWithSeparator(&lt;jk&gt;null&lt;/jk&gt;, &lt;jk&gt;null&lt;/jk&gt;, &lt;js&gt;", "&lt;/js&gt;);   &lt;jc&gt;// Returns null (no append occurred)&lt;/jc&gt;</span>
<span class="source-line-no">294</span><span id="line-294">    * &lt;/p&gt;</span>
<span class="source-line-no">295</span><span id="line-295">    *</span>
<span class="source-line-no">296</span><span id="line-296">    * @param sb The StringBuilder to append to. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">297</span><span id="line-297">    * @param str The string to append. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">298</span><span id="line-298">    * @param separator The separator to add before the string if the StringBuilder is not empty. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">299</span><span id="line-299">    * @return The same StringBuilder instance for method chaining, or a new StringBuilder if &lt;c&gt;sb&lt;/c&gt; was &lt;jk&gt;null&lt;/jk&gt; and an append occurred, or &lt;jk&gt;null&lt;/jk&gt; if &lt;c&gt;sb&lt;/c&gt; was &lt;jk&gt;null&lt;/jk&gt; and no append occurred.</span>
<span class="source-line-no">300</span><span id="line-300">    */</span>
<span class="source-line-no">301</span><span id="line-301">   public static StringBuilder appendWithSeparator(StringBuilder sb, String str, String separator) {</span>
<span class="source-line-no">302</span><span id="line-302">      if (str != null) {</span>
<span class="source-line-no">303</span><span id="line-303">         if (sb == null)</span>
<span class="source-line-no">304</span><span id="line-304">            sb = new StringBuilder();</span>
<span class="source-line-no">305</span><span id="line-305">         else if (sb.length() &gt; 0 &amp;&amp; separator != null)</span>
<span class="source-line-no">306</span><span id="line-306">            sb.append(separator);</span>
<span class="source-line-no">307</span><span id="line-307">         sb.append(str);</span>
<span class="source-line-no">308</span><span id="line-308">      }</span>
<span class="source-line-no">309</span><span id="line-309">      return sb;</span>
<span class="source-line-no">310</span><span id="line-310">   }</span>
<span class="source-line-no">311</span><span id="line-311"></span>
<span class="source-line-no">312</span><span id="line-312">   /**</span>
<span class="source-line-no">313</span><span id="line-313">    * Adds the appropriate indefinite article ('a' or 'an') before a word.</span>
<span class="source-line-no">314</span><span id="line-314">    *</span>
<span class="source-line-no">315</span><span id="line-315">    * &lt;p&gt;Uses a simple vowel-based rule: 'an' if the word starts with a vowel, 'a' otherwise.</span>
<span class="source-line-no">316</span><span id="line-316">    *</span>
<span class="source-line-no">317</span><span id="line-317">    * @param subject The word to articlize.</span>
<span class="source-line-no">318</span><span id="line-318">    * @return The word with 'a' or 'an' prepended.</span>
<span class="source-line-no">319</span><span id="line-319">    */</span>
<span class="source-line-no">320</span><span id="line-320">   public static String articlized(String subject) {</span>
<span class="source-line-no">321</span><span id="line-321">      return (VOWEL.contains(subject.charAt(0)) ? "an " : "a ") + subject;</span>
<span class="source-line-no">322</span><span id="line-322">   }</span>
<span class="source-line-no">323</span><span id="line-323"></span>
<span class="source-line-no">324</span><span id="line-324">   /**</span>
<span class="source-line-no">325</span><span id="line-325">    * BASE64-decodes the specified string.</span>
<span class="source-line-no">326</span><span id="line-326">    *</span>
<span class="source-line-no">327</span><span id="line-327">    * @param in The BASE-64 encoded string.</span>
<span class="source-line-no">328</span><span id="line-328">    * @return The decoded byte array, or null if the input was &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">329</span><span id="line-329">    */</span>
<span class="source-line-no">330</span><span id="line-330">   public static byte[] base64Decode(String in) {</span>
<span class="source-line-no">331</span><span id="line-331">      if (in == null)</span>
<span class="source-line-no">332</span><span id="line-332">         return null;  // NOSONAR - Intentional.</span>
<span class="source-line-no">333</span><span id="line-333"></span>
<span class="source-line-no">334</span><span id="line-334">      var bIn = in.getBytes(UTF8);</span>
<span class="source-line-no">335</span><span id="line-335"></span>
<span class="source-line-no">336</span><span id="line-336">      assertArg(bIn.length % 4 == 0, "Invalid BASE64 string length.  Must be multiple of 4.");</span>
<span class="source-line-no">337</span><span id="line-337"></span>
<span class="source-line-no">338</span><span id="line-338">      // Strip out any trailing '=' filler characters.</span>
<span class="source-line-no">339</span><span id="line-339">      var inLength = bIn.length;</span>
<span class="source-line-no">340</span><span id="line-340">      while (inLength &gt; 0 &amp;&amp; bIn[inLength - 1] == '=')</span>
<span class="source-line-no">341</span><span id="line-341">         inLength--;</span>
<span class="source-line-no">342</span><span id="line-342"></span>
<span class="source-line-no">343</span><span id="line-343">      var outLength = (inLength * 3) / 4;</span>
<span class="source-line-no">344</span><span id="line-344">      var out = new byte[outLength];</span>
<span class="source-line-no">345</span><span id="line-345">      var iIn = 0;</span>
<span class="source-line-no">346</span><span id="line-346">      var iOut = 0;</span>
<span class="source-line-no">347</span><span id="line-347">      while (iIn &lt; inLength) {</span>
<span class="source-line-no">348</span><span id="line-348">         var i0 = bIn[iIn++];</span>
<span class="source-line-no">349</span><span id="line-349">         var i1 = bIn[iIn++];</span>
<span class="source-line-no">350</span><span id="line-350">         var i2 = iIn &lt; inLength ? bIn[iIn++] : 'A';</span>
<span class="source-line-no">351</span><span id="line-351">         var i3 = iIn &lt; inLength ? bIn[iIn++] : 'A';</span>
<span class="source-line-no">352</span><span id="line-352">         var b0 = BASE64M2[i0];</span>
<span class="source-line-no">353</span><span id="line-353">         var b1 = BASE64M2[i1];</span>
<span class="source-line-no">354</span><span id="line-354">         var b2 = BASE64M2[i2];</span>
<span class="source-line-no">355</span><span id="line-355">         var b3 = BASE64M2[i3];</span>
<span class="source-line-no">356</span><span id="line-356">         var o0 = (b0 &lt;&lt; 2) | (b1 &gt;&gt;&gt; 4);</span>
<span class="source-line-no">357</span><span id="line-357">         var o1 = ((b1 &amp; 0xf) &lt;&lt; 4) | (b2 &gt;&gt;&gt; 2);</span>
<span class="source-line-no">358</span><span id="line-358">         var o2 = ((b2 &amp; 3) &lt;&lt; 6) | b3;</span>
<span class="source-line-no">359</span><span id="line-359">         out[iOut++] = (byte)o0;</span>
<span class="source-line-no">360</span><span id="line-360">         if (iOut &lt; outLength)</span>
<span class="source-line-no">361</span><span id="line-361">            out[iOut++] = (byte)o1;</span>
<span class="source-line-no">362</span><span id="line-362">         if (iOut &lt; outLength)</span>
<span class="source-line-no">363</span><span id="line-363">            out[iOut++] = (byte)o2;</span>
<span class="source-line-no">364</span><span id="line-364">      }</span>
<span class="source-line-no">365</span><span id="line-365">      return out;</span>
<span class="source-line-no">366</span><span id="line-366">   }</span>
<span class="source-line-no">367</span><span id="line-367"></span>
<span class="source-line-no">368</span><span id="line-368">   /**</span>
<span class="source-line-no">369</span><span id="line-369">    * Shortcut for calling &lt;c&gt;base64Decode(String)&lt;/c&gt; and converting the result to a UTF-8 encoded string.</span>
<span class="source-line-no">370</span><span id="line-370">    *</span>
<span class="source-line-no">371</span><span id="line-371">    * @param in The BASE-64 encoded string to decode.</span>
<span class="source-line-no">372</span><span id="line-372">    * @return The decoded string.</span>
<span class="source-line-no">373</span><span id="line-373">    */</span>
<span class="source-line-no">374</span><span id="line-374">   public static String base64DecodeToString(String in) {</span>
<span class="source-line-no">375</span><span id="line-375">      var b = base64Decode(in);</span>
<span class="source-line-no">376</span><span id="line-376">      if (b == null)</span>
<span class="source-line-no">377</span><span id="line-377">         return null;</span>
<span class="source-line-no">378</span><span id="line-378">      return new String(b, UTF8);</span>
<span class="source-line-no">379</span><span id="line-379">   }</span>
<span class="source-line-no">380</span><span id="line-380"></span>
<span class="source-line-no">381</span><span id="line-381">   /**</span>
<span class="source-line-no">382</span><span id="line-382">    * BASE64-encodes the specified byte array.</span>
<span class="source-line-no">383</span><span id="line-383">    *</span>
<span class="source-line-no">384</span><span id="line-384">    * @param in The input byte array to convert.</span>
<span class="source-line-no">385</span><span id="line-385">    * @return The byte array converted to a BASE-64 encoded string.</span>
<span class="source-line-no">386</span><span id="line-386">    */</span>
<span class="source-line-no">387</span><span id="line-387">   public static String base64Encode(byte[] in) {</span>
<span class="source-line-no">388</span><span id="line-388">      if (in == null)</span>
<span class="source-line-no">389</span><span id="line-389">         return null;</span>
<span class="source-line-no">390</span><span id="line-390">      var outLength = (in.length * 4 + 2) / 3;   // Output length without padding</span>
<span class="source-line-no">391</span><span id="line-391">      var out = new char[((in.length + 2) / 3) * 4];  // Length includes padding.</span>
<span class="source-line-no">392</span><span id="line-392">      var iIn = 0;</span>
<span class="source-line-no">393</span><span id="line-393">      var iOut = 0;</span>
<span class="source-line-no">394</span><span id="line-394">      while (iIn &lt; in.length) {</span>
<span class="source-line-no">395</span><span id="line-395">         var i0 = in[iIn++] &amp; 0xff;</span>
<span class="source-line-no">396</span><span id="line-396">         var i1 = iIn &lt; in.length ? in[iIn++] &amp; 0xff : 0;</span>
<span class="source-line-no">397</span><span id="line-397">         var i2 = iIn &lt; in.length ? in[iIn++] &amp; 0xff : 0;</span>
<span class="source-line-no">398</span><span id="line-398">         var o0 = i0 &gt;&gt;&gt; 2;</span>
<span class="source-line-no">399</span><span id="line-399">         var o1 = ((i0 &amp; 3) &lt;&lt; 4) | (i1 &gt;&gt;&gt; 4);</span>
<span class="source-line-no">400</span><span id="line-400">         var o2 = ((i1 &amp; 0xf) &lt;&lt; 2) | (i2 &gt;&gt;&gt; 6);</span>
<span class="source-line-no">401</span><span id="line-401">         var o3 = i2 &amp; 0x3F;</span>
<span class="source-line-no">402</span><span id="line-402">         out[iOut++] = BASE64M1[o0];</span>
<span class="source-line-no">403</span><span id="line-403">         out[iOut++] = BASE64M1[o1];</span>
<span class="source-line-no">404</span><span id="line-404">         out[iOut] = iOut &lt; outLength ? BASE64M1[o2] : '=';</span>
<span class="source-line-no">405</span><span id="line-405">         iOut++;</span>
<span class="source-line-no">406</span><span id="line-406">         out[iOut] = iOut &lt; outLength ? BASE64M1[o3] : '=';</span>
<span class="source-line-no">407</span><span id="line-407">         iOut++;</span>
<span class="source-line-no">408</span><span id="line-408">      }</span>
<span class="source-line-no">409</span><span id="line-409">      return new String(out);</span>
<span class="source-line-no">410</span><span id="line-410">   }</span>
<span class="source-line-no">411</span><span id="line-411"></span>
<span class="source-line-no">412</span><span id="line-412">   /**</span>
<span class="source-line-no">413</span><span id="line-413">    * Shortcut for calling &lt;code&gt;base64Encode(in.getBytes(&lt;js&gt;"UTF-8"&lt;/js&gt;))&lt;/code&gt;</span>
<span class="source-line-no">414</span><span id="line-414">    *</span>
<span class="source-line-no">415</span><span id="line-415">    * @param in The input string to convert.</span>
<span class="source-line-no">416</span><span id="line-416">    * @return The string converted to BASE-64 encoding.</span>
<span class="source-line-no">417</span><span id="line-417">    */</span>
<span class="source-line-no">418</span><span id="line-418">   public static String base64EncodeToString(String in) {</span>
<span class="source-line-no">419</span><span id="line-419">      if (in == null)</span>
<span class="source-line-no">420</span><span id="line-420">         return null;</span>
<span class="source-line-no">421</span><span id="line-421">      return base64Encode(in.getBytes(UTF8));</span>
<span class="source-line-no">422</span><span id="line-422">   }</span>
<span class="source-line-no">423</span><span id="line-423"></span>
<span class="source-line-no">424</span><span id="line-424">   /**</span>
<span class="source-line-no">425</span><span id="line-425">    * Builds a string using a functional approach with a StringBuilder.</span>
<span class="source-line-no">426</span><span id="line-426">    *</span>
<span class="source-line-no">427</span><span id="line-427">    * &lt;p&gt;</span>
<span class="source-line-no">428</span><span id="line-428">    * Creates a new StringBuilder, applies the consumer to it, and returns the resulting string.</span>
<span class="source-line-no">429</span><span id="line-429">    * This provides a functional way to build strings without manually managing the StringBuilder.</span>
<span class="source-line-no">430</span><span id="line-430">    *</span>
<span class="source-line-no">431</span><span id="line-431">    * &lt;h5 class='section'&gt;Examples:&lt;/h5&gt;</span>
<span class="source-line-no">432</span><span id="line-432">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">433</span><span id="line-433">    *    String &lt;jv&gt;result&lt;/jv&gt; = buildString(&lt;jv&gt;sb&lt;/jv&gt; -&amp;gt; {</span>
<span class="source-line-no">434</span><span id="line-434">    *       &lt;jv&gt;sb&lt;/jv&gt;.append(&lt;js&gt;"Hello"&lt;/js&gt;);</span>
<span class="source-line-no">435</span><span id="line-435">    *       &lt;jv&gt;sb&lt;/jv&gt;.append(&lt;js&gt;" "&lt;/js&gt;);</span>
<span class="source-line-no">436</span><span id="line-436">    *       &lt;jv&gt;sb&lt;/jv&gt;.append(&lt;js&gt;"World"&lt;/js&gt;);</span>
<span class="source-line-no">437</span><span id="line-437">    *    });</span>
<span class="source-line-no">438</span><span id="line-438">    *    &lt;jc&gt;// Returns: "Hello World"&lt;/jc&gt;</span>
<span class="source-line-no">439</span><span id="line-439">    *</span>
<span class="source-line-no">440</span><span id="line-440">    *    String &lt;jv&gt;joined&lt;/jv&gt; = buildString(&lt;jv&gt;sb&lt;/jv&gt; -&amp;gt; {</span>
<span class="source-line-no">441</span><span id="line-441">    *       appendWithSeparator(&lt;jv&gt;sb&lt;/jv&gt;, &lt;js&gt;"a"&lt;/js&gt;, &lt;js&gt;", "&lt;/js&gt;);</span>
<span class="source-line-no">442</span><span id="line-442">    *       appendWithSeparator(&lt;jv&gt;sb&lt;/jv&gt;, &lt;js&gt;"b"&lt;/js&gt;, &lt;js&gt;", "&lt;/js&gt;);</span>
<span class="source-line-no">443</span><span id="line-443">    *       appendWithSeparator(&lt;jv&gt;sb&lt;/jv&gt;, &lt;js&gt;"c"&lt;/js&gt;, &lt;js&gt;", "&lt;/js&gt;);</span>
<span class="source-line-no">444</span><span id="line-444">    *    });</span>
<span class="source-line-no">445</span><span id="line-445">    *    &lt;jc&gt;// Returns: "a, b, c"&lt;/jc&gt;</span>
<span class="source-line-no">446</span><span id="line-446">    * &lt;/p&gt;</span>
<span class="source-line-no">447</span><span id="line-447">    *</span>
<span class="source-line-no">448</span><span id="line-448">    * @param builder The consumer that builds the string using the provided StringBuilder.</span>
<span class="source-line-no">449</span><span id="line-449">    * @return The built string.</span>
<span class="source-line-no">450</span><span id="line-450">    * @throws IllegalArgumentException If &lt;c&gt;builder&lt;/c&gt; is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">451</span><span id="line-451">    */</span>
<span class="source-line-no">452</span><span id="line-452">   public static String buildString(Consumer&lt;StringBuilder&gt; builder) {</span>
<span class="source-line-no">453</span><span id="line-453">      assertArgNotNull("builder", builder);</span>
<span class="source-line-no">454</span><span id="line-454">      var sb = new StringBuilder();</span>
<span class="source-line-no">455</span><span id="line-455">      builder.accept(sb);</span>
<span class="source-line-no">456</span><span id="line-456">      return sb.toString();</span>
<span class="source-line-no">457</span><span id="line-457">   }</span>
<span class="source-line-no">458</span><span id="line-458"></span>
<span class="source-line-no">459</span><span id="line-459">   /**</span>
<span class="source-line-no">460</span><span id="line-460">    * Converts a string to camelCase format.</span>
<span class="source-line-no">461</span><span id="line-461">    *</span>
<span class="source-line-no">462</span><span id="line-462">    * &lt;p&gt;</span>
<span class="source-line-no">463</span><span id="line-463">    * Handles various input formats:</span>
<span class="source-line-no">464</span><span id="line-464">    * &lt;ul&gt;</span>
<span class="source-line-no">465</span><span id="line-465">    *   &lt;li&gt;Space-separated: "hello world"  "helloWorld"&lt;/li&gt;</span>
<span class="source-line-no">466</span><span id="line-466">    *   &lt;li&gt;Underscore-separated: "hello_world"  "helloWorld"&lt;/li&gt;</span>
<span class="source-line-no">467</span><span id="line-467">    *   &lt;li&gt;Hyphen-separated: "hello-world"  "helloWorld"&lt;/li&gt;</span>
<span class="source-line-no">468</span><span id="line-468">    *   &lt;li&gt;PascalCase: "HelloWorld"  "helloWorld"&lt;/li&gt;</span>
<span class="source-line-no">469</span><span id="line-469">    *   &lt;li&gt;Already camelCase: "helloWorld"  "helloWorld"&lt;/li&gt;</span>
<span class="source-line-no">470</span><span id="line-470">    *   &lt;li&gt;Mixed case: "Hello_World-Test"  "helloWorldTest"&lt;/li&gt;</span>
<span class="source-line-no">471</span><span id="line-471">    * &lt;/ul&gt;</span>
<span class="source-line-no">472</span><span id="line-472">    *</span>
<span class="source-line-no">473</span><span id="line-473">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">474</span><span id="line-474">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">475</span><span id="line-475">    *    camelCase(&lt;jk&gt;null&lt;/jk&gt;);                    &lt;jc&gt;// null&lt;/jc&gt;</span>
<span class="source-line-no">476</span><span id="line-476">    *    camelCase(&lt;js&gt;""&lt;/js&gt;);                      &lt;jc&gt;// ""&lt;/jc&gt;</span>
<span class="source-line-no">477</span><span id="line-477">    *    camelCase(&lt;js&gt;"hello world"&lt;/js&gt;);           &lt;jc&gt;// "helloWorld"&lt;/jc&gt;</span>
<span class="source-line-no">478</span><span id="line-478">    *    camelCase(&lt;js&gt;"hello_world"&lt;/js&gt;);           &lt;jc&gt;// "helloWorld"&lt;/jc&gt;</span>
<span class="source-line-no">479</span><span id="line-479">    *    camelCase(&lt;js&gt;"hello-world"&lt;/js&gt;);           &lt;jc&gt;// "helloWorld"&lt;/jc&gt;</span>
<span class="source-line-no">480</span><span id="line-480">    *    camelCase(&lt;js&gt;"HelloWorld"&lt;/js&gt;);            &lt;jc&gt;// "helloWorld"&lt;/jc&gt;</span>
<span class="source-line-no">481</span><span id="line-481">    *    camelCase(&lt;js&gt;"helloWorld"&lt;/js&gt;);            &lt;jc&gt;// "helloWorld"&lt;/jc&gt;</span>
<span class="source-line-no">482</span><span id="line-482">    *    camelCase(&lt;js&gt;"  hello   world  "&lt;/js&gt;);     &lt;jc&gt;// "helloWorld"&lt;/jc&gt;</span>
<span class="source-line-no">483</span><span id="line-483">    * &lt;/p&gt;</span>
<span class="source-line-no">484</span><span id="line-484">    *</span>
<span class="source-line-no">485</span><span id="line-485">    * @param str The string to convert.</span>
<span class="source-line-no">486</span><span id="line-486">    * @return The camelCase string, or &lt;jk&gt;null&lt;/jk&gt; if input is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">487</span><span id="line-487">    */</span>
<span class="source-line-no">488</span><span id="line-488">   public static String camelCase(String str) {</span>
<span class="source-line-no">489</span><span id="line-489">      if (isEmpty(str))</span>
<span class="source-line-no">490</span><span id="line-490">         return str;</span>
<span class="source-line-no">491</span><span id="line-491"></span>
<span class="source-line-no">492</span><span id="line-492">      var words = splitWords(str);</span>
<span class="source-line-no">493</span><span id="line-493">      if (words.isEmpty())</span>
<span class="source-line-no">494</span><span id="line-494">         return "";</span>
<span class="source-line-no">495</span><span id="line-495"></span>
<span class="source-line-no">496</span><span id="line-496">      var result = new StringBuilder();</span>
<span class="source-line-no">497</span><span id="line-497">      for (var i = 0; i &lt; words.size(); i++) {</span>
<span class="source-line-no">498</span><span id="line-498">         var word = words.get(i);</span>
<span class="source-line-no">499</span><span id="line-499">         if (i == 0) {</span>
<span class="source-line-no">500</span><span id="line-500">            result.append(uncapitalize(word));</span>
<span class="source-line-no">501</span><span id="line-501">         } else {</span>
<span class="source-line-no">502</span><span id="line-502">            result.append(capitalize(word.toLowerCase()));</span>
<span class="source-line-no">503</span><span id="line-503">         }</span>
<span class="source-line-no">504</span><span id="line-504">      }</span>
<span class="source-line-no">505</span><span id="line-505"></span>
<span class="source-line-no">506</span><span id="line-506">      return result.toString();</span>
<span class="source-line-no">507</span><span id="line-507">   }</span>
<span class="source-line-no">508</span><span id="line-508"></span>
<span class="source-line-no">509</span><span id="line-509">   /**</span>
<span class="source-line-no">510</span><span id="line-510">    * Capitalizes the first character of a string.</span>
<span class="source-line-no">511</span><span id="line-511">    *</span>
<span class="source-line-no">512</span><span id="line-512">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">513</span><span id="line-513">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">514</span><span id="line-514">    *    capitalize(&lt;jk&gt;null&lt;/jk&gt;);          &lt;jc&gt;// null&lt;/jc&gt;</span>
<span class="source-line-no">515</span><span id="line-515">    *    capitalize(&lt;js&gt;""&lt;/js&gt;);            &lt;jc&gt;// ""&lt;/jc&gt;</span>
<span class="source-line-no">516</span><span id="line-516">    *    capitalize(&lt;js&gt;"hello"&lt;/js&gt;);       &lt;jc&gt;// "Hello"&lt;/jc&gt;</span>
<span class="source-line-no">517</span><span id="line-517">    *    capitalize(&lt;js&gt;"Hello"&lt;/js&gt;);       &lt;jc&gt;// "Hello"&lt;/jc&gt;</span>
<span class="source-line-no">518</span><span id="line-518">    *    capitalize(&lt;js&gt;"HELLO"&lt;/js&gt;);       &lt;jc&gt;// "HELLO"&lt;/jc&gt;</span>
<span class="source-line-no">519</span><span id="line-519">    * &lt;/p&gt;</span>
<span class="source-line-no">520</span><span id="line-520">    *</span>
<span class="source-line-no">521</span><span id="line-521">    * @param str The string to capitalize.</span>
<span class="source-line-no">522</span><span id="line-522">    * @return The string with the first character capitalized, or &lt;jk&gt;null&lt;/jk&gt; if input is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">523</span><span id="line-523">    */</span>
<span class="source-line-no">524</span><span id="line-524">   public static String capitalize(String str) {</span>
<span class="source-line-no">525</span><span id="line-525">      if (isEmpty(str))</span>
<span class="source-line-no">526</span><span id="line-526">         return str;</span>
<span class="source-line-no">527</span><span id="line-527">      return Character.toUpperCase(str.charAt(0)) + str.substring(1);</span>
<span class="source-line-no">528</span><span id="line-528">   }</span>
<span class="source-line-no">529</span><span id="line-529"></span>
<span class="source-line-no">530</span><span id="line-530">   /**</span>
<span class="source-line-no">531</span><span id="line-531">    * Converts a comma-delimited string to a list.</span>
<span class="source-line-no">532</span><span id="line-532">    *</span>
<span class="source-line-no">533</span><span id="line-533">    * @param s The comma-delimited string.</span>
<span class="source-line-no">534</span><span id="line-534">    * @return A new modifiable list. Never &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">535</span><span id="line-535">    */</span>
<span class="source-line-no">536</span><span id="line-536">   public static List&lt;String&gt; cdlToList(String s) {</span>
<span class="source-line-no">537</span><span id="line-537">      return split(s);</span>
<span class="source-line-no">538</span><span id="line-538">   }</span>
<span class="source-line-no">539</span><span id="line-539"></span>
<span class="source-line-no">540</span><span id="line-540">   /**</span>
<span class="source-line-no">541</span><span id="line-541">    * Converts a comma-delimited string to a set.</span>
<span class="source-line-no">542</span><span id="line-542">    *</span>
<span class="source-line-no">543</span><span id="line-543">    * @param s The comma-delimited string.</span>
<span class="source-line-no">544</span><span id="line-544">    * @return A new {@link LinkedHashSet}. Never &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">545</span><span id="line-545">    */</span>
<span class="source-line-no">546</span><span id="line-546">   public static LinkedHashSet&lt;String&gt; cdlToSet(String s) {</span>
<span class="source-line-no">547</span><span id="line-547">      return split(s).stream().collect(Collectors.toCollection(LinkedHashSet::new));</span>
<span class="source-line-no">548</span><span id="line-548">   }</span>
<span class="source-line-no">549</span><span id="line-549"></span>
<span class="source-line-no">550</span><span id="line-550">   /**</span>
<span class="source-line-no">551</span><span id="line-551">    * Returns the character at the specified index in the string without throwing exceptions.</span>
<span class="source-line-no">552</span><span id="line-552">    *</span>
<span class="source-line-no">553</span><span id="line-553">    * &lt;p&gt;</span>
<span class="source-line-no">554</span><span id="line-554">    * This is a null-safe and bounds-safe version of {@link String#charAt(int)}.</span>
<span class="source-line-no">555</span><span id="line-555">    * Returns &lt;c&gt;0&lt;/c&gt; (null character) if:</span>
<span class="source-line-no">556</span><span id="line-556">    * &lt;ul&gt;</span>
<span class="source-line-no">557</span><span id="line-557">    *   &lt;li&gt;The string is &lt;jk&gt;null&lt;/jk&gt;&lt;/li&gt;</span>
<span class="source-line-no">558</span><span id="line-558">    *   &lt;li&gt;The index is negative&lt;/li&gt;</span>
<span class="source-line-no">559</span><span id="line-559">    *   &lt;li&gt;The index is greater than or equal to the string length&lt;/li&gt;</span>
<span class="source-line-no">560</span><span id="line-560">    * &lt;/ul&gt;</span>
<span class="source-line-no">561</span><span id="line-561">    *</span>
<span class="source-line-no">562</span><span id="line-562">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">563</span><span id="line-563">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">564</span><span id="line-564">    *    charAt(&lt;js&gt;"Hello"&lt;/js&gt;, 0);     &lt;jc&gt;// 'H'&lt;/jc&gt;</span>
<span class="source-line-no">565</span><span id="line-565">    *    charAt(&lt;js&gt;"Hello"&lt;/js&gt;, 4);     &lt;jc&gt;// 'o'&lt;/jc&gt;</span>
<span class="source-line-no">566</span><span id="line-566">    *    charAt(&lt;js&gt;"Hello"&lt;/js&gt;, 5);     &lt;jc&gt;// 0 (out of bounds)&lt;/jc&gt;</span>
<span class="source-line-no">567</span><span id="line-567">    *    charAt(&lt;js&gt;"Hello"&lt;/js&gt;, -1);    &lt;jc&gt;// 0 (out of bounds)&lt;/jc&gt;</span>
<span class="source-line-no">568</span><span id="line-568">    *    charAt(&lt;jk&gt;null&lt;/jk&gt;, 0);        &lt;jc&gt;// 0 (null string)&lt;/jc&gt;</span>
<span class="source-line-no">569</span><span id="line-569">    * &lt;/p&gt;</span>
<span class="source-line-no">570</span><span id="line-570">    *</span>
<span class="source-line-no">571</span><span id="line-571">    * @param s The string.</span>
<span class="source-line-no">572</span><span id="line-572">    * @param i The index position.</span>
<span class="source-line-no">573</span><span id="line-573">    * @return The character at the specified index, or &lt;c&gt;0&lt;/c&gt; if the index is out-of-range or the string is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">574</span><span id="line-574">    * @see String#charAt(int)</span>
<span class="source-line-no">575</span><span id="line-575">    */</span>
<span class="source-line-no">576</span><span id="line-576">   public static char charAt(String s, int i) {</span>
<span class="source-line-no">577</span><span id="line-577">      if (s == null || i &lt; 0 || i &gt;= s.length())</span>
<span class="source-line-no">578</span><span id="line-578">         return 0;</span>
<span class="source-line-no">579</span><span id="line-579">      return s.charAt(i);</span>
<span class="source-line-no">580</span><span id="line-580">   }</span>
<span class="source-line-no">581</span><span id="line-581"></span>
<span class="source-line-no">582</span><span id="line-582">   /**</span>
<span class="source-line-no">583</span><span id="line-583">    * Cleans a string by removing control characters and normalizing whitespace.</span>
<span class="source-line-no">584</span><span id="line-584">    *</span>
<span class="source-line-no">585</span><span id="line-585">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">586</span><span id="line-586">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">587</span><span id="line-587">    *    clean(&lt;js&gt;"hello\u0000\u0001world"&lt;/js&gt;);     &lt;jc&gt;// "hello world"&lt;/jc&gt;</span>
<span class="source-line-no">588</span><span id="line-588">    *    clean(&lt;js&gt;"hello  \t\n  world"&lt;/js&gt;);         &lt;jc&gt;// "hello world"&lt;/jc&gt;</span>
<span class="source-line-no">589</span><span id="line-589">    * &lt;/p&gt;</span>
<span class="source-line-no">590</span><span id="line-590">    *</span>
<span class="source-line-no">591</span><span id="line-591">    * @param str The string to clean.</span>
<span class="source-line-no">592</span><span id="line-592">    * @return The cleaned string, or &lt;jk&gt;null&lt;/jk&gt; if input is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">593</span><span id="line-593">    */</span>
<span class="source-line-no">594</span><span id="line-594">   public static String clean(String str) {</span>
<span class="source-line-no">595</span><span id="line-595">      if (str == null)</span>
<span class="source-line-no">596</span><span id="line-596">         return null;</span>
<span class="source-line-no">597</span><span id="line-597">      str = removeControlChars(str);</span>
<span class="source-line-no">598</span><span id="line-598">      return normalizeWhitespace(str);</span>
<span class="source-line-no">599</span><span id="line-599">   }</span>
<span class="source-line-no">600</span><span id="line-600"></span>
<span class="source-line-no">601</span><span id="line-601">   /**</span>
<span class="source-line-no">602</span><span id="line-602">    * Compares two strings lexicographically, but gracefully handles &lt;jk&gt;null&lt;/jk&gt; values.</span>
<span class="source-line-no">603</span><span id="line-603">    *</span>
<span class="source-line-no">604</span><span id="line-604">    * &lt;p&gt;</span>
<span class="source-line-no">605</span><span id="line-605">    * Null handling:</span>
<span class="source-line-no">606</span><span id="line-606">    * &lt;ul&gt;</span>
<span class="source-line-no">607</span><span id="line-607">    *   &lt;li&gt;Both &lt;jk&gt;null&lt;/jk&gt;  returns &lt;c&gt;0&lt;/c&gt; (equal)&lt;/li&gt;</span>
<span class="source-line-no">608</span><span id="line-608">    *   &lt;li&gt;First &lt;jk&gt;null&lt;/jk&gt;  returns {@link Integer#MIN_VALUE}&lt;/li&gt;</span>
<span class="source-line-no">609</span><span id="line-609">    *   &lt;li&gt;Second &lt;jk&gt;null&lt;/jk&gt;  returns {@link Integer#MAX_VALUE}&lt;/li&gt;</span>
<span class="source-line-no">610</span><span id="line-610">    *   &lt;li&gt;Neither &lt;jk&gt;null&lt;/jk&gt;  returns the same as {@link String#compareTo(String)}&lt;/li&gt;</span>
<span class="source-line-no">611</span><span id="line-611">    * &lt;/ul&gt;</span>
<span class="source-line-no">612</span><span id="line-612">    *</span>
<span class="source-line-no">613</span><span id="line-613">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">614</span><span id="line-614">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">615</span><span id="line-615">    *    compare(&lt;js&gt;"apple"&lt;/js&gt;, &lt;js&gt;"banana"&lt;/js&gt;);   &lt;jc&gt;// negative (apple &amp;lt; banana)&lt;/jc&gt;</span>
<span class="source-line-no">616</span><span id="line-616">    *    compare(&lt;js&gt;"banana"&lt;/js&gt;, &lt;js&gt;"apple"&lt;/js&gt;);   &lt;jc&gt;// positive (banana &amp;gt; apple)&lt;/jc&gt;</span>
<span class="source-line-no">617</span><span id="line-617">    *    compare(&lt;js&gt;"apple"&lt;/js&gt;, &lt;js&gt;"apple"&lt;/js&gt;);    &lt;jc&gt;// 0 (equal)&lt;/jc&gt;</span>
<span class="source-line-no">618</span><span id="line-618">    *    compare(&lt;jk&gt;null&lt;/jk&gt;, &lt;jk&gt;null&lt;/jk&gt;);          &lt;jc&gt;// 0 (equal)&lt;/jc&gt;</span>
<span class="source-line-no">619</span><span id="line-619">    *    compare(&lt;jk&gt;null&lt;/jk&gt;, &lt;js&gt;"apple"&lt;/js&gt;);       &lt;jc&gt;// Integer.MIN_VALUE&lt;/jc&gt;</span>
<span class="source-line-no">620</span><span id="line-620">    *    compare(&lt;js&gt;"apple"&lt;/js&gt;, &lt;jk&gt;null&lt;/jk&gt;);       &lt;jc&gt;// Integer.MAX_VALUE&lt;/jc&gt;</span>
<span class="source-line-no">621</span><span id="line-621">    * &lt;/p&gt;</span>
<span class="source-line-no">622</span><span id="line-622">    *</span>
<span class="source-line-no">623</span><span id="line-623">    * @param s1 The first string.</span>
<span class="source-line-no">624</span><span id="line-624">    * @param s2 The second string.</span>
<span class="source-line-no">625</span><span id="line-625">    * @return A negative integer, zero, or a positive integer as the first string is less than, equal to, or greater than the second.</span>
<span class="source-line-no">626</span><span id="line-626">    * @see String#compareTo(String)</span>
<span class="source-line-no">627</span><span id="line-627">    */</span>
<span class="source-line-no">628</span><span id="line-628">   public static int compare(String s1, String s2) {</span>
<span class="source-line-no">629</span><span id="line-629">      if (s1 == null &amp;&amp; s2 == null)</span>
<span class="source-line-no">630</span><span id="line-630">         return 0;</span>
<span class="source-line-no">631</span><span id="line-631">      if (s1 == null)</span>
<span class="source-line-no">632</span><span id="line-632">         return Integer.MIN_VALUE;</span>
<span class="source-line-no">633</span><span id="line-633">      if (s2 == null)</span>
<span class="source-line-no">634</span><span id="line-634">         return Integer.MAX_VALUE;</span>
<span class="source-line-no">635</span><span id="line-635">      return s1.compareTo(s2);</span>
<span class="source-line-no">636</span><span id="line-636">   }</span>
<span class="source-line-no">637</span><span id="line-637"></span>
<span class="source-line-no">638</span><span id="line-638">   /**</span>
<span class="source-line-no">639</span><span id="line-639">    * Compares two strings lexicographically, ignoring case.</span>
<span class="source-line-no">640</span><span id="line-640">    *</span>
<span class="source-line-no">641</span><span id="line-641">    * &lt;p&gt;</span>
<span class="source-line-no">642</span><span id="line-642">    * Returns a negative integer, zero, or a positive integer as the first string is less than, equal to, or greater than the second string, ignoring case.</span>
<span class="source-line-no">643</span><span id="line-643">    *</span>
<span class="source-line-no">644</span><span id="line-644">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">645</span><span id="line-645">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">646</span><span id="line-646">    *    compareIgnoreCase(&lt;js&gt;"apple"&lt;/js&gt;, &lt;js&gt;"BANANA"&lt;/js&gt;);   &lt;jc&gt;// negative (apple &amp;lt; banana)&lt;/jc&gt;</span>
<span class="source-line-no">647</span><span id="line-647">    *    compareIgnoreCase(&lt;js&gt;"Hello"&lt;/js&gt;, &lt;js&gt;"hello"&lt;/js&gt;);    &lt;jc&gt;// 0 (equal)&lt;/jc&gt;</span>
<span class="source-line-no">648</span><span id="line-648">    *    compareIgnoreCase(&lt;js&gt;"Zebra"&lt;/js&gt;, &lt;js&gt;"apple"&lt;/js&gt;);    &lt;jc&gt;// positive (zebra &amp;gt; apple)&lt;/jc&gt;</span>
<span class="source-line-no">649</span><span id="line-649">    * &lt;/p&gt;</span>
<span class="source-line-no">650</span><span id="line-650">    *</span>
<span class="source-line-no">651</span><span id="line-651">    * @param str1 The first string.</span>
<span class="source-line-no">652</span><span id="line-652">    * @param str2 The second string.</span>
<span class="source-line-no">653</span><span id="line-653">    * @return A negative integer, zero, or a positive integer as the first string is less than, equal to, or greater than the second.</span>
<span class="source-line-no">654</span><span id="line-654">    */</span>
<span class="source-line-no">655</span><span id="line-655">   public static int compareIgnoreCase(String str1, String str2) {</span>
<span class="source-line-no">656</span><span id="line-656">      if (str1 == str2)</span>
<span class="source-line-no">657</span><span id="line-657">         return 0;</span>
<span class="source-line-no">658</span><span id="line-658">      if (str1 == null)</span>
<span class="source-line-no">659</span><span id="line-659">         return -1;</span>
<span class="source-line-no">660</span><span id="line-660">      if (str2 == null)</span>
<span class="source-line-no">661</span><span id="line-661">         return 1;</span>
<span class="source-line-no">662</span><span id="line-662">      return str1.compareToIgnoreCase(str2);</span>
<span class="source-line-no">663</span><span id="line-663">   }</span>
<span class="source-line-no">664</span><span id="line-664"></span>
<span class="source-line-no">665</span><span id="line-665">   /**</span>
<span class="source-line-no">666</span><span id="line-666">    * Compresses a UTF-8 string into a GZIP-compressed byte array.</span>
<span class="source-line-no">667</span><span id="line-667">    *</span>
<span class="source-line-no">668</span><span id="line-668">    * &lt;p&gt;</span>
<span class="source-line-no">669</span><span id="line-669">    * This method compresses the input string using GZIP compression. The string is first converted to</span>
<span class="source-line-no">670</span><span id="line-670">    * UTF-8 bytes, then compressed. Use {@link #decompress(byte[])} to decompress the result.</span>
<span class="source-line-no">671</span><span id="line-671">    *</span>
<span class="source-line-no">672</span><span id="line-672">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">673</span><span id="line-673">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">674</span><span id="line-674">    *    &lt;jc&gt;// Compress a string&lt;/jc&gt;</span>
<span class="source-line-no">675</span><span id="line-675">    *    byte[] &lt;jv&gt;compressed&lt;/jv&gt; = compress(&lt;js&gt;"Hello World"&lt;/js&gt;);</span>
<span class="source-line-no">676</span><span id="line-676">    *</span>
<span class="source-line-no">677</span><span id="line-677">    *    &lt;jc&gt;// Decompress it back&lt;/jc&gt;</span>
<span class="source-line-no">678</span><span id="line-678">    *    String &lt;jv&gt;decompressed&lt;/jv&gt; = decompress(&lt;jv&gt;compressed&lt;/jv&gt;);</span>
<span class="source-line-no">679</span><span id="line-679">    *    &lt;jc&gt;// Returns: "Hello World"&lt;/jc&gt;</span>
<span class="source-line-no">680</span><span id="line-680">    * &lt;/p&gt;</span>
<span class="source-line-no">681</span><span id="line-681">    *</span>
<span class="source-line-no">682</span><span id="line-682">    * @param contents The UTF-8 string to compress.</span>
<span class="source-line-no">683</span><span id="line-683">    * @return The GZIP-compressed byte array.</span>
<span class="source-line-no">684</span><span id="line-684">    * @throws Exception If compression fails.</span>
<span class="source-line-no">685</span><span id="line-685">    * @see #decompress(byte[])</span>
<span class="source-line-no">686</span><span id="line-686">    */</span>
<span class="source-line-no">687</span><span id="line-687">   public static byte[] compress(String contents) throws Exception {</span>
<span class="source-line-no">688</span><span id="line-688">      var baos = new ByteArrayOutputStream(contents.length() &gt;&gt; 1);</span>
<span class="source-line-no">689</span><span id="line-689">      try (var gos = new GZIPOutputStream(baos)) {</span>
<span class="source-line-no">690</span><span id="line-690">         gos.write(contents.getBytes());</span>
<span class="source-line-no">691</span><span id="line-691">         gos.finish();</span>
<span class="source-line-no">692</span><span id="line-692">         gos.flush();</span>
<span class="source-line-no">693</span><span id="line-693">         return baos.toByteArray();</span>
<span class="source-line-no">694</span><span id="line-694">      }</span>
<span class="source-line-no">695</span><span id="line-695">   }</span>
<span class="source-line-no">696</span><span id="line-696"></span>
<span class="source-line-no">697</span><span id="line-697">   /**</span>
<span class="source-line-no">698</span><span id="line-698">    * Checks if a string contains the specified character.</span>
<span class="source-line-no">699</span><span id="line-699">    *</span>
<span class="source-line-no">700</span><span id="line-700">    * &lt;p&gt;</span>
<span class="source-line-no">701</span><span id="line-701">    * This is a null-safe operation. Returns &lt;jk&gt;false&lt;/jk&gt; if the string is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">702</span><span id="line-702">    *</span>
<span class="source-line-no">703</span><span id="line-703">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">704</span><span id="line-704">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">705</span><span id="line-705">    *    contains(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;'o'&lt;/js&gt;);   &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">706</span><span id="line-706">    *    contains(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;'x'&lt;/js&gt;);   &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">707</span><span id="line-707">    *    contains(&lt;jk&gt;null&lt;/jk&gt;, &lt;js&gt;'a'&lt;/js&gt;);            &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">708</span><span id="line-708">    * &lt;/p&gt;</span>
<span class="source-line-no">709</span><span id="line-709">    *</span>
<span class="source-line-no">710</span><span id="line-710">    * @param s The string to check.</span>
<span class="source-line-no">711</span><span id="line-711">    * @param c The character to check for.</span>
<span class="source-line-no">712</span><span id="line-712">    * @return &lt;jk&gt;true&lt;/jk&gt; if the string contains the specified character.</span>
<span class="source-line-no">713</span><span id="line-713">    * @see #contains(String, CharSequence)</span>
<span class="source-line-no">714</span><span id="line-714">    * @see #contains(String, String)</span>
<span class="source-line-no">715</span><span id="line-715">    * @see #containsAny(String, char...)</span>
<span class="source-line-no">716</span><span id="line-716">    */</span>
<span class="source-line-no">717</span><span id="line-717">   public static boolean contains(String s, char c) {</span>
<span class="source-line-no">718</span><span id="line-718">      return s != null &amp;&amp; s.indexOf(c) &gt;= 0;</span>
<span class="source-line-no">719</span><span id="line-719">   }</span>
<span class="source-line-no">720</span><span id="line-720"></span>
<span class="source-line-no">721</span><span id="line-721">   /**</span>
<span class="source-line-no">722</span><span id="line-722">    * Null-safe {@link String#contains(CharSequence)} operation.</span>
<span class="source-line-no">723</span><span id="line-723">    *</span>
<span class="source-line-no">724</span><span id="line-724">    * &lt;p&gt;</span>
<span class="source-line-no">725</span><span id="line-725">    * Returns &lt;jk&gt;false&lt;/jk&gt; if the string is &lt;jk&gt;null&lt;/jk&gt;, otherwise behaves the same as</span>
<span class="source-line-no">726</span><span id="line-726">    * {@link String#contains(CharSequence)}.</span>
<span class="source-line-no">727</span><span id="line-727">    *</span>
<span class="source-line-no">728</span><span id="line-728">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">729</span><span id="line-729">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">730</span><span id="line-730">    *    contains(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;"World"&lt;/js&gt;);   &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">731</span><span id="line-731">    *    contains(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;"Foo"&lt;/js&gt;);     &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">732</span><span id="line-732">    *    contains(&lt;jk&gt;null&lt;/jk&gt;, &lt;js&gt;"Hello"&lt;/js&gt;);            &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">733</span><span id="line-733">    * &lt;/p&gt;</span>
<span class="source-line-no">734</span><span id="line-734">    *</span>
<span class="source-line-no">735</span><span id="line-735">    * @param value The string to check.</span>
<span class="source-line-no">736</span><span id="line-736">    * @param substring The substring to check for.</span>
<span class="source-line-no">737</span><span id="line-737">    * @return &lt;jk&gt;true&lt;/jk&gt; if the value contains the specified substring, &lt;jk&gt;false&lt;/jk&gt; if the string is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">738</span><span id="line-738">    * @see #contains(String, char)</span>
<span class="source-line-no">739</span><span id="line-739">    * @see #contains(String, String)</span>
<span class="source-line-no">740</span><span id="line-740">    * @see #containsAny(String, CharSequence...)</span>
<span class="source-line-no">741</span><span id="line-741">    */</span>
<span class="source-line-no">742</span><span id="line-742">   public static boolean contains(String value, CharSequence substring) {</span>
<span class="source-line-no">743</span><span id="line-743">      return nn(value) &amp;&amp; value.contains(substring);</span>
<span class="source-line-no">744</span><span id="line-744">   }</span>
<span class="source-line-no">745</span><span id="line-745"></span>
<span class="source-line-no">746</span><span id="line-746">   /**</span>
<span class="source-line-no">747</span><span id="line-747">    * Null-safe check if a string contains another string.</span>
<span class="source-line-no">748</span><span id="line-748">    *</span>
<span class="source-line-no">749</span><span id="line-749">    * &lt;p&gt;</span>
<span class="source-line-no">750</span><span id="line-750">    * Returns &lt;jk&gt;false&lt;/jk&gt; if the string is &lt;jk&gt;null&lt;/jk&gt;, otherwise behaves the same as</span>
<span class="source-line-no">751</span><span id="line-751">    * {@link String#contains(CharSequence)}.</span>
<span class="source-line-no">752</span><span id="line-752">    *</span>
<span class="source-line-no">753</span><span id="line-753">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">754</span><span id="line-754">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">755</span><span id="line-755">    *    contains(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;"World"&lt;/js&gt;);   &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">756</span><span id="line-756">    *    contains(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;"Foo"&lt;/js&gt;);     &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">757</span><span id="line-757">    *    contains(&lt;jk&gt;null&lt;/jk&gt;, &lt;js&gt;"Hello"&lt;/js&gt;);            &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">758</span><span id="line-758">    * &lt;/p&gt;</span>
<span class="source-line-no">759</span><span id="line-759">    *</span>
<span class="source-line-no">760</span><span id="line-760">    * @param s The string to check.</span>
<span class="source-line-no">761</span><span id="line-761">    * @param substring The substring to check for.</span>
<span class="source-line-no">762</span><span id="line-762">    * @return &lt;jk&gt;true&lt;/jk&gt; if the string contains the specified substring, &lt;jk&gt;false&lt;/jk&gt; if the string is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">763</span><span id="line-763">    * @see #contains(String, CharSequence)</span>
<span class="source-line-no">764</span><span id="line-764">    * @see #containsAny(String, String...)</span>
<span class="source-line-no">765</span><span id="line-765">    */</span>
<span class="source-line-no">766</span><span id="line-766">   public static boolean contains(String s, String substring) {</span>
<span class="source-line-no">767</span><span id="line-767">      return nn(s) &amp;&amp; s.contains(substring);</span>
<span class="source-line-no">768</span><span id="line-768">   }</span>
<span class="source-line-no">769</span><span id="line-769"></span>
<span class="source-line-no">770</span><span id="line-770">   /**</span>
<span class="source-line-no">771</span><span id="line-771">    * Checks if a string contains all of the specified characters.</span>
<span class="source-line-no">772</span><span id="line-772">    *</span>
<span class="source-line-no">773</span><span id="line-773">    * &lt;p&gt;</span>
<span class="source-line-no">774</span><span id="line-774">    * This is a null-safe operation that returns &lt;jk&gt;false&lt;/jk&gt; if:</span>
<span class="source-line-no">775</span><span id="line-775">    * &lt;ul&gt;</span>
<span class="source-line-no">776</span><span id="line-776">    *   &lt;li&gt;The string is &lt;jk&gt;null&lt;/jk&gt;&lt;/li&gt;</span>
<span class="source-line-no">777</span><span id="line-777">    *   &lt;li&gt;The values array is &lt;jk&gt;null&lt;/jk&gt; or empty&lt;/li&gt;</span>
<span class="source-line-no">778</span><span id="line-778">    *   &lt;li&gt;Any of the specified characters are not found in the string&lt;/li&gt;</span>
<span class="source-line-no">779</span><span id="line-779">    * &lt;/ul&gt;</span>
<span class="source-line-no">780</span><span id="line-780">    *</span>
<span class="source-line-no">781</span><span id="line-781">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">782</span><span id="line-782">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">783</span><span id="line-783">    *    containsAll(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;'H'&lt;/js&gt;, &lt;js&gt;'e'&lt;/js&gt;, &lt;js&gt;'l'&lt;/js&gt;);   &lt;jc&gt;// true (contains all)&lt;/jc&gt;</span>
<span class="source-line-no">784</span><span id="line-784">    *    containsAll(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;'H'&lt;/js&gt;, &lt;js&gt;'x'&lt;/js&gt;);                &lt;jc&gt;// false (missing 'x')&lt;/jc&gt;</span>
<span class="source-line-no">785</span><span id="line-785">    *    containsAll(&lt;jk&gt;null&lt;/jk&gt;, &lt;js&gt;'a'&lt;/js&gt;);                                      &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">786</span><span id="line-786">    * &lt;/p&gt;</span>
<span class="source-line-no">787</span><span id="line-787">    *</span>
<span class="source-line-no">788</span><span id="line-788">    * @param s The string to check.</span>
<span class="source-line-no">789</span><span id="line-789">    * @param values The characters to check for.</span>
<span class="source-line-no">790</span><span id="line-790">    * @return &lt;jk&gt;true&lt;/jk&gt; if the string contains all of the specified characters.</span>
<span class="source-line-no">791</span><span id="line-791">    * @see #containsAny(String, char...)</span>
<span class="source-line-no">792</span><span id="line-792">    */</span>
<span class="source-line-no">793</span><span id="line-793">   public static boolean containsAll(String s, char...values) {</span>
<span class="source-line-no">794</span><span id="line-794">      if (s == null || values == null || values.length == 0)</span>
<span class="source-line-no">795</span><span id="line-795">         return false;</span>
<span class="source-line-no">796</span><span id="line-796">      for (var v : values) {</span>
<span class="source-line-no">797</span><span id="line-797">         if (s.indexOf(v) &lt; 0)</span>
<span class="source-line-no">798</span><span id="line-798">            return false;</span>
<span class="source-line-no">799</span><span id="line-799">      }</span>
<span class="source-line-no">800</span><span id="line-800">      return true;</span>
<span class="source-line-no">801</span><span id="line-801">   }</span>
<span class="source-line-no">802</span><span id="line-802"></span>
<span class="source-line-no">803</span><span id="line-803">   /**</span>
<span class="source-line-no">804</span><span id="line-804">    * Checks if a string contains all of the specified substrings.</span>
<span class="source-line-no">805</span><span id="line-805">    *</span>
<span class="source-line-no">806</span><span id="line-806">    * &lt;p&gt;</span>
<span class="source-line-no">807</span><span id="line-807">    * This is a null-safe operation that returns &lt;jk&gt;false&lt;/jk&gt; if:</span>
<span class="source-line-no">808</span><span id="line-808">    * &lt;ul&gt;</span>
<span class="source-line-no">809</span><span id="line-809">    *   &lt;li&gt;The string is &lt;jk&gt;null&lt;/jk&gt;&lt;/li&gt;</span>
<span class="source-line-no">810</span><span id="line-810">    *   &lt;li&gt;The values array is &lt;jk&gt;null&lt;/jk&gt; or empty&lt;/li&gt;</span>
<span class="source-line-no">811</span><span id="line-811">    *   &lt;li&gt;Any of the specified substrings are not found in the string&lt;/li&gt;</span>
<span class="source-line-no">812</span><span id="line-812">    * &lt;/ul&gt;</span>
<span class="source-line-no">813</span><span id="line-813">    *</span>
<span class="source-line-no">814</span><span id="line-814">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">815</span><span id="line-815">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">816</span><span id="line-816">    *    containsAll(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;"Hello"&lt;/js&gt;, &lt;js&gt;"World"&lt;/js&gt;);   &lt;jc&gt;// true (contains all)&lt;/jc&gt;</span>
<span class="source-line-no">817</span><span id="line-817">    *    containsAll(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;"Hello"&lt;/js&gt;, &lt;js&gt;"Foo"&lt;/js&gt;);    &lt;jc&gt;// false (missing "Foo")&lt;/jc&gt;</span>
<span class="source-line-no">818</span><span id="line-818">    *    containsAll(&lt;jk&gt;null&lt;/jk&gt;, &lt;js&gt;"Hello"&lt;/js&gt;);                              &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">819</span><span id="line-819">    * &lt;/p&gt;</span>
<span class="source-line-no">820</span><span id="line-820">    *</span>
<span class="source-line-no">821</span><span id="line-821">    * @param s The string to check.</span>
<span class="source-line-no">822</span><span id="line-822">    * @param values The substrings to check for.</span>
<span class="source-line-no">823</span><span id="line-823">    * @return &lt;jk&gt;true&lt;/jk&gt; if the string contains all of the specified substrings.</span>
<span class="source-line-no">824</span><span id="line-824">    * @see #containsAny(String, CharSequence...)</span>
<span class="source-line-no">825</span><span id="line-825">    */</span>
<span class="source-line-no">826</span><span id="line-826">   public static boolean containsAll(String s, CharSequence...values) {</span>
<span class="source-line-no">827</span><span id="line-827">      if (s == null || values == null || values.length == 0)</span>
<span class="source-line-no">828</span><span id="line-828">         return false;</span>
<span class="source-line-no">829</span><span id="line-829">      for (var v : values) {</span>
<span class="source-line-no">830</span><span id="line-830">         if (! s.contains(v))</span>
<span class="source-line-no">831</span><span id="line-831">            return false;</span>
<span class="source-line-no">832</span><span id="line-832">      }</span>
<span class="source-line-no">833</span><span id="line-833">      return true;</span>
<span class="source-line-no">834</span><span id="line-834">   }</span>
<span class="source-line-no">835</span><span id="line-835"></span>
<span class="source-line-no">836</span><span id="line-836">   /**</span>
<span class="source-line-no">837</span><span id="line-837">    * Checks if a string contains all of the specified substrings.</span>
<span class="source-line-no">838</span><span id="line-838">    *</span>
<span class="source-line-no">839</span><span id="line-839">    * &lt;p&gt;</span>
<span class="source-line-no">840</span><span id="line-840">    * This is a null-safe operation that returns &lt;jk&gt;false&lt;/jk&gt; if:</span>
<span class="source-line-no">841</span><span id="line-841">    * &lt;ul&gt;</span>
<span class="source-line-no">842</span><span id="line-842">    *   &lt;li&gt;The string is &lt;jk&gt;null&lt;/jk&gt;&lt;/li&gt;</span>
<span class="source-line-no">843</span><span id="line-843">    *   &lt;li&gt;The values array is &lt;jk&gt;null&lt;/jk&gt; or empty&lt;/li&gt;</span>
<span class="source-line-no">844</span><span id="line-844">    *   &lt;li&gt;Any of the specified substrings are not found in the string&lt;/li&gt;</span>
<span class="source-line-no">845</span><span id="line-845">    * &lt;/ul&gt;</span>
<span class="source-line-no">846</span><span id="line-846">    *</span>
<span class="source-line-no">847</span><span id="line-847">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">848</span><span id="line-848">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">849</span><span id="line-849">    *    containsAll(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;"Hello"&lt;/js&gt;, &lt;js&gt;"World"&lt;/js&gt;);   &lt;jc&gt;// true (contains all)&lt;/jc&gt;</span>
<span class="source-line-no">850</span><span id="line-850">    *    containsAll(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;"Hello"&lt;/js&gt;, &lt;js&gt;"Foo"&lt;/js&gt;);    &lt;jc&gt;// false (missing "Foo")&lt;/jc&gt;</span>
<span class="source-line-no">851</span><span id="line-851">    *    containsAll(&lt;jk&gt;null&lt;/jk&gt;, &lt;js&gt;"Hello"&lt;/js&gt;);                              &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">852</span><span id="line-852">    * &lt;/p&gt;</span>
<span class="source-line-no">853</span><span id="line-853">    *</span>
<span class="source-line-no">854</span><span id="line-854">    * @param s The string to check.</span>
<span class="source-line-no">855</span><span id="line-855">    * @param values The substrings to check for.</span>
<span class="source-line-no">856</span><span id="line-856">    * @return &lt;jk&gt;true&lt;/jk&gt; if the string contains all of the specified substrings.</span>
<span class="source-line-no">857</span><span id="line-857">    * @see #containsAny(String, String...)</span>
<span class="source-line-no">858</span><span id="line-858">    */</span>
<span class="source-line-no">859</span><span id="line-859">   public static boolean containsAll(String s, String...values) {</span>
<span class="source-line-no">860</span><span id="line-860">      if (s == null || values == null || values.length == 0)</span>
<span class="source-line-no">861</span><span id="line-861">         return false;</span>
<span class="source-line-no">862</span><span id="line-862">      for (var v : values) {</span>
<span class="source-line-no">863</span><span id="line-863">         if (! s.contains(v))</span>
<span class="source-line-no">864</span><span id="line-864">            return false;</span>
<span class="source-line-no">865</span><span id="line-865">      }</span>
<span class="source-line-no">866</span><span id="line-866">      return true;</span>
<span class="source-line-no">867</span><span id="line-867">   }</span>
<span class="source-line-no">868</span><span id="line-868"></span>
<span class="source-line-no">869</span><span id="line-869">   /**</span>
<span class="source-line-no">870</span><span id="line-870">    * Checks if a string contains any of the specified characters.</span>
<span class="source-line-no">871</span><span id="line-871">    *</span>
<span class="source-line-no">872</span><span id="line-872">    * &lt;p&gt;</span>
<span class="source-line-no">873</span><span id="line-873">    * This is a null-safe operation that returns &lt;jk&gt;false&lt;/jk&gt; if:</span>
<span class="source-line-no">874</span><span id="line-874">    * &lt;ul&gt;</span>
<span class="source-line-no">875</span><span id="line-875">    *   &lt;li&gt;The string is &lt;jk&gt;null&lt;/jk&gt;&lt;/li&gt;</span>
<span class="source-line-no">876</span><span id="line-876">    *   &lt;li&gt;The values array is &lt;jk&gt;null&lt;/jk&gt; or empty&lt;/li&gt;</span>
<span class="source-line-no">877</span><span id="line-877">    *   &lt;li&gt;None of the specified characters are found in the string&lt;/li&gt;</span>
<span class="source-line-no">878</span><span id="line-878">    * &lt;/ul&gt;</span>
<span class="source-line-no">879</span><span id="line-879">    *</span>
<span class="source-line-no">880</span><span id="line-880">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">881</span><span id="line-881">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">882</span><span id="line-882">    *    containsAny(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;'o'&lt;/js&gt;, &lt;js&gt;'x'&lt;/js&gt;);   &lt;jc&gt;// true (contains 'o')&lt;/jc&gt;</span>
<span class="source-line-no">883</span><span id="line-883">    *    containsAny(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;'x'&lt;/js&gt;, &lt;js&gt;'y'&lt;/js&gt;);   &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">884</span><span id="line-884">    *    containsAny(&lt;jk&gt;null&lt;/jk&gt;, &lt;js&gt;'a'&lt;/js&gt;);                          &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">885</span><span id="line-885">    * &lt;/p&gt;</span>
<span class="source-line-no">886</span><span id="line-886">    *</span>
<span class="source-line-no">887</span><span id="line-887">    * @param s The string to check.</span>
<span class="source-line-no">888</span><span id="line-888">    * @param values The characters to check for.</span>
<span class="source-line-no">889</span><span id="line-889">    * @return &lt;jk&gt;true&lt;/jk&gt; if the string contains any of the specified characters.</span>
<span class="source-line-no">890</span><span id="line-890">    * @see #contains(String, char)</span>
<span class="source-line-no">891</span><span id="line-891">    * @see #containsAll(String, char...)</span>
<span class="source-line-no">892</span><span id="line-892">    */</span>
<span class="source-line-no">893</span><span id="line-893">   public static boolean containsAny(String s, char...values) {</span>
<span class="source-line-no">894</span><span id="line-894">      if (s == null || values == null || values.length == 0)</span>
<span class="source-line-no">895</span><span id="line-895">         return false;</span>
<span class="source-line-no">896</span><span id="line-896">      for (var v : values) {</span>
<span class="source-line-no">897</span><span id="line-897">         if (s.indexOf(v) &gt;= 0)</span>
<span class="source-line-no">898</span><span id="line-898">            return true;</span>
<span class="source-line-no">899</span><span id="line-899">      }</span>
<span class="source-line-no">900</span><span id="line-900">      return false;</span>
<span class="source-line-no">901</span><span id="line-901">   }</span>
<span class="source-line-no">902</span><span id="line-902"></span>
<span class="source-line-no">903</span><span id="line-903">   /**</span>
<span class="source-line-no">904</span><span id="line-904">    * Checks if a string contains any of the specified substrings.</span>
<span class="source-line-no">905</span><span id="line-905">    *</span>
<span class="source-line-no">906</span><span id="line-906">    * &lt;p&gt;</span>
<span class="source-line-no">907</span><span id="line-907">    * This is a null-safe operation that returns &lt;jk&gt;false&lt;/jk&gt; if:</span>
<span class="source-line-no">908</span><span id="line-908">    * &lt;ul&gt;</span>
<span class="source-line-no">909</span><span id="line-909">    *   &lt;li&gt;The string is &lt;jk&gt;null&lt;/jk&gt;&lt;/li&gt;</span>
<span class="source-line-no">910</span><span id="line-910">    *   &lt;li&gt;The values array is &lt;jk&gt;null&lt;/jk&gt; or empty&lt;/li&gt;</span>
<span class="source-line-no">911</span><span id="line-911">    *   &lt;li&gt;None of the specified substrings are found in the string&lt;/li&gt;</span>
<span class="source-line-no">912</span><span id="line-912">    * &lt;/ul&gt;</span>
<span class="source-line-no">913</span><span id="line-913">    *</span>
<span class="source-line-no">914</span><span id="line-914">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">915</span><span id="line-915">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">916</span><span id="line-916">    *    containsAny(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;"Hello"&lt;/js&gt;, &lt;js&gt;"Foo"&lt;/js&gt;);   &lt;jc&gt;// true (contains "Hello")&lt;/jc&gt;</span>
<span class="source-line-no">917</span><span id="line-917">    *    containsAny(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;"Foo"&lt;/js&gt;, &lt;js&gt;"Bar"&lt;/js&gt;);    &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">918</span><span id="line-918">    *    containsAny(&lt;jk&gt;null&lt;/jk&gt;, &lt;js&gt;"Hello"&lt;/js&gt;);                            &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">919</span><span id="line-919">    * &lt;/p&gt;</span>
<span class="source-line-no">920</span><span id="line-920">    *</span>
<span class="source-line-no">921</span><span id="line-921">    * @param s The string to check.</span>
<span class="source-line-no">922</span><span id="line-922">    * @param values The substrings to check for.</span>
<span class="source-line-no">923</span><span id="line-923">    * @return &lt;jk&gt;true&lt;/jk&gt; if the string contains any of the specified substrings.</span>
<span class="source-line-no">924</span><span id="line-924">    * @see #contains(String, CharSequence)</span>
<span class="source-line-no">925</span><span id="line-925">    * @see #containsAll(String, CharSequence...)</span>
<span class="source-line-no">926</span><span id="line-926">    */</span>
<span class="source-line-no">927</span><span id="line-927">   public static boolean containsAny(String s, CharSequence...values) {</span>
<span class="source-line-no">928</span><span id="line-928">      if (s == null || values == null || values.length == 0)</span>
<span class="source-line-no">929</span><span id="line-929">         return false;</span>
<span class="source-line-no">930</span><span id="line-930">      for (var v : values) {</span>
<span class="source-line-no">931</span><span id="line-931">         if (s.contains(v))</span>
<span class="source-line-no">932</span><span id="line-932">            return true;</span>
<span class="source-line-no">933</span><span id="line-933">      }</span>
<span class="source-line-no">934</span><span id="line-934">      return false;</span>
<span class="source-line-no">935</span><span id="line-935">   }</span>
<span class="source-line-no">936</span><span id="line-936"></span>
<span class="source-line-no">937</span><span id="line-937">   /**</span>
<span class="source-line-no">938</span><span id="line-938">    * Checks if a string contains any of the specified substrings.</span>
<span class="source-line-no">939</span><span id="line-939">    *</span>
<span class="source-line-no">940</span><span id="line-940">    * &lt;p&gt;</span>
<span class="source-line-no">941</span><span id="line-941">    * This is a null-safe operation that returns &lt;jk&gt;false&lt;/jk&gt; if:</span>
<span class="source-line-no">942</span><span id="line-942">    * &lt;ul&gt;</span>
<span class="source-line-no">943</span><span id="line-943">    *   &lt;li&gt;The string is &lt;jk&gt;null&lt;/jk&gt;&lt;/li&gt;</span>
<span class="source-line-no">944</span><span id="line-944">    *   &lt;li&gt;The values array is &lt;jk&gt;null&lt;/jk&gt; or empty&lt;/li&gt;</span>
<span class="source-line-no">945</span><span id="line-945">    *   &lt;li&gt;None of the specified substrings are found in the string&lt;/li&gt;</span>
<span class="source-line-no">946</span><span id="line-946">    * &lt;/ul&gt;</span>
<span class="source-line-no">947</span><span id="line-947">    *</span>
<span class="source-line-no">948</span><span id="line-948">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">949</span><span id="line-949">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">950</span><span id="line-950">    *    containsAny(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;"Hello"&lt;/js&gt;, &lt;js&gt;"Foo"&lt;/js&gt;);   &lt;jc&gt;// true (contains "Hello")&lt;/jc&gt;</span>
<span class="source-line-no">951</span><span id="line-951">    *    containsAny(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;"Foo"&lt;/js&gt;, &lt;js&gt;"Bar"&lt;/js&gt;);    &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">952</span><span id="line-952">    *    containsAny(&lt;jk&gt;null&lt;/jk&gt;, &lt;js&gt;"Hello"&lt;/js&gt;);                            &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">953</span><span id="line-953">    *    containsAny(&lt;js&gt;"Hello"&lt;/js&gt;);                                          &lt;jc&gt;// false (no values to check)&lt;/jc&gt;</span>
<span class="source-line-no">954</span><span id="line-954">    * &lt;/p&gt;</span>
<span class="source-line-no">955</span><span id="line-955">    *</span>
<span class="source-line-no">956</span><span id="line-956">    * @param s The string to check.</span>
<span class="source-line-no">957</span><span id="line-957">    * @param values The substrings to check for.</span>
<span class="source-line-no">958</span><span id="line-958">    * @return &lt;jk&gt;true&lt;/jk&gt; if the string contains any of the specified substrings.</span>
<span class="source-line-no">959</span><span id="line-959">    * @see #contains(String, String)</span>
<span class="source-line-no">960</span><span id="line-960">    * @see #containsAll(String, String...)</span>
<span class="source-line-no">961</span><span id="line-961">    */</span>
<span class="source-line-no">962</span><span id="line-962">   public static boolean containsAny(String s, String...values) {</span>
<span class="source-line-no">963</span><span id="line-963">      if (s == null || values == null || values.length == 0)</span>
<span class="source-line-no">964</span><span id="line-964">         return false;</span>
<span class="source-line-no">965</span><span id="line-965">      for (var v : values) {</span>
<span class="source-line-no">966</span><span id="line-966">         if (s.contains(v))</span>
<span class="source-line-no">967</span><span id="line-967">            return true;</span>
<span class="source-line-no">968</span><span id="line-968">      }</span>
<span class="source-line-no">969</span><span id="line-969">      return false;</span>
<span class="source-line-no">970</span><span id="line-970">   }</span>
<span class="source-line-no">971</span><span id="line-971"></span>
<span class="source-line-no">972</span><span id="line-972">   /**</span>
<span class="source-line-no">973</span><span id="line-973">    * Checks if a string contains a substring, ignoring case.</span>
<span class="source-line-no">974</span><span id="line-974">    *</span>
<span class="source-line-no">975</span><span id="line-975">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">976</span><span id="line-976">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">977</span><span id="line-977">    *    containsIgnoreCase(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;"world"&lt;/js&gt;);     &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">978</span><span id="line-978">    *    containsIgnoreCase(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;"WORLD"&lt;/js&gt;);     &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">979</span><span id="line-979">    *    containsIgnoreCase(&lt;js&gt;"hello world"&lt;/js&gt;, &lt;js&gt;"xyz"&lt;/js&gt;);       &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">980</span><span id="line-980">    * &lt;/p&gt;</span>
<span class="source-line-no">981</span><span id="line-981">    *</span>
<span class="source-line-no">982</span><span id="line-982">    * @param str The string to search in.</span>
<span class="source-line-no">983</span><span id="line-983">    * @param search The substring to search for.</span>
<span class="source-line-no">984</span><span id="line-984">    * @return &lt;jk&gt;true&lt;/jk&gt; if the string contains the substring (ignoring case), &lt;jk&gt;false&lt;/jk&gt; otherwise.</span>
<span class="source-line-no">985</span><span id="line-985">    */</span>
<span class="source-line-no">986</span><span id="line-986">   public static boolean containsIgnoreCase(String str, String search) {</span>
<span class="source-line-no">987</span><span id="line-987">      if (str == null || search == null)</span>
<span class="source-line-no">988</span><span id="line-988">         return false;</span>
<span class="source-line-no">989</span><span id="line-989">      return str.toLowerCase().contains(search.toLowerCase());</span>
<span class="source-line-no">990</span><span id="line-990">   }</span>
<span class="source-line-no">991</span><span id="line-991"></span>
<span class="source-line-no">992</span><span id="line-992">   /**</span>
<span class="source-line-no">993</span><span id="line-993">    * Counts the number of occurrences of the specified character in the specified string.</span>
<span class="source-line-no">994</span><span id="line-994">    *</span>
<span class="source-line-no">995</span><span id="line-995">    * &lt;p&gt;</span>
<span class="source-line-no">996</span><span id="line-996">    * Returns &lt;c&gt;0&lt;/c&gt; if the string is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">997</span><span id="line-997">    *</span>
<span class="source-line-no">998</span><span id="line-998">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">999</span><span id="line-999">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">1000</span><span id="line-1000">    *    countChars(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;'o'&lt;/js&gt;);   &lt;jc&gt;// 2&lt;/jc&gt;</span>
<span class="source-line-no">1001</span><span id="line-1001">    *    countChars(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;'x'&lt;/js&gt;);   &lt;jc&gt;// 0&lt;/jc&gt;</span>
<span class="source-line-no">1002</span><span id="line-1002">    *    countChars(&lt;jk&gt;null&lt;/jk&gt;, &lt;js&gt;'a'&lt;/js&gt;);            &lt;jc&gt;// 0&lt;/jc&gt;</span>
<span class="source-line-no">1003</span><span id="line-1003">    * &lt;/p&gt;</span>
<span class="source-line-no">1004</span><span id="line-1004">    *</span>
<span class="source-line-no">1005</span><span id="line-1005">    * @param s The string to check.</span>
<span class="source-line-no">1006</span><span id="line-1006">    * @param c The character to count.</span>
<span class="source-line-no">1007</span><span id="line-1007">    * @return The number of occurrences of the character, or &lt;c&gt;0&lt;/c&gt; if the string was &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">1008</span><span id="line-1008">    */</span>
<span class="source-line-no">1009</span><span id="line-1009">   public static int countChars(String s, char c) {</span>
<span class="source-line-no">1010</span><span id="line-1010">      var count = 0;</span>
<span class="source-line-no">1011</span><span id="line-1011">      if (s == null)</span>
<span class="source-line-no">1012</span><span id="line-1012">         return count;</span>
<span class="source-line-no">1013</span><span id="line-1013">      for (var i = 0; i &lt; s.length(); i++)</span>
<span class="source-line-no">1014</span><span id="line-1014">         if (s.charAt(i) == c)</span>
<span class="source-line-no">1015</span><span id="line-1015">            count++;</span>
<span class="source-line-no">1016</span><span id="line-1016">      return count;</span>
<span class="source-line-no">1017</span><span id="line-1017">   }</span>
<span class="source-line-no">1018</span><span id="line-1018"></span>
<span class="source-line-no">1019</span><span id="line-1019">   /**</span>
<span class="source-line-no">1020</span><span id="line-1020">    * Counts the number of occurrences of a substring within a string.</span>
<span class="source-line-no">1021</span><span id="line-1021">    *</span>
<span class="source-line-no">1022</span><span id="line-1022">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">1023</span><span id="line-1023">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">1024</span><span id="line-1024">    *    countMatches(&lt;js&gt;"hello world world"&lt;/js&gt;, &lt;js&gt;"world"&lt;/js&gt;);     &lt;jc&gt;// 2&lt;/jc&gt;</span>
<span class="source-line-no">1025</span><span id="line-1025">    *    countMatches(&lt;js&gt;"ababab"&lt;/js&gt;, &lt;js&gt;"ab"&lt;/js&gt;);                    &lt;jc&gt;// 3&lt;/jc&gt;</span>
<span class="source-line-no">1026</span><span id="line-1026">    *    countMatches(&lt;js&gt;"hello"&lt;/js&gt;, &lt;js&gt;"xyz"&lt;/js&gt;);                    &lt;jc&gt;// 0&lt;/jc&gt;</span>
<span class="source-line-no">1027</span><span id="line-1027">    * &lt;/p&gt;</span>
<span class="source-line-no">1028</span><span id="line-1028">    *</span>
<span class="source-line-no">1029</span><span id="line-1029">    * @param str The string to search in.</span>
<span class="source-line-no">1030</span><span id="line-1030">    * @param search The substring to count.</span>
<span class="source-line-no">1031</span><span id="line-1031">    * @return The number of occurrences, or &lt;c&gt;0&lt;/c&gt; if not found or if either parameter is &lt;jk&gt;null&lt;/jk&gt; or empty.</span>
<span class="source-line-no">1032</span><span id="line-1032">    */</span>
<span class="source-line-no">1033</span><span id="line-1033">   public static int countMatches(String str, String search) {</span>
<span class="source-line-no">1034</span><span id="line-1034">      if (isEmpty(str) || isEmpty(search))</span>
<span class="source-line-no">1035</span><span id="line-1035">         return 0;</span>
<span class="source-line-no">1036</span><span id="line-1036">      var count = 0;</span>
<span class="source-line-no">1037</span><span id="line-1037">      var index = 0;</span>
<span class="source-line-no">1038</span><span id="line-1038">      while ((index = str.indexOf(search, index)) != -1) {</span>
<span class="source-line-no">1039</span><span id="line-1039">         count++;</span>
<span class="source-line-no">1040</span><span id="line-1040">         index += search.length();</span>
<span class="source-line-no">1041</span><span id="line-1041">      }</span>
<span class="source-line-no">1042</span><span id="line-1042">      return count;</span>
<span class="source-line-no">1043</span><span id="line-1043">   }</span>
<span class="source-line-no">1044</span><span id="line-1044"></span>
<span class="source-line-no">1045</span><span id="line-1045">   /**</span>
<span class="source-line-no">1046</span><span id="line-1046">    * Debug method for rendering non-ASCII character sequences.</span>
<span class="source-line-no">1047</span><span id="line-1047">    *</span>
<span class="source-line-no">1048</span><span id="line-1048">    * &lt;p&gt;</span>
<span class="source-line-no">1049</span><span id="line-1049">    * Converts non-printable and non-ASCII characters (outside the range &lt;c&gt;0x20-0x7E&lt;/c&gt;) to hexadecimal</span>
<span class="source-line-no">1050</span><span id="line-1050">    * sequences in the format &lt;js&gt;"[hex]"&lt;/js&gt;. Printable ASCII characters are left unchanged.</span>
<span class="source-line-no">1051</span><span id="line-1051">    *</span>
<span class="source-line-no">1052</span><span id="line-1052">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">1053</span><span id="line-1053">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">1054</span><span id="line-1054">    *    decodeHex(&lt;js&gt;"Hello"&lt;/js&gt;);              &lt;jc&gt;// "Hello"&lt;/jc&gt;</span>
<span class="source-line-no">1055</span><span id="line-1055">    *    decodeHex(&lt;js&gt;"Hello\u0000World"&lt;/js&gt;);   &lt;jc&gt;// "Hello[0]World"&lt;/jc&gt;</span>
<span class="source-line-no">1056</span><span id="line-1056">    *    decodeHex(&lt;js&gt;"Hello\u00A9"&lt;/js&gt;);        &lt;jc&gt;// "Hello[a9]"&lt;/jc&gt;</span>
<span class="source-line-no">1057</span><span id="line-1057">    *    decodeHex(&lt;jk&gt;null&lt;/jk&gt;);                 &lt;jc&gt;// null&lt;/jc&gt;</span>
<span class="source-line-no">1058</span><span id="line-1058">    * &lt;/p&gt;</span>
<span class="source-line-no">1059</span><span id="line-1059">    *</span>
<span class="source-line-no">1060</span><span id="line-1060">    * @param s The string to decode.</span>
<span class="source-line-no">1061</span><span id="line-1061">    * @return A string with non-ASCII characters converted to &lt;js&gt;"[hex]"&lt;/js&gt; sequences, or &lt;jk&gt;null&lt;/jk&gt; if input is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">1062</span><span id="line-1062">    */</span>
<span class="source-line-no">1063</span><span id="line-1063">   public static String decodeHex(String s) {</span>
<span class="source-line-no">1064</span><span id="line-1064">      if (s == null)</span>
<span class="source-line-no">1065</span><span id="line-1065">         return null;</span>
<span class="source-line-no">1066</span><span id="line-1066">      var sb = new StringBuilder();</span>
<span class="source-line-no">1067</span><span id="line-1067">      for (var c : s.toCharArray()) {</span>
<span class="source-line-no">1068</span><span id="line-1068">         if (c &lt; ' ' || c &gt; '~')</span>
<span class="source-line-no">1069</span><span id="line-1069">            sb.append("[").append(Integer.toHexString(c)).append("]");</span>
<span class="source-line-no">1070</span><span id="line-1070">         else</span>
<span class="source-line-no">1071</span><span id="line-1071">            sb.append(c);</span>
<span class="source-line-no">1072</span><span id="line-1072">      }</span>
<span class="source-line-no">1073</span><span id="line-1073">      return sb.toString();</span>
<span class="source-line-no">1074</span><span id="line-1074">   }</span>
<span class="source-line-no">1075</span><span id="line-1075"></span>
<span class="source-line-no">1076</span><span id="line-1076">   /**</span>
<span class="source-line-no">1077</span><span id="line-1077">    * Decompresses a GZIP-compressed byte array into a UTF-8 string.</span>
<span class="source-line-no">1078</span><span id="line-1078">    *</span>
<span class="source-line-no">1079</span><span id="line-1079">    * &lt;p&gt;</span>
<span class="source-line-no">1080</span><span id="line-1080">    * This method is the inverse of {@link #compress(String)}. It takes a byte array that was compressed</span>
<span class="source-line-no">1081</span><span id="line-1081">    * using GZIP compression and decompresses it into a UTF-8 encoded string.</span>
<span class="source-line-no">1082</span><span id="line-1082">    *</span>
<span class="source-line-no">1083</span><span id="line-1083">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">1084</span><span id="line-1084">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">1085</span><span id="line-1085">    *    &lt;jc&gt;// Compress a string&lt;/jc&gt;</span>
<span class="source-line-no">1086</span><span id="line-1086">    *    byte[] &lt;jv&gt;compressed&lt;/jv&gt; = compress(&lt;js&gt;"Hello World"&lt;/js&gt;);</span>
<span class="source-line-no">1087</span><span id="line-1087">    *</span>
<span class="source-line-no">1088</span><span id="line-1088">    *    &lt;jc&gt;// Decompress it back&lt;/jc&gt;</span>
<span class="source-line-no">1089</span><span id="line-1089">    *    String &lt;jv&gt;decompressed&lt;/jv&gt; = decompress(&lt;jv&gt;compressed&lt;/jv&gt;);</span>
<span class="source-line-no">1090</span><span id="line-1090">    *    &lt;jc&gt;// Returns: "Hello World"&lt;/jc&gt;</span>
<span class="source-line-no">1091</span><span id="line-1091">    * &lt;/p&gt;</span>
<span class="source-line-no">1092</span><span id="line-1092">    *</span>
<span class="source-line-no">1093</span><span id="line-1093">    * @param is The GZIP-compressed byte array to decompress.</span>
<span class="source-line-no">1094</span><span id="line-1094">    * @return The decompressed UTF-8 string.</span>
<span class="source-line-no">1095</span><span id="line-1095">    * @throws Exception If decompression fails or the input is not valid GZIP data.</span>
<span class="source-line-no">1096</span><span id="line-1096">    * @see #compress(String)</span>
<span class="source-line-no">1097</span><span id="line-1097">    */</span>
<span class="source-line-no">1098</span><span id="line-1098">   public static String decompress(byte[] is) throws Exception {</span>
<span class="source-line-no">1099</span><span id="line-1099">      return read(new GZIPInputStream(new ByteArrayInputStream(is)));</span>
<span class="source-line-no">1100</span><span id="line-1100">   }</span>
<span class="source-line-no">1101</span><span id="line-1101"></span>
<span class="source-line-no">1102</span><span id="line-1102">   /**</span>
<span class="source-line-no">1103</span><span id="line-1103">    * Returns the specified string, or the default string if that string is &lt;jk&gt;null&lt;/jk&gt; or blank.</span>
<span class="source-line-no">1104</span><span id="line-1104">    *</span>
<span class="source-line-no">1105</span><span id="line-1105">    * @param str The string value to check.</span>
<span class="source-line-no">1106</span><span id="line-1106">    * @param defaultStr The default string to return if the string is &lt;jk&gt;null&lt;/jk&gt; or blank.</span>
<span class="source-line-no">1107</span><span id="line-1107">    * @return The string value, or the default string if the string is &lt;jk&gt;null&lt;/jk&gt; or blank.</span>
<span class="source-line-no">1108</span><span id="line-1108">    */</span>
<span class="source-line-no">1109</span><span id="line-1109">   public static String defaultIfBlank(String str, String defaultStr) {</span>
<span class="source-line-no">1110</span><span id="line-1110">      return isBlank(str) ? defaultStr : str;</span>
<span class="source-line-no">1111</span><span id="line-1111">   }</span>
<span class="source-line-no">1112</span><span id="line-1112"></span>
<span class="source-line-no">1113</span><span id="line-1113">   /**</span>
<span class="source-line-no">1114</span><span id="line-1114">    * Returns the specified string, or the default string if that string is &lt;jk&gt;null&lt;/jk&gt; or empty.</span>
<span class="source-line-no">1115</span><span id="line-1115">    *</span>
<span class="source-line-no">1116</span><span id="line-1116">    * @param str The string value to check.</span>
<span class="source-line-no">1117</span><span id="line-1117">    * @param defaultStr The default string to return if the string is &lt;jk&gt;null&lt;/jk&gt; or empty.</span>
<span class="source-line-no">1118</span><span id="line-1118">    * @return The string value, or the default string if the string is &lt;jk&gt;null&lt;/jk&gt; or empty.</span>
<span class="source-line-no">1119</span><span id="line-1119">    */</span>
<span class="source-line-no">1120</span><span id="line-1120">   public static String defaultIfEmpty(String str, String defaultStr) {</span>
<span class="source-line-no">1121</span><span id="line-1121">      return isEmpty(str) ? defaultStr : str;</span>
<span class="source-line-no">1122</span><span id="line-1122">   }</span>
<span class="source-line-no">1123</span><span id="line-1123"></span>
<span class="source-line-no">1124</span><span id="line-1124">   /**</span>
<span class="source-line-no">1125</span><span id="line-1125">    * Finds the position where the two strings first differ.</span>
<span class="source-line-no">1126</span><span id="line-1126">    *</span>
<span class="source-line-no">1127</span><span id="line-1127">    * &lt;p&gt;</span>
<span class="source-line-no">1128</span><span id="line-1128">    * This method compares strings character by character and returns the index of the first position</span>
<span class="source-line-no">1129</span><span id="line-1129">    * where they differ. If the strings are equal, returns &lt;c&gt;-1&lt;/c&gt;. If one string is a prefix of the other,</span>
<span class="source-line-no">1130</span><span id="line-1130">    * returns the length of the shorter string.</span>
<span class="source-line-no">1131</span><span id="line-1131">    *</span>
<span class="source-line-no">1132</span><span id="line-1132">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">1133</span><span id="line-1133">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">1134</span><span id="line-1134">    *    diffPosition(&lt;js&gt;"apple"&lt;/js&gt;, &lt;js&gt;"apple"&lt;/js&gt;);      &lt;jc&gt;// -1 (equal)&lt;/jc&gt;</span>
<span class="source-line-no">1135</span><span id="line-1135">    *    diffPosition(&lt;js&gt;"apple"&lt;/js&gt;, &lt;js&gt;"apricot"&lt;/js&gt;);    &lt;jc&gt;// 2 (differs at 'p' vs 'r')&lt;/jc&gt;</span>
<span class="source-line-no">1136</span><span id="line-1136">    *    diffPosition(&lt;js&gt;"apple"&lt;/js&gt;, &lt;js&gt;"app"&lt;/js&gt;);        &lt;jc&gt;// 3 (shorter string ends here)&lt;/jc&gt;</span>
<span class="source-line-no">1137</span><span id="line-1137">    *    diffPosition(&lt;js&gt;"app"&lt;/js&gt;, &lt;js&gt;"apple"&lt;/js&gt;);        &lt;jc&gt;// 3 (shorter string ends here)&lt;/jc&gt;</span>
<span class="source-line-no">1138</span><span id="line-1138">    * &lt;/p&gt;</span>
<span class="source-line-no">1139</span><span id="line-1139">    *</span>
<span class="source-line-no">1140</span><span id="line-1140">    * @param s1 The first string.</span>
<span class="source-line-no">1141</span><span id="line-1141">    * @param s2 The second string.</span>
<span class="source-line-no">1142</span><span id="line-1142">    * @return The position where the two strings differ, or &lt;c&gt;-1&lt;/c&gt; if they're equal.</span>
<span class="source-line-no">1143</span><span id="line-1143">    * @see #diffPositionIc(String, String)</span>
<span class="source-line-no">1144</span><span id="line-1144">    */</span>
<span class="source-line-no">1145</span><span id="line-1145">   public static int diffPosition(String s1, String s2) {</span>
<span class="source-line-no">1146</span><span id="line-1146">      s1 = emptyIfNull(s1);</span>
<span class="source-line-no">1147</span><span id="line-1147">      s2 = emptyIfNull(s2);</span>
<span class="source-line-no">1148</span><span id="line-1148">      var i = 0;</span>
<span class="source-line-no">1149</span><span id="line-1149">      var len = Math.min(s1.length(), s2.length());</span>
<span class="source-line-no">1150</span><span id="line-1150">      while (i &lt; len) {</span>
<span class="source-line-no">1151</span><span id="line-1151">         var j = s1.charAt(i) - s2.charAt(i);</span>
<span class="source-line-no">1152</span><span id="line-1152">         if (j != 0)</span>
<span class="source-line-no">1153</span><span id="line-1153">            return i;</span>
<span class="source-line-no">1154</span><span id="line-1154">         i++;</span>
<span class="source-line-no">1155</span><span id="line-1155">      }</span>
<span class="source-line-no">1156</span><span id="line-1156">      if (eq(s1.length(), s2.length()))</span>
<span class="source-line-no">1157</span><span id="line-1157">         return -1;</span>
<span class="source-line-no">1158</span><span id="line-1158">      return i;</span>
<span class="source-line-no">1159</span><span id="line-1159">   }</span>
<span class="source-line-no">1160</span><span id="line-1160"></span>
<span class="source-line-no">1161</span><span id="line-1161">   /**</span>
<span class="source-line-no">1162</span><span id="line-1162">    * Finds the position where the two strings first differ, ignoring case.</span>
<span class="source-line-no">1163</span><span id="line-1163">    *</span>
<span class="source-line-no">1164</span><span id="line-1164">    * &lt;p&gt;</span>
<span class="source-line-no">1165</span><span id="line-1165">    * This method compares strings character by character (case-insensitive) and returns the index of the first position</span>
<span class="source-line-no">1166</span><span id="line-1166">    * where they differ. If the strings are equal (ignoring case), returns &lt;c&gt;-1&lt;/c&gt;. If one string is a prefix of the other,</span>
<span class="source-line-no">1167</span><span id="line-1167">    * returns the length of the shorter string.</span>
<span class="source-line-no">1168</span><span id="line-1168">    *</span>
<span class="source-line-no">1169</span><span id="line-1169">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">1170</span><span id="line-1170">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">1171</span><span id="line-1171">    *    diffPositionIc(&lt;js&gt;"Apple"&lt;/js&gt;, &lt;js&gt;"apple"&lt;/js&gt;);      &lt;jc&gt;// -1 (equal ignoring case)&lt;/jc&gt;</span>
<span class="source-line-no">1172</span><span id="line-1172">    *    diffPositionIc(&lt;js&gt;"Apple"&lt;/js&gt;, &lt;js&gt;"Apricot"&lt;/js&gt;);    &lt;jc&gt;// 2 (differs at 'p' vs 'r')&lt;/jc&gt;</span>
<span class="source-line-no">1173</span><span id="line-1173">    *    diffPositionIc(&lt;js&gt;"APPLE"&lt;/js&gt;, &lt;js&gt;"app"&lt;/js&gt;);        &lt;jc&gt;// 3 (shorter string ends here)&lt;/jc&gt;</span>
<span class="source-line-no">1174</span><span id="line-1174">    * &lt;/p&gt;</span>
<span class="source-line-no">1175</span><span id="line-1175">    *</span>
<span class="source-line-no">1176</span><span id="line-1176">    * @param s1 The first string.</span>
<span class="source-line-no">1177</span><span id="line-1177">    * @param s2 The second string.</span>
<span class="source-line-no">1178</span><span id="line-1178">    * @return The position where the two strings differ, or &lt;c&gt;-1&lt;/c&gt; if they're equal (ignoring case).</span>
<span class="source-line-no">1179</span><span id="line-1179">    * @see #diffPosition(String, String)</span>
<span class="source-line-no">1180</span><span id="line-1180">    */</span>
<span class="source-line-no">1181</span><span id="line-1181">   public static int diffPositionIc(String s1, String s2) {</span>
<span class="source-line-no">1182</span><span id="line-1182">      s1 = emptyIfNull(s1);</span>
<span class="source-line-no">1183</span><span id="line-1183">      s2 = emptyIfNull(s2);</span>
<span class="source-line-no">1184</span><span id="line-1184">      var i = 0;</span>
<span class="source-line-no">1185</span><span id="line-1185">      var len = Math.min(s1.length(), s2.length());</span>
<span class="source-line-no">1186</span><span id="line-1186">      while (i &lt; len) {</span>
<span class="source-line-no">1187</span><span id="line-1187">         var j = toLowerCase(s1.charAt(i)) - toLowerCase(s2.charAt(i));</span>
<span class="source-line-no">1188</span><span id="line-1188">         if (j != 0)</span>
<span class="source-line-no">1189</span><span id="line-1189">            return i;</span>
<span class="source-line-no">1190</span><span id="line-1190">         i++;</span>
<span class="source-line-no">1191</span><span id="line-1191">      }</span>
<span class="source-line-no">1192</span><span id="line-1192">      if (eq(s1.length(), s2.length()))</span>
<span class="source-line-no">1193</span><span id="line-1193">         return -1;</span>
<span class="source-line-no">1194</span><span id="line-1194">      return i;</span>
<span class="source-line-no">1195</span><span id="line-1195">   }</span>
<span class="source-line-no">1196</span><span id="line-1196"></span>
<span class="source-line-no">1197</span><span id="line-1197">   /**</span>
<span class="source-line-no">1198</span><span id="line-1198">    * Removes duplicate elements from a string array, preserving order.</span>
<span class="source-line-no">1199</span><span id="line-1199">    *</span>
<span class="source-line-no">1200</span><span id="line-1200">    * &lt;p&gt;</span>
<span class="source-line-no">1201</span><span id="line-1201">    * Returns &lt;jk&gt;null&lt;/jk&gt; if the array is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">1202</span><span id="line-1202">    * Uses a {@link LinkedHashSet} to preserve insertion order while removing duplicates.</span>
<span class="source-line-no">1203</span><span id="line-1203">    *</span>
<span class="source-line-no">1204</span><span id="line-1204">    * &lt;h5 class='section'&gt;Examples:&lt;/h5&gt;</span>
<span class="source-line-no">1205</span><span id="line-1205">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">1206</span><span id="line-1206">    *    String[] &lt;jv&gt;array&lt;/jv&gt; = {&lt;js&gt;"foo"&lt;/js&gt;, &lt;js&gt;"bar"&lt;/js&gt;, &lt;js&gt;"foo"&lt;/js&gt;, &lt;js&gt;"baz"&lt;/js&gt;, &lt;js&gt;"bar"&lt;/js&gt;};</span>
<span class="source-line-no">1207</span><span id="line-1207">    *    String[] &lt;jv&gt;unique&lt;/jv&gt; = distinct(&lt;jv&gt;array&lt;/jv&gt;);</span>
<span class="source-line-no">1208</span><span id="line-1208">    *    &lt;jc&gt;// Returns: ["foo", "bar", "baz"]&lt;/jc&gt;</span>
<span class="source-line-no">1209</span><span id="line-1209">    * &lt;/p&gt;</span>
<span class="source-line-no">1210</span><span id="line-1210">    *</span>
<span class="source-line-no">1211</span><span id="line-1211">    * @param array The array to process. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">1212</span><span id="line-1212">    * @return A new array with duplicate elements removed, or &lt;jk&gt;null&lt;/jk&gt; if the array was &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">1213</span><span id="line-1213">    */</span>
<span class="source-line-no">1214</span><span id="line-1214">   public static String[] distinct(String[] array) {</span>
<span class="source-line-no">1215</span><span id="line-1215">      if (array == null)</span>
<span class="source-line-no">1216</span><span id="line-1216">         return null;  // NOSONAR - Intentional.</span>
<span class="source-line-no">1217</span><span id="line-1217">      return Arrays.stream(array).collect(Collectors.toCollection(LinkedHashSet::new)).toArray(new String[0]);</span>
<span class="source-line-no">1218</span><span id="line-1218">   }</span>
<span class="source-line-no">1219</span><span id="line-1219"></span>
<span class="source-line-no">1220</span><span id="line-1220">   /**</span>
<span class="source-line-no">1221</span><span id="line-1221">    * Generates a Double Metaphone code for a string.</span>
<span class="source-line-no">1222</span><span id="line-1222">    *</span>
<span class="source-line-no">1223</span><span id="line-1223">    * &lt;p&gt;</span>
<span class="source-line-no">1224</span><span id="line-1224">    * Double Metaphone is an improved version of Metaphone that returns two codes:</span>
<span class="source-line-no">1225</span><span id="line-1225">    * a primary code and an alternate code. This handles more edge cases and variations.</span>
<span class="source-line-no">1226</span><span id="line-1226">    *</span>
<span class="source-line-no">1227</span><span id="line-1227">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">1228</span><span id="line-1228">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">1229</span><span id="line-1229">    *    doubleMetaphone(&lt;js&gt;"Smith"&lt;/js&gt;);   &lt;jc&gt;// "SM0"&lt;/jc&gt;</span>
<span class="source-line-no">1230</span><span id="line-1230">    *    doubleMetaphone(&lt;js&gt;"Schmidt"&lt;/js&gt;); &lt;jc&gt;// "XMT"&lt;/jc&gt;</span>
<span class="source-line-no">1231</span><span id="line-1231">    * &lt;/p&gt;</span>
<span class="source-line-no">1232</span><span id="line-1232">    *</span>
<span class="source-line-no">1233</span><span id="line-1233">    * @param str The string to generate a Double Metaphone code for. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">1234</span><span id="line-1234">    * @return An array with two elements: [primary code, alternate code]. Returns &lt;jk&gt;null&lt;/jk&gt; if input is &lt;jk&gt;null&lt;/jk&gt; or empty.</span>
<span class="source-line-no">1235</span><span id="line-1235">    */</span>
<span class="source-line-no">1236</span><span id="line-1236">   public static String[] doubleMetaphone(String str) {</span>
<span class="source-line-no">1237</span><span id="line-1237">      if (isEmpty(str))</span>
<span class="source-line-no">1238</span><span id="line-1238">         return null;</span>
<span class="source-line-no">1239</span><span id="line-1239"></span>
<span class="source-line-no">1240</span><span id="line-1240">      // For simplicity, return the same code for both primary and alternate</span>
<span class="source-line-no">1241</span><span id="line-1241">      // A full Double Metaphone implementation would be much more complex</span>
<span class="source-line-no">1242</span><span id="line-1242">      var primary = metaphone(str);</span>
<span class="source-line-no">1243</span><span id="line-1243"></span>
<span class="source-line-no">1244</span><span id="line-1244">      // Generate alternate code (simplified - full implementation would have different rules)</span>
<span class="source-line-no">1245</span><span id="line-1245">      var alternate = primary;</span>
<span class="source-line-no">1246</span><span id="line-1246"></span>
<span class="source-line-no">1247</span><span id="line-1247">      return a(primary, alternate);</span>
<span class="source-line-no">1248</span><span id="line-1248">   }</span>
<span class="source-line-no">1249</span><span id="line-1249"></span>
<span class="source-line-no">1250</span><span id="line-1250">   /**</span>
<span class="source-line-no">1251</span><span id="line-1251">    * Returns the specified string, or an empty string if that string is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">1252</span><span id="line-1252">    *</span>
<span class="source-line-no">1253</span><span id="line-1253">    * @param str The string value to check.</span>
<span class="source-line-no">1254</span><span id="line-1254">    * @return The string value, or an empty string if the string is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">1255</span><span id="line-1255">    */</span>
<span class="source-line-no">1256</span><span id="line-1256">   public static String emptyIfNull(String str) {</span>
<span class="source-line-no">1257</span><span id="line-1257">      return str == null ? "" : str;</span>
<span class="source-line-no">1258</span><span id="line-1258">   }</span>
<span class="source-line-no">1259</span><span id="line-1259"></span>
<span class="source-line-no">1260</span><span id="line-1260">   /**</span>
<span class="source-line-no">1261</span><span id="line-1261">    * Checks if a string ends with the specified character.</span>
<span class="source-line-no">1262</span><span id="line-1262">    *</span>
<span class="source-line-no">1263</span><span id="line-1263">    * &lt;p&gt;</span>
<span class="source-line-no">1264</span><span id="line-1264">    * This is a null-safe operation. Returns &lt;jk&gt;false&lt;/jk&gt; if the string is &lt;jk&gt;null&lt;/jk&gt; or empty.</span>
<span class="source-line-no">1265</span><span id="line-1265">    *</span>
<span class="source-line-no">1266</span><span id="line-1266">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">1267</span><span id="line-1267">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">1268</span><span id="line-1268">    *    endsWith(&lt;js&gt;"Hello"&lt;/js&gt;, &lt;js&gt;'o'&lt;/js&gt;);     &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">1269</span><span id="line-1269">    *    endsWith(&lt;js&gt;"Hello"&lt;/js&gt;, &lt;js&gt;'H'&lt;/js&gt;);     &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">1270</span><span id="line-1270">    *    endsWith(&lt;jk&gt;null&lt;/jk&gt;, &lt;js&gt;'o'&lt;/js&gt;);        &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">1271</span><span id="line-1271">    *    endsWith(&lt;js&gt;""&lt;/js&gt;, &lt;js&gt;'o'&lt;/js&gt;);          &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">1272</span><span id="line-1272">    * &lt;/p&gt;</span>
<span class="source-line-no">1273</span><span id="line-1273">    *</span>
<span class="source-line-no">1274</span><span id="line-1274">    * @param s The string to check. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">1275</span><span id="line-1275">    * @param c The character to check for.</span>
<span class="source-line-no">1276</span><span id="line-1276">    * @return &lt;jk&gt;true&lt;/jk&gt; if the specified string is not &lt;jk&gt;null&lt;/jk&gt; and ends with the specified character.</span>
<span class="source-line-no">1277</span><span id="line-1277">    * @see #endsWith(String, String)</span>
<span class="source-line-no">1278</span><span id="line-1278">    * @see #endsWithAny(String, char...)</span>
<span class="source-line-no">1279</span><span id="line-1279">    * @see String#endsWith(String)</span>
<span class="source-line-no">1280</span><span id="line-1280">    */</span>
<span class="source-line-no">1281</span><span id="line-1281">   public static boolean endsWith(String s, char c) {</span>
<span class="source-line-no">1282</span><span id="line-1282">      if (nn(s)) {</span>
<span class="source-line-no">1283</span><span id="line-1283">         var i = s.length();</span>
<span class="source-line-no">1284</span><span id="line-1284">         if (i &gt; 0)</span>
<span class="source-line-no">1285</span><span id="line-1285">            return s.charAt(i - 1) == c;</span>
<span class="source-line-no">1286</span><span id="line-1286">      }</span>
<span class="source-line-no">1287</span><span id="line-1287">      return false;</span>
<span class="source-line-no">1288</span><span id="line-1288">   }</span>
<span class="source-line-no">1289</span><span id="line-1289"></span>
<span class="source-line-no">1290</span><span id="line-1290">   /**</span>
<span class="source-line-no">1291</span><span id="line-1291">    * Checks if a string ends with the specified string.</span>
<span class="source-line-no">1292</span><span id="line-1292">    *</span>
<span class="source-line-no">1293</span><span id="line-1293">    * &lt;p&gt;</span>
<span class="source-line-no">1294</span><span id="line-1294">    * This is a null-safe operation. Returns &lt;jk&gt;false&lt;/jk&gt; if the string is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">1295</span><span id="line-1295">    * Otherwise behaves the same as {@link String#endsWith(String)}.</span>
<span class="source-line-no">1296</span><span id="line-1296">    *</span>
<span class="source-line-no">1297</span><span id="line-1297">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">1298</span><span id="line-1298">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">1299</span><span id="line-1299">    *    endsWith(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;"World"&lt;/js&gt;);   &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">1300</span><span id="line-1300">    *    endsWith(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;"Hello"&lt;/js&gt;);   &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">1301</span><span id="line-1301">    *    endsWith(&lt;jk&gt;null&lt;/jk&gt;, &lt;js&gt;"World"&lt;/js&gt;);            &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">1302</span><span id="line-1302">    * &lt;/p&gt;</span>
<span class="source-line-no">1303</span><span id="line-1303">    *</span>
<span class="source-line-no">1304</span><span id="line-1304">    * @param s The string to check. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">1305</span><span id="line-1305">    * @param suffix The suffix to check for.</span>
<span class="source-line-no">1306</span><span id="line-1306">    * @return &lt;jk&gt;true&lt;/jk&gt; if the string ends with the specified suffix.</span>
<span class="source-line-no">1307</span><span id="line-1307">    * @see #endsWith(String, char)</span>
<span class="source-line-no">1308</span><span id="line-1308">    * @see #endsWithAny(String, String...)</span>
<span class="source-line-no">1309</span><span id="line-1309">    * @see String#endsWith(String)</span>
<span class="source-line-no">1310</span><span id="line-1310">    */</span>
<span class="source-line-no">1311</span><span id="line-1311">   public static boolean endsWith(String s, String suffix) {</span>
<span class="source-line-no">1312</span><span id="line-1312">      return s != null &amp;&amp; s.endsWith(suffix);</span>
<span class="source-line-no">1313</span><span id="line-1313">   }</span>
<span class="source-line-no">1314</span><span id="line-1314"></span>
<span class="source-line-no">1315</span><span id="line-1315">   /**</span>
<span class="source-line-no">1316</span><span id="line-1316">    * Checks if a string ends with any of the specified characters.</span>
<span class="source-line-no">1317</span><span id="line-1317">    *</span>
<span class="source-line-no">1318</span><span id="line-1318">    * &lt;p&gt;</span>
<span class="source-line-no">1319</span><span id="line-1319">    * This is a null-safe operation. Returns &lt;jk&gt;false&lt;/jk&gt; if:</span>
<span class="source-line-no">1320</span><span id="line-1320">    * &lt;ul&gt;</span>
<span class="source-line-no">1321</span><span id="line-1321">    *   &lt;li&gt;The string is &lt;jk&gt;null&lt;/jk&gt; or empty&lt;/li&gt;</span>
<span class="source-line-no">1322</span><span id="line-1322">    *   &lt;li&gt;The characters array is &lt;jk&gt;null&lt;/jk&gt; or empty&lt;/li&gt;</span>
<span class="source-line-no">1323</span><span id="line-1323">    *   &lt;li&gt;The string does not end with any of the specified characters&lt;/li&gt;</span>
<span class="source-line-no">1324</span><span id="line-1324">    * &lt;/ul&gt;</span>
<span class="source-line-no">1325</span><span id="line-1325">    *</span>
<span class="source-line-no">1326</span><span id="line-1326">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">1327</span><span id="line-1327">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">1328</span><span id="line-1328">    *    endsWithAny(&lt;js&gt;"Hello"&lt;/js&gt;, &lt;js&gt;'o'&lt;/js&gt;, &lt;js&gt;'x'&lt;/js&gt;);     &lt;jc&gt;// true (ends with 'o')&lt;/jc&gt;</span>
<span class="source-line-no">1329</span><span id="line-1329">    *    endsWithAny(&lt;js&gt;"Hello"&lt;/js&gt;, &lt;js&gt;'x'&lt;/js&gt;, &lt;js&gt;'y'&lt;/js&gt;);     &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">1330</span><span id="line-1330">    *    endsWithAny(&lt;jk&gt;null&lt;/jk&gt;, &lt;js&gt;'o'&lt;/js&gt;);                      &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">1331</span><span id="line-1331">    * &lt;/p&gt;</span>
<span class="source-line-no">1332</span><span id="line-1332">    *</span>
<span class="source-line-no">1333</span><span id="line-1333">    * @param s The string to check. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">1334</span><span id="line-1334">    * @param c The characters to check for.</span>
<span class="source-line-no">1335</span><span id="line-1335">    * @return &lt;jk&gt;true&lt;/jk&gt; if the string ends with any of the specified characters.</span>
<span class="source-line-no">1336</span><span id="line-1336">    * @see #endsWith(String, char)</span>
<span class="source-line-no">1337</span><span id="line-1337">    * @see #endsWithAny(String, String...)</span>
<span class="source-line-no">1338</span><span id="line-1338">    */</span>
<span class="source-line-no">1339</span><span id="line-1339">   public static boolean endsWithAny(String s, char...c) {</span>
<span class="source-line-no">1340</span><span id="line-1340">      if (nn(s)) {</span>
<span class="source-line-no">1341</span><span id="line-1341">         var i = s.length();</span>
<span class="source-line-no">1342</span><span id="line-1342">         if (i &gt; 0) {</span>
<span class="source-line-no">1343</span><span id="line-1343">            var c2 = s.charAt(i - 1);</span>
<span class="source-line-no">1344</span><span id="line-1344">            for (var cc : c)</span>
<span class="source-line-no">1345</span><span id="line-1345">               if (c2 == cc)</span>
<span class="source-line-no">1346</span><span id="line-1346">                  return true;</span>
<span class="source-line-no">1347</span><span id="line-1347">         }</span>
<span class="source-line-no">1348</span><span id="line-1348">      }</span>
<span class="source-line-no">1349</span><span id="line-1349">      return false;</span>
<span class="source-line-no">1350</span><span id="line-1350">   }</span>
<span class="source-line-no">1351</span><span id="line-1351"></span>
<span class="source-line-no">1352</span><span id="line-1352">   /**</span>
<span class="source-line-no">1353</span><span id="line-1353">    * Checks if a string ends with any of the specified strings.</span>
<span class="source-line-no">1354</span><span id="line-1354">    *</span>
<span class="source-line-no">1355</span><span id="line-1355">    * &lt;p&gt;</span>
<span class="source-line-no">1356</span><span id="line-1356">    * This is a null-safe operation. Returns &lt;jk&gt;false&lt;/jk&gt; if:</span>
<span class="source-line-no">1357</span><span id="line-1357">    * &lt;ul&gt;</span>
<span class="source-line-no">1358</span><span id="line-1358">    *   &lt;li&gt;The string is &lt;jk&gt;null&lt;/jk&gt;&lt;/li&gt;</span>
<span class="source-line-no">1359</span><span id="line-1359">    *   &lt;li&gt;The suffixes array is &lt;jk&gt;null&lt;/jk&gt; or empty&lt;/li&gt;</span>
<span class="source-line-no">1360</span><span id="line-1360">    *   &lt;li&gt;The string does not end with any of the specified suffixes&lt;/li&gt;</span>
<span class="source-line-no">1361</span><span id="line-1361">    * &lt;/ul&gt;</span>
<span class="source-line-no">1362</span><span id="line-1362">    *</span>
<span class="source-line-no">1363</span><span id="line-1363">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">1364</span><span id="line-1364">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">1365</span><span id="line-1365">    *    endsWithAny(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;"World"&lt;/js&gt;, &lt;js&gt;"Foo"&lt;/js&gt;);   &lt;jc&gt;// true (ends with "World")&lt;/jc&gt;</span>
<span class="source-line-no">1366</span><span id="line-1366">    *    endsWithAny(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;"Hello"&lt;/js&gt;, &lt;js&gt;"Foo"&lt;/js&gt;);   &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">1367</span><span id="line-1367">    *    endsWithAny(&lt;jk&gt;null&lt;/jk&gt;, &lt;js&gt;"World"&lt;/js&gt;);                            &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">1368</span><span id="line-1368">    * &lt;/p&gt;</span>
<span class="source-line-no">1369</span><span id="line-1369">    *</span>
<span class="source-line-no">1370</span><span id="line-1370">    * @param s The string to check. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">1371</span><span id="line-1371">    * @param suffixes The suffixes to check for.</span>
<span class="source-line-no">1372</span><span id="line-1372">    * @return &lt;jk&gt;true&lt;/jk&gt; if the string ends with any of the specified suffixes.</span>
<span class="source-line-no">1373</span><span id="line-1373">    * @see #endsWith(String, String)</span>
<span class="source-line-no">1374</span><span id="line-1374">    * @see #endsWithAny(String, char...)</span>
<span class="source-line-no">1375</span><span id="line-1375">    * @see String#endsWith(String)</span>
<span class="source-line-no">1376</span><span id="line-1376">    */</span>
<span class="source-line-no">1377</span><span id="line-1377">   public static boolean endsWithAny(String s, String...suffixes) {</span>
<span class="source-line-no">1378</span><span id="line-1378">      if (s == null || suffixes == null || suffixes.length == 0)</span>
<span class="source-line-no">1379</span><span id="line-1379">         return false;</span>
<span class="source-line-no">1380</span><span id="line-1380">      for (var suffix : suffixes) {</span>
<span class="source-line-no">1381</span><span id="line-1381">         if (s.endsWith(suffix))</span>
<span class="source-line-no">1382</span><span id="line-1382">            return true;</span>
<span class="source-line-no">1383</span><span id="line-1383">      }</span>
<span class="source-line-no">1384</span><span id="line-1384">      return false;</span>
<span class="source-line-no">1385</span><span id="line-1385">   }</span>
<span class="source-line-no">1386</span><span id="line-1386"></span>
<span class="source-line-no">1387</span><span id="line-1387">   /**</span>
<span class="source-line-no">1388</span><span id="line-1388">    * Checks if a string ends with a suffix, ignoring case.</span>
<span class="source-line-no">1389</span><span id="line-1389">    *</span>
<span class="source-line-no">1390</span><span id="line-1390">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">1391</span><span id="line-1391">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">1392</span><span id="line-1392">    *    endsWithIgnoreCase(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;"world"&lt;/js&gt;);     &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">1393</span><span id="line-1393">    *    endsWithIgnoreCase(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;"WORLD"&lt;/js&gt;);     &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">1394</span><span id="line-1394">    *    endsWithIgnoreCase(&lt;js&gt;"hello world"&lt;/js&gt;, &lt;js&gt;"hello"&lt;/js&gt;);     &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">1395</span><span id="line-1395">    * &lt;/p&gt;</span>
<span class="source-line-no">1396</span><span id="line-1396">    *</span>
<span class="source-line-no">1397</span><span id="line-1397">    * @param str The string to check.</span>
<span class="source-line-no">1398</span><span id="line-1398">    * @param suffix The suffix to check for.</span>
<span class="source-line-no">1399</span><span id="line-1399">    * @return &lt;jk&gt;true&lt;/jk&gt; if the string ends with the suffix (ignoring case), &lt;jk&gt;false&lt;/jk&gt; otherwise.</span>
<span class="source-line-no">1400</span><span id="line-1400">    */</span>
<span class="source-line-no">1401</span><span id="line-1401">   public static boolean endsWithIgnoreCase(String str, String suffix) {</span>
<span class="source-line-no">1402</span><span id="line-1402">      if (str == null || suffix == null)</span>
<span class="source-line-no">1403</span><span id="line-1403">         return false;</span>
<span class="source-line-no">1404</span><span id="line-1404">      return str.toLowerCase().endsWith(suffix.toLowerCase());</span>
<span class="source-line-no">1405</span><span id="line-1405">   }</span>
<span class="source-line-no">1406</span><span id="line-1406"></span>
<span class="source-line-no">1407</span><span id="line-1407">   /**</span>
<span class="source-line-no">1408</span><span id="line-1408">    * Calculates the entropy of a string.</span>
<span class="source-line-no">1409</span><span id="line-1409">    *</span>
<span class="source-line-no">1410</span><span id="line-1410">    * &lt;p&gt;</span>
<span class="source-line-no">1411</span><span id="line-1411">    * Entropy measures the randomness or information content of a string.</span>
<span class="source-line-no">1412</span><span id="line-1412">    * Higher entropy indicates more randomness. The formula used is:</span>
<span class="source-line-no">1413</span><span id="line-1413">    * &lt;c&gt;H(X) = - P(x) * log2(P(x))&lt;/c&gt;</span>
<span class="source-line-no">1414</span><span id="line-1414">    * where P(x) is the probability of character x.</span>
<span class="source-line-no">1415</span><span id="line-1415">    *</span>
<span class="source-line-no">1416</span><span id="line-1416">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">1417</span><span id="line-1417">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">1418</span><span id="line-1418">    *    entropy(&lt;js&gt;"aaaa"&lt;/js&gt;);        &lt;jc&gt;// 0.0 (no randomness)&lt;/jc&gt;</span>
<span class="source-line-no">1419</span><span id="line-1419">    *    entropy(&lt;js&gt;"abcd"&lt;/js&gt;);        &lt;jc&gt;// 2.0 (high randomness)&lt;/jc&gt;</span>
<span class="source-line-no">1420</span><span id="line-1420">    *    entropy(&lt;js&gt;"hello"&lt;/js&gt;);       &lt;jc&gt;// ~2.32&lt;/jc&gt;</span>
<span class="source-line-no">1421</span><span id="line-1421">    * &lt;/p&gt;</span>
<span class="source-line-no">1422</span><span id="line-1422">    *</span>
<span class="source-line-no">1423</span><span id="line-1423">    * @param str The string to calculate entropy for. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">1424</span><span id="line-1424">    * @return The entropy value (0.0 or higher), or &lt;c&gt;0.0&lt;/c&gt; if the string is &lt;jk&gt;null&lt;/jk&gt; or empty.</span>
<span class="source-line-no">1425</span><span id="line-1425">    */</span>
<span class="source-line-no">1426</span><span id="line-1426">   public static double entropy(String str) {</span>
<span class="source-line-no">1427</span><span id="line-1427">      if (isEmpty(str))</span>
<span class="source-line-no">1428</span><span id="line-1428">         return 0.0;</span>
<span class="source-line-no">1429</span><span id="line-1429"></span>
<span class="source-line-no">1430</span><span id="line-1430">      var length = str.length();</span>
<span class="source-line-no">1431</span><span id="line-1431"></span>
<span class="source-line-no">1432</span><span id="line-1432">      // Count character frequencies</span>
<span class="source-line-no">1433</span><span id="line-1433">      var charCounts = new int[Character.MAX_VALUE + 1];</span>
<span class="source-line-no">1434</span><span id="line-1434">      for (var i = 0; i &lt; length; i++) {</span>
<span class="source-line-no">1435</span><span id="line-1435">         charCounts[str.charAt(i)]++;</span>
<span class="source-line-no">1436</span><span id="line-1436">      }</span>
<span class="source-line-no">1437</span><span id="line-1437"></span>
<span class="source-line-no">1438</span><span id="line-1438">      // Calculate entropy</span>
<span class="source-line-no">1439</span><span id="line-1439">      var entropy = 0.0;</span>
<span class="source-line-no">1440</span><span id="line-1440">      for (var count : charCounts) {</span>
<span class="source-line-no">1441</span><span id="line-1441">         if (count &gt; 0) {</span>
<span class="source-line-no">1442</span><span id="line-1442">            var probability = (double)count / length;</span>
<span class="source-line-no">1443</span><span id="line-1443">            entropy -= probability * (Math.log(probability) / Math.log(2.0));</span>
<span class="source-line-no">1444</span><span id="line-1444">         }</span>
<span class="source-line-no">1445</span><span id="line-1445">      }</span>
<span class="source-line-no">1446</span><span id="line-1446"></span>
<span class="source-line-no">1447</span><span id="line-1447">      return entropy;</span>
<span class="source-line-no">1448</span><span id="line-1448">   }</span>
<span class="source-line-no">1449</span><span id="line-1449"></span>
<span class="source-line-no">1450</span><span id="line-1450">   /**</span>
<span class="source-line-no">1451</span><span id="line-1451">    * Tests two objects for case-insensitive string equality.</span>
<span class="source-line-no">1452</span><span id="line-1452">    *</span>
<span class="source-line-no">1453</span><span id="line-1453">    * &lt;p&gt;</span>
<span class="source-line-no">1454</span><span id="line-1454">    * Converts both objects to strings using {@link Object#toString()} before comparison.</span>
<span class="source-line-no">1455</span><span id="line-1455">    * This method handles &lt;jk&gt;null&lt;/jk&gt; values gracefully:</span>
<span class="source-line-no">1456</span><span id="line-1456">    * &lt;ul&gt;</span>
<span class="source-line-no">1457</span><span id="line-1457">    *   &lt;li&gt;Both &lt;jk&gt;null&lt;/jk&gt;  returns &lt;jk&gt;true&lt;/jk&gt;&lt;/li&gt;</span>
<span class="source-line-no">1458</span><span id="line-1458">    *   &lt;li&gt;One &lt;jk&gt;null&lt;/jk&gt;  returns &lt;jk&gt;false&lt;/jk&gt;&lt;/li&gt;</span>
<span class="source-line-no">1459</span><span id="line-1459">    *   &lt;li&gt;Neither &lt;jk&gt;null&lt;/jk&gt;  compares string representations ignoring case&lt;/li&gt;</span>
<span class="source-line-no">1460</span><span id="line-1460">    * &lt;/ul&gt;</span>
<span class="source-line-no">1461</span><span id="line-1461">    *</span>
<span class="source-line-no">1462</span><span id="line-1462">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">1463</span><span id="line-1463">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">1464</span><span id="line-1464">    *    equalsIgnoreCase(&lt;js&gt;"Hello"&lt;/js&gt;, &lt;js&gt;"HELLO"&lt;/js&gt;);     &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">1465</span><span id="line-1465">    *    equalsIgnoreCase(&lt;js&gt;"Hello"&lt;/js&gt;, &lt;js&gt;"World"&lt;/js&gt;);     &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">1466</span><span id="line-1466">    *    equalsIgnoreCase(&lt;jk&gt;null&lt;/jk&gt;, &lt;jk&gt;null&lt;/jk&gt;);            &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">1467</span><span id="line-1467">    *    equalsIgnoreCase(&lt;js&gt;"Hello"&lt;/js&gt;, &lt;jk&gt;null&lt;/jk&gt;);         &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">1468</span><span id="line-1468">    *    equalsIgnoreCase(123, &lt;js&gt;"123"&lt;/js&gt;);                    &lt;jc&gt;// true (converts 123 to "123")&lt;/jc&gt;</span>
<span class="source-line-no">1469</span><span id="line-1469">    * &lt;/p&gt;</span>
<span class="source-line-no">1470</span><span id="line-1470">    *</span>
<span class="source-line-no">1471</span><span id="line-1471">    * @param a Object 1.</span>
<span class="source-line-no">1472</span><span id="line-1472">    * @param b Object 2.</span>
<span class="source-line-no">1473</span><span id="line-1473">    * @return &lt;jk&gt;true&lt;/jk&gt; if both objects are equal ignoring case.</span>
<span class="source-line-no">1474</span><span id="line-1474">    * @see #equalsIgnoreCase(String, String)</span>
<span class="source-line-no">1475</span><span id="line-1475">    * @see Utils#eqic(Object, Object)</span>
<span class="source-line-no">1476</span><span id="line-1476">    */</span>
<span class="source-line-no">1477</span><span id="line-1477">   public static boolean equalsIgnoreCase(Object a, Object b) {</span>
<span class="source-line-no">1478</span><span id="line-1478">      if (a == null &amp;&amp; b == null)</span>
<span class="source-line-no">1479</span><span id="line-1479">         return true;</span>
<span class="source-line-no">1480</span><span id="line-1480">      if (a == null || b == null)</span>
<span class="source-line-no">1481</span><span id="line-1481">         return false;</span>
<span class="source-line-no">1482</span><span id="line-1482">      return a.toString().equalsIgnoreCase(b.toString());</span>
<span class="source-line-no">1483</span><span id="line-1483">   }</span>
<span class="source-line-no">1484</span><span id="line-1484"></span>
<span class="source-line-no">1485</span><span id="line-1485">   /**</span>
<span class="source-line-no">1486</span><span id="line-1486">    * Tests two strings for case-insensitive equality, but gracefully handles nulls.</span>
<span class="source-line-no">1487</span><span id="line-1487">    *</span>
<span class="source-line-no">1488</span><span id="line-1488">    * &lt;p&gt;</span>
<span class="source-line-no">1489</span><span id="line-1489">    * This method handles &lt;jk&gt;null&lt;/jk&gt; values gracefully:</span>
<span class="source-line-no">1490</span><span id="line-1490">    * &lt;ul&gt;</span>
<span class="source-line-no">1491</span><span id="line-1491">    *   &lt;li&gt;Both &lt;jk&gt;null&lt;/jk&gt;  returns &lt;jk&gt;true&lt;/jk&gt; (same reference check)&lt;/li&gt;</span>
<span class="source-line-no">1492</span><span id="line-1492">    *   &lt;li&gt;One &lt;jk&gt;null&lt;/jk&gt;  returns &lt;jk&gt;false&lt;/jk&gt;&lt;/li&gt;</span>
<span class="source-line-no">1493</span><span id="line-1493">    *   &lt;li&gt;Neither &lt;jk&gt;null&lt;/jk&gt;  compares strings ignoring case&lt;/li&gt;</span>
<span class="source-line-no">1494</span><span id="line-1494">    * &lt;/ul&gt;</span>
<span class="source-line-no">1495</span><span id="line-1495">    *</span>
<span class="source-line-no">1496</span><span id="line-1496">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">1497</span><span id="line-1497">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">1498</span><span id="line-1498">    *    equalsIgnoreCase(&lt;js&gt;"Hello"&lt;/js&gt;, &lt;js&gt;"hello"&lt;/js&gt;);     &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">1499</span><span id="line-1499">    *    equalsIgnoreCase(&lt;js&gt;"Hello"&lt;/js&gt;, &lt;js&gt;"WORLD"&lt;/js&gt;);     &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">1500</span><span id="line-1500">    *    equalsIgnoreCase(&lt;jk&gt;null&lt;/jk&gt;, &lt;jk&gt;null&lt;/jk&gt;);           &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">1501</span><span id="line-1501">    *    equalsIgnoreCase(&lt;js&gt;"Hello"&lt;/js&gt;, &lt;jk&gt;null&lt;/jk&gt;);        &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">1502</span><span id="line-1502">    * &lt;/p&gt;</span>
<span class="source-line-no">1503</span><span id="line-1503">    *</span>
<span class="source-line-no">1504</span><span id="line-1504">    * @param str1 The first string.</span>
<span class="source-line-no">1505</span><span id="line-1505">    * @param str2 The second string.</span>
<span class="source-line-no">1506</span><span id="line-1506">    * @return &lt;jk&gt;true&lt;/jk&gt; if the strings are equal ignoring case, &lt;jk&gt;false&lt;/jk&gt; otherwise.</span>
<span class="source-line-no">1507</span><span id="line-1507">    * @see #equalsIgnoreCase(Object, Object)</span>
<span class="source-line-no">1508</span><span id="line-1508">    * @see Utils#eqic(String, String)</span>
<span class="source-line-no">1509</span><span id="line-1509">    */</span>
<span class="source-line-no">1510</span><span id="line-1510">   public static boolean equalsIgnoreCase(String str1, String str2) {</span>
<span class="source-line-no">1511</span><span id="line-1511">      if (str1 == str2)</span>
<span class="source-line-no">1512</span><span id="line-1512">         return true;</span>
<span class="source-line-no">1513</span><span id="line-1513">      if (str1 == null || str2 == null)</span>
<span class="source-line-no">1514</span><span id="line-1514">         return false;</span>
<span class="source-line-no">1515</span><span id="line-1515">      return str1.equalsIgnoreCase(str2);</span>
<span class="source-line-no">1516</span><span id="line-1516">   }</span>
<span class="source-line-no">1517</span><span id="line-1517"></span>
<span class="source-line-no">1518</span><span id="line-1518">   /**</span>
<span class="source-line-no">1519</span><span id="line-1519">    * Escapes the specified characters in the string.</span>
<span class="source-line-no">1520</span><span id="line-1520">    *</span>
<span class="source-line-no">1521</span><span id="line-1521">    * @param s The string with characters to escape.</span>
<span class="source-line-no">1522</span><span id="line-1522">    * @param escaped The characters to escape.</span>
<span class="source-line-no">1523</span><span id="line-1523">    * @return The string with characters escaped, or the same string if no escapable characters were found.</span>
<span class="source-line-no">1524</span><span id="line-1524">    */</span>
<span class="source-line-no">1525</span><span id="line-1525">   public static String escapeChars(String s, AsciiSet escaped) {</span>
<span class="source-line-no">1526</span><span id="line-1526">      if (s == null || s.isEmpty())</span>
<span class="source-line-no">1527</span><span id="line-1527">         return s;</span>
<span class="source-line-no">1528</span><span id="line-1528"></span>
<span class="source-line-no">1529</span><span id="line-1529">      var count = 0;</span>
<span class="source-line-no">1530</span><span id="line-1530">      for (var i = 0; i &lt; s.length(); i++)</span>
<span class="source-line-no">1531</span><span id="line-1531">         if (escaped.contains(s.charAt(i)))</span>
<span class="source-line-no">1532</span><span id="line-1532">            count++;</span>
<span class="source-line-no">1533</span><span id="line-1533">      if (count == 0)</span>
<span class="source-line-no">1534</span><span id="line-1534">         return s;</span>
<span class="source-line-no">1535</span><span id="line-1535"></span>
<span class="source-line-no">1536</span><span id="line-1536">      var sb = new StringBuffer(s.length() + count);</span>
<span class="source-line-no">1537</span><span id="line-1537">      for (var i = 0; i &lt; s.length(); i++) {</span>
<span class="source-line-no">1538</span><span id="line-1538">         var c = s.charAt(i);</span>
<span class="source-line-no">1539</span><span id="line-1539">         if (escaped.contains(c))</span>
<span class="source-line-no">1540</span><span id="line-1540">            sb.append('\\');</span>
<span class="source-line-no">1541</span><span id="line-1541">         sb.append(c);</span>
<span class="source-line-no">1542</span><span id="line-1542">      }</span>
<span class="source-line-no">1543</span><span id="line-1543">      return sb.toString();</span>
<span class="source-line-no">1544</span><span id="line-1544">   }</span>
<span class="source-line-no">1545</span><span id="line-1545"></span>
<span class="source-line-no">1546</span><span id="line-1546">   /**</span>
<span class="source-line-no">1547</span><span id="line-1547">    * Escapes a string for safe inclusion in Java source code.</span>
<span class="source-line-no">1548</span><span id="line-1548">    *</span>
<span class="source-line-no">1549</span><span id="line-1549">    * &lt;p&gt;This method converts special characters to their Java escape sequences and</span>
<span class="source-line-no">1550</span><span id="line-1550">    * converts non-printable ASCII characters to Unicode escape sequences.</span>
<span class="source-line-no">1551</span><span id="line-1551">    *</span>
<span class="source-line-no">1552</span><span id="line-1552">    * &lt;h5 class='section'&gt;Escape mappings:&lt;/h5&gt;</span>
<span class="source-line-no">1553</span><span id="line-1553">    * &lt;ul&gt;</span>
<span class="source-line-no">1554</span><span id="line-1554">    *   &lt;li&gt;{@code "}  {@code \"}&lt;/li&gt;</span>
<span class="source-line-no">1555</span><span id="line-1555">    *   &lt;li&gt;{@code \}  {@code \\}&lt;/li&gt;</span>
<span class="source-line-no">1556</span><span id="line-1556">    *   &lt;li&gt;{@code \n}  {@code \\n}&lt;/li&gt;</span>
<span class="source-line-no">1557</span><span id="line-1557">    *   &lt;li&gt;{@code \r}  {@code \\r}&lt;/li&gt;</span>
<span class="source-line-no">1558</span><span id="line-1558">    *   &lt;li&gt;{@code \t}  {@code \\t}&lt;/li&gt;</span>
<span class="source-line-no">1559</span><span id="line-1559">    *   &lt;li&gt;{@code \f}  {@code \\f}&lt;/li&gt;</span>
<span class="source-line-no">1560</span><span id="line-1560">    *   &lt;li&gt;{@code \b}  {@code \\b}&lt;/li&gt;</span>
<span class="source-line-no">1561</span><span id="line-1561">    *   &lt;li&gt;Non-printable characters  {@code \\uXXXX}&lt;/li&gt;</span>
<span class="source-line-no">1562</span><span id="line-1562">    * &lt;/ul&gt;</span>
<span class="source-line-no">1563</span><span id="line-1563">    *</span>
<span class="source-line-no">1564</span><span id="line-1564">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">1565</span><span id="line-1565">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">1566</span><span id="line-1566">    *   &lt;jk&gt;var&lt;/jk&gt; &lt;jv&gt;escaped&lt;/jv&gt; = &lt;jsm&gt;escapeForJava&lt;/jsm&gt;(&lt;js&gt;"Hello\nWorld\"Test\""&lt;/js&gt;);</span>
<span class="source-line-no">1567</span><span id="line-1567">    *   &lt;jc&gt;// Returns: "Hello\\nWorld\\\"Test\\\""&lt;/jc&gt;</span>
<span class="source-line-no">1568</span><span id="line-1568">    * &lt;/p&gt;</span>
<span class="source-line-no">1569</span><span id="line-1569">    *</span>
<span class="source-line-no">1570</span><span id="line-1570">    * @param s The string to escape.</span>
<span class="source-line-no">1571</span><span id="line-1571">    * @return The escaped string safe for Java source code, or &lt;jk&gt;null&lt;/jk&gt; if input is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">1572</span><span id="line-1572">    */</span>
<span class="source-line-no">1573</span><span id="line-1573">   public static String escapeForJava(String s) {</span>
<span class="source-line-no">1574</span><span id="line-1574">      if (s == null)</span>
<span class="source-line-no">1575</span><span id="line-1575">         return null;</span>
<span class="source-line-no">1576</span><span id="line-1576">      var sb = new StringBuilder();</span>
<span class="source-line-no">1577</span><span id="line-1577">      for (var c : s.toCharArray()) {</span>
<span class="source-line-no">1578</span><span id="line-1578">         sb.append(switch (c) {</span>
<span class="source-line-no">1579</span><span id="line-1579">            case '\"' -&gt; "\\\"";</span>
<span class="source-line-no">1580</span><span id="line-1580">            case '\\' -&gt; "\\\\";</span>
<span class="source-line-no">1581</span><span id="line-1581">            case '\n' -&gt; "\\n";</span>
<span class="source-line-no">1582</span><span id="line-1582">            case '\r' -&gt; "\\r";</span>
<span class="source-line-no">1583</span><span id="line-1583">            case '\t' -&gt; "\\t";</span>
<span class="source-line-no">1584</span><span id="line-1584">            case '\f' -&gt; "\\f";</span>
<span class="source-line-no">1585</span><span id="line-1585">            case '\b' -&gt; "\\b";</span>
<span class="source-line-no">1586</span><span id="line-1586">            default -&gt; {</span>
<span class="source-line-no">1587</span><span id="line-1587">               if (c &lt; 0x20 || c &gt; 0x7E)</span>
<span class="source-line-no">1588</span><span id="line-1588">                  yield String.format("\\u%04x", (int)c);</span>
<span class="source-line-no">1589</span><span id="line-1589">               yield String.valueOf(c);</span>
<span class="source-line-no">1590</span><span id="line-1590">            }</span>
<span class="source-line-no">1591</span><span id="line-1591">         });</span>
<span class="source-line-no">1592</span><span id="line-1592">      }</span>
<span class="source-line-no">1593</span><span id="line-1593">      return sb.toString();</span>
<span class="source-line-no">1594</span><span id="line-1594">   }</span>
<span class="source-line-no">1595</span><span id="line-1595"></span>
<span class="source-line-no">1596</span><span id="line-1596">   /**</span>
<span class="source-line-no">1597</span><span id="line-1597">    * Escapes HTML entities in a string.</span>
<span class="source-line-no">1598</span><span id="line-1598">    *</span>
<span class="source-line-no">1599</span><span id="line-1599">    * &lt;p&gt;</span>
<span class="source-line-no">1600</span><span id="line-1600">    * Escapes the following characters:</span>
<span class="source-line-no">1601</span><span id="line-1601">    * &lt;ul&gt;</span>
<span class="source-line-no">1602</span><span id="line-1602">    *   &lt;li&gt;&lt;js&gt;'&amp;amp;'&lt;/js&gt;  &lt;js&gt;"&amp;amp;amp;"&lt;/js&gt;&lt;/li&gt;</span>
<span class="source-line-no">1603</span><span id="line-1603">    *   &lt;li&gt;&lt;js&gt;'&amp;lt;'&lt;/js&gt;  &lt;js&gt;"&amp;amp;lt;"&lt;/js&gt;&lt;/li&gt;</span>
<span class="source-line-no">1604</span><span id="line-1604">    *   &lt;li&gt;&lt;js&gt;'&amp;gt;'&lt;/js&gt;  &lt;js&gt;"&amp;amp;gt;"&lt;/js&gt;&lt;/li&gt;</span>
<span class="source-line-no">1605</span><span id="line-1605">    *   &lt;li&gt;&lt;js&gt;'"'&lt;/js&gt;  &lt;js&gt;"&amp;amp;quot;"&lt;/js&gt;&lt;/li&gt;</span>
<span class="source-line-no">1606</span><span id="line-1606">    *   &lt;li&gt;&lt;js&gt;'\''&lt;/js&gt;  &lt;js&gt;"&amp;amp;#39;"&lt;/js&gt;&lt;/li&gt;</span>
<span class="source-line-no">1607</span><span id="line-1607">    * &lt;/ul&gt;</span>
<span class="source-line-no">1608</span><span id="line-1608">    *</span>
<span class="source-line-no">1609</span><span id="line-1609">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">1610</span><span id="line-1610">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">1611</span><span id="line-1611">    *    escapeHtml(&lt;js&gt;"&amp;lt;script&amp;gt;alert('xss')&amp;lt;/script&amp;gt;"&lt;/js&gt;);</span>
<span class="source-line-no">1612</span><span id="line-1612">    *    &lt;jc&gt;// Returns: "&amp;amp;lt;script&amp;amp;gt;alert(&amp;amp;#39;xss&amp;amp;#39;)&amp;amp;lt;/script&amp;amp;gt;"&lt;/jc&gt;</span>
<span class="source-line-no">1613</span><span id="line-1613">    * &lt;/p&gt;</span>
<span class="source-line-no">1614</span><span id="line-1614">    *</span>
<span class="source-line-no">1615</span><span id="line-1615">    * @param str The string to escape.</span>
<span class="source-line-no">1616</span><span id="line-1616">    * @return The escaped string, or &lt;jk&gt;null&lt;/jk&gt; if input is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">1617</span><span id="line-1617">    */</span>
<span class="source-line-no">1618</span><span id="line-1618">   public static String escapeHtml(String str) {</span>
<span class="source-line-no">1619</span><span id="line-1619">      if (str == null)</span>
<span class="source-line-no">1620</span><span id="line-1620">         return null;</span>
<span class="source-line-no">1621</span><span id="line-1621">      var sb = new StringBuilder(str.length() * 2);</span>
<span class="source-line-no">1622</span><span id="line-1622">      for (var i = 0; i &lt; str.length(); i++) {</span>
<span class="source-line-no">1623</span><span id="line-1623">         var c = str.charAt(i);</span>
<span class="source-line-no">1624</span><span id="line-1624">         switch (c) {</span>
<span class="source-line-no">1625</span><span id="line-1625">            case '&amp;' -&gt; sb.append("&amp;amp;");</span>
<span class="source-line-no">1626</span><span id="line-1626">            case '&lt;' -&gt; sb.append("&amp;lt;");</span>
<span class="source-line-no">1627</span><span id="line-1627">            case '&gt;' -&gt; sb.append("&amp;gt;");</span>
<span class="source-line-no">1628</span><span id="line-1628">            case '"' -&gt; sb.append("&amp;quot;");</span>
<span class="source-line-no">1629</span><span id="line-1629">            case '\'' -&gt; sb.append("&amp;#39;");</span>
<span class="source-line-no">1630</span><span id="line-1630">            default -&gt; sb.append(c);</span>
<span class="source-line-no">1631</span><span id="line-1631">         }</span>
<span class="source-line-no">1632</span><span id="line-1632">      }</span>
<span class="source-line-no">1633</span><span id="line-1633">      return sb.toString();</span>
<span class="source-line-no">1634</span><span id="line-1634">   }</span>
<span class="source-line-no">1635</span><span id="line-1635"></span>
<span class="source-line-no">1636</span><span id="line-1636">   /**</span>
<span class="source-line-no">1637</span><span id="line-1637">    * Escapes regex special characters in a string.</span>
<span class="source-line-no">1638</span><span id="line-1638">    *</span>
<span class="source-line-no">1639</span><span id="line-1639">    * &lt;p&gt;</span>
<span class="source-line-no">1640</span><span id="line-1640">    * Escapes the following regex special characters: &lt;js&gt;\.*+?^${}()[]|\\&lt;/js&gt;</span>
<span class="source-line-no">1641</span><span id="line-1641">    *</span>
<span class="source-line-no">1642</span><span id="line-1642">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">1643</span><span id="line-1643">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">1644</span><span id="line-1644">    *    escapeRegex(&lt;js&gt;"file.txt"&lt;/js&gt;);        &lt;jc&gt;// Returns: "file\\.txt"&lt;/jc&gt;</span>
<span class="source-line-no">1645</span><span id="line-1645">    *    escapeRegex(&lt;js&gt;"price: $10.99"&lt;/js&gt;);   &lt;jc&gt;// Returns: "price: \\$10\\.99"&lt;/jc&gt;</span>
<span class="source-line-no">1646</span><span id="line-1646">    * &lt;/p&gt;</span>
<span class="source-line-no">1647</span><span id="line-1647">    *</span>
<span class="source-line-no">1648</span><span id="line-1648">    * @param str The string to escape.</span>
<span class="source-line-no">1649</span><span id="line-1649">    * @return The escaped string, or &lt;jk&gt;null&lt;/jk&gt; if input is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">1650</span><span id="line-1650">    */</span>
<span class="source-line-no">1651</span><span id="line-1651">   public static String escapeRegex(String str) {</span>
<span class="source-line-no">1652</span><span id="line-1652">      if (str == null)</span>
<span class="source-line-no">1653</span><span id="line-1653">         return null;</span>
<span class="source-line-no">1654</span><span id="line-1654">      // Escape regex special characters: . * + ? ^ $ { } ( ) [ ] | \</span>
<span class="source-line-no">1655</span><span id="line-1655">      return str.replace("\\", "\\\\").replace(".", "\\.").replace("*", "\\*").replace("+", "\\+").replace("?", "\\?").replace("^", "\\^").replace("$", "\\$").replace("{", "\\{").replace("}", "\\}")</span>
<span class="source-line-no">1656</span><span id="line-1656">         .replace("(", "\\(").replace(")", "\\)").replace("[", "\\[").replace("]", "\\]").replace("|", "\\|");</span>
<span class="source-line-no">1657</span><span id="line-1657">   }</span>
<span class="source-line-no">1658</span><span id="line-1658"></span>
<span class="source-line-no">1659</span><span id="line-1659">   /**</span>
<span class="source-line-no">1660</span><span id="line-1660">    * Escapes SQL string literals by doubling single quotes.</span>
<span class="source-line-no">1661</span><span id="line-1661">    *</span>
<span class="source-line-no">1662</span><span id="line-1662">    * &lt;p&gt;</span>
<span class="source-line-no">1663</span><span id="line-1663">    * Basic SQL escaping for string literals. Escapes single quotes by doubling them.</span>
<span class="source-line-no">1664</span><span id="line-1664">    * This is a basic implementation - for production use, consider using prepared statements.</span>
<span class="source-line-no">1665</span><span id="line-1665">    *</span>
<span class="source-line-no">1666</span><span id="line-1666">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">1667</span><span id="line-1667">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">1668</span><span id="line-1668">    *    escapeSql(&lt;js&gt;"O'Brien"&lt;/js&gt;);     &lt;jc&gt;// Returns: "O''Brien"&lt;/jc&gt;</span>
<span class="source-line-no">1669</span><span id="line-1669">    *    escapeSql(&lt;js&gt;"It's a test"&lt;/js&gt;); &lt;jc&gt;// Returns: "It''s a test"&lt;/jc&gt;</span>
<span class="source-line-no">1670</span><span id="line-1670">    * &lt;/p&gt;</span>
<span class="source-line-no">1671</span><span id="line-1671">    *</span>
<span class="source-line-no">1672</span><span id="line-1672">    * @param str The string to escape.</span>
<span class="source-line-no">1673</span><span id="line-1673">    * @return The escaped string, or &lt;jk&gt;null&lt;/jk&gt; if input is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">1674</span><span id="line-1674">    */</span>
<span class="source-line-no">1675</span><span id="line-1675">   public static String escapeSql(String str) {</span>
<span class="source-line-no">1676</span><span id="line-1676">      if (str == null)</span>
<span class="source-line-no">1677</span><span id="line-1677">         return null;</span>
<span class="source-line-no">1678</span><span id="line-1678">      return str.replace("'", "''");</span>
<span class="source-line-no">1679</span><span id="line-1679">   }</span>
<span class="source-line-no">1680</span><span id="line-1680"></span>
<span class="source-line-no">1681</span><span id="line-1681">   /**</span>
<span class="source-line-no">1682</span><span id="line-1682">    * Escapes XML entities in a string.</span>
<span class="source-line-no">1683</span><span id="line-1683">    *</span>
<span class="source-line-no">1684</span><span id="line-1684">    * &lt;p&gt;</span>
<span class="source-line-no">1685</span><span id="line-1685">    * Escapes the following characters:</span>
<span class="source-line-no">1686</span><span id="line-1686">    * &lt;ul&gt;</span>
<span class="source-line-no">1687</span><span id="line-1687">    *   &lt;li&gt;&lt;js&gt;'&amp;amp;'&lt;/js&gt;  &lt;js&gt;"&amp;amp;amp;"&lt;/js&gt;&lt;/li&gt;</span>
<span class="source-line-no">1688</span><span id="line-1688">    *   &lt;li&gt;&lt;js&gt;'&amp;lt;'&lt;/js&gt;  &lt;js&gt;"&amp;amp;lt;"&lt;/js&gt;&lt;/li&gt;</span>
<span class="source-line-no">1689</span><span id="line-1689">    *   &lt;li&gt;&lt;js&gt;'&amp;gt;'&lt;/js&gt;  &lt;js&gt;"&amp;amp;gt;"&lt;/js&gt;&lt;/li&gt;</span>
<span class="source-line-no">1690</span><span id="line-1690">    *   &lt;li&gt;&lt;js&gt;'"'&lt;/js&gt;  &lt;js&gt;"&amp;amp;quot;"&lt;/js&gt;&lt;/li&gt;</span>
<span class="source-line-no">1691</span><span id="line-1691">    *   &lt;li&gt;&lt;js&gt;'\''&lt;/js&gt;  &lt;js&gt;"&amp;amp;apos;"&lt;/js&gt;&lt;/li&gt;</span>
<span class="source-line-no">1692</span><span id="line-1692">    * &lt;/ul&gt;</span>
<span class="source-line-no">1693</span><span id="line-1693">    *</span>
<span class="source-line-no">1694</span><span id="line-1694">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">1695</span><span id="line-1695">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">1696</span><span id="line-1696">    *    escapeXml(&lt;js&gt;"&amp;lt;tag attr='value'&amp;gt;text&amp;lt;/tag&amp;gt;"&lt;/js&gt;);</span>
<span class="source-line-no">1697</span><span id="line-1697">    *    &lt;jc&gt;// Returns: "&amp;amp;lt;tag attr=&amp;amp;apos;value&amp;amp;apos;&amp;amp;gt;text&amp;amp;lt;/tag&amp;amp;gt;"&lt;/jc&gt;</span>
<span class="source-line-no">1698</span><span id="line-1698">    * &lt;/p&gt;</span>
<span class="source-line-no">1699</span><span id="line-1699">    *</span>
<span class="source-line-no">1700</span><span id="line-1700">    * @param str The string to escape.</span>
<span class="source-line-no">1701</span><span id="line-1701">    * @return The escaped string, or &lt;jk&gt;null&lt;/jk&gt; if input is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">1702</span><span id="line-1702">    */</span>
<span class="source-line-no">1703</span><span id="line-1703">   public static String escapeXml(String str) {</span>
<span class="source-line-no">1704</span><span id="line-1704">      if (str == null)</span>
<span class="source-line-no">1705</span><span id="line-1705">         return null;</span>
<span class="source-line-no">1706</span><span id="line-1706">      var sb = new StringBuilder(str.length() * 2);</span>
<span class="source-line-no">1707</span><span id="line-1707">      for (var i = 0; i &lt; str.length(); i++) {</span>
<span class="source-line-no">1708</span><span id="line-1708">         var c = str.charAt(i);</span>
<span class="source-line-no">1709</span><span id="line-1709">         switch (c) {</span>
<span class="source-line-no">1710</span><span id="line-1710">            case '&amp;' -&gt; sb.append("&amp;amp;");</span>
<span class="source-line-no">1711</span><span id="line-1711">            case '&lt;' -&gt; sb.append("&amp;lt;");</span>
<span class="source-line-no">1712</span><span id="line-1712">            case '&gt;' -&gt; sb.append("&amp;gt;");</span>
<span class="source-line-no">1713</span><span id="line-1713">            case '"' -&gt; sb.append("&amp;quot;");</span>
<span class="source-line-no">1714</span><span id="line-1714">            case '\'' -&gt; sb.append("&amp;apos;");</span>
<span class="source-line-no">1715</span><span id="line-1715">            default -&gt; sb.append(c);</span>
<span class="source-line-no">1716</span><span id="line-1716">         }</span>
<span class="source-line-no">1717</span><span id="line-1717">      }</span>
<span class="source-line-no">1718</span><span id="line-1718">      return sb.toString();</span>
<span class="source-line-no">1719</span><span id="line-1719">   }</span>
<span class="source-line-no">1720</span><span id="line-1720"></span>
<span class="source-line-no">1721</span><span id="line-1721">   /**</span>
<span class="source-line-no">1722</span><span id="line-1722">    * Extracts all text segments between start and end markers.</span>
<span class="source-line-no">1723</span><span id="line-1723">    *</span>
<span class="source-line-no">1724</span><span id="line-1724">    * &lt;p&gt;</span>
<span class="source-line-no">1725</span><span id="line-1725">    * Finds all occurrences of text between the start and end markers (non-overlapping).</span>
<span class="source-line-no">1726</span><span id="line-1726">    *</span>
<span class="source-line-no">1727</span><span id="line-1727">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">1728</span><span id="line-1728">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">1729</span><span id="line-1729">    *    extractBetween(&lt;js&gt;"&amp;lt;tag&amp;gt;content&amp;lt;/tag&amp;gt;"&lt;/js&gt;, &lt;js&gt;"&amp;lt;"&lt;/js&gt;, &lt;js&gt;"&amp;gt;"&lt;/js&gt;);</span>
<span class="source-line-no">1730</span><span id="line-1730">    *    &lt;jc&gt;// ["tag", "/tag"]&lt;/jc&gt;</span>
<span class="source-line-no">1731</span><span id="line-1731">    *    extractBetween(&lt;js&gt;"[one][two][three]"&lt;/js&gt;, &lt;js&gt;"["&lt;/js&gt;, &lt;js&gt;"]"&lt;/js&gt;);</span>
<span class="source-line-no">1732</span><span id="line-1732">    *    &lt;jc&gt;// ["one", "two", "three"]&lt;/jc&gt;</span>
<span class="source-line-no">1733</span><span id="line-1733">    * &lt;/p&gt;</span>
<span class="source-line-no">1734</span><span id="line-1734">    *</span>
<span class="source-line-no">1735</span><span id="line-1735">    * @param str The string to extract from. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">1736</span><span id="line-1736">    * @param start The start marker. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">1737</span><span id="line-1737">    * @param end The end marker. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">1738</span><span id="line-1738">    * @return A list of text segments found between the markers, or an empty list if any parameter is &lt;jk&gt;null&lt;/jk&gt; or empty.</span>
<span class="source-line-no">1739</span><span id="line-1739">    */</span>
<span class="source-line-no">1740</span><span id="line-1740">   public static List&lt;String&gt; extractBetween(String str, String start, String end) {</span>
<span class="source-line-no">1741</span><span id="line-1741">      if (isEmpty(str) || isEmpty(start) || isEmpty(end))</span>
<span class="source-line-no">1742</span><span id="line-1742">         return Collections.emptyList();</span>
<span class="source-line-no">1743</span><span id="line-1743"></span>
<span class="source-line-no">1744</span><span id="line-1744">      var result = new ArrayList&lt;String&gt;();</span>
<span class="source-line-no">1745</span><span id="line-1745">      var startIndex = 0;</span>
<span class="source-line-no">1746</span><span id="line-1746">      while (true) {</span>
<span class="source-line-no">1747</span><span id="line-1747">         var startPos = str.indexOf(start, startIndex);</span>
<span class="source-line-no">1748</span><span id="line-1748">         if (startPos == -1)</span>
<span class="source-line-no">1749</span><span id="line-1749">            break;</span>
<span class="source-line-no">1750</span><span id="line-1750">         var endPos = str.indexOf(end, startPos + start.length());</span>
<span class="source-line-no">1751</span><span id="line-1751">         if (endPos == -1)</span>
<span class="source-line-no">1752</span><span id="line-1752">            break;</span>
<span class="source-line-no">1753</span><span id="line-1753">         result.add(str.substring(startPos + start.length(), endPos));</span>
<span class="source-line-no">1754</span><span id="line-1754">         startIndex = endPos + end.length();</span>
<span class="source-line-no">1755</span><span id="line-1755">      }</span>
<span class="source-line-no">1756</span><span id="line-1756">      return result;</span>
<span class="source-line-no">1757</span><span id="line-1757">   }</span>
<span class="source-line-no">1758</span><span id="line-1758"></span>
<span class="source-line-no">1759</span><span id="line-1759">   /**</span>
<span class="source-line-no">1760</span><span id="line-1760">    * Extracts all email addresses from a string.</span>
<span class="source-line-no">1761</span><span id="line-1761">    *</span>
<span class="source-line-no">1762</span><span id="line-1762">    * &lt;p&gt;</span>
<span class="source-line-no">1763</span><span id="line-1763">    * Uses a basic email regex pattern to find email addresses.</span>
<span class="source-line-no">1764</span><span id="line-1764">    *</span>
<span class="source-line-no">1765</span><span id="line-1765">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">1766</span><span id="line-1766">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">1767</span><span id="line-1767">    *    extractEmails(&lt;js&gt;"Contact: user@example.com or admin@test.org"&lt;/js&gt;);</span>
<span class="source-line-no">1768</span><span id="line-1768">    *    &lt;jc&gt;// ["user@example.com", "admin@test.org"]&lt;/jc&gt;</span>
<span class="source-line-no">1769</span><span id="line-1769">    * &lt;/p&gt;</span>
<span class="source-line-no">1770</span><span id="line-1770">    *</span>
<span class="source-line-no">1771</span><span id="line-1771">    * @param str The string to extract emails from. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">1772</span><span id="line-1772">    * @return A list of email addresses found in the input, or an empty list if the string is &lt;jk&gt;null&lt;/jk&gt; or empty.</span>
<span class="source-line-no">1773</span><span id="line-1773">    */</span>
<span class="source-line-no">1774</span><span id="line-1774">   public static List&lt;String&gt; extractEmails(String str) {</span>
<span class="source-line-no">1775</span><span id="line-1775">      if (isEmpty(str))</span>
<span class="source-line-no">1776</span><span id="line-1776">         return Collections.emptyList();</span>
<span class="source-line-no">1777</span><span id="line-1777"></span>
<span class="source-line-no">1778</span><span id="line-1778">      var result = new ArrayList&lt;String&gt;();</span>
<span class="source-line-no">1779</span><span id="line-1779">      // Email regex pattern (same as isEmail but without ^ and $ anchors)</span>
<span class="source-line-no">1780</span><span id="line-1780">      var pattern = Pattern.compile("[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}");</span>
<span class="source-line-no">1781</span><span id="line-1781">      var matcher = pattern.matcher(str);</span>
<span class="source-line-no">1782</span><span id="line-1782">      while (matcher.find()) {</span>
<span class="source-line-no">1783</span><span id="line-1783">         result.add(matcher.group());</span>
<span class="source-line-no">1784</span><span id="line-1784">      }</span>
<span class="source-line-no">1785</span><span id="line-1785">      return result;</span>
<span class="source-line-no">1786</span><span id="line-1786">   }</span>
<span class="source-line-no">1787</span><span id="line-1787"></span>
<span class="source-line-no">1788</span><span id="line-1788">   /**</span>
<span class="source-line-no">1789</span><span id="line-1789">    * Extracts all numeric sequences from a string.</span>
<span class="source-line-no">1790</span><span id="line-1790">    *</span>
<span class="source-line-no">1791</span><span id="line-1791">    * &lt;p&gt;</span>
<span class="source-line-no">1792</span><span id="line-1792">    * Finds all sequences of digits (including decimal numbers with dots).</span>
<span class="source-line-no">1793</span><span id="line-1793">    *</span>
<span class="source-line-no">1794</span><span id="line-1794">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">1795</span><span id="line-1795">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">1796</span><span id="line-1796">    *    extractNumbers(&lt;js&gt;"Price: $19.99, Quantity: 5"&lt;/js&gt;);</span>
<span class="source-line-no">1797</span><span id="line-1797">    *    &lt;jc&gt;// ["19.99", "5"]&lt;/jc&gt;</span>
<span class="source-line-no">1798</span><span id="line-1798">    *    extractNumbers(&lt;js&gt;"Version 1.2.3"&lt;/js&gt;);</span>
<span class="source-line-no">1799</span><span id="line-1799">    *    &lt;jc&gt;// ["1.2", "3"]&lt;/jc&gt;</span>
<span class="source-line-no">1800</span><span id="line-1800">    * &lt;/p&gt;</span>
<span class="source-line-no">1801</span><span id="line-1801">    *</span>
<span class="source-line-no">1802</span><span id="line-1802">    * @param str The string to extract numbers from. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">1803</span><span id="line-1803">    * @return A list of numeric strings found in the input, or an empty list if the string is &lt;jk&gt;null&lt;/jk&gt; or empty.</span>
<span class="source-line-no">1804</span><span id="line-1804">    */</span>
<span class="source-line-no">1805</span><span id="line-1805">   public static List&lt;String&gt; extractNumbers(String str) {</span>
<span class="source-line-no">1806</span><span id="line-1806">      if (isEmpty(str))</span>
<span class="source-line-no">1807</span><span id="line-1807">         return Collections.emptyList();</span>
<span class="source-line-no">1808</span><span id="line-1808"></span>
<span class="source-line-no">1809</span><span id="line-1809">      var result = new ArrayList&lt;String&gt;();</span>
<span class="source-line-no">1810</span><span id="line-1810">      var pattern = Pattern.compile("\\d+(?:\\.\\d+)?");</span>
<span class="source-line-no">1811</span><span id="line-1811">      var matcher = pattern.matcher(str);</span>
<span class="source-line-no">1812</span><span id="line-1812">      while (matcher.find()) {</span>
<span class="source-line-no">1813</span><span id="line-1813">         result.add(matcher.group());</span>
<span class="source-line-no">1814</span><span id="line-1814">      }</span>
<span class="source-line-no">1815</span><span id="line-1815">      return result;</span>
<span class="source-line-no">1816</span><span id="line-1816">   }</span>
<span class="source-line-no">1817</span><span id="line-1817"></span>
<span class="source-line-no">1818</span><span id="line-1818">   /**</span>
<span class="source-line-no">1819</span><span id="line-1819">    * Extracts all URLs from a string.</span>
<span class="source-line-no">1820</span><span id="line-1820">    *</span>
<span class="source-line-no">1821</span><span id="line-1821">    * &lt;p&gt;</span>
<span class="source-line-no">1822</span><span id="line-1822">    * Uses a basic URL regex pattern to find URLs (http, https, ftp).</span>
<span class="source-line-no">1823</span><span id="line-1823">    *</span>
<span class="source-line-no">1824</span><span id="line-1824">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">1825</span><span id="line-1825">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">1826</span><span id="line-1826">    *    extractUrls(&lt;js&gt;"Visit https://example.com or http://test.org"&lt;/js&gt;);</span>
<span class="source-line-no">1827</span><span id="line-1827">    *    &lt;jc&gt;// ["https://example.com", "http://test.org"]&lt;/jc&gt;</span>
<span class="source-line-no">1828</span><span id="line-1828">    * &lt;/p&gt;</span>
<span class="source-line-no">1829</span><span id="line-1829">    *</span>
<span class="source-line-no">1830</span><span id="line-1830">    * @param str The string to extract URLs from. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">1831</span><span id="line-1831">    * @return A list of URLs found in the input, or an empty list if the string is &lt;jk&gt;null&lt;/jk&gt; or empty.</span>
<span class="source-line-no">1832</span><span id="line-1832">    */</span>
<span class="source-line-no">1833</span><span id="line-1833">   public static List&lt;String&gt; extractUrls(String str) {</span>
<span class="source-line-no">1834</span><span id="line-1834">      if (isEmpty(str))</span>
<span class="source-line-no">1835</span><span id="line-1835">         return Collections.emptyList();</span>
<span class="source-line-no">1836</span><span id="line-1836"></span>
<span class="source-line-no">1837</span><span id="line-1837">      var result = new ArrayList&lt;String&gt;();</span>
<span class="source-line-no">1838</span><span id="line-1838">      // Basic URL pattern: protocol://domain/path</span>
<span class="source-line-no">1839</span><span id="line-1839">      var pattern = Pattern.compile("(?:https?|ftp)://[\\w\\-._~:/?#\\[\\]@!$&amp;'()*+,;=%]+", Pattern.CASE_INSENSITIVE);</span>
<span class="source-line-no">1840</span><span id="line-1840">      var matcher = pattern.matcher(str);</span>
<span class="source-line-no">1841</span><span id="line-1841">      while (matcher.find()) {</span>
<span class="source-line-no">1842</span><span id="line-1842">         result.add(matcher.group());</span>
<span class="source-line-no">1843</span><span id="line-1843">      }</span>
<span class="source-line-no">1844</span><span id="line-1844">      return result;</span>
<span class="source-line-no">1845</span><span id="line-1845">   }</span>
<span class="source-line-no">1846</span><span id="line-1846"></span>
<span class="source-line-no">1847</span><span id="line-1847">   /**</span>
<span class="source-line-no">1848</span><span id="line-1848">    * Extracts all words from a string.</span>
<span class="source-line-no">1849</span><span id="line-1849">    *</span>
<span class="source-line-no">1850</span><span id="line-1850">    * &lt;p&gt;</span>
<span class="source-line-no">1851</span><span id="line-1851">    * A word is defined as a sequence of letters, digits, and underscores.</span>
<span class="source-line-no">1852</span><span id="line-1852">    *</span>
<span class="source-line-no">1853</span><span id="line-1853">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">1854</span><span id="line-1854">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">1855</span><span id="line-1855">    *    extractWords(&lt;js&gt;"Hello world! This is a test."&lt;/js&gt;);</span>
<span class="source-line-no">1856</span><span id="line-1856">    *    &lt;jc&gt;// ["Hello", "world", "This", "is", "a", "test"]&lt;/jc&gt;</span>
<span class="source-line-no">1857</span><span id="line-1857">    * &lt;/p&gt;</span>
<span class="source-line-no">1858</span><span id="line-1858">    *</span>
<span class="source-line-no">1859</span><span id="line-1859">    * @param str The string to extract words from. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">1860</span><span id="line-1860">    * @return A list of words found in the input, or an empty list if the string is &lt;jk&gt;null&lt;/jk&gt; or empty.</span>
<span class="source-line-no">1861</span><span id="line-1861">    */</span>
<span class="source-line-no">1862</span><span id="line-1862">   public static List&lt;String&gt; extractWords(String str) {</span>
<span class="source-line-no">1863</span><span id="line-1863">      if (isEmpty(str))</span>
<span class="source-line-no">1864</span><span id="line-1864">         return Collections.emptyList();</span>
<span class="source-line-no">1865</span><span id="line-1865"></span>
<span class="source-line-no">1866</span><span id="line-1866">      var result = new ArrayList&lt;String&gt;();</span>
<span class="source-line-no">1867</span><span id="line-1867">      // Word pattern: sequence of word characters (letters, digits, underscore)</span>
<span class="source-line-no">1868</span><span id="line-1868">      var pattern = Pattern.compile("\\w+");</span>
<span class="source-line-no">1869</span><span id="line-1869">      var matcher = pattern.matcher(str);</span>
<span class="source-line-no">1870</span><span id="line-1870">      while (matcher.find()) {</span>
<span class="source-line-no">1871</span><span id="line-1871">         result.add(matcher.group());</span>
<span class="source-line-no">1872</span><span id="line-1872">      }</span>
<span class="source-line-no">1873</span><span id="line-1873">      return result;</span>
<span class="source-line-no">1874</span><span id="line-1874">   }</span>
<span class="source-line-no">1875</span><span id="line-1875"></span>
<span class="source-line-no">1876</span><span id="line-1876">   /**</span>
<span class="source-line-no">1877</span><span id="line-1877">    * Filters a string array using the specified predicate.</span>
<span class="source-line-no">1878</span><span id="line-1878">    *</span>
<span class="source-line-no">1879</span><span id="line-1879">    * &lt;p&gt;</span>
<span class="source-line-no">1880</span><span id="line-1880">    * Returns &lt;jk&gt;null&lt;/jk&gt; if the array is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">1881</span><span id="line-1881">    * Returns an empty array if the predicate is &lt;jk&gt;null&lt;/jk&gt; or no elements match.</span>
<span class="source-line-no">1882</span><span id="line-1882">    *</span>
<span class="source-line-no">1883</span><span id="line-1883">    * &lt;h5 class='section'&gt;Examples:&lt;/h5&gt;</span>
<span class="source-line-no">1884</span><span id="line-1884">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">1885</span><span id="line-1885">    *    String[] &lt;jv&gt;array&lt;/jv&gt; = {&lt;js&gt;"foo"&lt;/js&gt;, &lt;js&gt;""&lt;/js&gt;, &lt;js&gt;"bar"&lt;/js&gt;, &lt;jk&gt;null&lt;/jk&gt;, &lt;js&gt;"baz"&lt;/js&gt;};</span>
<span class="source-line-no">1886</span><span id="line-1886">    *    String[] &lt;jv&gt;filtered&lt;/jv&gt; = filter(&lt;jv&gt;array&lt;/jv&gt;, StringUtils.&lt;jsf&gt;NOT_EMPTY&lt;/jsf&gt;);</span>
<span class="source-line-no">1887</span><span id="line-1887">    *    &lt;jc&gt;// Returns: ["foo", "bar", "baz"]&lt;/jc&gt;</span>
<span class="source-line-no">1888</span><span id="line-1888">    *</span>
<span class="source-line-no">1889</span><span id="line-1889">    *    String[] &lt;jv&gt;longStrings&lt;/jv&gt; = filter(&lt;jv&gt;array&lt;/jv&gt;, s -&amp;gt; s != &lt;jk&gt;null&lt;/jk&gt; &amp;amp;&amp;amp; s.length() &amp;gt; 3);</span>
<span class="source-line-no">1890</span><span id="line-1890">    *    &lt;jc&gt;// Returns: ["baz"]&lt;/jc&gt;</span>
<span class="source-line-no">1891</span><span id="line-1891">    * &lt;/p&gt;</span>
<span class="source-line-no">1892</span><span id="line-1892">    *</span>
<span class="source-line-no">1893</span><span id="line-1893">    * @param array The array to filter. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">1894</span><span id="line-1894">    * @param predicate The predicate to apply to each element. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">1895</span><span id="line-1895">    * @return A new array containing only the elements that match the predicate, or &lt;jk&gt;null&lt;/jk&gt; if the array was &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">1896</span><span id="line-1896">    */</span>
<span class="source-line-no">1897</span><span id="line-1897">   public static String[] filter(String[] array, Predicate&lt;String&gt; predicate) {</span>
<span class="source-line-no">1898</span><span id="line-1898">      if (array == null)</span>
<span class="source-line-no">1899</span><span id="line-1899">         return null;  // NOSONAR - Intentional.</span>
<span class="source-line-no">1900</span><span id="line-1900">      if (predicate == null)</span>
<span class="source-line-no">1901</span><span id="line-1901">         return new String[0];</span>
<span class="source-line-no">1902</span><span id="line-1902">      return Arrays.stream(array).filter(predicate).toArray(String[]::new);</span>
<span class="source-line-no">1903</span><span id="line-1903">   }</span>
<span class="source-line-no">1904</span><span id="line-1904"></span>
<span class="source-line-no">1905</span><span id="line-1905">   /**</span>
<span class="source-line-no">1906</span><span id="line-1906">    * Returns the first character in the specified string.</span>
<span class="source-line-no">1907</span><span id="line-1907">    *</span>
<span class="source-line-no">1908</span><span id="line-1908">    * &lt;p&gt;</span>
<span class="source-line-no">1909</span><span id="line-1909">    * This is a null-safe and bounds-safe operation. Returns &lt;c&gt;0&lt;/c&gt; (null character) if:</span>
<span class="source-line-no">1910</span><span id="line-1910">    * &lt;ul&gt;</span>
<span class="source-line-no">1911</span><span id="line-1911">    *   &lt;li&gt;The string is &lt;jk&gt;null&lt;/jk&gt;&lt;/li&gt;</span>
<span class="source-line-no">1912</span><span id="line-1912">    *   &lt;li&gt;The string is empty&lt;/li&gt;</span>
<span class="source-line-no">1913</span><span id="line-1913">    * &lt;/ul&gt;</span>
<span class="source-line-no">1914</span><span id="line-1914">    *</span>
<span class="source-line-no">1915</span><span id="line-1915">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">1916</span><span id="line-1916">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">1917</span><span id="line-1917">    *    firstChar(&lt;js&gt;"Hello"&lt;/js&gt;);     &lt;jc&gt;// 'H'&lt;/jc&gt;</span>
<span class="source-line-no">1918</span><span id="line-1918">    *    firstChar(&lt;js&gt;"World"&lt;/js&gt;);     &lt;jc&gt;// 'W'&lt;/jc&gt;</span>
<span class="source-line-no">1919</span><span id="line-1919">    *    firstChar(&lt;js&gt;""&lt;/js&gt;);          &lt;jc&gt;// 0 (empty string)&lt;/jc&gt;</span>
<span class="source-line-no">1920</span><span id="line-1920">    *    firstChar(&lt;jk&gt;null&lt;/jk&gt;);        &lt;jc&gt;// 0 (null string)&lt;/jc&gt;</span>
<span class="source-line-no">1921</span><span id="line-1921">    * &lt;/p&gt;</span>
<span class="source-line-no">1922</span><span id="line-1922">    *</span>
<span class="source-line-no">1923</span><span id="line-1923">    * @param s The string to check.</span>
<span class="source-line-no">1924</span><span id="line-1924">    * @return The first character in the string, or &lt;c&gt;0&lt;/c&gt; if the string is &lt;jk&gt;null&lt;/jk&gt; or empty.</span>
<span class="source-line-no">1925</span><span id="line-1925">    * @see #charAt(String, int)</span>
<span class="source-line-no">1926</span><span id="line-1926">    * @see #firstNonWhitespaceChar(String)</span>
<span class="source-line-no">1927</span><span id="line-1927">    */</span>
<span class="source-line-no">1928</span><span id="line-1928">   public static char firstChar(String s) {</span>
<span class="source-line-no">1929</span><span id="line-1929">      if (s == null || s.isEmpty())</span>
<span class="source-line-no">1930</span><span id="line-1930">         return 0;</span>
<span class="source-line-no">1931</span><span id="line-1931">      return s.charAt(0);</span>
<span class="source-line-no">1932</span><span id="line-1932">   }</span>
<span class="source-line-no">1933</span><span id="line-1933"></span>
<span class="source-line-no">1934</span><span id="line-1934">   /**</span>
<span class="source-line-no">1935</span><span id="line-1935">    * Returns the first non-blank string in the array.</span>
<span class="source-line-no">1936</span><span id="line-1936">    *</span>
<span class="source-line-no">1937</span><span id="line-1937">    * @param vals The strings to check.</span>
<span class="source-line-no">1938</span><span id="line-1938">    * @return The first non-blank string, or &lt;jk&gt;null&lt;/jk&gt; if all values were blank or &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">1939</span><span id="line-1939">    */</span>
<span class="source-line-no">1940</span><span id="line-1940">   public static String firstNonBlank(String...vals) {</span>
<span class="source-line-no">1941</span><span id="line-1941">      for (var v : vals) {</span>
<span class="source-line-no">1942</span><span id="line-1942">         if (isNotBlank(v))</span>
<span class="source-line-no">1943</span><span id="line-1943">            return v;</span>
<span class="source-line-no">1944</span><span id="line-1944">      }</span>
<span class="source-line-no">1945</span><span id="line-1945">      return null;</span>
<span class="source-line-no">1946</span><span id="line-1946">   }</span>
<span class="source-line-no">1947</span><span id="line-1947"></span>
<span class="source-line-no">1948</span><span id="line-1948">   /**</span>
<span class="source-line-no">1949</span><span id="line-1949">    * Returns the first non-null, non-empty string in the list.</span>
<span class="source-line-no">1950</span><span id="line-1950">    *</span>
<span class="source-line-no">1951</span><span id="line-1951">    * &lt;p&gt;</span>
<span class="source-line-no">1952</span><span id="line-1952">    * This method iterates through the provided strings and returns the first one that is not &lt;jk&gt;null&lt;/jk&gt;</span>
<span class="source-line-no">1953</span><span id="line-1953">    * and not empty (as determined by {@link Utils#ne(CharSequence)}).</span>
<span class="source-line-no">1954</span><span id="line-1954">    *</span>
<span class="source-line-no">1955</span><span id="line-1955">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">1956</span><span id="line-1956">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">1957</span><span id="line-1957">    *    firstNonEmpty(&lt;jk&gt;null&lt;/jk&gt;, &lt;js&gt;""&lt;/js&gt;, &lt;js&gt;"Hello"&lt;/js&gt;, &lt;js&gt;"World"&lt;/js&gt;);   &lt;jc&gt;// "Hello"&lt;/jc&gt;</span>
<span class="source-line-no">1958</span><span id="line-1958">    *    firstNonEmpty(&lt;js&gt;"Hello"&lt;/js&gt;, &lt;js&gt;"World"&lt;/js&gt;);                              &lt;jc&gt;// "Hello"&lt;/jc&gt;</span>
<span class="source-line-no">1959</span><span id="line-1959">    *    firstNonEmpty(&lt;jk&gt;null&lt;/jk&gt;, &lt;js&gt;""&lt;/js&gt;);                                      &lt;jc&gt;// null&lt;/jc&gt;</span>
<span class="source-line-no">1960</span><span id="line-1960">    *    firstNonEmpty();                                                                &lt;jc&gt;// null&lt;/jc&gt;</span>
<span class="source-line-no">1961</span><span id="line-1961">    * &lt;/p&gt;</span>
<span class="source-line-no">1962</span><span id="line-1962">    *</span>
<span class="source-line-no">1963</span><span id="line-1963">    * @param s The strings to test.</span>
<span class="source-line-no">1964</span><span id="line-1964">    * @return The first non-empty string in the list, or &lt;jk&gt;null&lt;/jk&gt; if they were all &lt;jk&gt;null&lt;/jk&gt; or empty.</span>
<span class="source-line-no">1965</span><span id="line-1965">    * @see #firstNonBlank(String...)</span>
<span class="source-line-no">1966</span><span id="line-1966">    * @see Utils#ne(CharSequence)</span>
<span class="source-line-no">1967</span><span id="line-1967">    */</span>
<span class="source-line-no">1968</span><span id="line-1968">   public static String firstNonEmpty(String...s) {</span>
<span class="source-line-no">1969</span><span id="line-1969">      for (var ss : s)</span>
<span class="source-line-no">1970</span><span id="line-1970">         if (ne(ss))</span>
<span class="source-line-no">1971</span><span id="line-1971">            return ss;</span>
<span class="source-line-no">1972</span><span id="line-1972">      return null;</span>
<span class="source-line-no">1973</span><span id="line-1973">   }</span>
<span class="source-line-no">1974</span><span id="line-1974"></span>
<span class="source-line-no">1975</span><span id="line-1975">   /**</span>
<span class="source-line-no">1976</span><span id="line-1976">    * Returns the first non-whitespace character in the string.</span>
<span class="source-line-no">1977</span><span id="line-1977">    *</span>
<span class="source-line-no">1978</span><span id="line-1978">    * &lt;p&gt;</span>
<span class="source-line-no">1979</span><span id="line-1979">    * This method scans the string from the beginning and returns the first character that is not</span>
<span class="source-line-no">1980</span><span id="line-1980">    * a whitespace character (as determined by {@link Character#isWhitespace(char)}).</span>
<span class="source-line-no">1981</span><span id="line-1981">    *</span>
<span class="source-line-no">1982</span><span id="line-1982">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">1983</span><span id="line-1983">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">1984</span><span id="line-1984">    *    firstNonWhitespaceChar(&lt;js&gt;"Hello"&lt;/js&gt;);          &lt;jc&gt;// 'H'&lt;/jc&gt;</span>
<span class="source-line-no">1985</span><span id="line-1985">    *    firstNonWhitespaceChar(&lt;js&gt;"  Hello"&lt;/js&gt;);        &lt;jc&gt;// 'H'&lt;/jc&gt;</span>
<span class="source-line-no">1986</span><span id="line-1986">    *    firstNonWhitespaceChar(&lt;js&gt;"\t\nWorld"&lt;/js&gt;);      &lt;jc&gt;// 'W'&lt;/jc&gt;</span>
<span class="source-line-no">1987</span><span id="line-1987">    *    firstNonWhitespaceChar(&lt;js&gt;"   "&lt;/js&gt;);            &lt;jc&gt;// 0 (only whitespace)&lt;/jc&gt;</span>
<span class="source-line-no">1988</span><span id="line-1988">    *    firstNonWhitespaceChar(&lt;jk&gt;null&lt;/jk&gt;);            &lt;jc&gt;// 0 (null string)&lt;/jc&gt;</span>
<span class="source-line-no">1989</span><span id="line-1989">    * &lt;/p&gt;</span>
<span class="source-line-no">1990</span><span id="line-1990">    *</span>
<span class="source-line-no">1991</span><span id="line-1991">    * @param s The string to check.</span>
<span class="source-line-no">1992</span><span id="line-1992">    * @return The first non-whitespace character, or &lt;c&gt;0&lt;/c&gt; if the string is &lt;jk&gt;null&lt;/jk&gt;, empty, or composed of only whitespace.</span>
<span class="source-line-no">1993</span><span id="line-1993">    * @see #firstChar(String)</span>
<span class="source-line-no">1994</span><span id="line-1994">    * @see Character#isWhitespace(char)</span>
<span class="source-line-no">1995</span><span id="line-1995">    */</span>
<span class="source-line-no">1996</span><span id="line-1996">   public static char firstNonWhitespaceChar(String s) {</span>
<span class="source-line-no">1997</span><span id="line-1997">      if (nn(s))</span>
<span class="source-line-no">1998</span><span id="line-1998">         for (var i = 0; i &lt; s.length(); i++)</span>
<span class="source-line-no">1999</span><span id="line-1999">            if (! isWhitespace(s.charAt(i)))</span>
<span class="source-line-no">2000</span><span id="line-2000">               return s.charAt(i);</span>
<span class="source-line-no">2001</span><span id="line-2001">      return 0;</span>
<span class="source-line-no">2002</span><span id="line-2002">   }</span>
<span class="source-line-no">2003</span><span id="line-2003"></span>
<span class="source-line-no">2004</span><span id="line-2004">   /**</span>
<span class="source-line-no">2005</span><span id="line-2005">    * URL-encodes invalid characters in a URI string.</span>
<span class="source-line-no">2006</span><span id="line-2006">    *</span>
<span class="source-line-no">2007</span><span id="line-2007">    * &lt;p&gt;</span>
<span class="source-line-no">2008</span><span id="line-2008">    * This method escapes characters that are not valid in URIs by converting them to percent-encoded</span>
<span class="source-line-no">2009</span><span id="line-2009">    * format. Spaces are converted to &lt;js&gt;"+"&lt;/js&gt; characters, and other invalid characters are</span>
<span class="source-line-no">2010</span><span id="line-2010">    * percent-encoded (e.g., &lt;js&gt;"hello world"&lt;/js&gt; becomes &lt;js&gt;"hello+world"&lt;/js&gt;).</span>
<span class="source-line-no">2011</span><span id="line-2011">    *</span>
<span class="source-line-no">2012</span><span id="line-2012">    * &lt;p&gt;</span>
<span class="source-line-no">2013</span><span id="line-2013">    * Only ASCII characters (0-127) that are not in the valid URI character set are encoded.</span>
<span class="source-line-no">2014</span><span id="line-2014">    * If the string contains no invalid characters, the original string is returned.</span>
<span class="source-line-no">2015</span><span id="line-2015">    *</span>
<span class="source-line-no">2016</span><span id="line-2016">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">2017</span><span id="line-2017">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">2018</span><span id="line-2018">    *    fixUrl(&lt;js&gt;"hello world"&lt;/js&gt;);              &lt;jc&gt;// "hello+world"&lt;/jc&gt;</span>
<span class="source-line-no">2019</span><span id="line-2019">    *    fixUrl(&lt;js&gt;"file://path/to file.txt"&lt;/js&gt;);  &lt;jc&gt;// "file://path/to+file.txt"&lt;/jc&gt;</span>
<span class="source-line-no">2020</span><span id="line-2020">    *    fixUrl(&lt;js&gt;"valid-url"&lt;/js&gt;);                &lt;jc&gt;// "valid-url" (no change)&lt;/jc&gt;</span>
<span class="source-line-no">2021</span><span id="line-2021">    *    fixUrl(&lt;jk&gt;null&lt;/jk&gt;);                       &lt;jc&gt;// null&lt;/jc&gt;</span>
<span class="source-line-no">2022</span><span id="line-2022">    * &lt;/p&gt;</span>
<span class="source-line-no">2023</span><span id="line-2023">    *</span>
<span class="source-line-no">2024</span><span id="line-2024">    * @param in The URI string to encode. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">2025</span><span id="line-2025">    * @return The URI with invalid characters encoded, or &lt;jk&gt;null&lt;/jk&gt; if input is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">2026</span><span id="line-2026">    * @see #urlEncode(String)</span>
<span class="source-line-no">2027</span><span id="line-2027">    */</span>
<span class="source-line-no">2028</span><span id="line-2028">   @SuppressWarnings("null")</span>
<span class="source-line-no">2029</span><span id="line-2029">   public static String fixUrl(String in) {</span>
<span class="source-line-no">2030</span><span id="line-2030"></span>
<span class="source-line-no">2031</span><span id="line-2031">      if (in == null)</span>
<span class="source-line-no">2032</span><span id="line-2032">         return null;</span>
<span class="source-line-no">2033</span><span id="line-2033"></span>
<span class="source-line-no">2034</span><span id="line-2034">      var sb = (StringBuilder)null;</span>
<span class="source-line-no">2035</span><span id="line-2035"></span>
<span class="source-line-no">2036</span><span id="line-2036">      var m = 0;</span>
<span class="source-line-no">2037</span><span id="line-2037"></span>
<span class="source-line-no">2038</span><span id="line-2038">      for (var i = 0; i &lt; in.length(); i++) {</span>
<span class="source-line-no">2039</span><span id="line-2039">         var c = in.charAt(i);</span>
<span class="source-line-no">2040</span><span id="line-2040">         if (! URI_CHARS.contains(c)) {</span>
<span class="source-line-no">2041</span><span id="line-2041">            sb = append(sb, in.substring(m, i));</span>
<span class="source-line-no">2042</span><span id="line-2042">            if (c == ' ')</span>
<span class="source-line-no">2043</span><span id="line-2043">               sb.append("+");</span>
<span class="source-line-no">2044</span><span id="line-2044">            else</span>
<span class="source-line-no">2045</span><span id="line-2045">               sb.append('%').append(toHex2(c));</span>
<span class="source-line-no">2046</span><span id="line-2046">            m = i + 1;</span>
<span class="source-line-no">2047</span><span id="line-2047">         }</span>
<span class="source-line-no">2048</span><span id="line-2048">      }</span>
<span class="source-line-no">2049</span><span id="line-2049">      if (nn(sb)) {</span>
<span class="source-line-no">2050</span><span id="line-2050">         sb.append(in.substring(m));</span>
<span class="source-line-no">2051</span><span id="line-2051">         return sb.toString();</span>
<span class="source-line-no">2052</span><span id="line-2052">      }</span>
<span class="source-line-no">2053</span><span id="line-2053">      return in;</span>
<span class="source-line-no">2054</span><span id="line-2054"></span>
<span class="source-line-no">2055</span><span id="line-2055">   }</span>
<span class="source-line-no">2056</span><span id="line-2056"></span>
<span class="source-line-no">2057</span><span id="line-2057">   /**</span>
<span class="source-line-no">2058</span><span id="line-2058">    * Formats a string using printf-style and/or MessageFormat-style format specifiers.</span>
<span class="source-line-no">2059</span><span id="line-2059">    *</span>
<span class="source-line-no">2060</span><span id="line-2060">    * &lt;p&gt;</span>
<span class="source-line-no">2061</span><span id="line-2061">    * This method provides unified string formatting that supports both printf-style formatting</span>
<span class="source-line-no">2062</span><span id="line-2062">    * (similar to C's &lt;c&gt;printf()&lt;/c&gt; function and Java's {@link String#format(String, Object...)})</span>
<span class="source-line-no">2063</span><span id="line-2063">    * and MessageFormat-style formatting in the same pattern.</span>
<span class="source-line-no">2064</span><span id="line-2064">    *</span>
<span class="source-line-no">2065</span><span id="line-2065">    * &lt;h5 class='section'&gt;Format Support:&lt;/h5&gt;</span>
<span class="source-line-no">2066</span><span id="line-2066">    * &lt;ul&gt;</span>
<span class="source-line-no">2067</span><span id="line-2067">    *   &lt;li&gt;&lt;b&gt;Printf-style:&lt;/b&gt; &lt;js&gt;"%s"&lt;/js&gt;, &lt;js&gt;"%d"&lt;/js&gt;, &lt;js&gt;"%.2f"&lt;/js&gt;, &lt;js&gt;"%1$s"&lt;/js&gt;, etc.&lt;/li&gt;</span>
<span class="source-line-no">2068</span><span id="line-2068">    *   &lt;li&gt;&lt;b&gt;MessageFormat-style:&lt;/b&gt; &lt;js&gt;"{0}"&lt;/js&gt;, &lt;js&gt;"{1,number}"&lt;/js&gt;, &lt;js&gt;"{2,date}"&lt;/js&gt;, etc.&lt;/li&gt;</span>
<span class="source-line-no">2069</span><span id="line-2069">    *   &lt;li&gt;&lt;b&gt;Un-numbered MessageFormat:&lt;/b&gt; &lt;js&gt;"{}"&lt;/js&gt; - Sequential placeholders that are automatically numbered&lt;/li&gt;</span>
<span class="source-line-no">2070</span><span id="line-2070">    *   &lt;li&gt;&lt;b&gt;Mixed formats:&lt;/b&gt; Both styles can be used in the same pattern&lt;/li&gt;</span>
<span class="source-line-no">2071</span><span id="line-2071">    * &lt;/ul&gt;</span>
<span class="source-line-no">2072</span><span id="line-2072">    *</span>
<span class="source-line-no">2073</span><span id="line-2073">    * &lt;h5 class='section'&gt;Printf Format Specifiers:&lt;/h5&gt;</span>
<span class="source-line-no">2074</span><span id="line-2074">    * &lt;ul&gt;</span>
<span class="source-line-no">2075</span><span id="line-2075">    *   &lt;li&gt;&lt;b&gt;%s&lt;/b&gt; - String&lt;/li&gt;</span>
<span class="source-line-no">2076</span><span id="line-2076">    *   &lt;li&gt;&lt;b&gt;%d&lt;/b&gt; - Decimal integer&lt;/li&gt;</span>
<span class="source-line-no">2077</span><span id="line-2077">    *   &lt;li&gt;&lt;b&gt;%f&lt;/b&gt; - Floating point&lt;/li&gt;</span>
<span class="source-line-no">2078</span><span id="line-2078">    *   &lt;li&gt;&lt;b&gt;%x&lt;/b&gt; - Hexadecimal (lowercase)&lt;/li&gt;</span>
<span class="source-line-no">2079</span><span id="line-2079">    *   &lt;li&gt;&lt;b&gt;%X&lt;/b&gt; - Hexadecimal (uppercase)&lt;/li&gt;</span>
<span class="source-line-no">2080</span><span id="line-2080">    *   &lt;li&gt;&lt;b&gt;%o&lt;/b&gt; - Octal&lt;/li&gt;</span>
<span class="source-line-no">2081</span><span id="line-2081">    *   &lt;li&gt;&lt;b&gt;%b&lt;/b&gt; - Boolean&lt;/li&gt;</span>
<span class="source-line-no">2082</span><span id="line-2082">    *   &lt;li&gt;&lt;b&gt;%c&lt;/b&gt; - Character&lt;/li&gt;</span>
<span class="source-line-no">2083</span><span id="line-2083">    *   &lt;li&gt;&lt;b&gt;%e&lt;/b&gt; - Scientific notation (lowercase)&lt;/li&gt;</span>
<span class="source-line-no">2084</span><span id="line-2084">    *   &lt;li&gt;&lt;b&gt;%E&lt;/b&gt; - Scientific notation (uppercase)&lt;/li&gt;</span>
<span class="source-line-no">2085</span><span id="line-2085">    *   &lt;li&gt;&lt;b&gt;%g&lt;/b&gt; - General format (lowercase)&lt;/li&gt;</span>
<span class="source-line-no">2086</span><span id="line-2086">    *   &lt;li&gt;&lt;b&gt;%G&lt;/b&gt; - General format (uppercase)&lt;/li&gt;</span>
<span class="source-line-no">2087</span><span id="line-2087">    *   &lt;li&gt;&lt;b&gt;%n&lt;/b&gt; - Platform-specific line separator&lt;/li&gt;</span>
<span class="source-line-no">2088</span><span id="line-2088">    *   &lt;li&gt;&lt;b&gt;%%&lt;/b&gt; - Literal percent sign&lt;/li&gt;</span>
<span class="source-line-no">2089</span><span id="line-2089">    * &lt;/ul&gt;</span>
<span class="source-line-no">2090</span><span id="line-2090">    *</span>
<span class="source-line-no">2091</span><span id="line-2091">    * &lt;h5 class='section'&gt;Format Specifier Syntax:&lt;/h5&gt;</span>
<span class="source-line-no">2092</span><span id="line-2092">    * &lt;p&gt;</span>
<span class="source-line-no">2093</span><span id="line-2093">    * Printf format specifiers follow this pattern: &lt;c&gt;%[argument_index$][flags][width][.precision]conversion&lt;/c&gt;</span>
<span class="source-line-no">2094</span><span id="line-2094">    * &lt;/p&gt;</span>
<span class="source-line-no">2095</span><span id="line-2095">    * &lt;p&gt;</span>
<span class="source-line-no">2096</span><span id="line-2096">    * MessageFormat placeholders follow this pattern: &lt;c&gt;{argument_index[,format_type[,format_style]]}&lt;/c&gt;</span>
<span class="source-line-no">2097</span><span id="line-2097">    * &lt;/p&gt;</span>
<span class="source-line-no">2098</span><span id="line-2098">    *</span>
<span class="source-line-no">2099</span><span id="line-2099">    * &lt;h5 class='section'&gt;Examples:&lt;/h5&gt;</span>
<span class="source-line-no">2100</span><span id="line-2100">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">2101</span><span id="line-2101">    *    &lt;jc&gt;// Printf-style formatting&lt;/jc&gt;</span>
<span class="source-line-no">2102</span><span id="line-2102">    *    format(&lt;js&gt;"Hello %s, you have %d items"&lt;/js&gt;, &lt;js&gt;"John"&lt;/js&gt;, 5);</span>
<span class="source-line-no">2103</span><span id="line-2103">    *    &lt;jc&gt;// Returns: "Hello John, you have 5 items"&lt;/jc&gt;</span>
<span class="source-line-no">2104</span><span id="line-2104">    *</span>
<span class="source-line-no">2105</span><span id="line-2105">    *    &lt;jc&gt;// Floating point with precision&lt;/jc&gt;</span>
<span class="source-line-no">2106</span><span id="line-2106">    *    format(&lt;js&gt;"Price: $%.2f"&lt;/js&gt;, 19.99);</span>
<span class="source-line-no">2107</span><span id="line-2107">    *    &lt;jc&gt;// Returns: "Price: $19.99"&lt;/jc&gt;</span>
<span class="source-line-no">2108</span><span id="line-2108">    *</span>
<span class="source-line-no">2109</span><span id="line-2109">    *    &lt;jc&gt;// MessageFormat-style formatting&lt;/jc&gt;</span>
<span class="source-line-no">2110</span><span id="line-2110">    *    format(&lt;js&gt;"Hello {0}, you have {1} items"&lt;/js&gt;, &lt;js&gt;"John"&lt;/js&gt;, 5);</span>
<span class="source-line-no">2111</span><span id="line-2111">    *    &lt;jc&gt;// Returns: "Hello John, you have 5 items"&lt;/jc&gt;</span>
<span class="source-line-no">2112</span><span id="line-2112">    *</span>
<span class="source-line-no">2113</span><span id="line-2113">    *    &lt;jc&gt;// Un-numbered MessageFormat placeholders (sequential)&lt;/jc&gt;</span>
<span class="source-line-no">2114</span><span id="line-2114">    *    format(&lt;js&gt;"Hello {}, you have {} items"&lt;/js&gt;, &lt;js&gt;"John"&lt;/js&gt;, 5);</span>
<span class="source-line-no">2115</span><span id="line-2115">    *    &lt;jc&gt;// Returns: "Hello John, you have 5 items"&lt;/jc&gt;</span>
<span class="source-line-no">2116</span><span id="line-2116">    *</span>
<span class="source-line-no">2117</span><span id="line-2117">    *    &lt;jc&gt;// Mixed format styles in the same pattern&lt;/jc&gt;</span>
<span class="source-line-no">2118</span><span id="line-2118">    *    format(&lt;js&gt;"User {0} has %d items and %s status"&lt;/js&gt;, &lt;js&gt;"Alice"&lt;/js&gt;, 10, &lt;js&gt;"active"&lt;/js&gt;);</span>
<span class="source-line-no">2119</span><span id="line-2119">    *    &lt;jc&gt;// Returns: "User Alice has 10 items and active status"&lt;/jc&gt;</span>
<span class="source-line-no">2120</span><span id="line-2120">    *</span>
<span class="source-line-no">2121</span><span id="line-2121">    *    &lt;jc&gt;// Width and alignment (printf)&lt;/jc&gt;</span>
<span class="source-line-no">2122</span><span id="line-2122">    *    format(&lt;js&gt;"Name: %-20s Age: %3d"&lt;/js&gt;, &lt;js&gt;"John"&lt;/js&gt;, 25);</span>
<span class="source-line-no">2123</span><span id="line-2123">    *    &lt;jc&gt;// Returns: "Name: John                 Age:  25"&lt;/jc&gt;</span>
<span class="source-line-no">2124</span><span id="line-2124">    *</span>
<span class="source-line-no">2125</span><span id="line-2125">    *    &lt;jc&gt;// Hexadecimal (printf)&lt;/jc&gt;</span>
<span class="source-line-no">2126</span><span id="line-2126">    *    format(&lt;js&gt;"Color: #%06X"&lt;/js&gt;, 0xFF5733);</span>
<span class="source-line-no">2127</span><span id="line-2127">    *    &lt;jc&gt;// Returns: "Color: #FF5733"&lt;/jc&gt;</span>
<span class="source-line-no">2128</span><span id="line-2128">    *</span>
<span class="source-line-no">2129</span><span id="line-2129">    *    &lt;jc&gt;// Argument index (reuse arguments)&lt;/jc&gt;</span>
<span class="source-line-no">2130</span><span id="line-2130">    *    format(&lt;js&gt;"%1$s loves %2$s, and {0} also loves %3$s"&lt;/js&gt;, &lt;js&gt;"Alice"&lt;/js&gt;, &lt;js&gt;"Bob"&lt;/js&gt;, &lt;js&gt;"Charlie"&lt;/js&gt;);</span>
<span class="source-line-no">2131</span><span id="line-2131">    *    &lt;jc&gt;// Returns: "Alice loves Bob, and Alice also loves Charlie"&lt;/jc&gt;</span>
<span class="source-line-no">2132</span><span id="line-2132">    * &lt;/p&gt;</span>
<span class="source-line-no">2133</span><span id="line-2133">    *</span>
<span class="source-line-no">2134</span><span id="line-2134">    * &lt;h5 class='section'&gt;Comparison with mformat():&lt;/h5&gt;</span>
<span class="source-line-no">2135</span><span id="line-2135">    * &lt;p&gt;</span>
<span class="source-line-no">2136</span><span id="line-2136">    * This method supports both MessageFormat-style and printf-style formats.</span>
<span class="source-line-no">2137</span><span id="line-2137">    * &lt;/p&gt;</span>
<span class="source-line-no">2138</span><span id="line-2138">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">2139</span><span id="line-2139">    *    &lt;jc&gt;// Both styles supported (this method)&lt;/jc&gt;</span>
<span class="source-line-no">2140</span><span id="line-2140">    *    format(&lt;js&gt;"Hello %s, you have %d items"&lt;/js&gt;, &lt;js&gt;"John"&lt;/js&gt;, 5);</span>
<span class="source-line-no">2141</span><span id="line-2141">    *    format(&lt;js&gt;"Hello {0}, you have {1} items"&lt;/js&gt;, &lt;js&gt;"John"&lt;/js&gt;, 5);</span>
<span class="source-line-no">2142</span><span id="line-2142">    *    format(&lt;js&gt;"User {0} has %d items"&lt;/js&gt;, &lt;js&gt;"Alice"&lt;/js&gt;, 10);</span>
<span class="source-line-no">2143</span><span id="line-2143">    *</span>
<span class="source-line-no">2144</span><span id="line-2144">    *    &lt;jc&gt;// MessageFormat style only&lt;/jc&gt;</span>
<span class="source-line-no">2145</span><span id="line-2145">    *    mformat(&lt;js&gt;"Hello {0}, you have {1} items"&lt;/js&gt;, &lt;js&gt;"John"&lt;/js&gt;, 5);</span>
<span class="source-line-no">2146</span><span id="line-2146">    * &lt;/p&gt;</span>
<span class="source-line-no">2147</span><span id="line-2147">    *</span>
<span class="source-line-no">2148</span><span id="line-2148">    * &lt;h5 class='section'&gt;Null Handling:&lt;/h5&gt;</span>
<span class="source-line-no">2149</span><span id="line-2149">    * &lt;p&gt;</span>
<span class="source-line-no">2150</span><span id="line-2150">    * Null arguments are formatted as the string &lt;js&gt;"null"&lt;/js&gt; for string conversions,</span>
<span class="source-line-no">2151</span><span id="line-2151">    * or cause a {@link NullPointerException} for numeric conversions (consistent with {@link String#format(String, Object...)}).</span>
<span class="source-line-no">2152</span><span id="line-2152">    * &lt;/p&gt;</span>
<span class="source-line-no">2153</span><span id="line-2153">    *</span>
<span class="source-line-no">2154</span><span id="line-2154">    * @param pattern The format string supporting both MessageFormat and printf-style placeholders.</span>
<span class="source-line-no">2155</span><span id="line-2155">    * @param args The arguments to format.</span>
<span class="source-line-no">2156</span><span id="line-2156">    * @return The formatted string.</span>
<span class="source-line-no">2157</span><span id="line-2157">    * @throws java.util.IllegalFormatException If the format string is invalid or arguments don't match the format specifiers.</span>
<span class="source-line-no">2158</span><span id="line-2158">    * @see StringFormat for detailed format specification</span>
<span class="source-line-no">2159</span><span id="line-2159">    * @see String#format(String, Object...)</span>
<span class="source-line-no">2160</span><span id="line-2160">    * @see StringFormat for detailed format specification</span>
<span class="source-line-no">2161</span><span id="line-2161">    */</span>
<span class="source-line-no">2162</span><span id="line-2162">   public static String format(String pattern, Object...args) {</span>
<span class="source-line-no">2163</span><span id="line-2163">      return StringFormat.format(pattern, args);</span>
<span class="source-line-no">2164</span><span id="line-2164">   }</span>
<span class="source-line-no">2165</span><span id="line-2165"></span>
<span class="source-line-no">2166</span><span id="line-2166">   /**</span>
<span class="source-line-no">2167</span><span id="line-2167">    * Simple utility for replacing variables of the form &lt;js&gt;"{key}"&lt;/js&gt; with values in the specified map.</span>
<span class="source-line-no">2168</span><span id="line-2168">    *</span>
<span class="source-line-no">2169</span><span id="line-2169">    * &lt;p&gt;</span>
<span class="source-line-no">2170</span><span id="line-2170">    * Supports named MessageFormat-style variables: &lt;js&gt;"{key}"&lt;/js&gt; where &lt;c&gt;key&lt;/c&gt; is a map key.</span>
<span class="source-line-no">2171</span><span id="line-2171">    * For un-numbered sequential placeholders &lt;js&gt;"{}"&lt;/js&gt;, use {@link #format(String, Object...)} instead.</span>
<span class="source-line-no">2172</span><span id="line-2172">    *</span>
<span class="source-line-no">2173</span><span id="line-2173">    * &lt;p&gt;</span>
<span class="source-line-no">2174</span><span id="line-2174">    * Variable values are converted to strings using {@link #readable(Object)} to ensure consistent,</span>
<span class="source-line-no">2175</span><span id="line-2175">    * readable formatting (e.g., byte arrays are converted to hex, collections are formatted without spaces).</span>
<span class="source-line-no">2176</span><span id="line-2176">    *</span>
<span class="source-line-no">2177</span><span id="line-2177">    * &lt;p&gt;</span>
<span class="source-line-no">2178</span><span id="line-2178">    * Nested variables are supported in both the input string and map values.</span>
<span class="source-line-no">2179</span><span id="line-2179">    *</span>
<span class="source-line-no">2180</span><span id="line-2180">    * &lt;p&gt;</span>
<span class="source-line-no">2181</span><span id="line-2181">    * If the map does not contain the specified value, the variable is not replaced.</span>
<span class="source-line-no">2182</span><span id="line-2182">    *</span>
<span class="source-line-no">2183</span><span id="line-2183">    * &lt;p&gt;</span>
<span class="source-line-no">2184</span><span id="line-2184">    * &lt;jk&gt;null&lt;/jk&gt; values in the map are treated as blank strings.</span>
<span class="source-line-no">2185</span><span id="line-2185">    *</span>
<span class="source-line-no">2186</span><span id="line-2186">    * @param s The string containing variables to replace.</span>
<span class="source-line-no">2187</span><span id="line-2187">    * @param m The map containing the variable values.</span>
<span class="source-line-no">2188</span><span id="line-2188">    * @return The new string with variables replaced, or the original string if it didn't have variables in it.</span>
<span class="source-line-no">2189</span><span id="line-2189">    */</span>
<span class="source-line-no">2190</span><span id="line-2190">   public static String formatNamed(String s, Map&lt;String,Object&gt; m) {</span>
<span class="source-line-no">2191</span><span id="line-2191"></span>
<span class="source-line-no">2192</span><span id="line-2192">      if (s == null)</span>
<span class="source-line-no">2193</span><span id="line-2193">         return null;</span>
<span class="source-line-no">2194</span><span id="line-2194"></span>
<span class="source-line-no">2195</span><span id="line-2195">      if (m == null || m.isEmpty() || s.indexOf('{') == -1)</span>
<span class="source-line-no">2196</span><span id="line-2196">         return s;</span>
<span class="source-line-no">2197</span><span id="line-2197"></span>
<span class="source-line-no">2198</span><span id="line-2198">      // S1: Not in variable, looking for '{'</span>
<span class="source-line-no">2199</span><span id="line-2199">      // S2: Found '{', Looking for '}'</span>
<span class="source-line-no">2200</span><span id="line-2200"></span>
<span class="source-line-no">2201</span><span id="line-2201">      var state = S1;</span>
<span class="source-line-no">2202</span><span id="line-2202">      var hasInternalVar = false;</span>
<span class="source-line-no">2203</span><span id="line-2203">      var x = 0;</span>
<span class="source-line-no">2204</span><span id="line-2204">      var depth = 0;</span>
<span class="source-line-no">2205</span><span id="line-2205">      var length = s.length();</span>
<span class="source-line-no">2206</span><span id="line-2206">      var out = new StringBuilder();</span>
<span class="source-line-no">2207</span><span id="line-2207"></span>
<span class="source-line-no">2208</span><span id="line-2208">      for (var i = 0; i &lt; length; i++) {</span>
<span class="source-line-no">2209</span><span id="line-2209">         var c = s.charAt(i);</span>
<span class="source-line-no">2210</span><span id="line-2210">         if (state == S1) {</span>
<span class="source-line-no">2211</span><span id="line-2211">            if (c == '{') {</span>
<span class="source-line-no">2212</span><span id="line-2212">               state = S2;</span>
<span class="source-line-no">2213</span><span id="line-2213">               x = i;</span>
<span class="source-line-no">2214</span><span id="line-2214">            } else {</span>
<span class="source-line-no">2215</span><span id="line-2215">               out.append(c);</span>
<span class="source-line-no">2216</span><span id="line-2216">            }</span>
<span class="source-line-no">2217</span><span id="line-2217">         } else /* state == S2 */ {</span>
<span class="source-line-no">2218</span><span id="line-2218">            if (c == '{') {</span>
<span class="source-line-no">2219</span><span id="line-2219">               depth++;</span>
<span class="source-line-no">2220</span><span id="line-2220">               hasInternalVar = true;</span>
<span class="source-line-no">2221</span><span id="line-2221">            } else if (c == '}') {</span>
<span class="source-line-no">2222</span><span id="line-2222">               if (depth &gt; 0) {</span>
<span class="source-line-no">2223</span><span id="line-2223">                  depth--;</span>
<span class="source-line-no">2224</span><span id="line-2224">               } else {</span>
<span class="source-line-no">2225</span><span id="line-2225">                  var key = s.substring(x + 1, i);</span>
<span class="source-line-no">2226</span><span id="line-2226">                  key = (hasInternalVar ? formatNamed(key, m) : key);</span>
<span class="source-line-no">2227</span><span id="line-2227">                  hasInternalVar = false;</span>
<span class="source-line-no">2228</span><span id="line-2228">                  // JUNEAU-248: Check if key exists in map by attempting to get it</span>
<span class="source-line-no">2229</span><span id="line-2229">                  // For regular maps: use containsKey() OR nn(get()) check</span>
<span class="source-line-no">2230</span><span id="line-2230">                  // For BeanMaps: get() returns non-null for accessible properties (including hidden ones)</span>
<span class="source-line-no">2231</span><span id="line-2231">                  var val = m.get(key);</span>
<span class="source-line-no">2232</span><span id="line-2232">                  // Check if key actually exists: either containsKey is true, or val is non-null</span>
<span class="source-line-no">2233</span><span id="line-2233">                  // This handles both regular maps and BeanMaps correctly</span>
<span class="source-line-no">2234</span><span id="line-2234">                  var keyExists = m.containsKey(key) || nn(val);</span>
<span class="source-line-no">2235</span><span id="line-2235">                  if (! keyExists)</span>
<span class="source-line-no">2236</span><span id="line-2236">                     out.append('{').append(key).append('}');</span>
<span class="source-line-no">2237</span><span id="line-2237">                  else {</span>
<span class="source-line-no">2238</span><span id="line-2238">                     if (val == null)</span>
<span class="source-line-no">2239</span><span id="line-2239">                        val = "";</span>
<span class="source-line-no">2240</span><span id="line-2240">                     var v = r(val);</span>
<span class="source-line-no">2241</span><span id="line-2241">                     // If the replacement also contains variables, replace them now.</span>
<span class="source-line-no">2242</span><span id="line-2242">                     if (v.indexOf('{') != -1)</span>
<span class="source-line-no">2243</span><span id="line-2243">                        v = formatNamed(v, m);</span>
<span class="source-line-no">2244</span><span id="line-2244">                     out.append(v);</span>
<span class="source-line-no">2245</span><span id="line-2245">                  }</span>
<span class="source-line-no">2246</span><span id="line-2246">                  state = S1;</span>
<span class="source-line-no">2247</span><span id="line-2247">               }</span>
<span class="source-line-no">2248</span><span id="line-2248">            }</span>
<span class="source-line-no">2249</span><span id="line-2249">         }</span>
<span class="source-line-no">2250</span><span id="line-2250">      }</span>
<span class="source-line-no">2251</span><span id="line-2251">      return out.toString();</span>
<span class="source-line-no">2252</span><span id="line-2252">   }</span>
<span class="source-line-no">2253</span><span id="line-2253"></span>
<span class="source-line-no">2254</span><span id="line-2254">   /**</span>
<span class="source-line-no">2255</span><span id="line-2255">    * Converts a hexadecimal character string to a byte array.</span>
<span class="source-line-no">2256</span><span id="line-2256">    *</span>
<span class="source-line-no">2257</span><span id="line-2257">    * @param hex The string to convert to a byte array.</span>
<span class="source-line-no">2258</span><span id="line-2258">    * @return A new byte array.</span>
<span class="source-line-no">2259</span><span id="line-2259">    */</span>
<span class="source-line-no">2260</span><span id="line-2260">   public static byte[] fromHex(String hex) {</span>
<span class="source-line-no">2261</span><span id="line-2261">      var buff = ByteBuffer.allocate(hex.length() / 2);</span>
<span class="source-line-no">2262</span><span id="line-2262">      for (var i = 0; i &lt; hex.length(); i += 2)</span>
<span class="source-line-no">2263</span><span id="line-2263">         buff.put((byte)Integer.parseInt(hex.substring(i, i + 2), 16));</span>
<span class="source-line-no">2264</span><span id="line-2264">      buff.rewind();</span>
<span class="source-line-no">2265</span><span id="line-2265">      return buff.array();</span>
<span class="source-line-no">2266</span><span id="line-2266">   }</span>
<span class="source-line-no">2267</span><span id="line-2267"></span>
<span class="source-line-no">2268</span><span id="line-2268">   /**</span>
<span class="source-line-no">2269</span><span id="line-2269">    * Converts a hexadecimal byte stream (e.g. "34A5BC") into a UTF-8 encoded string.</span>
<span class="source-line-no">2270</span><span id="line-2270">    *</span>
<span class="source-line-no">2271</span><span id="line-2271">    * @param hex The hexadecimal string.</span>
<span class="source-line-no">2272</span><span id="line-2272">    * @return The UTF-8 string.</span>
<span class="source-line-no">2273</span><span id="line-2273">    */</span>
<span class="source-line-no">2274</span><span id="line-2274">   public static String fromHexToUTF8(String hex) {</span>
<span class="source-line-no">2275</span><span id="line-2275">      var buff = ByteBuffer.allocate(hex.length() / 2);</span>
<span class="source-line-no">2276</span><span id="line-2276">      for (var i = 0; i &lt; hex.length(); i += 2)</span>
<span class="source-line-no">2277</span><span id="line-2277">         buff.put((byte)Integer.parseInt(hex.substring(i, i + 2), 16));</span>
<span class="source-line-no">2278</span><span id="line-2278">      buff.rewind();  // Fixes Java 11 issue.</span>
<span class="source-line-no">2279</span><span id="line-2279">      return UTF_8.decode(buff).toString();</span>
<span class="source-line-no">2280</span><span id="line-2280">   }</span>
<span class="source-line-no">2281</span><span id="line-2281"></span>
<span class="source-line-no">2282</span><span id="line-2282">   /**</span>
<span class="source-line-no">2283</span><span id="line-2283">    * Same as {@link #fromHex(String)} except expects spaces between the byte strings.</span>
<span class="source-line-no">2284</span><span id="line-2284">    *</span>
<span class="source-line-no">2285</span><span id="line-2285">    * @param hex The string to convert to a byte array.</span>
<span class="source-line-no">2286</span><span id="line-2286">    * @return A new byte array.</span>
<span class="source-line-no">2287</span><span id="line-2287">    */</span>
<span class="source-line-no">2288</span><span id="line-2288">   public static byte[] fromSpacedHex(String hex) {</span>
<span class="source-line-no">2289</span><span id="line-2289">      var buff = ByteBuffer.allocate((hex.length() + 1) / 3);</span>
<span class="source-line-no">2290</span><span id="line-2290">      for (var i = 0; i &lt; hex.length(); i += 3)</span>
<span class="source-line-no">2291</span><span id="line-2291">         buff.put((byte)Integer.parseInt(hex.substring(i, i + 2), 16));</span>
<span class="source-line-no">2292</span><span id="line-2292">      buff.rewind();</span>
<span class="source-line-no">2293</span><span id="line-2293">      return buff.array();</span>
<span class="source-line-no">2294</span><span id="line-2294">   }</span>
<span class="source-line-no">2295</span><span id="line-2295"></span>
<span class="source-line-no">2296</span><span id="line-2296">   /**</span>
<span class="source-line-no">2297</span><span id="line-2297">    * Converts a space-deliminted hexadecimal byte stream (e.g. "34 A5 BC") into a UTF-8 encoded string.</span>
<span class="source-line-no">2298</span><span id="line-2298">    *</span>
<span class="source-line-no">2299</span><span id="line-2299">    * @param hex The hexadecimal string.</span>
<span class="source-line-no">2300</span><span id="line-2300">    * @return The UTF-8 string.</span>
<span class="source-line-no">2301</span><span id="line-2301">    */</span>
<span class="source-line-no">2302</span><span id="line-2302">   public static String fromSpacedHexToUTF8(String hex) {</span>
<span class="source-line-no">2303</span><span id="line-2303">      var buff = ByteBuffer.allocate((hex.length() + 1) / 3);</span>
<span class="source-line-no">2304</span><span id="line-2304">      for (var i = 0; i &lt; hex.length(); i += 3)</span>
<span class="source-line-no">2305</span><span id="line-2305">         buff.put((byte)Integer.parseInt(hex.substring(i, i + 2), 16));</span>
<span class="source-line-no">2306</span><span id="line-2306">      buff.rewind();  // Fixes Java 11 issue.</span>
<span class="source-line-no">2307</span><span id="line-2307">      return UTF_8.decode(buff).toString();</span>
<span class="source-line-no">2308</span><span id="line-2308">   }</span>
<span class="source-line-no">2309</span><span id="line-2309"></span>
<span class="source-line-no">2310</span><span id="line-2310">   /**</span>
<span class="source-line-no">2311</span><span id="line-2311">    * Generates a random UUID string in standard format.</span>
<span class="source-line-no">2312</span><span id="line-2312">    *</span>
<span class="source-line-no">2313</span><span id="line-2313">    * &lt;p&gt;</span>
<span class="source-line-no">2314</span><span id="line-2314">    * Returns a UUID in the format: &lt;c&gt;xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx&lt;/c&gt;</span>
<span class="source-line-no">2315</span><span id="line-2315">    *</span>
<span class="source-line-no">2316</span><span id="line-2316">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">2317</span><span id="line-2317">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">2318</span><span id="line-2318">    *    generateUUID();  &lt;jc&gt;// "550e8400-e29b-41d4-a716-446655440000"&lt;/jc&gt;</span>
<span class="source-line-no">2319</span><span id="line-2319">    * &lt;/p&gt;</span>
<span class="source-line-no">2320</span><span id="line-2320">    *</span>
<span class="source-line-no">2321</span><span id="line-2321">    * @return A new random UUID string.</span>
<span class="source-line-no">2322</span><span id="line-2322">    */</span>
<span class="source-line-no">2323</span><span id="line-2323">   public static String generateUUID() {</span>
<span class="source-line-no">2324</span><span id="line-2324">      return UUID.randomUUID().toString();</span>
<span class="source-line-no">2325</span><span id="line-2325">   }</span>
<span class="source-line-no">2326</span><span id="line-2326"></span>
<span class="source-line-no">2327</span><span id="line-2327">   /**</span>
<span class="source-line-no">2328</span><span id="line-2328">    * Given an absolute URI, returns just the authority portion (e.g. &lt;js&gt;"http://hostname:port"&lt;/js&gt;)</span>
<span class="source-line-no">2329</span><span id="line-2329">    *</span>
<span class="source-line-no">2330</span><span id="line-2330">    * @param s The URI string.</span>
<span class="source-line-no">2331</span><span id="line-2331">    * @return Just the authority portion of the URI.</span>
<span class="source-line-no">2332</span><span id="line-2332">    */</span>
<span class="source-line-no">2333</span><span id="line-2333">   public static String getAuthorityUri(String s) {  // NOSONAR - False positive.</span>
<span class="source-line-no">2334</span><span id="line-2334"></span>
<span class="source-line-no">2335</span><span id="line-2335">      // Use a state machine for maximum performance.</span>
<span class="source-line-no">2336</span><span id="line-2336"></span>
<span class="source-line-no">2337</span><span id="line-2337">      // S1: Looking for http</span>
<span class="source-line-no">2338</span><span id="line-2338">      // S2: Found http, looking for :</span>
<span class="source-line-no">2339</span><span id="line-2339">      // S3: Found :, looking for /</span>
<span class="source-line-no">2340</span><span id="line-2340">      // S4: Found /, looking for /</span>
<span class="source-line-no">2341</span><span id="line-2341">      // S5: Found /, looking for x</span>
<span class="source-line-no">2342</span><span id="line-2342">      // S6: Found x, looking for /</span>
<span class="source-line-no">2343</span><span id="line-2343"></span>
<span class="source-line-no">2344</span><span id="line-2344">      var state = S1;</span>
<span class="source-line-no">2345</span><span id="line-2345"></span>
<span class="source-line-no">2346</span><span id="line-2346">      for (var i = 0; i &lt; s.length(); i++) {</span>
<span class="source-line-no">2347</span><span id="line-2347">         var c = s.charAt(i);</span>
<span class="source-line-no">2348</span><span id="line-2348">         if (state == S1) {</span>
<span class="source-line-no">2349</span><span id="line-2349">            if (isLowerCaseLetter(c))</span>
<span class="source-line-no">2350</span><span id="line-2350">               state = S2;</span>
<span class="source-line-no">2351</span><span id="line-2351">            else</span>
<span class="source-line-no">2352</span><span id="line-2352">               return s;</span>
<span class="source-line-no">2353</span><span id="line-2353">         } else if (state == S2) {</span>
<span class="source-line-no">2354</span><span id="line-2354">            if (c == ':')</span>
<span class="source-line-no">2355</span><span id="line-2355">               state = S3;</span>
<span class="source-line-no">2356</span><span id="line-2356">            else if (! isLowerCaseLetter(c))</span>
<span class="source-line-no">2357</span><span id="line-2357">               return s;</span>
<span class="source-line-no">2358</span><span id="line-2358">         } else if (state == S3) {  // NOSONAR - False positive.</span>
<span class="source-line-no">2359</span><span id="line-2359">            if (c == '/')</span>
<span class="source-line-no">2360</span><span id="line-2360">               state = S4;</span>
<span class="source-line-no">2361</span><span id="line-2361">            else</span>
<span class="source-line-no">2362</span><span id="line-2362">               return s;</span>
<span class="source-line-no">2363</span><span id="line-2363">         } else if (state == S4) {</span>
<span class="source-line-no">2364</span><span id="line-2364">            if (c == '/')</span>
<span class="source-line-no">2365</span><span id="line-2365">               state = S5;</span>
<span class="source-line-no">2366</span><span id="line-2366">            else</span>
<span class="source-line-no">2367</span><span id="line-2367">               return s;</span>
<span class="source-line-no">2368</span><span id="line-2368">         } else if (state == S5) {</span>
<span class="source-line-no">2369</span><span id="line-2369">            if (c != '/')</span>
<span class="source-line-no">2370</span><span id="line-2370">               state = S6;</span>
<span class="source-line-no">2371</span><span id="line-2371">            else</span>
<span class="source-line-no">2372</span><span id="line-2372">               return s;</span>
<span class="source-line-no">2373</span><span id="line-2373">         } else /* state == S6 */ {</span>
<span class="source-line-no">2374</span><span id="line-2374">            if (c == '/')  // NOSONAR - Intentional.</span>
<span class="source-line-no">2375</span><span id="line-2375">               return s.substring(0, i);</span>
<span class="source-line-no">2376</span><span id="line-2376">         }</span>
<span class="source-line-no">2377</span><span id="line-2377">      }</span>
<span class="source-line-no">2378</span><span id="line-2378"></span>
<span class="source-line-no">2379</span><span id="line-2379">      return s;</span>
<span class="source-line-no">2380</span><span id="line-2380">   }</span>
<span class="source-line-no">2381</span><span id="line-2381"></span>
<span class="source-line-no">2382</span><span id="line-2382">   /**</span>
<span class="source-line-no">2383</span><span id="line-2383">    * Parses a duration string.</span>
<span class="source-line-no">2384</span><span id="line-2384">    *</span>
<span class="source-line-no">2385</span><span id="line-2385">    * &lt;p&gt;</span>
<span class="source-line-no">2386</span><span id="line-2386">    * Supports simple duration formats:</span>
<span class="source-line-no">2387</span><span id="line-2387">    *</span>
<span class="source-line-no">2388</span><span id="line-2388">    * &lt;h5 class='section'&gt;Format Examples:&lt;/h5&gt;</span>
<span class="source-line-no">2389</span><span id="line-2389">    * &lt;ul&gt;</span>
<span class="source-line-no">2390</span><span id="line-2390">    *    &lt;li&gt;&lt;js&gt;"1000"&lt;/js&gt; - 1000 milliseconds (no suffix)</span>
<span class="source-line-no">2391</span><span id="line-2391">    *    &lt;li&gt;&lt;js&gt;"10s"&lt;/js&gt; - 10 seconds</span>
<span class="source-line-no">2392</span><span id="line-2392">    *    &lt;li&gt;&lt;js&gt;"10 sec"&lt;/js&gt; - 10 seconds</span>
<span class="source-line-no">2393</span><span id="line-2393">    *    &lt;li&gt;&lt;js&gt;"10 seconds"&lt;/js&gt; - 10 seconds</span>
<span class="source-line-no">2394</span><span id="line-2394">    *    &lt;li&gt;&lt;js&gt;"1.5h"&lt;/js&gt; - 1.5 hours (5400000 ms)</span>
<span class="source-line-no">2395</span><span id="line-2395">    *    &lt;li&gt;&lt;js&gt;"1h30m"&lt;/js&gt; - 1 hour 30 minutes (5400000 ms)</span>
<span class="source-line-no">2396</span><span id="line-2396">    *    &lt;li&gt;&lt;js&gt;"1h 30m"&lt;/js&gt; - 1 hour 30 minutes (with spaces)</span>
<span class="source-line-no">2397</span><span id="line-2397">    * &lt;/ul&gt;</span>
<span class="source-line-no">2398</span><span id="line-2398">    *</span>
<span class="source-line-no">2399</span><span id="line-2399">    * &lt;h5 class='section'&gt;Supported Units:&lt;/h5&gt;</span>
<span class="source-line-no">2400</span><span id="line-2400">    * &lt;ul&gt;</span>
<span class="source-line-no">2401</span><span id="line-2401">    *    &lt;li&gt;&lt;b&gt;Milliseconds:&lt;/b&gt; &lt;js&gt;"ms"&lt;/js&gt;, &lt;js&gt;"millis"&lt;/js&gt;, &lt;js&gt;"milliseconds"&lt;/js&gt; (or no suffix)</span>
<span class="source-line-no">2402</span><span id="line-2402">    *    &lt;li&gt;&lt;b&gt;Seconds:&lt;/b&gt; &lt;js&gt;"s"&lt;/js&gt;, &lt;js&gt;"sec"&lt;/js&gt;, &lt;js&gt;"second"&lt;/js&gt;, &lt;js&gt;"seconds"&lt;/js&gt;</span>
<span class="source-line-no">2403</span><span id="line-2403">    *    &lt;li&gt;&lt;b&gt;Minutes:&lt;/b&gt; &lt;js&gt;"m"&lt;/js&gt;, &lt;js&gt;"min"&lt;/js&gt;, &lt;js&gt;"minute"&lt;/js&gt;, &lt;js&gt;"minutes"&lt;/js&gt;</span>
<span class="source-line-no">2404</span><span id="line-2404">    *    &lt;li&gt;&lt;b&gt;Hours:&lt;/b&gt; &lt;js&gt;"h"&lt;/js&gt;, &lt;js&gt;"hour"&lt;/js&gt;, &lt;js&gt;"hours"&lt;/js&gt;</span>
<span class="source-line-no">2405</span><span id="line-2405">    *    &lt;li&gt;&lt;b&gt;Days:&lt;/b&gt; &lt;js&gt;"d"&lt;/js&gt;, &lt;js&gt;"day"&lt;/js&gt;, &lt;js&gt;"days"&lt;/js&gt;</span>
<span class="source-line-no">2406</span><span id="line-2406">    *    &lt;li&gt;&lt;b&gt;Weeks:&lt;/b&gt; &lt;js&gt;"w"&lt;/js&gt;, &lt;js&gt;"week"&lt;/js&gt;, &lt;js&gt;"weeks"&lt;/js&gt;</span>
<span class="source-line-no">2407</span><span id="line-2407">    *    &lt;li&gt;&lt;b&gt;Months:&lt;/b&gt; &lt;js&gt;"mo"&lt;/js&gt;, &lt;js&gt;"month"&lt;/js&gt;, &lt;js&gt;"months"&lt;/js&gt; (30 days)</span>
<span class="source-line-no">2408</span><span id="line-2408">    *    &lt;li&gt;&lt;b&gt;Years:&lt;/b&gt; &lt;js&gt;"y"&lt;/js&gt;, &lt;js&gt;"yr"&lt;/js&gt;, &lt;js&gt;"year"&lt;/js&gt;, &lt;js&gt;"years"&lt;/js&gt; (365 days)</span>
<span class="source-line-no">2409</span><span id="line-2409">    * &lt;/ul&gt;</span>
<span class="source-line-no">2410</span><span id="line-2410">    *</span>
<span class="source-line-no">2411</span><span id="line-2411">    * &lt;p&gt;</span>
<span class="source-line-no">2412</span><span id="line-2412">    * Suffixes are case-insensitive.</span>
<span class="source-line-no">2413</span><span id="line-2413">    * &lt;br&gt;Whitespace is ignored.</span>
<span class="source-line-no">2414</span><span id="line-2414">    * &lt;br&gt;Decimal values are supported (e.g., &lt;js&gt;"1.5h"&lt;/js&gt;).</span>
<span class="source-line-no">2415</span><span id="line-2415">    * &lt;br&gt;Combined formats are supported (e.g., &lt;js&gt;"1h30m"&lt;/js&gt;).</span>
<span class="source-line-no">2416</span><span id="line-2416">    *</span>
<span class="source-line-no">2417</span><span id="line-2417">    * @param s The string to parse.</span>
<span class="source-line-no">2418</span><span id="line-2418">    * @return</span>
<span class="source-line-no">2419</span><span id="line-2419">    *    The time in milliseconds, or &lt;c&gt;-1&lt;/c&gt; if the string is empty or &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">2420</span><span id="line-2420">    */</span>
<span class="source-line-no">2421</span><span id="line-2421">   public static long getDuration(String s) {</span>
<span class="source-line-no">2422</span><span id="line-2422">      s = trim(s);</span>
<span class="source-line-no">2423</span><span id="line-2423">      if (isEmpty(s))</span>
<span class="source-line-no">2424</span><span id="line-2424">         return -1;</span>
<span class="source-line-no">2425</span><span id="line-2425"></span>
<span class="source-line-no">2426</span><span id="line-2426">      // Parse simple format (number + unit or combined format)</span>
<span class="source-line-no">2427</span><span id="line-2427">      var totalMs = 0L;</span>
<span class="source-line-no">2428</span><span id="line-2428">      var i = 0;</span>
<span class="source-line-no">2429</span><span id="line-2429">      var len = s.length();</span>
<span class="source-line-no">2430</span><span id="line-2430"></span>
<span class="source-line-no">2431</span><span id="line-2431">      while (i &lt; len) {</span>
<span class="source-line-no">2432</span><span id="line-2432">         // Skip whitespace</span>
<span class="source-line-no">2433</span><span id="line-2433">         while (i &lt; len &amp;&amp; Character.isWhitespace(s.charAt(i)))</span>
<span class="source-line-no">2434</span><span id="line-2434">            i++;</span>
<span class="source-line-no">2435</span><span id="line-2435"></span>
<span class="source-line-no">2436</span><span id="line-2436">         // Parse number (including decimal)</span>
<span class="source-line-no">2437</span><span id="line-2437">         var numStart = i;</span>
<span class="source-line-no">2438</span><span id="line-2438">         var hasDecimal = false;</span>
<span class="source-line-no">2439</span><span id="line-2439">         while (i &lt; len) {</span>
<span class="source-line-no">2440</span><span id="line-2440">         var c = s.charAt(i);</span>
<span class="source-line-no">2441</span><span id="line-2441">            if (c &gt;= '0' &amp;&amp; c &lt;= '9') {</span>
<span class="source-line-no">2442</span><span id="line-2442">               i++;</span>
<span class="source-line-no">2443</span><span id="line-2443">            } else if (c == '.' &amp;&amp; !hasDecimal) {</span>
<span class="source-line-no">2444</span><span id="line-2444">               hasDecimal = true;</span>
<span class="source-line-no">2445</span><span id="line-2445">               i++;</span>
<span class="source-line-no">2446</span><span id="line-2446">            } else {</span>
<span class="source-line-no">2447</span><span id="line-2447">            break;</span>
<span class="source-line-no">2448</span><span id="line-2448">      }</span>
<span class="source-line-no">2449</span><span id="line-2449">         }</span>
<span class="source-line-no">2450</span><span id="line-2450"></span>
<span class="source-line-no">2451</span><span id="line-2451">         if (i == numStart) {</span>
<span class="source-line-no">2452</span><span id="line-2452">            // No number found, invalid format</span>
<span class="source-line-no">2453</span><span id="line-2453">            return -1;</span>
<span class="source-line-no">2454</span><span id="line-2454">         }</span>
<span class="source-line-no">2455</span><span id="line-2455"></span>
<span class="source-line-no">2456</span><span id="line-2456">         var numStr = s.substring(numStart, i).trim();</span>
<span class="source-line-no">2457</span><span id="line-2457">         var value = Double.parseDouble(numStr);</span>
<span class="source-line-no">2458</span><span id="line-2458"></span>
<span class="source-line-no">2459</span><span id="line-2459">         // Skip whitespace</span>
<span class="source-line-no">2460</span><span id="line-2460">         while (i &lt; len &amp;&amp; Character.isWhitespace(s.charAt(i)))</span>
<span class="source-line-no">2461</span><span id="line-2461">            i++;</span>
<span class="source-line-no">2462</span><span id="line-2462"></span>
<span class="source-line-no">2463</span><span id="line-2463">      // Parse unit (read all letters until we hit a digit or whitespace)</span>
<span class="source-line-no">2464</span><span id="line-2464">      var unitStart = i;</span>
<span class="source-line-no">2465</span><span id="line-2465">      while (i &lt; len &amp;&amp; LETTER.contains(s.charAt(i)))</span>
<span class="source-line-no">2466</span><span id="line-2466">         i++;</span>
<span class="source-line-no">2467</span><span id="line-2467">      var unit = s.substring(unitStart, i).trim().toLowerCase();</span>
<span class="source-line-no">2468</span><span id="line-2468"></span>
<span class="source-line-no">2469</span><span id="line-2469">         // Convert to milliseconds</span>
<span class="source-line-no">2470</span><span id="line-2470">         var ms = parseUnit(unit, value);</span>
<span class="source-line-no">2471</span><span id="line-2471">         if (ms &lt; 0)</span>
<span class="source-line-no">2472</span><span id="line-2472">            return -1;</span>
<span class="source-line-no">2473</span><span id="line-2473">         totalMs += ms;</span>
<span class="source-line-no">2474</span><span id="line-2474">      }</span>
<span class="source-line-no">2475</span><span id="line-2475"></span>
<span class="source-line-no">2476</span><span id="line-2476">      return totalMs;</span>
<span class="source-line-no">2477</span><span id="line-2477">   }</span>
<span class="source-line-no">2478</span><span id="line-2478"></span>
<span class="source-line-no">2479</span><span id="line-2479">   /**</span>
<span class="source-line-no">2480</span><span id="line-2480">    * Converts a string containing glob-style wildcard characters to a regular expression {@link java.util.regex.Pattern}.</span>
<span class="source-line-no">2481</span><span id="line-2481">    *</span>
<span class="source-line-no">2482</span><span id="line-2482">    * &lt;p&gt;This method converts glob-style patterns to regular expressions with the following mappings:</span>
<span class="source-line-no">2483</span><span id="line-2483">    * &lt;ul&gt;</span>
<span class="source-line-no">2484</span><span id="line-2484">    *   &lt;li&gt;{@code *} matches any sequence of characters (including none)&lt;/li&gt;</span>
<span class="source-line-no">2485</span><span id="line-2485">    *   &lt;li&gt;{@code ?} matches exactly one character&lt;/li&gt;</span>
<span class="source-line-no">2486</span><span id="line-2486">    *   &lt;li&gt;All other characters are treated literally&lt;/li&gt;</span>
<span class="source-line-no">2487</span><span id="line-2487">    * &lt;/ul&gt;</span>
<span class="source-line-no">2488</span><span id="line-2488">    *</span>
<span class="source-line-no">2489</span><span id="line-2489">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">2490</span><span id="line-2490">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">2491</span><span id="line-2491">    *   &lt;jk&gt;var&lt;/jk&gt; &lt;jv&gt;pattern&lt;/jv&gt; = &lt;jsm&gt;getGlobMatchPattern&lt;/jsm&gt;(&lt;js&gt;"user_*_temp"&lt;/js&gt;);</span>
<span class="source-line-no">2492</span><span id="line-2492">    *   &lt;jk&gt;boolean&lt;/jk&gt; &lt;jv&gt;matches&lt;/jv&gt; = &lt;jv&gt;pattern&lt;/jv&gt;.matcher(&lt;js&gt;"user_alice_temp"&lt;/js&gt;).matches();  &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">2493</span><span id="line-2493">    *   &lt;jv&gt;matches&lt;/jv&gt; = &lt;jv&gt;pattern&lt;/jv&gt;.matcher(&lt;js&gt;"user_bob_temp"&lt;/js&gt;).matches();    &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">2494</span><span id="line-2494">    *   &lt;jv&gt;matches&lt;/jv&gt; = &lt;jv&gt;pattern&lt;/jv&gt;.matcher(&lt;js&gt;"admin_alice_temp"&lt;/js&gt;).matches(); &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">2495</span><span id="line-2495">    * &lt;/p&gt;</span>
<span class="source-line-no">2496</span><span id="line-2496">    *</span>
<span class="source-line-no">2497</span><span id="line-2497">    * @param s The glob-style wildcard pattern string.</span>
<span class="source-line-no">2498</span><span id="line-2498">    * @return A compiled {@link java.util.regex.Pattern} object, or &lt;jk&gt;null&lt;/jk&gt; if the input string is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">2499</span><span id="line-2499">    */</span>
<span class="source-line-no">2500</span><span id="line-2500">   public static java.util.regex.Pattern getGlobMatchPattern(String s) {</span>
<span class="source-line-no">2501</span><span id="line-2501">      return getGlobMatchPattern(s, 0);</span>
<span class="source-line-no">2502</span><span id="line-2502">   }</span>
<span class="source-line-no">2503</span><span id="line-2503"></span>
<span class="source-line-no">2504</span><span id="line-2504">   /**</span>
<span class="source-line-no">2505</span><span id="line-2505">    * Converts a string containing glob-style wildcard characters to a regular expression {@link java.util.regex.Pattern} with flags.</span>
<span class="source-line-no">2506</span><span id="line-2506">    *</span>
<span class="source-line-no">2507</span><span id="line-2507">    * &lt;p&gt;This method converts glob-style patterns to regular expressions with the following mappings:</span>
<span class="source-line-no">2508</span><span id="line-2508">    * &lt;ul&gt;</span>
<span class="source-line-no">2509</span><span id="line-2509">    *   &lt;li&gt;{@code *} matches any sequence of characters (including none)&lt;/li&gt;</span>
<span class="source-line-no">2510</span><span id="line-2510">    *   &lt;li&gt;{@code ?} matches exactly one character&lt;/li&gt;</span>
<span class="source-line-no">2511</span><span id="line-2511">    *   &lt;li&gt;All other characters are treated literally&lt;/li&gt;</span>
<span class="source-line-no">2512</span><span id="line-2512">    * &lt;/ul&gt;</span>
<span class="source-line-no">2513</span><span id="line-2513">    *</span>
<span class="source-line-no">2514</span><span id="line-2514">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">2515</span><span id="line-2515">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">2516</span><span id="line-2516">    *   &lt;jc&gt;// Case-insensitive matching&lt;/jc&gt;</span>
<span class="source-line-no">2517</span><span id="line-2517">    *   &lt;jk&gt;var&lt;/jk&gt; &lt;jv&gt;pattern&lt;/jv&gt; = &lt;jsm&gt;getGlobMatchPattern&lt;/jsm&gt;(&lt;js&gt;"USER_*"&lt;/js&gt;, Pattern.&lt;jsf&gt;CASE_INSENSITIVE&lt;/jsf&gt;);</span>
<span class="source-line-no">2518</span><span id="line-2518">    *   &lt;jk&gt;boolean&lt;/jk&gt; &lt;jv&gt;matches&lt;/jv&gt; = &lt;jv&gt;pattern&lt;/jv&gt;.matcher(&lt;js&gt;"user_alice"&lt;/js&gt;).matches();  &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">2519</span><span id="line-2519">    * &lt;/p&gt;</span>
<span class="source-line-no">2520</span><span id="line-2520">    *</span>
<span class="source-line-no">2521</span><span id="line-2521">    * @param s The glob-style wildcard pattern string.</span>
<span class="source-line-no">2522</span><span id="line-2522">    * @param flags Regular expression flags (see {@link java.util.regex.Pattern} constants).</span>
<span class="source-line-no">2523</span><span id="line-2523">    * @return A compiled {@link java.util.regex.Pattern} object, or &lt;jk&gt;null&lt;/jk&gt; if the input string is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">2524</span><span id="line-2524">    */</span>
<span class="source-line-no">2525</span><span id="line-2525">   public static java.util.regex.Pattern getGlobMatchPattern(String s, int flags) {</span>
<span class="source-line-no">2526</span><span id="line-2526">      if (s == null)</span>
<span class="source-line-no">2527</span><span id="line-2527">         return null;</span>
<span class="source-line-no">2528</span><span id="line-2528">      var sb = new StringBuilder();</span>
<span class="source-line-no">2529</span><span id="line-2529">      sb.append("\\Q");</span>
<span class="source-line-no">2530</span><span id="line-2530">      for (var i = 0; i &lt; s.length(); i++) {</span>
<span class="source-line-no">2531</span><span id="line-2531">         var c = s.charAt(i);</span>
<span class="source-line-no">2532</span><span id="line-2532">         if (c == '*')</span>
<span class="source-line-no">2533</span><span id="line-2533">            sb.append("\\E").append(".*").append("\\Q");</span>
<span class="source-line-no">2534</span><span id="line-2534">         else if (c == '?')</span>
<span class="source-line-no">2535</span><span id="line-2535">            sb.append("\\E").append(".").append("\\Q");</span>
<span class="source-line-no">2536</span><span id="line-2536">         else</span>
<span class="source-line-no">2537</span><span id="line-2537">            sb.append(c);</span>
<span class="source-line-no">2538</span><span id="line-2538">      }</span>
<span class="source-line-no">2539</span><span id="line-2539">      sb.append("\\E");</span>
<span class="source-line-no">2540</span><span id="line-2540">      return java.util.regex.Pattern.compile(sb.toString(), flags);</span>
<span class="source-line-no">2541</span><span id="line-2541">   }</span>
<span class="source-line-no">2542</span><span id="line-2542"></span>
<span class="source-line-no">2543</span><span id="line-2543">   /**</span>
<span class="source-line-no">2544</span><span id="line-2544">    * Converts a string containing &lt;js&gt;"*"&lt;/js&gt; meta characters with a regular expression pattern.</span>
<span class="source-line-no">2545</span><span id="line-2545">    *</span>
<span class="source-line-no">2546</span><span id="line-2546">    * @param s The string to create a pattern from.</span>
<span class="source-line-no">2547</span><span id="line-2547">    * @return A regular expression pattern.</span>
<span class="source-line-no">2548</span><span id="line-2548">    */</span>
<span class="source-line-no">2549</span><span id="line-2549">   public static Pattern getMatchPattern(String s) {</span>
<span class="source-line-no">2550</span><span id="line-2550">      return getMatchPattern(s, 0);</span>
<span class="source-line-no">2551</span><span id="line-2551">   }</span>
<span class="source-line-no">2552</span><span id="line-2552"></span>
<span class="source-line-no">2553</span><span id="line-2553">   /**</span>
<span class="source-line-no">2554</span><span id="line-2554">    * Converts a string containing &lt;js&gt;"*"&lt;/js&gt; meta characters with a regular expression pattern.</span>
<span class="source-line-no">2555</span><span id="line-2555">    *</span>
<span class="source-line-no">2556</span><span id="line-2556">    * @param s The string to create a pattern from.</span>
<span class="source-line-no">2557</span><span id="line-2557">    * @param flags Regular expression flags.</span>
<span class="source-line-no">2558</span><span id="line-2558">    * @return A regular expression pattern.</span>
<span class="source-line-no">2559</span><span id="line-2559">    */</span>
<span class="source-line-no">2560</span><span id="line-2560">   public static Pattern getMatchPattern(String s, int flags) {</span>
<span class="source-line-no">2561</span><span id="line-2561">      if (s == null)</span>
<span class="source-line-no">2562</span><span id="line-2562">         return null;</span>
<span class="source-line-no">2563</span><span id="line-2563">      var sb = new StringBuilder();</span>
<span class="source-line-no">2564</span><span id="line-2564">      sb.append("\\Q");</span>
<span class="source-line-no">2565</span><span id="line-2565">      for (var i = 0; i &lt; s.length(); i++) {</span>
<span class="source-line-no">2566</span><span id="line-2566">         var c = s.charAt(i);</span>
<span class="source-line-no">2567</span><span id="line-2567">         if (c == '*')</span>
<span class="source-line-no">2568</span><span id="line-2568">            sb.append("\\E").append(".*").append("\\Q");</span>
<span class="source-line-no">2569</span><span id="line-2569">         else if (c == '?')</span>
<span class="source-line-no">2570</span><span id="line-2570">            sb.append("\\E").append(".").append("\\Q");</span>
<span class="source-line-no">2571</span><span id="line-2571">         else</span>
<span class="source-line-no">2572</span><span id="line-2572">            sb.append(c);</span>
<span class="source-line-no">2573</span><span id="line-2573">      }</span>
<span class="source-line-no">2574</span><span id="line-2574">      sb.append("\\E");</span>
<span class="source-line-no">2575</span><span id="line-2575">      return Pattern.compile(sb.toString(), flags);</span>
<span class="source-line-no">2576</span><span id="line-2576">   }</span>
<span class="source-line-no">2577</span><span id="line-2577"></span>
<span class="source-line-no">2578</span><span id="line-2578">   /**</span>
<span class="source-line-no">2579</span><span id="line-2579">    * Takes in a string, splits it by lines, and then prepends each line with line numbers.</span>
<span class="source-line-no">2580</span><span id="line-2580">    *</span>
<span class="source-line-no">2581</span><span id="line-2581">    * @param s The string.</span>
<span class="source-line-no">2582</span><span id="line-2582">    * @return The string with line numbers added.</span>
<span class="source-line-no">2583</span><span id="line-2583">    */</span>
<span class="source-line-no">2584</span><span id="line-2584">   public static String getNumberedLines(String s) {</span>
<span class="source-line-no">2585</span><span id="line-2585">      return getNumberedLines(s, 1, Integer.MAX_VALUE);</span>
<span class="source-line-no">2586</span><span id="line-2586">   }</span>
<span class="source-line-no">2587</span><span id="line-2587"></span>
<span class="source-line-no">2588</span><span id="line-2588">   /**</span>
<span class="source-line-no">2589</span><span id="line-2589">    * Same as {@link #getNumberedLines(String)} except only returns the specified lines.</span>
<span class="source-line-no">2590</span><span id="line-2590">    *</span>
<span class="source-line-no">2591</span><span id="line-2591">    * &lt;p&gt;</span>
<span class="source-line-no">2592</span><span id="line-2592">    * Out-of-bounds values are allowed and fixed.</span>
<span class="source-line-no">2593</span><span id="line-2593">    *</span>
<span class="source-line-no">2594</span><span id="line-2594">    * @param s The string.</span>
<span class="source-line-no">2595</span><span id="line-2595">    * @param start The starting line (1-indexed).</span>
<span class="source-line-no">2596</span><span id="line-2596">    * @param end The ending line (1-indexed).</span>
<span class="source-line-no">2597</span><span id="line-2597">    * @return The string with line numbers added.</span>
<span class="source-line-no">2598</span><span id="line-2598">    */</span>
<span class="source-line-no">2599</span><span id="line-2599">   public static String getNumberedLines(String s, int start, int end) {</span>
<span class="source-line-no">2600</span><span id="line-2600">      if (s == null)</span>
<span class="source-line-no">2601</span><span id="line-2601">         return null;</span>
<span class="source-line-no">2602</span><span id="line-2602">      var lines = s.split("[\r\n]+");</span>
<span class="source-line-no">2603</span><span id="line-2603">      var digits = String.valueOf(lines.length).length();</span>
<span class="source-line-no">2604</span><span id="line-2604">      if (start &lt; 1)</span>
<span class="source-line-no">2605</span><span id="line-2605">         start = 1;</span>
<span class="source-line-no">2606</span><span id="line-2606">      if (end &lt; 0)</span>
<span class="source-line-no">2607</span><span id="line-2607">         end = Integer.MAX_VALUE;</span>
<span class="source-line-no">2608</span><span id="line-2608">      if (end &gt; lines.length)</span>
<span class="source-line-no">2609</span><span id="line-2609">         end = lines.length;</span>
<span class="source-line-no">2610</span><span id="line-2610">      var sb = new StringBuilder();</span>
<span class="source-line-no">2611</span><span id="line-2611">      for (var l : l(lines).subList(start - 1, end))</span>
<span class="source-line-no">2612</span><span id="line-2612">         sb.append(String.format("%0" + digits + "d", start++)).append(": ").append(l).append("\n");  // NOSONAR - Intentional.</span>
<span class="source-line-no">2613</span><span id="line-2613">      return sb.toString();</span>
<span class="source-line-no">2614</span><span id="line-2614">   }</span>
<span class="source-line-no">2615</span><span id="line-2615"></span>
<span class="source-line-no">2616</span><span id="line-2616">   /**</span>
<span class="source-line-no">2617</span><span id="line-2617">    * Calculates the approximate memory size of a string in bytes.</span>
<span class="source-line-no">2618</span><span id="line-2618">    *</span>
<span class="source-line-no">2619</span><span id="line-2619">    * &lt;p&gt;</span>
<span class="source-line-no">2620</span><span id="line-2620">    * Returns &lt;c&gt;0&lt;/c&gt; if the input string is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">2621</span><span id="line-2621">    * This method provides an estimate based on typical JVM object layout:</span>
<span class="source-line-no">2622</span><span id="line-2622">    * &lt;ul&gt;</span>
<span class="source-line-no">2623</span><span id="line-2623">    *   &lt;li&gt;String object overhead: ~24 bytes (object header + fields)&lt;/li&gt;</span>
<span class="source-line-no">2624</span><span id="line-2624">    *   &lt;li&gt;char[] array overhead: ~16 bytes (array header)&lt;/li&gt;</span>
<span class="source-line-no">2625</span><span id="line-2625">    *   &lt;li&gt;Character data: 2 bytes per character&lt;/li&gt;</span>
<span class="source-line-no">2626</span><span id="line-2626">    * &lt;/ul&gt;</span>
<span class="source-line-no">2627</span><span id="line-2627">    *</span>
<span class="source-line-no">2628</span><span id="line-2628">    * &lt;p&gt;</span>
<span class="source-line-no">2629</span><span id="line-2629">    * &lt;b&gt;Note:&lt;/b&gt; Actual memory usage may vary based on JVM implementation, object alignment,</span>
<span class="source-line-no">2630</span><span id="line-2630">    * and whether compressed OOPs are enabled. This is an approximation for informational purposes.</span>
<span class="source-line-no">2631</span><span id="line-2631">    *</span>
<span class="source-line-no">2632</span><span id="line-2632">    * &lt;h5 class='section'&gt;Examples:&lt;/h5&gt;</span>
<span class="source-line-no">2633</span><span id="line-2633">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">2634</span><span id="line-2634">    *    getStringSize(&lt;jk&gt;null&lt;/jk&gt;);        &lt;jc&gt;// Returns: 0&lt;/jc&gt;</span>
<span class="source-line-no">2635</span><span id="line-2635">    *    getStringSize(&lt;js&gt;""&lt;/js&gt;);          &lt;jc&gt;// Returns: ~40 bytes&lt;/jc&gt;</span>
<span class="source-line-no">2636</span><span id="line-2636">    *    getStringSize(&lt;js&gt;"hello"&lt;/js&gt;);     &lt;jc&gt;// Returns: ~50 bytes (40 + 10)&lt;/jc&gt;</span>
<span class="source-line-no">2637</span><span id="line-2637">    *    getStringSize(&lt;js&gt;"test"&lt;/js&gt;);      &lt;jc&gt;// Returns: ~48 bytes (40 + 8)&lt;/jc&gt;</span>
<span class="source-line-no">2638</span><span id="line-2638">    * &lt;/p&gt;</span>
<span class="source-line-no">2639</span><span id="line-2639">    *</span>
<span class="source-line-no">2640</span><span id="line-2640">    * @param str The string to measure. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">2641</span><span id="line-2641">    * @return The approximate memory size in bytes, or &lt;c&gt;0&lt;/c&gt; if the input was &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">2642</span><span id="line-2642">    */</span>
<span class="source-line-no">2643</span><span id="line-2643">   public static long getStringSize(String str) {</span>
<span class="source-line-no">2644</span><span id="line-2644">      if (str == null)</span>
<span class="source-line-no">2645</span><span id="line-2645">         return 0;</span>
<span class="source-line-no">2646</span><span id="line-2646">      // String object overhead: ~24 bytes (object header + fields: value, hash, coder)</span>
<span class="source-line-no">2647</span><span id="line-2647">      // char[] array overhead: ~16 bytes (array header)</span>
<span class="source-line-no">2648</span><span id="line-2648">      // Character data: 2 bytes per character</span>
<span class="source-line-no">2649</span><span id="line-2649">      return 24L + 16L + (2L * str.length());</span>
<span class="source-line-no">2650</span><span id="line-2650">   }</span>
<span class="source-line-no">2651</span><span id="line-2651"></span>
<span class="source-line-no">2652</span><span id="line-2652">   /**</span>
<span class="source-line-no">2653</span><span id="line-2653">    * Checks if a string has text (not null, not empty, and contains at least one non-whitespace character).</span>
<span class="source-line-no">2654</span><span id="line-2654">    *</span>
<span class="source-line-no">2655</span><span id="line-2655">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">2656</span><span id="line-2656">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">2657</span><span id="line-2657">    *    hasText(&lt;jk&gt;null&lt;/jk&gt;);       &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">2658</span><span id="line-2658">    *    hasText(&lt;js&gt;""&lt;/js&gt;);         &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">2659</span><span id="line-2659">    *    hasText(&lt;js&gt;"   "&lt;/js&gt;);      &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">2660</span><span id="line-2660">    *    hasText(&lt;js&gt;"hello"&lt;/js&gt;);    &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">2661</span><span id="line-2661">    * &lt;/p&gt;</span>
<span class="source-line-no">2662</span><span id="line-2662">    *</span>
<span class="source-line-no">2663</span><span id="line-2663">    * @param str The string to check.</span>
<span class="source-line-no">2664</span><span id="line-2664">    * @return &lt;jk&gt;true&lt;/jk&gt; if the string is not null, not empty, and contains at least one non-whitespace character.</span>
<span class="source-line-no">2665</span><span id="line-2665">    */</span>
<span class="source-line-no">2666</span><span id="line-2666">   public static boolean hasText(String str) {</span>
<span class="source-line-no">2667</span><span id="line-2667">      return isNotBlank(str);</span>
<span class="source-line-no">2668</span><span id="line-2668">   }</span>
<span class="source-line-no">2669</span><span id="line-2669"></span>
<span class="source-line-no">2670</span><span id="line-2670">   /**</span>
<span class="source-line-no">2671</span><span id="line-2671">    * Same as {@link String#indexOf(int)} except allows you to check for multiple characters.</span>
<span class="source-line-no">2672</span><span id="line-2672">    *</span>
<span class="source-line-no">2673</span><span id="line-2673">    * @param s The string to check.</span>
<span class="source-line-no">2674</span><span id="line-2674">    * @param c The characters to check for.</span>
<span class="source-line-no">2675</span><span id="line-2675">    * @return The index into the string that is one of the specified characters.</span>
<span class="source-line-no">2676</span><span id="line-2676">    */</span>
<span class="source-line-no">2677</span><span id="line-2677">   public static int indexOf(String s, char...c) {</span>
<span class="source-line-no">2678</span><span id="line-2678">      if (s == null)</span>
<span class="source-line-no">2679</span><span id="line-2679">         return -1;</span>
<span class="source-line-no">2680</span><span id="line-2680">      for (var i = 0; i &lt; s.length(); i++) {</span>
<span class="source-line-no">2681</span><span id="line-2681">         var c2 = s.charAt(i);</span>
<span class="source-line-no">2682</span><span id="line-2682">         for (var cc : c)</span>
<span class="source-line-no">2683</span><span id="line-2683">            if (c2 == cc)</span>
<span class="source-line-no">2684</span><span id="line-2684">               return i;</span>
<span class="source-line-no">2685</span><span id="line-2685">      }</span>
<span class="source-line-no">2686</span><span id="line-2686">      return -1;</span>
<span class="source-line-no">2687</span><span id="line-2687">   }</span>
<span class="source-line-no">2688</span><span id="line-2688"></span>
<span class="source-line-no">2689</span><span id="line-2689">   /**</span>
<span class="source-line-no">2690</span><span id="line-2690">    * Finds the index of the first occurrence of a substring within a string.</span>
<span class="source-line-no">2691</span><span id="line-2691">    *</span>
<span class="source-line-no">2692</span><span id="line-2692">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">2693</span><span id="line-2693">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">2694</span><span id="line-2694">    *    indexOf(&lt;js&gt;"hello world"&lt;/js&gt;, &lt;js&gt;"world"&lt;/js&gt;);     &lt;jc&gt;// 6&lt;/jc&gt;</span>
<span class="source-line-no">2695</span><span id="line-2695">    *    indexOf(&lt;js&gt;"hello world"&lt;/js&gt;, &lt;js&gt;"xyz"&lt;/js&gt;);       &lt;jc&gt;// -1&lt;/jc&gt;</span>
<span class="source-line-no">2696</span><span id="line-2696">    *    indexOf(&lt;jk&gt;null&lt;/jk&gt;, &lt;js&gt;"test"&lt;/js&gt;);               &lt;jc&gt;// -1&lt;/jc&gt;</span>
<span class="source-line-no">2697</span><span id="line-2697">    * &lt;/p&gt;</span>
<span class="source-line-no">2698</span><span id="line-2698">    *</span>
<span class="source-line-no">2699</span><span id="line-2699">    * @param str The string to search in.</span>
<span class="source-line-no">2700</span><span id="line-2700">    * @param search The substring to search for.</span>
<span class="source-line-no">2701</span><span id="line-2701">    * @return The index of the first occurrence, or &lt;c&gt;-1&lt;/c&gt; if not found or if either parameter is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">2702</span><span id="line-2702">    */</span>
<span class="source-line-no">2703</span><span id="line-2703">   public static int indexOf(String str, String search) {</span>
<span class="source-line-no">2704</span><span id="line-2704">      if (str == null || search == null)</span>
<span class="source-line-no">2705</span><span id="line-2705">         return -1;</span>
<span class="source-line-no">2706</span><span id="line-2706">      return str.indexOf(search);</span>
<span class="source-line-no">2707</span><span id="line-2707">   }</span>
<span class="source-line-no">2708</span><span id="line-2708"></span>
<span class="source-line-no">2709</span><span id="line-2709">   /**</span>
<span class="source-line-no">2710</span><span id="line-2710">    * Finds the index of the first occurrence of a substring within a string, ignoring case.</span>
<span class="source-line-no">2711</span><span id="line-2711">    *</span>
<span class="source-line-no">2712</span><span id="line-2712">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">2713</span><span id="line-2713">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">2714</span><span id="line-2714">    *    indexOfIgnoreCase(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;"world"&lt;/js&gt;);     &lt;jc&gt;// 6&lt;/jc&gt;</span>
<span class="source-line-no">2715</span><span id="line-2715">    *    indexOfIgnoreCase(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;"WORLD"&lt;/js&gt;);     &lt;jc&gt;// 6&lt;/jc&gt;</span>
<span class="source-line-no">2716</span><span id="line-2716">    *    indexOfIgnoreCase(&lt;js&gt;"hello world"&lt;/js&gt;, &lt;js&gt;"xyz"&lt;/js&gt;);       &lt;jc&gt;// -1&lt;/jc&gt;</span>
<span class="source-line-no">2717</span><span id="line-2717">    * &lt;/p&gt;</span>
<span class="source-line-no">2718</span><span id="line-2718">    *</span>
<span class="source-line-no">2719</span><span id="line-2719">    * @param str The string to search in.</span>
<span class="source-line-no">2720</span><span id="line-2720">    * @param search The substring to search for.</span>
<span class="source-line-no">2721</span><span id="line-2721">    * @return The index of the first occurrence, or &lt;c&gt;-1&lt;/c&gt; if not found or if either parameter is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">2722</span><span id="line-2722">    */</span>
<span class="source-line-no">2723</span><span id="line-2723">   public static int indexOfIgnoreCase(String str, String search) {</span>
<span class="source-line-no">2724</span><span id="line-2724">      if (str == null || search == null)</span>
<span class="source-line-no">2725</span><span id="line-2725">         return -1;</span>
<span class="source-line-no">2726</span><span id="line-2726">      return str.toLowerCase().indexOf(search.toLowerCase());</span>
<span class="source-line-no">2727</span><span id="line-2727">   }</span>
<span class="source-line-no">2728</span><span id="line-2728"></span>
<span class="source-line-no">2729</span><span id="line-2729">   /**</span>
<span class="source-line-no">2730</span><span id="line-2730">    * Interns a string, returning the canonical representation.</span>
<span class="source-line-no">2731</span><span id="line-2731">    *</span>
<span class="source-line-no">2732</span><span id="line-2732">    * &lt;p&gt;</span>
<span class="source-line-no">2733</span><span id="line-2733">    * Returns &lt;jk&gt;null&lt;/jk&gt; if the input string is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">2734</span><span id="line-2734">    * This method provides a null-safe wrapper around {@link String#intern()}.</span>
<span class="source-line-no">2735</span><span id="line-2735">    *</span>
<span class="source-line-no">2736</span><span id="line-2736">    * &lt;h5 class='section'&gt;Examples:&lt;/h5&gt;</span>
<span class="source-line-no">2737</span><span id="line-2737">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">2738</span><span id="line-2738">    *    String &lt;jv&gt;s1&lt;/jv&gt; = &lt;jk&gt;new&lt;/jk&gt; String(&lt;js&gt;"test"&lt;/js&gt;);</span>
<span class="source-line-no">2739</span><span id="line-2739">    *    String &lt;jv&gt;s2&lt;/jv&gt; = &lt;jk&gt;new&lt;/jk&gt; String(&lt;js&gt;"test"&lt;/js&gt;);</span>
<span class="source-line-no">2740</span><span id="line-2740">    *    assertTrue(&lt;jv&gt;s1&lt;/jv&gt; != &lt;jv&gt;s2&lt;/jv&gt;);  &lt;jc&gt;// Different objects&lt;/jc&gt;</span>
<span class="source-line-no">2741</span><span id="line-2741">    *</span>
<span class="source-line-no">2742</span><span id="line-2742">    *    String &lt;jv&gt;i1&lt;/jv&gt; = intern(&lt;jv&gt;s1&lt;/jv&gt;);</span>
<span class="source-line-no">2743</span><span id="line-2743">    *    String &lt;jv&gt;i2&lt;/jv&gt; = intern(&lt;jv&gt;s2&lt;/jv&gt;);</span>
<span class="source-line-no">2744</span><span id="line-2744">    *    assertTrue(&lt;jv&gt;i1&lt;/jv&gt; == &lt;jv&gt;i2&lt;/jv&gt;);  &lt;jc&gt;// Same interned object&lt;/jc&gt;</span>
<span class="source-line-no">2745</span><span id="line-2745">    * &lt;/p&gt;</span>
<span class="source-line-no">2746</span><span id="line-2746">    *</span>
<span class="source-line-no">2747</span><span id="line-2747">    * &lt;h5 class='section'&gt;Performance Note:&lt;/h5&gt;</span>
<span class="source-line-no">2748</span><span id="line-2748">    * &lt;p&gt;String interning stores strings in a special pool, which can save memory when the same string</span>
<span class="source-line-no">2749</span><span id="line-2749">    * values are used repeatedly. However, the intern pool has limited size and interning can be slow,</span>
<span class="source-line-no">2750</span><span id="line-2750">    * so use judiciously for strings that are known to be repeated frequently.&lt;/p&gt;</span>
<span class="source-line-no">2751</span><span id="line-2751">    *</span>
<span class="source-line-no">2752</span><span id="line-2752">    * @param str The string to intern. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">2753</span><span id="line-2753">    * @return The interned string, or &lt;jk&gt;null&lt;/jk&gt; if the input was &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">2754</span><span id="line-2754">    */</span>
<span class="source-line-no">2755</span><span id="line-2755">   public static String intern(String str) {</span>
<span class="source-line-no">2756</span><span id="line-2756">      return str == null ? null : str.intern();</span>
<span class="source-line-no">2757</span><span id="line-2757">   }</span>
<span class="source-line-no">2758</span><span id="line-2758"></span>
<span class="source-line-no">2759</span><span id="line-2759">   /**</span>
<span class="source-line-no">2760</span><span id="line-2760">    * Interpolates variables in a template string using &lt;js&gt;"${name}"&lt;/js&gt; syntax.</span>
<span class="source-line-no">2761</span><span id="line-2761">    *</span>
<span class="source-line-no">2762</span><span id="line-2762">    * &lt;p&gt;</span>
<span class="source-line-no">2763</span><span id="line-2763">    * Replaces variables of the form &lt;js&gt;"${name}"&lt;/js&gt; with values from the map.</span>
<span class="source-line-no">2764</span><span id="line-2764">    * This is similar to shell variable interpolation syntax.</span>
<span class="source-line-no">2765</span><span id="line-2765">    *</span>
<span class="source-line-no">2766</span><span id="line-2766">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">2767</span><span id="line-2767">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">2768</span><span id="line-2768">    *    var vars = Map.of(&lt;js&gt;"name"&lt;/js&gt;, &lt;js&gt;"John"&lt;/js&gt;, &lt;js&gt;"city"&lt;/js&gt;, &lt;js&gt;"New York"&lt;/js&gt;);</span>
<span class="source-line-no">2769</span><span id="line-2769">    *    interpolate(&lt;js&gt;"Hello ${name}, welcome to ${city}"&lt;/js&gt;, vars);</span>
<span class="source-line-no">2770</span><span id="line-2770">    *    &lt;jc&gt;// Returns: "Hello John, welcome to New York"&lt;/jc&gt;</span>
<span class="source-line-no">2771</span><span id="line-2771">    * &lt;/p&gt;</span>
<span class="source-line-no">2772</span><span id="line-2772">    *</span>
<span class="source-line-no">2773</span><span id="line-2773">    * @param template The template string with &lt;js&gt;"${name}"&lt;/js&gt; variables.</span>
<span class="source-line-no">2774</span><span id="line-2774">    * @param variables The map containing the variable values.</span>
<span class="source-line-no">2775</span><span id="line-2775">    * @return The interpolated string with variables replaced, or the original template if variables is null or empty.</span>
<span class="source-line-no">2776</span><span id="line-2776">    */</span>
<span class="source-line-no">2777</span><span id="line-2777">   public static String interpolate(String template, Map&lt;String,Object&gt; variables) {</span>
<span class="source-line-no">2778</span><span id="line-2778">      if (template == null)</span>
<span class="source-line-no">2779</span><span id="line-2779">         return null;</span>
<span class="source-line-no">2780</span><span id="line-2780">      if (variables == null || variables.isEmpty())</span>
<span class="source-line-no">2781</span><span id="line-2781">         return template;</span>
<span class="source-line-no">2782</span><span id="line-2782"></span>
<span class="source-line-no">2783</span><span id="line-2783">      var result = new StringBuilder();</span>
<span class="source-line-no">2784</span><span id="line-2784">      var i = 0;</span>
<span class="source-line-no">2785</span><span id="line-2785">      var length = template.length();</span>
<span class="source-line-no">2786</span><span id="line-2786"></span>
<span class="source-line-no">2787</span><span id="line-2787">      while (i &lt; length) {</span>
<span class="source-line-no">2788</span><span id="line-2788">         var dollarIndex = template.indexOf("${", i);</span>
<span class="source-line-no">2789</span><span id="line-2789">         if (dollarIndex == -1) {</span>
<span class="source-line-no">2790</span><span id="line-2790">            // No more variables, append the rest</span>
<span class="source-line-no">2791</span><span id="line-2791">            result.append(template.substring(i));</span>
<span class="source-line-no">2792</span><span id="line-2792">            break;</span>
<span class="source-line-no">2793</span><span id="line-2793">         }</span>
<span class="source-line-no">2794</span><span id="line-2794"></span>
<span class="source-line-no">2795</span><span id="line-2795">         // Append text before the variable</span>
<span class="source-line-no">2796</span><span id="line-2796">         result.append(template.substring(i, dollarIndex));</span>
<span class="source-line-no">2797</span><span id="line-2797"></span>
<span class="source-line-no">2798</span><span id="line-2798">         // Find the closing brace</span>
<span class="source-line-no">2799</span><span id="line-2799">         var braceIndex = template.indexOf('}', dollarIndex + 2);</span>
<span class="source-line-no">2800</span><span id="line-2800">         if (braceIndex == -1) {</span>
<span class="source-line-no">2801</span><span id="line-2801">            // No closing brace, append the rest as-is</span>
<span class="source-line-no">2802</span><span id="line-2802">            result.append(template.substring(dollarIndex));</span>
<span class="source-line-no">2803</span><span id="line-2803">            break;</span>
<span class="source-line-no">2804</span><span id="line-2804">         }</span>
<span class="source-line-no">2805</span><span id="line-2805"></span>
<span class="source-line-no">2806</span><span id="line-2806">         // Extract variable name</span>
<span class="source-line-no">2807</span><span id="line-2807">         var varName = template.substring(dollarIndex + 2, braceIndex);</span>
<span class="source-line-no">2808</span><span id="line-2808">         var value = variables.get(varName);</span>
<span class="source-line-no">2809</span><span id="line-2809"></span>
<span class="source-line-no">2810</span><span id="line-2810">         if (variables.containsKey(varName)) {</span>
<span class="source-line-no">2811</span><span id="line-2811">            // Variable exists in map (even if null)</span>
<span class="source-line-no">2812</span><span id="line-2812">            result.append(value != null ? value.toString() : "null");</span>
<span class="source-line-no">2813</span><span id="line-2813">         } else {</span>
<span class="source-line-no">2814</span><span id="line-2814">            // Variable not found, keep the original placeholder</span>
<span class="source-line-no">2815</span><span id="line-2815">            result.append("${").append(varName).append("}");</span>
<span class="source-line-no">2816</span><span id="line-2816">         }</span>
<span class="source-line-no">2817</span><span id="line-2817"></span>
<span class="source-line-no">2818</span><span id="line-2818">         i = braceIndex + 1;</span>
<span class="source-line-no">2819</span><span id="line-2819">      }</span>
<span class="source-line-no">2820</span><span id="line-2820"></span>
<span class="source-line-no">2821</span><span id="line-2821">      return result.toString();</span>
<span class="source-line-no">2822</span><span id="line-2822">   }</span>
<span class="source-line-no">2823</span><span id="line-2823"></span>
<span class="source-line-no">2824</span><span id="line-2824">   /**</span>
<span class="source-line-no">2825</span><span id="line-2825">    * Efficiently determines whether a URL is of the pattern "xxx://xxx"</span>
<span class="source-line-no">2826</span><span id="line-2826">    *</span>
<span class="source-line-no">2827</span><span id="line-2827">    * @param s The string to test.</span>
<span class="source-line-no">2828</span><span id="line-2828">    * @return &lt;jk&gt;true&lt;/jk&gt; if it's an absolute path.</span>
<span class="source-line-no">2829</span><span id="line-2829">    */</span>
<span class="source-line-no">2830</span><span id="line-2830">   public static boolean isAbsoluteUri(String s) {  // NOSONAR - False positive.</span>
<span class="source-line-no">2831</span><span id="line-2831"></span>
<span class="source-line-no">2832</span><span id="line-2832">      if (isEmpty(s))</span>
<span class="source-line-no">2833</span><span id="line-2833">         return false;</span>
<span class="source-line-no">2834</span><span id="line-2834"></span>
<span class="source-line-no">2835</span><span id="line-2835">      // Use a state machine for maximum performance.</span>
<span class="source-line-no">2836</span><span id="line-2836"></span>
<span class="source-line-no">2837</span><span id="line-2837">      // S1: Looking for http</span>
<span class="source-line-no">2838</span><span id="line-2838">      // S2: Found http, looking for :</span>
<span class="source-line-no">2839</span><span id="line-2839">      // S3: Found :, looking for /</span>
<span class="source-line-no">2840</span><span id="line-2840">      // S4: Found /, looking for /</span>
<span class="source-line-no">2841</span><span id="line-2841">      // S5: Found /, looking for x</span>
<span class="source-line-no">2842</span><span id="line-2842"></span>
<span class="source-line-no">2843</span><span id="line-2843">      var state = S1;</span>
<span class="source-line-no">2844</span><span id="line-2844"></span>
<span class="source-line-no">2845</span><span id="line-2845">      for (var i = 0; i &lt; s.length(); i++) {</span>
<span class="source-line-no">2846</span><span id="line-2846">         var c = s.charAt(i);</span>
<span class="source-line-no">2847</span><span id="line-2847">         if (state == S1) {</span>
<span class="source-line-no">2848</span><span id="line-2848">            if (isLowerCaseLetter(c))</span>
<span class="source-line-no">2849</span><span id="line-2849">               state = S2;</span>
<span class="source-line-no">2850</span><span id="line-2850">            else</span>
<span class="source-line-no">2851</span><span id="line-2851">               return false;</span>
<span class="source-line-no">2852</span><span id="line-2852">         } else if (state == S2) {</span>
<span class="source-line-no">2853</span><span id="line-2853">            if (c == ':')</span>
<span class="source-line-no">2854</span><span id="line-2854">               state = S3;</span>
<span class="source-line-no">2855</span><span id="line-2855">            else if (! isLowerCaseLetter(c))</span>
<span class="source-line-no">2856</span><span id="line-2856">               return false;</span>
<span class="source-line-no">2857</span><span id="line-2857">         } else if (state == S3) {  // NOSONAR - False positive.</span>
<span class="source-line-no">2858</span><span id="line-2858">            if (c == '/')</span>
<span class="source-line-no">2859</span><span id="line-2859">               state = S4;</span>
<span class="source-line-no">2860</span><span id="line-2860">            else</span>
<span class="source-line-no">2861</span><span id="line-2861">               return false;</span>
<span class="source-line-no">2862</span><span id="line-2862">         } else if (state == S4) {</span>
<span class="source-line-no">2863</span><span id="line-2863">            if (c == '/')</span>
<span class="source-line-no">2864</span><span id="line-2864">               state = S5;</span>
<span class="source-line-no">2865</span><span id="line-2865">            else</span>
<span class="source-line-no">2866</span><span id="line-2866">               return false;</span>
<span class="source-line-no">2867</span><span id="line-2867">         } else /* state == S5 */ {</span>
<span class="source-line-no">2868</span><span id="line-2868">            return true;</span>
<span class="source-line-no">2869</span><span id="line-2869">         }</span>
<span class="source-line-no">2870</span><span id="line-2870">      }</span>
<span class="source-line-no">2871</span><span id="line-2871">      return false;</span>
<span class="source-line-no">2872</span><span id="line-2872">   }</span>
<span class="source-line-no">2873</span><span id="line-2873"></span>
<span class="source-line-no">2874</span><span id="line-2874">   /**</span>
<span class="source-line-no">2875</span><span id="line-2875">    * Checks if all of the provided strings are not blank (not null, not empty, and not whitespace only).</span>
<span class="source-line-no">2876</span><span id="line-2876">    *</span>
<span class="source-line-no">2877</span><span id="line-2877">    * &lt;p&gt;</span>
<span class="source-line-no">2878</span><span id="line-2878">    * Returns &lt;jk&gt;true&lt;/jk&gt; only if all strings are not null, not empty, and contain non-whitespace characters.</span>
<span class="source-line-no">2879</span><span id="line-2879">    * Returns &lt;jk&gt;false&lt;/jk&gt; if the array is null or empty, or if any string is null, empty, or whitespace only.</span>
<span class="source-line-no">2880</span><span id="line-2880">    *</span>
<span class="source-line-no">2881</span><span id="line-2881">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">2882</span><span id="line-2882">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">2883</span><span id="line-2883">    *    isAllNotBlank();                                     &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">2884</span><span id="line-2884">    *    isAllNotBlank(&lt;jk&gt;null&lt;/jk&gt;);                        &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">2885</span><span id="line-2885">    *    isAllNotBlank(&lt;jk&gt;null&lt;/jk&gt;, &lt;jk&gt;null&lt;/jk&gt;);         &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">2886</span><span id="line-2886">    *    isAllNotBlank(&lt;js&gt;""&lt;/js&gt;, &lt;js&gt;""&lt;/js&gt;);             &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">2887</span><span id="line-2887">    *    isAllNotBlank(&lt;js&gt;"   "&lt;/js&gt;, &lt;js&gt;"   "&lt;/js&gt;);       &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">2888</span><span id="line-2888">    *    isAllNotBlank(&lt;jk&gt;null&lt;/jk&gt;, &lt;js&gt;"hello"&lt;/js&gt;);      &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">2889</span><span id="line-2889">    *    isAllNotBlank(&lt;js&gt;""&lt;/js&gt;, &lt;js&gt;"   "&lt;/js&gt;);          &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">2890</span><span id="line-2890">    *    isAllNotBlank(&lt;js&gt;"hello"&lt;/js&gt;, &lt;js&gt;"   "&lt;/js&gt;);     &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">2891</span><span id="line-2891">    *    isAllNotBlank(&lt;js&gt;"hello"&lt;/js&gt;);                     &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">2892</span><span id="line-2892">    *    isAllNotBlank(&lt;js&gt;"hello"&lt;/js&gt;, &lt;js&gt;"world"&lt;/js&gt;);   &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">2893</span><span id="line-2893">    * &lt;/p&gt;</span>
<span class="source-line-no">2894</span><span id="line-2894">    *</span>
<span class="source-line-no">2895</span><span id="line-2895">    * @param values The strings to check.</span>
<span class="source-line-no">2896</span><span id="line-2896">    * @return &lt;jk&gt;true&lt;/jk&gt; if all strings are not null, not empty, and not whitespace only, &lt;jk&gt;false&lt;/jk&gt; otherwise.</span>
<span class="source-line-no">2897</span><span id="line-2897">    */</span>
<span class="source-line-no">2898</span><span id="line-2898">   public static boolean isAllNotBlank(CharSequence...values) {</span>
<span class="source-line-no">2899</span><span id="line-2899">      if (values == null || values.length == 0)</span>
<span class="source-line-no">2900</span><span id="line-2900">         return false;</span>
<span class="source-line-no">2901</span><span id="line-2901">      for (CharSequence value : values)</span>
<span class="source-line-no">2902</span><span id="line-2902">         if (! isNotBlank(value))</span>
<span class="source-line-no">2903</span><span id="line-2903">            return false;</span>
<span class="source-line-no">2904</span><span id="line-2904">      return true;</span>
<span class="source-line-no">2905</span><span id="line-2905">   }</span>
<span class="source-line-no">2906</span><span id="line-2906"></span>
<span class="source-line-no">2907</span><span id="line-2907">   /**</span>
<span class="source-line-no">2908</span><span id="line-2908">    * Checks if all of the provided strings are not empty (not null and not zero-length).</span>
<span class="source-line-no">2909</span><span id="line-2909">    *</span>
<span class="source-line-no">2910</span><span id="line-2910">    * &lt;p&gt;</span>
<span class="source-line-no">2911</span><span id="line-2911">    * Returns &lt;jk&gt;true&lt;/jk&gt; only if all strings are not null and have a length greater than zero.</span>
<span class="source-line-no">2912</span><span id="line-2912">    * Returns &lt;jk&gt;false&lt;/jk&gt; if the array is null or empty, or if any string is null or empty.</span>
<span class="source-line-no">2913</span><span id="line-2913">    *</span>
<span class="source-line-no">2914</span><span id="line-2914">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">2915</span><span id="line-2915">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">2916</span><span id="line-2916">    *    isAllNotEmpty();                                     &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">2917</span><span id="line-2917">    *    isAllNotEmpty(&lt;jk&gt;null&lt;/jk&gt;);                        &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">2918</span><span id="line-2918">    *    isAllNotEmpty(&lt;jk&gt;null&lt;/jk&gt;, &lt;jk&gt;null&lt;/jk&gt;);         &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">2919</span><span id="line-2919">    *    isAllNotEmpty(&lt;js&gt;""&lt;/js&gt;, &lt;js&gt;""&lt;/js&gt;);             &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">2920</span><span id="line-2920">    *    isAllNotEmpty(&lt;jk&gt;null&lt;/jk&gt;, &lt;js&gt;"hello"&lt;/js&gt;);      &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">2921</span><span id="line-2921">    *    isAllNotEmpty(&lt;js&gt;""&lt;/js&gt;, &lt;js&gt;"   "&lt;/js&gt;);          &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">2922</span><span id="line-2922">    *    isAllNotEmpty(&lt;js&gt;"hello"&lt;/js&gt;);                     &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">2923</span><span id="line-2923">    *    isAllNotEmpty(&lt;js&gt;"hello"&lt;/js&gt;, &lt;js&gt;"world"&lt;/js&gt;);   &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">2924</span><span id="line-2924">    *    isAllNotEmpty(&lt;js&gt;"hello"&lt;/js&gt;, &lt;js&gt;"   "&lt;/js&gt;);     &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">2925</span><span id="line-2925">    * &lt;/p&gt;</span>
<span class="source-line-no">2926</span><span id="line-2926">    *</span>
<span class="source-line-no">2927</span><span id="line-2927">    * @param values The strings to check.</span>
<span class="source-line-no">2928</span><span id="line-2928">    * @return &lt;jk&gt;true&lt;/jk&gt; if all strings are not null and not empty, &lt;jk&gt;false&lt;/jk&gt; otherwise.</span>
<span class="source-line-no">2929</span><span id="line-2929">    */</span>
<span class="source-line-no">2930</span><span id="line-2930">   public static boolean isAllNotEmpty(CharSequence...values) {</span>
<span class="source-line-no">2931</span><span id="line-2931">      if (values == null || values.length == 0)</span>
<span class="source-line-no">2932</span><span id="line-2932">         return false;</span>
<span class="source-line-no">2933</span><span id="line-2933">      for (CharSequence value : values)</span>
<span class="source-line-no">2934</span><span id="line-2934">         if (value == null || value.isEmpty())</span>
<span class="source-line-no">2935</span><span id="line-2935">            return false;</span>
<span class="source-line-no">2936</span><span id="line-2936">      return true;</span>
<span class="source-line-no">2937</span><span id="line-2937">   }</span>
<span class="source-line-no">2938</span><span id="line-2938"></span>
<span class="source-line-no">2939</span><span id="line-2939">   /**</span>
<span class="source-line-no">2940</span><span id="line-2940">    * Checks if a string contains only alphabetic characters (a-z, A-Z).</span>
<span class="source-line-no">2941</span><span id="line-2941">    *</span>
<span class="source-line-no">2942</span><span id="line-2942">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">2943</span><span id="line-2943">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">2944</span><span id="line-2944">    *    isAlpha(&lt;jk&gt;null&lt;/jk&gt;);         &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">2945</span><span id="line-2945">    *    isAlpha(&lt;js&gt;""&lt;/js&gt;);           &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">2946</span><span id="line-2946">    *    isAlpha(&lt;js&gt;"abc"&lt;/js&gt;);        &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">2947</span><span id="line-2947">    *    isAlpha(&lt;js&gt;"abc123"&lt;/js&gt;);     &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">2948</span><span id="line-2948">    *    isAlpha(&lt;js&gt;"abc def"&lt;/js&gt;);    &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">2949</span><span id="line-2949">    * &lt;/p&gt;</span>
<span class="source-line-no">2950</span><span id="line-2950">    *</span>
<span class="source-line-no">2951</span><span id="line-2951">    * @param str The string to check.</span>
<span class="source-line-no">2952</span><span id="line-2952">    * @return &lt;jk&gt;true&lt;/jk&gt; if the string is not null, not empty, and contains only alphabetic characters.</span>
<span class="source-line-no">2953</span><span id="line-2953">    */</span>
<span class="source-line-no">2954</span><span id="line-2954">   public static boolean isAlpha(String str) {</span>
<span class="source-line-no">2955</span><span id="line-2955">      if (isEmpty(str))</span>
<span class="source-line-no">2956</span><span id="line-2956">         return false;</span>
<span class="source-line-no">2957</span><span id="line-2957">      for (var i = 0; i &lt; str.length(); i++) {</span>
<span class="source-line-no">2958</span><span id="line-2958">         if (! LETTER.contains(str.charAt(i)))</span>
<span class="source-line-no">2959</span><span id="line-2959">            return false;</span>
<span class="source-line-no">2960</span><span id="line-2960">      }</span>
<span class="source-line-no">2961</span><span id="line-2961">      return true;</span>
<span class="source-line-no">2962</span><span id="line-2962">   }</span>
<span class="source-line-no">2963</span><span id="line-2963"></span>
<span class="source-line-no">2964</span><span id="line-2964">   /**</span>
<span class="source-line-no">2965</span><span id="line-2965">    * Checks if a string contains only alphanumeric characters (a-z, A-Z, 0-9).</span>
<span class="source-line-no">2966</span><span id="line-2966">    *</span>
<span class="source-line-no">2967</span><span id="line-2967">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">2968</span><span id="line-2968">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">2969</span><span id="line-2969">    *    isAlphaNumeric(&lt;jk&gt;null&lt;/jk&gt;);         &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">2970</span><span id="line-2970">    *    isAlphaNumeric(&lt;js&gt;""&lt;/js&gt;);           &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">2971</span><span id="line-2971">    *    isAlphaNumeric(&lt;js&gt;"abc"&lt;/js&gt;);        &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">2972</span><span id="line-2972">    *    isAlphaNumeric(&lt;js&gt;"abc123"&lt;/js&gt;);     &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">2973</span><span id="line-2973">    *    isAlphaNumeric(&lt;js&gt;"abc def"&lt;/js&gt;);    &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">2974</span><span id="line-2974">    *    isAlphaNumeric(&lt;js&gt;"abc-123"&lt;/js&gt;);    &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">2975</span><span id="line-2975">    * &lt;/p&gt;</span>
<span class="source-line-no">2976</span><span id="line-2976">    *</span>
<span class="source-line-no">2977</span><span id="line-2977">    * @param str The string to check.</span>
<span class="source-line-no">2978</span><span id="line-2978">    * @return &lt;jk&gt;true&lt;/jk&gt; if the string is not null, not empty, and contains only alphanumeric characters.</span>
<span class="source-line-no">2979</span><span id="line-2979">    */</span>
<span class="source-line-no">2980</span><span id="line-2980">   public static boolean isAlphaNumeric(String str) {</span>
<span class="source-line-no">2981</span><span id="line-2981">      if (isEmpty(str))</span>
<span class="source-line-no">2982</span><span id="line-2982">         return false;</span>
<span class="source-line-no">2983</span><span id="line-2983">      for (var i = 0; i &lt; str.length(); i++) {</span>
<span class="source-line-no">2984</span><span id="line-2984">         if (! (LETTER.contains(str.charAt(i)) || DIGIT.contains(str.charAt(i))))</span>
<span class="source-line-no">2985</span><span id="line-2985">            return false;</span>
<span class="source-line-no">2986</span><span id="line-2986">      }</span>
<span class="source-line-no">2987</span><span id="line-2987">      return true;</span>
<span class="source-line-no">2988</span><span id="line-2988">   }</span>
<span class="source-line-no">2989</span><span id="line-2989"></span>
<span class="source-line-no">2990</span><span id="line-2990">   /**</span>
<span class="source-line-no">2991</span><span id="line-2991">    * Checks if any of the provided strings are not blank (not null, not empty, and not whitespace only).</span>
<span class="source-line-no">2992</span><span id="line-2992">    *</span>
<span class="source-line-no">2993</span><span id="line-2993">    * &lt;p&gt;</span>
<span class="source-line-no">2994</span><span id="line-2994">    * Returns &lt;jk&gt;true&lt;/jk&gt; if at least one string is not null, not empty, and contains non-whitespace characters.</span>
<span class="source-line-no">2995</span><span id="line-2995">    *</span>
<span class="source-line-no">2996</span><span id="line-2996">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">2997</span><span id="line-2997">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">2998</span><span id="line-2998">    *    isAnyNotBlank(&lt;jk&gt;null&lt;/jk&gt;, &lt;jk&gt;null&lt;/jk&gt;);             &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">2999</span><span id="line-2999">    *    isAnyNotBlank(&lt;js&gt;""&lt;/js&gt;, &lt;js&gt;""&lt;/js&gt;);                 &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">3000</span><span id="line-3000">    *    isAnyNotBlank(&lt;js&gt;"   "&lt;/js&gt;, &lt;js&gt;"   "&lt;/js&gt;);           &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">3001</span><span id="line-3001">    *    isAnyNotBlank(&lt;jk&gt;null&lt;/jk&gt;, &lt;js&gt;"hello"&lt;/js&gt;);          &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">3002</span><span id="line-3002">    *    isAnyNotBlank(&lt;js&gt;""&lt;/js&gt;, &lt;js&gt;"   "&lt;/js&gt;, &lt;js&gt;"x"&lt;/js&gt;);&lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">3003</span><span id="line-3003">    *    isAnyNotBlank(&lt;js&gt;"hello"&lt;/js&gt;, &lt;js&gt;"world"&lt;/js&gt;);       &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">3004</span><span id="line-3004">    * &lt;/p&gt;</span>
<span class="source-line-no">3005</span><span id="line-3005">    *</span>
<span class="source-line-no">3006</span><span id="line-3006">    * @param values The strings to check.</span>
<span class="source-line-no">3007</span><span id="line-3007">    * @return &lt;jk&gt;true&lt;/jk&gt; if at least one string is not null, not empty, and contains non-whitespace characters.</span>
<span class="source-line-no">3008</span><span id="line-3008">    */</span>
<span class="source-line-no">3009</span><span id="line-3009">   public static boolean isAnyNotBlank(CharSequence...values) {</span>
<span class="source-line-no">3010</span><span id="line-3010">      if (values == null)</span>
<span class="source-line-no">3011</span><span id="line-3011">         return false;</span>
<span class="source-line-no">3012</span><span id="line-3012">      for (CharSequence value : values)</span>
<span class="source-line-no">3013</span><span id="line-3013">         if (isNotBlank(value))</span>
<span class="source-line-no">3014</span><span id="line-3014">            return true;</span>
<span class="source-line-no">3015</span><span id="line-3015">      return false;</span>
<span class="source-line-no">3016</span><span id="line-3016">   }</span>
<span class="source-line-no">3017</span><span id="line-3017"></span>
<span class="source-line-no">3018</span><span id="line-3018">   /**</span>
<span class="source-line-no">3019</span><span id="line-3019">    * Checks if any of the provided strings are not empty (not null and not zero-length).</span>
<span class="source-line-no">3020</span><span id="line-3020">    *</span>
<span class="source-line-no">3021</span><span id="line-3021">    * &lt;p&gt;</span>
<span class="source-line-no">3022</span><span id="line-3022">    * Returns &lt;jk&gt;true&lt;/jk&gt; if at least one string is not null and has a length greater than zero.</span>
<span class="source-line-no">3023</span><span id="line-3023">    *</span>
<span class="source-line-no">3024</span><span id="line-3024">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">3025</span><span id="line-3025">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">3026</span><span id="line-3026">    *    isAnyNotEmpty(&lt;jk&gt;null&lt;/jk&gt;, &lt;jk&gt;null&lt;/jk&gt;);             &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">3027</span><span id="line-3027">    *    isAnyNotEmpty(&lt;js&gt;""&lt;/js&gt;, &lt;js&gt;""&lt;/js&gt;);                 &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">3028</span><span id="line-3028">    *    isAnyNotEmpty(&lt;jk&gt;null&lt;/jk&gt;, &lt;js&gt;"hello"&lt;/js&gt;);          &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">3029</span><span id="line-3029">    *    isAnyNotEmpty(&lt;js&gt;""&lt;/js&gt;, &lt;js&gt;"   "&lt;/js&gt;);              &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">3030</span><span id="line-3030">    *    isAnyNotEmpty(&lt;js&gt;"hello"&lt;/js&gt;, &lt;js&gt;"world"&lt;/js&gt;);       &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">3031</span><span id="line-3031">    * &lt;/p&gt;</span>
<span class="source-line-no">3032</span><span id="line-3032">    *</span>
<span class="source-line-no">3033</span><span id="line-3033">    * @param values The strings to check.</span>
<span class="source-line-no">3034</span><span id="line-3034">    * @return &lt;jk&gt;true&lt;/jk&gt; if at least one string is not null and not empty.</span>
<span class="source-line-no">3035</span><span id="line-3035">    */</span>
<span class="source-line-no">3036</span><span id="line-3036">   public static boolean isAnyNotEmpty(CharSequence...values) {</span>
<span class="source-line-no">3037</span><span id="line-3037">      if (values == null)</span>
<span class="source-line-no">3038</span><span id="line-3038">         return false;</span>
<span class="source-line-no">3039</span><span id="line-3039">      for (CharSequence value : values)</span>
<span class="source-line-no">3040</span><span id="line-3040">         if (value != null &amp;&amp; ! value.isEmpty())</span>
<span class="source-line-no">3041</span><span id="line-3041">            return true;</span>
<span class="source-line-no">3042</span><span id="line-3042">      return false;</span>
<span class="source-line-no">3043</span><span id="line-3043">   }</span>
<span class="source-line-no">3044</span><span id="line-3044"></span>
<span class="source-line-no">3045</span><span id="line-3045">   /**</span>
<span class="source-line-no">3046</span><span id="line-3046">    * Checks if a string is blank (null, empty, or whitespace only).</span>
<span class="source-line-no">3047</span><span id="line-3047">    *</span>
<span class="source-line-no">3048</span><span id="line-3048">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">3049</span><span id="line-3049">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">3050</span><span id="line-3050">    *    isBlank(&lt;jk&gt;null&lt;/jk&gt;);       &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">3051</span><span id="line-3051">    *    isBlank(&lt;js&gt;""&lt;/js&gt;);         &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">3052</span><span id="line-3052">    *    isBlank(&lt;js&gt;"   "&lt;/js&gt;);      &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">3053</span><span id="line-3053">    *    isBlank(&lt;js&gt;"hello"&lt;/js&gt;);    &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">3054</span><span id="line-3054">    * &lt;/p&gt;</span>
<span class="source-line-no">3055</span><span id="line-3055">    *</span>
<span class="source-line-no">3056</span><span id="line-3056">    * @param str The string to check.</span>
<span class="source-line-no">3057</span><span id="line-3057">    * @return &lt;jk&gt;true&lt;/jk&gt; if the string is null, empty, or contains only whitespace characters.</span>
<span class="source-line-no">3058</span><span id="line-3058">    */</span>
<span class="source-line-no">3059</span><span id="line-3059">   public static boolean isBlank(CharSequence str) {</span>
<span class="source-line-no">3060</span><span id="line-3060">      return str == null || str.toString().isBlank();</span>
<span class="source-line-no">3061</span><span id="line-3061">   }</span>
<span class="source-line-no">3062</span><span id="line-3062"></span>
<span class="source-line-no">3063</span><span id="line-3063">   /**</span>
<span class="source-line-no">3064</span><span id="line-3064">    * Checks if a string is a valid credit card number using the Luhn algorithm.</span>
<span class="source-line-no">3065</span><span id="line-3065">    *</span>
<span class="source-line-no">3066</span><span id="line-3066">    * &lt;p&gt;</span>
<span class="source-line-no">3067</span><span id="line-3067">    * Validates credit card numbers by:</span>
<span class="source-line-no">3068</span><span id="line-3068">    * &lt;ul&gt;</span>
<span class="source-line-no">3069</span><span id="line-3069">    *   &lt;li&gt;Removing spaces and hyphens&lt;/li&gt;</span>
<span class="source-line-no">3070</span><span id="line-3070">    *   &lt;li&gt;Checking that all remaining characters are digits&lt;/li&gt;</span>
<span class="source-line-no">3071</span><span id="line-3071">    *   &lt;li&gt;Verifying the number passes the Luhn algorithm check&lt;/li&gt;</span>
<span class="source-line-no">3072</span><span id="line-3072">    *   &lt;li&gt;Ensuring the number is between 13-19 digits (standard credit card length)&lt;/li&gt;</span>
<span class="source-line-no">3073</span><span id="line-3073">    * &lt;/ul&gt;</span>
<span class="source-line-no">3074</span><span id="line-3074">    *</span>
<span class="source-line-no">3075</span><span id="line-3075">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">3076</span><span id="line-3076">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">3077</span><span id="line-3077">    *    isCreditCard(&lt;jk&gt;null&lt;/jk&gt;);                    &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">3078</span><span id="line-3078">    *    isCreditCard(&lt;js&gt;""&lt;/js&gt;);                      &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">3079</span><span id="line-3079">    *    isCreditCard(&lt;js&gt;"4532015112830366"&lt;/js&gt;);      &lt;jc&gt;// true (Visa test card)&lt;/jc&gt;</span>
<span class="source-line-no">3080</span><span id="line-3080">    *    isCreditCard(&lt;js&gt;"4532-0151-1283-0366"&lt;/js&gt;);   &lt;jc&gt;// true (with separators)&lt;/jc&gt;</span>
<span class="source-line-no">3081</span><span id="line-3081">    *    isCreditCard(&lt;js&gt;"1234567890"&lt;/js&gt;);            &lt;jc&gt;// false (invalid Luhn)&lt;/jc&gt;</span>
<span class="source-line-no">3082</span><span id="line-3082">    * &lt;/p&gt;</span>
<span class="source-line-no">3083</span><span id="line-3083">    *</span>
<span class="source-line-no">3084</span><span id="line-3084">    * @param str The string to check.</span>
<span class="source-line-no">3085</span><span id="line-3085">    * @return &lt;jk&gt;true&lt;/jk&gt; if the string is a valid credit card number.</span>
<span class="source-line-no">3086</span><span id="line-3086">    */</span>
<span class="source-line-no">3087</span><span id="line-3087">   public static boolean isCreditCard(String str) {</span>
<span class="source-line-no">3088</span><span id="line-3088">      if (isEmpty(str))</span>
<span class="source-line-no">3089</span><span id="line-3089">         return false;</span>
<span class="source-line-no">3090</span><span id="line-3090">      // Remove spaces and hyphens</span>
<span class="source-line-no">3091</span><span id="line-3091">      var cleaned = str.replaceAll("[\\s\\-]", "");</span>
<span class="source-line-no">3092</span><span id="line-3092">      // Must be all digits and 13-19 digits long</span>
<span class="source-line-no">3093</span><span id="line-3093">      if (! cleaned.matches("^\\d{13,19}$"))</span>
<span class="source-line-no">3094</span><span id="line-3094">         return false;</span>
<span class="source-line-no">3095</span><span id="line-3095">      // Apply Luhn algorithm</span>
<span class="source-line-no">3096</span><span id="line-3096">      var sum = 0;</span>
<span class="source-line-no">3097</span><span id="line-3097">      var alternate = false;</span>
<span class="source-line-no">3098</span><span id="line-3098">      for (var i = cleaned.length() - 1; i &gt;= 0; i--) {</span>
<span class="source-line-no">3099</span><span id="line-3099">         var digit = Character.getNumericValue(cleaned.charAt(i));</span>
<span class="source-line-no">3100</span><span id="line-3100">         if (alternate) {</span>
<span class="source-line-no">3101</span><span id="line-3101">            digit *= 2;</span>
<span class="source-line-no">3102</span><span id="line-3102">            if (digit &gt; 9)</span>
<span class="source-line-no">3103</span><span id="line-3103">               digit = (digit % 10) + 1;</span>
<span class="source-line-no">3104</span><span id="line-3104">         }</span>
<span class="source-line-no">3105</span><span id="line-3105">         sum += digit;</span>
<span class="source-line-no">3106</span><span id="line-3106">         alternate = ! alternate;</span>
<span class="source-line-no">3107</span><span id="line-3107">      }</span>
<span class="source-line-no">3108</span><span id="line-3108">      return (sum % 10) == 0;</span>
<span class="source-line-no">3109</span><span id="line-3109">   }</span>
<span class="source-line-no">3110</span><span id="line-3110"></span>
<span class="source-line-no">3111</span><span id="line-3111">   /**</span>
<span class="source-line-no">3112</span><span id="line-3112">    * Returns &lt;jk&gt;true&lt;/jk&gt; if the specified string is numeric.</span>
<span class="source-line-no">3113</span><span id="line-3113">    *</span>
<span class="source-line-no">3114</span><span id="line-3114">    * @param s The string to check.</span>
<span class="source-line-no">3115</span><span id="line-3115">    * @return &lt;jk&gt;true&lt;/jk&gt; if the specified string is numeric.</span>
<span class="source-line-no">3116</span><span id="line-3116">    */</span>
<span class="source-line-no">3117</span><span id="line-3117">   public static boolean isDecimal(String s) {</span>
<span class="source-line-no">3118</span><span id="line-3118">      if (s == null || s.isEmpty() || ! FIRST_NUMBER_CHARS.contains(s.charAt(0)))</span>
<span class="source-line-no">3119</span><span id="line-3119">         return false;</span>
<span class="source-line-no">3120</span><span id="line-3120">      var i = 0;</span>
<span class="source-line-no">3121</span><span id="line-3121">      var length = s.length();</span>
<span class="source-line-no">3122</span><span id="line-3122">      var c = s.charAt(0);</span>
<span class="source-line-no">3123</span><span id="line-3123">      var isPrefixed = false;</span>
<span class="source-line-no">3124</span><span id="line-3124">      if (c == '+' || c == '-') {</span>
<span class="source-line-no">3125</span><span id="line-3125">         isPrefixed = true;</span>
<span class="source-line-no">3126</span><span id="line-3126">         i++;</span>
<span class="source-line-no">3127</span><span id="line-3127">      }</span>
<span class="source-line-no">3128</span><span id="line-3128">      if (i == length)</span>
<span class="source-line-no">3129</span><span id="line-3129">         return false;</span>
<span class="source-line-no">3130</span><span id="line-3130">      c = s.charAt(i++);</span>
<span class="source-line-no">3131</span><span id="line-3131">      if (c == '0' &amp;&amp; length &gt; (isPrefixed ? 2 : 1)) {</span>
<span class="source-line-no">3132</span><span id="line-3132">         c = s.charAt(i++);</span>
<span class="source-line-no">3133</span><span id="line-3133">         if (c == 'x' || c == 'X') {</span>
<span class="source-line-no">3134</span><span id="line-3134">            for (var j = i; j &lt; length; j++) {</span>
<span class="source-line-no">3135</span><span id="line-3135">               if (! HEXADECIMAL_CHARS.contains(s.charAt(j)))</span>
<span class="source-line-no">3136</span><span id="line-3136">                  return false;</span>
<span class="source-line-no">3137</span><span id="line-3137">            }</span>
<span class="source-line-no">3138</span><span id="line-3138">         } else if (OCTAL_CHARS.contains(c)) {</span>
<span class="source-line-no">3139</span><span id="line-3139">            for (var j = i; j &lt; length; j++)</span>
<span class="source-line-no">3140</span><span id="line-3140">               if (! OCTAL_CHARS.contains(s.charAt(j)))</span>
<span class="source-line-no">3141</span><span id="line-3141">                  return false;</span>
<span class="source-line-no">3142</span><span id="line-3142">         } else {</span>
<span class="source-line-no">3143</span><span id="line-3143">            return false;</span>
<span class="source-line-no">3144</span><span id="line-3144">         }</span>
<span class="source-line-no">3145</span><span id="line-3145">      } else if (c == '#') {</span>
<span class="source-line-no">3146</span><span id="line-3146">         for (var j = i; j &lt; length; j++) {</span>
<span class="source-line-no">3147</span><span id="line-3147">            if (! HEXADECIMAL_CHARS.contains(s.charAt(j)))</span>
<span class="source-line-no">3148</span><span id="line-3148">               return false;</span>
<span class="source-line-no">3149</span><span id="line-3149">         }</span>
<span class="source-line-no">3150</span><span id="line-3150">      } else if (DECIMAL_CHARS.contains(c)) {</span>
<span class="source-line-no">3151</span><span id="line-3151">         for (var j = i; j &lt; length; j++)</span>
<span class="source-line-no">3152</span><span id="line-3152">            if (! DECIMAL_CHARS.contains(s.charAt(j)))</span>
<span class="source-line-no">3153</span><span id="line-3153">               return false;</span>
<span class="source-line-no">3154</span><span id="line-3154">      } else {</span>
<span class="source-line-no">3155</span><span id="line-3155">         return false;</span>
<span class="source-line-no">3156</span><span id="line-3156">      }</span>
<span class="source-line-no">3157</span><span id="line-3157">      return true;</span>
<span class="source-line-no">3158</span><span id="line-3158">   }</span>
<span class="source-line-no">3159</span><span id="line-3159"></span>
<span class="source-line-no">3160</span><span id="line-3160">   /**</span>
<span class="source-line-no">3161</span><span id="line-3161">    * Checks if a string contains only digit characters (0-9).</span>
<span class="source-line-no">3162</span><span id="line-3162">    *</span>
<span class="source-line-no">3163</span><span id="line-3163">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">3164</span><span id="line-3164">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">3165</span><span id="line-3165">    *    isDigit(&lt;jk&gt;null&lt;/jk&gt;);         &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">3166</span><span id="line-3166">    *    isDigit(&lt;js&gt;""&lt;/js&gt;);           &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">3167</span><span id="line-3167">    *    isDigit(&lt;js&gt;"123"&lt;/js&gt;);        &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">3168</span><span id="line-3168">    *    isDigit(&lt;js&gt;"abc123"&lt;/js&gt;);     &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">3169</span><span id="line-3169">    *    isDigit(&lt;js&gt;"12.3"&lt;/js&gt;);       &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">3170</span><span id="line-3170">    * &lt;/p&gt;</span>
<span class="source-line-no">3171</span><span id="line-3171">    *</span>
<span class="source-line-no">3172</span><span id="line-3172">    * @param str The string to check.</span>
<span class="source-line-no">3173</span><span id="line-3173">    * @return &lt;jk&gt;true&lt;/jk&gt; if the string is not null, not empty, and contains only digit characters.</span>
<span class="source-line-no">3174</span><span id="line-3174">    */</span>
<span class="source-line-no">3175</span><span id="line-3175">   public static boolean isDigit(String str) {</span>
<span class="source-line-no">3176</span><span id="line-3176">      if (isEmpty(str))</span>
<span class="source-line-no">3177</span><span id="line-3177">         return false;</span>
<span class="source-line-no">3178</span><span id="line-3178">      for (var i = 0; i &lt; str.length(); i++) {</span>
<span class="source-line-no">3179</span><span id="line-3179">         if (! DIGIT.contains(str.charAt(i)))</span>
<span class="source-line-no">3180</span><span id="line-3180">            return false;</span>
<span class="source-line-no">3181</span><span id="line-3181">      }</span>
<span class="source-line-no">3182</span><span id="line-3182">      return true;</span>
<span class="source-line-no">3183</span><span id="line-3183">   }</span>
<span class="source-line-no">3184</span><span id="line-3184"></span>
<span class="source-line-no">3185</span><span id="line-3185">   /**</span>
<span class="source-line-no">3186</span><span id="line-3186">    * Checks if a string is a valid email address.</span>
<span class="source-line-no">3187</span><span id="line-3187">    *</span>
<span class="source-line-no">3188</span><span id="line-3188">    * &lt;p&gt;</span>
<span class="source-line-no">3189</span><span id="line-3189">    * Performs basic email validation using a simple regex pattern.</span>
<span class="source-line-no">3190</span><span id="line-3190">    * This is not a complete RFC 5321/5322 validation, but covers most common email formats.</span>
<span class="source-line-no">3191</span><span id="line-3191">    *</span>
<span class="source-line-no">3192</span><span id="line-3192">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">3193</span><span id="line-3193">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">3194</span><span id="line-3194">    *    isEmail(&lt;jk&gt;null&lt;/jk&gt;);                    &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">3195</span><span id="line-3195">    *    isEmail(&lt;js&gt;""&lt;/js&gt;);                      &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">3196</span><span id="line-3196">    *    isEmail(&lt;js&gt;"user@example.com"&lt;/js&gt;);      &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">3197</span><span id="line-3197">    *    isEmail(&lt;js&gt;"invalid.email"&lt;/js&gt;);         &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">3198</span><span id="line-3198">    * &lt;/p&gt;</span>
<span class="source-line-no">3199</span><span id="line-3199">    *</span>
<span class="source-line-no">3200</span><span id="line-3200">    * @param str The string to check.</span>
<span class="source-line-no">3201</span><span id="line-3201">    * @return &lt;jk&gt;true&lt;/jk&gt; if the string is a valid email address.</span>
<span class="source-line-no">3202</span><span id="line-3202">    */</span>
<span class="source-line-no">3203</span><span id="line-3203">   public static boolean isEmail(String str) {</span>
<span class="source-line-no">3204</span><span id="line-3204">      if (isEmpty(str))</span>
<span class="source-line-no">3205</span><span id="line-3205">         return false;</span>
<span class="source-line-no">3206</span><span id="line-3206">      // Basic email regex: local@domain</span>
<span class="source-line-no">3207</span><span id="line-3207">      // Allows letters, digits, dots, underscores, hyphens, and plus signs in local part</span>
<span class="source-line-no">3208</span><span id="line-3208">      // Domain must have at least one dot and valid TLD</span>
<span class="source-line-no">3209</span><span id="line-3209">      return str.matches("^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$");</span>
<span class="source-line-no">3210</span><span id="line-3210">   }</span>
<span class="source-line-no">3211</span><span id="line-3211"></span>
<span class="source-line-no">3212</span><span id="line-3212">   /**</span>
<span class="source-line-no">3213</span><span id="line-3213">    * Checks if a string is null or empty.</span>
<span class="source-line-no">3214</span><span id="line-3214">    *</span>
<span class="source-line-no">3215</span><span id="line-3215">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">3216</span><span id="line-3216">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">3217</span><span id="line-3217">    *    isEmpty(&lt;jk&gt;null&lt;/jk&gt;);    &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">3218</span><span id="line-3218">    *    isEmpty(&lt;js&gt;""&lt;/js&gt;);      &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">3219</span><span id="line-3219">    *    isEmpty(&lt;js&gt;"abc"&lt;/js&gt;);   &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">3220</span><span id="line-3220">    * &lt;/p&gt;</span>
<span class="source-line-no">3221</span><span id="line-3221">    *</span>
<span class="source-line-no">3222</span><span id="line-3222">    * @param str The string to check.</span>
<span class="source-line-no">3223</span><span id="line-3223">    * @return &lt;jk&gt;true&lt;/jk&gt; if the string is null or empty.</span>
<span class="source-line-no">3224</span><span id="line-3224">    */</span>
<span class="source-line-no">3225</span><span id="line-3225">   public static boolean isEmpty(String str) {</span>
<span class="source-line-no">3226</span><span id="line-3226">      return str == null || str.isEmpty();</span>
<span class="source-line-no">3227</span><span id="line-3227">   }</span>
<span class="source-line-no">3228</span><span id="line-3228"></span>
<span class="source-line-no">3229</span><span id="line-3229">   /**</span>
<span class="source-line-no">3230</span><span id="line-3230">    * Returns &lt;jk&gt;true&lt;/jk&gt; if the specified character is a valid first character for a number.</span>
<span class="source-line-no">3231</span><span id="line-3231">    *</span>
<span class="source-line-no">3232</span><span id="line-3232">    * @param c The character to test.</span>
<span class="source-line-no">3233</span><span id="line-3233">    * @return &lt;jk&gt;true&lt;/jk&gt; if the specified character is a valid first character for a number.</span>
<span class="source-line-no">3234</span><span id="line-3234">    */</span>
<span class="source-line-no">3235</span><span id="line-3235">   public static boolean isFirstNumberChar(char c) {</span>
<span class="source-line-no">3236</span><span id="line-3236">      return FIRST_NUMBER_CHARS.contains(c);</span>
<span class="source-line-no">3237</span><span id="line-3237">   }</span>
<span class="source-line-no">3238</span><span id="line-3238"></span>
<span class="source-line-no">3239</span><span id="line-3239">   /**</span>
<span class="source-line-no">3240</span><span id="line-3240">    * Returns &lt;jk&gt;true&lt;/jk&gt; if the specified string is a floating point number.</span>
<span class="source-line-no">3241</span><span id="line-3241">    *</span>
<span class="source-line-no">3242</span><span id="line-3242">    * @param s The string to check.</span>
<span class="source-line-no">3243</span><span id="line-3243">    * @return &lt;jk&gt;true&lt;/jk&gt; if the specified string is a floating point number.</span>
<span class="source-line-no">3244</span><span id="line-3244">    */</span>
<span class="source-line-no">3245</span><span id="line-3245">   public static boolean isFloat(String s) {</span>
<span class="source-line-no">3246</span><span id="line-3246">      if (s == null || s.isEmpty())</span>
<span class="source-line-no">3247</span><span id="line-3247">         return false;</span>
<span class="source-line-no">3248</span><span id="line-3248">      if (! FIRST_NUMBER_CHARS.contains(s.charAt(0)))</span>
<span class="source-line-no">3249</span><span id="line-3249">         return (s.equals("NaN") || s.equals("Infinity"));</span>
<span class="source-line-no">3250</span><span id="line-3250">      var i = 0;</span>
<span class="source-line-no">3251</span><span id="line-3251">      var length = s.length();</span>
<span class="source-line-no">3252</span><span id="line-3252">      var c = s.charAt(0);</span>
<span class="source-line-no">3253</span><span id="line-3253">      if (c == '+' || c == '-')</span>
<span class="source-line-no">3254</span><span id="line-3254">         i++;</span>
<span class="source-line-no">3255</span><span id="line-3255">      if (i == length)</span>
<span class="source-line-no">3256</span><span id="line-3256">         return false;</span>
<span class="source-line-no">3257</span><span id="line-3257">      c = s.charAt(i);</span>
<span class="source-line-no">3258</span><span id="line-3258">      if (c == '.' || DECIMAL_CHARS.contains(c)) {</span>
<span class="source-line-no">3259</span><span id="line-3259">         return FP_REGEX.matcher(s).matches();</span>
<span class="source-line-no">3260</span><span id="line-3260">      }</span>
<span class="source-line-no">3261</span><span id="line-3261">      return false;</span>
<span class="source-line-no">3262</span><span id="line-3262">   }</span>
<span class="source-line-no">3263</span><span id="line-3263"></span>
<span class="source-line-no">3264</span><span id="line-3264">   /**</span>
<span class="source-line-no">3265</span><span id="line-3265">    * Checks if a string is already interned.</span>
<span class="source-line-no">3266</span><span id="line-3266">    *</span>
<span class="source-line-no">3267</span><span id="line-3267">    * &lt;p&gt;</span>
<span class="source-line-no">3268</span><span id="line-3268">    * Returns &lt;jk&gt;false&lt;/jk&gt; if the input string is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">3269</span><span id="line-3269">    * A string is considered interned if it is the same object reference as its interned version.</span>
<span class="source-line-no">3270</span><span id="line-3270">    *</span>
<span class="source-line-no">3271</span><span id="line-3271">    * &lt;h5 class='section'&gt;Examples:&lt;/h5&gt;</span>
<span class="source-line-no">3272</span><span id="line-3272">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">3273</span><span id="line-3273">    *    String &lt;jv&gt;s1&lt;/jv&gt; = &lt;js&gt;"test"&lt;/js&gt;;  &lt;jc&gt;// String literal is automatically interned&lt;/jc&gt;</span>
<span class="source-line-no">3274</span><span id="line-3274">    *    assertTrue(isInterned(&lt;jv&gt;s1&lt;/jv&gt;));</span>
<span class="source-line-no">3275</span><span id="line-3275">    *</span>
<span class="source-line-no">3276</span><span id="line-3276">    *    String &lt;jv&gt;s2&lt;/jv&gt; = &lt;jk&gt;new&lt;/jk&gt; String(&lt;js&gt;"test"&lt;/js&gt;);  &lt;jc&gt;// New object, not interned&lt;/jc&gt;</span>
<span class="source-line-no">3277</span><span id="line-3277">    *    assertFalse(isInterned(&lt;jv&gt;s2&lt;/jv&gt;));</span>
<span class="source-line-no">3278</span><span id="line-3278">    *</span>
<span class="source-line-no">3279</span><span id="line-3279">    *    String &lt;jv&gt;s3&lt;/jv&gt; = intern(&lt;jv&gt;s2&lt;/jv&gt;);  &lt;jc&gt;// Now interned&lt;/jc&gt;</span>
<span class="source-line-no">3280</span><span id="line-3280">    *    assertTrue(isInterned(&lt;jv&gt;s3&lt;/jv&gt;));</span>
<span class="source-line-no">3281</span><span id="line-3281">    * &lt;/p&gt;</span>
<span class="source-line-no">3282</span><span id="line-3282">    *</span>
<span class="source-line-no">3283</span><span id="line-3283">    * @param str The string to check. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">3284</span><span id="line-3284">    * @return &lt;jk&gt;true&lt;/jk&gt; if the string is interned, &lt;jk&gt;false&lt;/jk&gt; otherwise.</span>
<span class="source-line-no">3285</span><span id="line-3285">    */</span>
<span class="source-line-no">3286</span><span id="line-3286">   public static boolean isInterned(String str) {</span>
<span class="source-line-no">3287</span><span id="line-3287">      if (str == null)</span>
<span class="source-line-no">3288</span><span id="line-3288">         return false;</span>
<span class="source-line-no">3289</span><span id="line-3289">      return str == str.intern();</span>
<span class="source-line-no">3290</span><span id="line-3290">   }</span>
<span class="source-line-no">3291</span><span id="line-3291"></span>
<span class="source-line-no">3292</span><span id="line-3292">   /**</span>
<span class="source-line-no">3293</span><span id="line-3293">    * Returns &lt;jk&gt;true&lt;/jk&gt; if the specified string appears to be valid JSON.</span>
<span class="source-line-no">3294</span><span id="line-3294">    *</span>
<span class="source-line-no">3295</span><span id="line-3295">    * &lt;p&gt;</span>
<span class="source-line-no">3296</span><span id="line-3296">    * This method performs a simple heuristic check and does not strictly validate JSON syntax.</span>
<span class="source-line-no">3297</span><span id="line-3297">    * Leading and trailing spaces are ignored.</span>
<span class="source-line-no">3298</span><span id="line-3298">    * &lt;br&gt;Leading and trailing comments are not allowed.</span>
<span class="source-line-no">3299</span><span id="line-3299">    *</span>
<span class="source-line-no">3300</span><span id="line-3300">    * @param s The string to test.</span>
<span class="source-line-no">3301</span><span id="line-3301">    * @return &lt;jk&gt;true&lt;/jk&gt; if the specified string appears to be valid JSON.</span>
<span class="source-line-no">3302</span><span id="line-3302">    */</span>
<span class="source-line-no">3303</span><span id="line-3303">   public static boolean isProbablyJson(String s) {</span>
<span class="source-line-no">3304</span><span id="line-3304">      if (s == null)</span>
<span class="source-line-no">3305</span><span id="line-3305">         return false;</span>
<span class="source-line-no">3306</span><span id="line-3306">      var c1 = firstNonWhitespaceChar(s);</span>
<span class="source-line-no">3307</span><span id="line-3307">      var c2 = lastNonWhitespaceChar(s);</span>
<span class="source-line-no">3308</span><span id="line-3308">      if (c1 == '{' &amp;&amp; c2 == '}' || c1 == '[' &amp;&amp; c2 == ']' || c1 == '\'' &amp;&amp; c2 == '\'')</span>
<span class="source-line-no">3309</span><span id="line-3309">         return true;</span>
<span class="source-line-no">3310</span><span id="line-3310">      return (isOneOf(s, "true", "false", "null") || isNumeric(s));</span>
<span class="source-line-no">3311</span><span id="line-3311">   }</span>
<span class="source-line-no">3312</span><span id="line-3312"></span>
<span class="source-line-no">3313</span><span id="line-3313">   /**</span>
<span class="source-line-no">3314</span><span id="line-3314">    * Returns &lt;jk&gt;true&lt;/jk&gt; if the specified string appears to be a JSON array.</span>
<span class="source-line-no">3315</span><span id="line-3315">    *</span>
<span class="source-line-no">3316</span><span id="line-3316">    * &lt;p&gt;</span>
<span class="source-line-no">3317</span><span id="line-3317">    * This method performs a simple heuristic check and does not strictly validate JSON syntax.</span>
<span class="source-line-no">3318</span><span id="line-3318">    *</span>
<span class="source-line-no">3319</span><span id="line-3319">    * @param o The object to test.</span>
<span class="source-line-no">3320</span><span id="line-3320">    * @param ignoreWhitespaceAndComments If &lt;jk&gt;true&lt;/jk&gt;, leading and trailing whitespace and comments will be ignored.</span>
<span class="source-line-no">3321</span><span id="line-3321">    * @return &lt;jk&gt;true&lt;/jk&gt; if the specified string appears to be a JSON array.</span>
<span class="source-line-no">3322</span><span id="line-3322">    */</span>
<span class="source-line-no">3323</span><span id="line-3323">   public static boolean isProbablyJsonArray(Object o, boolean ignoreWhitespaceAndComments) {</span>
<span class="source-line-no">3324</span><span id="line-3324">      if (o instanceof CharSequence o2) {</span>
<span class="source-line-no">3325</span><span id="line-3325">         var s = o2.toString();</span>
<span class="source-line-no">3326</span><span id="line-3326">         if (! ignoreWhitespaceAndComments)</span>
<span class="source-line-no">3327</span><span id="line-3327">            return (s.startsWith("[") &amp;&amp; s.endsWith("]"));</span>
<span class="source-line-no">3328</span><span id="line-3328">         if (firstRealCharacter(s) != '[')</span>
<span class="source-line-no">3329</span><span id="line-3329">            return false;</span>
<span class="source-line-no">3330</span><span id="line-3330">         var i = s.lastIndexOf(']');</span>
<span class="source-line-no">3331</span><span id="line-3331">         if (i == -1)</span>
<span class="source-line-no">3332</span><span id="line-3332">            return false;</span>
<span class="source-line-no">3333</span><span id="line-3333">         s = s.substring(i + 1);</span>
<span class="source-line-no">3334</span><span id="line-3334">         return firstRealCharacter(s) == -1;</span>
<span class="source-line-no">3335</span><span id="line-3335">      }</span>
<span class="source-line-no">3336</span><span id="line-3336">      return false;</span>
<span class="source-line-no">3337</span><span id="line-3337">   }</span>
<span class="source-line-no">3338</span><span id="line-3338"></span>
<span class="source-line-no">3339</span><span id="line-3339">   /**</span>
<span class="source-line-no">3340</span><span id="line-3340">    * Returns &lt;jk&gt;true&lt;/jk&gt; if the specified string appears to be a JSON object.</span>
<span class="source-line-no">3341</span><span id="line-3341">    *</span>
<span class="source-line-no">3342</span><span id="line-3342">    * &lt;p&gt;</span>
<span class="source-line-no">3343</span><span id="line-3343">    * This method performs a simple heuristic check and does not strictly validate JSON syntax.</span>
<span class="source-line-no">3344</span><span id="line-3344">    *</span>
<span class="source-line-no">3345</span><span id="line-3345">    * @param o The object to test.</span>
<span class="source-line-no">3346</span><span id="line-3346">    * @param ignoreWhitespaceAndComments If &lt;jk&gt;true&lt;/jk&gt;, leading and trailing whitespace and comments will be ignored.</span>
<span class="source-line-no">3347</span><span id="line-3347">    * @return &lt;jk&gt;true&lt;/jk&gt; if the specified string appears to be a JSON object.</span>
<span class="source-line-no">3348</span><span id="line-3348">    */</span>
<span class="source-line-no">3349</span><span id="line-3349">   public static boolean isProbablyJsonObject(Object o, boolean ignoreWhitespaceAndComments) {</span>
<span class="source-line-no">3350</span><span id="line-3350">      if (o instanceof CharSequence o2) {</span>
<span class="source-line-no">3351</span><span id="line-3351">         var s = o2.toString();</span>
<span class="source-line-no">3352</span><span id="line-3352">         if (! ignoreWhitespaceAndComments)</span>
<span class="source-line-no">3353</span><span id="line-3353">            return (s.startsWith("{") &amp;&amp; s.endsWith("}"));</span>
<span class="source-line-no">3354</span><span id="line-3354">         if (firstRealCharacter(s) != '{')</span>
<span class="source-line-no">3355</span><span id="line-3355">            return false;</span>
<span class="source-line-no">3356</span><span id="line-3356">         var i = s.lastIndexOf('}');</span>
<span class="source-line-no">3357</span><span id="line-3357">         if (i == -1)</span>
<span class="source-line-no">3358</span><span id="line-3358">            return false;</span>
<span class="source-line-no">3359</span><span id="line-3359">         s = s.substring(i + 1);</span>
<span class="source-line-no">3360</span><span id="line-3360">         return firstRealCharacter(s) == -1;</span>
<span class="source-line-no">3361</span><span id="line-3361">      }</span>
<span class="source-line-no">3362</span><span id="line-3362">      return false;</span>
<span class="source-line-no">3363</span><span id="line-3363">   }</span>
<span class="source-line-no">3364</span><span id="line-3364"></span>
<span class="source-line-no">3365</span><span id="line-3365">   /**</span>
<span class="source-line-no">3366</span><span id="line-3366">    * Checks if a string is not blank (not null, not empty, and not whitespace only).</span>
<span class="source-line-no">3367</span><span id="line-3367">    *</span>
<span class="source-line-no">3368</span><span id="line-3368">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">3369</span><span id="line-3369">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">3370</span><span id="line-3370">    *    isNotBlank(&lt;jk&gt;null&lt;/jk&gt;);       &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">3371</span><span id="line-3371">    *    isNotBlank(&lt;js&gt;""&lt;/js&gt;);         &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">3372</span><span id="line-3372">    *    isNotBlank(&lt;js&gt;"   "&lt;/js&gt;);      &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">3373</span><span id="line-3373">    *    isNotBlank(&lt;js&gt;"hello"&lt;/js&gt;);    &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">3374</span><span id="line-3374">    * &lt;/p&gt;</span>
<span class="source-line-no">3375</span><span id="line-3375">    *</span>
<span class="source-line-no">3376</span><span id="line-3376">    * @param str The string to check.</span>
<span class="source-line-no">3377</span><span id="line-3377">    * @return &lt;jk&gt;true&lt;/jk&gt; if the string is not null, not empty, and contains non-whitespace characters.</span>
<span class="source-line-no">3378</span><span id="line-3378">    */</span>
<span class="source-line-no">3379</span><span id="line-3379">   public static boolean isNotBlank(CharSequence str) {</span>
<span class="source-line-no">3380</span><span id="line-3380">      return ! isBlank(str);</span>
<span class="source-line-no">3381</span><span id="line-3381">   }</span>
<span class="source-line-no">3382</span><span id="line-3382"></span>
<span class="source-line-no">3383</span><span id="line-3383">   /**</span>
<span class="source-line-no">3384</span><span id="line-3384">    * Returns &lt;jk&gt;true&lt;/jk&gt; if the specified character is a valid number character.</span>
<span class="source-line-no">3385</span><span id="line-3385">    *</span>
<span class="source-line-no">3386</span><span id="line-3386">    * @param c The character to check.</span>
<span class="source-line-no">3387</span><span id="line-3387">    * @return &lt;jk&gt;true&lt;/jk&gt; if the specified character is a valid number character.</span>
<span class="source-line-no">3388</span><span id="line-3388">    */</span>
<span class="source-line-no">3389</span><span id="line-3389">   public static boolean isNumberChar(char c) {</span>
<span class="source-line-no">3390</span><span id="line-3390">      return NUMBER_CHARS.contains(c);</span>
<span class="source-line-no">3391</span><span id="line-3391">   }</span>
<span class="source-line-no">3392</span><span id="line-3392"></span>
<span class="source-line-no">3393</span><span id="line-3393">   /**</span>
<span class="source-line-no">3394</span><span id="line-3394">    * Returns &lt;jk&gt;true&lt;/jk&gt; if this string can be parsed by {@link #parseNumber(String, Class)}.</span>
<span class="source-line-no">3395</span><span id="line-3395">    *</span>
<span class="source-line-no">3396</span><span id="line-3396">    * @param s The string to check.</span>
<span class="source-line-no">3397</span><span id="line-3397">    * @return &lt;jk&gt;true&lt;/jk&gt; if this string can be parsed without causing an exception.</span>
<span class="source-line-no">3398</span><span id="line-3398">    */</span>
<span class="source-line-no">3399</span><span id="line-3399">   public static boolean isNumeric(String s) {</span>
<span class="source-line-no">3400</span><span id="line-3400">      if (s == null || s.isEmpty() || ! isFirstNumberChar(s.charAt(0)))</span>
<span class="source-line-no">3401</span><span id="line-3401">         return false;</span>
<span class="source-line-no">3402</span><span id="line-3402">      return isDecimal(s) || isFloat(s);</span>
<span class="source-line-no">3403</span><span id="line-3403">   }</span>
<span class="source-line-no">3404</span><span id="line-3404"></span>
<span class="source-line-no">3405</span><span id="line-3405">   /**</span>
<span class="source-line-no">3406</span><span id="line-3406">    * Returns &lt;jk&gt;true&lt;/jk&gt; if the specified string is one of the specified values.</span>
<span class="source-line-no">3407</span><span id="line-3407">    *</span>
<span class="source-line-no">3408</span><span id="line-3408">    * @param s</span>
<span class="source-line-no">3409</span><span id="line-3409">    *    The string to test.</span>
<span class="source-line-no">3410</span><span id="line-3410">    *    Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">3411</span><span id="line-3411">    * @param values</span>
<span class="source-line-no">3412</span><span id="line-3412">    *    The values to test.</span>
<span class="source-line-no">3413</span><span id="line-3413">    *    Can contain &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">3414</span><span id="line-3414">    * @return &lt;jk&gt;true&lt;/jk&gt; if the specified string is one of the specified values.</span>
<span class="source-line-no">3415</span><span id="line-3415">    */</span>
<span class="source-line-no">3416</span><span id="line-3416">   public static boolean isOneOf(String s, String...values) {</span>
<span class="source-line-no">3417</span><span id="line-3417">      assertArgNotNull("values", values);</span>
<span class="source-line-no">3418</span><span id="line-3418">      for (var value : values)</span>
<span class="source-line-no">3419</span><span id="line-3419">         if (eq(s, value))</span>
<span class="source-line-no">3420</span><span id="line-3420">            return true;</span>
<span class="source-line-no">3421</span><span id="line-3421">      return false;</span>
<span class="source-line-no">3422</span><span id="line-3422">   }</span>
<span class="source-line-no">3423</span><span id="line-3423"></span>
<span class="source-line-no">3424</span><span id="line-3424">   /**</span>
<span class="source-line-no">3425</span><span id="line-3425">    * Checks if a string is a valid phone number.</span>
<span class="source-line-no">3426</span><span id="line-3426">    *</span>
<span class="source-line-no">3427</span><span id="line-3427">    * &lt;p&gt;</span>
<span class="source-line-no">3428</span><span id="line-3428">    * Performs basic phone number validation.</span>
<span class="source-line-no">3429</span><span id="line-3429">    * Accepts various formats including:</span>
<span class="source-line-no">3430</span><span id="line-3430">    * &lt;ul&gt;</span>
<span class="source-line-no">3431</span><span id="line-3431">    *   &lt;li&gt;Digits only: &lt;js&gt;"1234567890"&lt;/js&gt;&lt;/li&gt;</span>
<span class="source-line-no">3432</span><span id="line-3432">    *   &lt;li&gt;With separators: &lt;js&gt;"(123) 456-7890"&lt;/js&gt;, &lt;js&gt;"123-456-7890"&lt;/js&gt;, &lt;js&gt;"123.456.7890"&lt;/js&gt;&lt;/li&gt;</span>
<span class="source-line-no">3433</span><span id="line-3433">    *   &lt;li&gt;With country code: &lt;js&gt;"+1 123-456-7890"&lt;/js&gt;&lt;/li&gt;</span>
<span class="source-line-no">3434</span><span id="line-3434">    * &lt;/ul&gt;</span>
<span class="source-line-no">3435</span><span id="line-3435">    *</span>
<span class="source-line-no">3436</span><span id="line-3436">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">3437</span><span id="line-3437">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">3438</span><span id="line-3438">    *    isPhoneNumber(&lt;jk&gt;null&lt;/jk&gt;);              &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">3439</span><span id="line-3439">    *    isPhoneNumber(&lt;js&gt;""&lt;/js&gt;);                &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">3440</span><span id="line-3440">    *    isPhoneNumber(&lt;js&gt;"1234567890"&lt;/js&gt;);      &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">3441</span><span id="line-3441">    *    isPhoneNumber(&lt;js&gt;"(123) 456-7890"&lt;/js&gt;);  &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">3442</span><span id="line-3442">    *    isPhoneNumber(&lt;js&gt;"123"&lt;/js&gt;);             &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">3443</span><span id="line-3443">    * &lt;/p&gt;</span>
<span class="source-line-no">3444</span><span id="line-3444">    *</span>
<span class="source-line-no">3445</span><span id="line-3445">    * @param str The string to check.</span>
<span class="source-line-no">3446</span><span id="line-3446">    * @return &lt;jk&gt;true&lt;/jk&gt; if the string is a valid phone number.</span>
<span class="source-line-no">3447</span><span id="line-3447">    */</span>
<span class="source-line-no">3448</span><span id="line-3448">   public static boolean isPhoneNumber(String str) {</span>
<span class="source-line-no">3449</span><span id="line-3449">      if (isEmpty(str))</span>
<span class="source-line-no">3450</span><span id="line-3450">         return false;</span>
<span class="source-line-no">3451</span><span id="line-3451">      // Remove common phone number separators and check if remaining is 10-15 digits</span>
<span class="source-line-no">3452</span><span id="line-3452">      // Allows: digits, spaces, parentheses, hyphens, dots, plus sign (for country code)</span>
<span class="source-line-no">3453</span><span id="line-3453">      var cleaned = str.replaceAll("[\\s()\\-\\.]", "");</span>
<span class="source-line-no">3454</span><span id="line-3454">      if (cleaned.startsWith("+"))</span>
<span class="source-line-no">3455</span><span id="line-3455">         cleaned = cleaned.substring(1);</span>
<span class="source-line-no">3456</span><span id="line-3456">      // Phone numbers should have 10-15 digits (10 for US, up to 15 for international)</span>
<span class="source-line-no">3457</span><span id="line-3457">      return cleaned.matches("^\\d{10,15}$");</span>
<span class="source-line-no">3458</span><span id="line-3458">   }</span>
<span class="source-line-no">3459</span><span id="line-3459"></span>
<span class="source-line-no">3460</span><span id="line-3460">   /**</span>
<span class="source-line-no">3461</span><span id="line-3461">    * Checks if two strings are similar based on a similarity threshold.</span>
<span class="source-line-no">3462</span><span id="line-3462">    *</span>
<span class="source-line-no">3463</span><span id="line-3463">    * &lt;p&gt;</span>
<span class="source-line-no">3464</span><span id="line-3464">    * Uses the {@link #similarity(String, String)} method to calculate similarity and compares it to the threshold.</span>
<span class="source-line-no">3465</span><span id="line-3465">    *</span>
<span class="source-line-no">3466</span><span id="line-3466">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">3467</span><span id="line-3467">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">3468</span><span id="line-3468">    *    isSimilar(&lt;js&gt;"hello"&lt;/js&gt;, &lt;js&gt;"hello"&lt;/js&gt;, &lt;js&gt;0.8&lt;/js&gt;);        &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">3469</span><span id="line-3469">    *    isSimilar(&lt;js&gt;"kitten"&lt;/js&gt;, &lt;js&gt;"sitting"&lt;/js&gt;, &lt;js&gt;0.8&lt;/js&gt;);     &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">3470</span><span id="line-3470">    *    isSimilar(&lt;js&gt;"kitten"&lt;/js&gt;, &lt;js&gt;"sitting"&lt;/js&gt;, &lt;js&gt;0.5&lt;/js&gt;);     &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">3471</span><span id="line-3471">    * &lt;/p&gt;</span>
<span class="source-line-no">3472</span><span id="line-3472">    *</span>
<span class="source-line-no">3473</span><span id="line-3473">    * @param str1 The first string.</span>
<span class="source-line-no">3474</span><span id="line-3474">    * @param str2 The second string.</span>
<span class="source-line-no">3475</span><span id="line-3475">    * @param threshold The similarity threshold (0.0 to 1.0).</span>
<span class="source-line-no">3476</span><span id="line-3476">    * @return &lt;jk&gt;true&lt;/jk&gt; if the similarity is greater than or equal to the threshold, &lt;jk&gt;false&lt;/jk&gt; otherwise.</span>
<span class="source-line-no">3477</span><span id="line-3477">    */</span>
<span class="source-line-no">3478</span><span id="line-3478">   public static boolean isSimilar(String str1, String str2, double threshold) {</span>
<span class="source-line-no">3479</span><span id="line-3479">      return similarity(str1, str2) &gt;= threshold;</span>
<span class="source-line-no">3480</span><span id="line-3480">   }</span>
<span class="source-line-no">3481</span><span id="line-3481"></span>
<span class="source-line-no">3482</span><span id="line-3482">   /**</span>
<span class="source-line-no">3483</span><span id="line-3483">    * Efficiently determines whether a URL is of the pattern "xxx:/xxx".</span>
<span class="source-line-no">3484</span><span id="line-3484">    *</span>
<span class="source-line-no">3485</span><span id="line-3485">    * &lt;p&gt;</span>
<span class="source-line-no">3486</span><span id="line-3486">    * The pattern matched is: &lt;c&gt;[a-z]{2,}\:\/.*&lt;/c&gt;</span>
<span class="source-line-no">3487</span><span id="line-3487">    *</span>
<span class="source-line-no">3488</span><span id="line-3488">    * &lt;p&gt;</span>
<span class="source-line-no">3489</span><span id="line-3489">    * Note that this excludes filesystem paths such as &lt;js&gt;"C:/temp"&lt;/js&gt;.</span>
<span class="source-line-no">3490</span><span id="line-3490">    *</span>
<span class="source-line-no">3491</span><span id="line-3491">    * @param s The string to test.</span>
<span class="source-line-no">3492</span><span id="line-3492">    * @return &lt;jk&gt;true&lt;/jk&gt; if it's an absolute path.</span>
<span class="source-line-no">3493</span><span id="line-3493">    */</span>
<span class="source-line-no">3494</span><span id="line-3494">   public static boolean isUri(String s) {  // NOSONAR - False positive.</span>
<span class="source-line-no">3495</span><span id="line-3495"></span>
<span class="source-line-no">3496</span><span id="line-3496">      if (isEmpty(s))</span>
<span class="source-line-no">3497</span><span id="line-3497">         return false;</span>
<span class="source-line-no">3498</span><span id="line-3498"></span>
<span class="source-line-no">3499</span><span id="line-3499">      // Use a state machine for maximum performance.</span>
<span class="source-line-no">3500</span><span id="line-3500"></span>
<span class="source-line-no">3501</span><span id="line-3501">      // S1: Looking for protocol char 1</span>
<span class="source-line-no">3502</span><span id="line-3502">      // S2: Found protocol char 1, looking for protocol char 2</span>
<span class="source-line-no">3503</span><span id="line-3503">      // S3: Found protocol char 2, looking for :</span>
<span class="source-line-no">3504</span><span id="line-3504">      // S4: Found :, looking for /</span>
<span class="source-line-no">3505</span><span id="line-3505"></span>
<span class="source-line-no">3506</span><span id="line-3506">      var state = S1;</span>
<span class="source-line-no">3507</span><span id="line-3507"></span>
<span class="source-line-no">3508</span><span id="line-3508">      for (var i = 0; i &lt; s.length(); i++) {</span>
<span class="source-line-no">3509</span><span id="line-3509">         var c = s.charAt(i);</span>
<span class="source-line-no">3510</span><span id="line-3510">         if (state == S1) {</span>
<span class="source-line-no">3511</span><span id="line-3511">            if (isLowerCaseLetter(c))</span>
<span class="source-line-no">3512</span><span id="line-3512">               state = S2;</span>
<span class="source-line-no">3513</span><span id="line-3513">            else</span>
<span class="source-line-no">3514</span><span id="line-3514">               return false;</span>
<span class="source-line-no">3515</span><span id="line-3515">         } else if (state == S2) {</span>
<span class="source-line-no">3516</span><span id="line-3516">            if (isLowerCaseLetter(c))</span>
<span class="source-line-no">3517</span><span id="line-3517">               state = S3;</span>
<span class="source-line-no">3518</span><span id="line-3518">            else</span>
<span class="source-line-no">3519</span><span id="line-3519">               return false;</span>
<span class="source-line-no">3520</span><span id="line-3520">         } else if (state == S3) {  // NOSONAR - False positive.</span>
<span class="source-line-no">3521</span><span id="line-3521">            if (c == ':')</span>
<span class="source-line-no">3522</span><span id="line-3522">               state = S4;</span>
<span class="source-line-no">3523</span><span id="line-3523">            else if (! isLowerCaseLetter(c))</span>
<span class="source-line-no">3524</span><span id="line-3524">               return false;</span>
<span class="source-line-no">3525</span><span id="line-3525">         } else /* state == S4 */ {</span>
<span class="source-line-no">3526</span><span id="line-3526">            return c == '/';</span>
<span class="source-line-no">3527</span><span id="line-3527">         }</span>
<span class="source-line-no">3528</span><span id="line-3528">      }</span>
<span class="source-line-no">3529</span><span id="line-3529">      return false;</span>
<span class="source-line-no">3530</span><span id="line-3530">   }</span>
<span class="source-line-no">3531</span><span id="line-3531"></span>
<span class="source-line-no">3532</span><span id="line-3532">   private static boolean isLowerCaseLetter(char c) {</span>
<span class="source-line-no">3533</span><span id="line-3533">      if (c &lt; 'a')</span>
<span class="source-line-no">3534</span><span id="line-3534">         return false;</span>
<span class="source-line-no">3535</span><span id="line-3535">      if (c &gt; 'z')</span>
<span class="source-line-no">3536</span><span id="line-3536">         return false;</span>
<span class="source-line-no">3537</span><span id="line-3537">      return true;</span>
<span class="source-line-no">3538</span><span id="line-3538">   }</span>
<span class="source-line-no">3539</span><span id="line-3539"></span>
<span class="source-line-no">3540</span><span id="line-3540">   /**</span>
<span class="source-line-no">3541</span><span id="line-3541">    * Validates if a date string matches the specified date format.</span>
<span class="source-line-no">3542</span><span id="line-3542">    *</span>
<span class="source-line-no">3543</span><span id="line-3543">    * &lt;p&gt;</span>
<span class="source-line-no">3544</span><span id="line-3544">    * Uses {@link SimpleDateFormat} to parse the date string according to the format pattern.</span>
<span class="source-line-no">3545</span><span id="line-3545">    *</span>
<span class="source-line-no">3546</span><span id="line-3546">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">3547</span><span id="line-3547">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">3548</span><span id="line-3548">    *    isValidDateFormat(&lt;js&gt;"2023-12-25"&lt;/js&gt;, &lt;js&gt;"yyyy-MM-dd"&lt;/js&gt;);  &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">3549</span><span id="line-3549">    *    isValidDateFormat(&lt;js&gt;"25/12/2023"&lt;/js&gt;, &lt;js&gt;"dd/MM/yyyy"&lt;/js&gt;);  &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">3550</span><span id="line-3550">    *    isValidDateFormat(&lt;js&gt;"2023-13-25"&lt;/js&gt;, &lt;js&gt;"yyyy-MM-dd"&lt;/js&gt;);  &lt;jc&gt;// false (invalid month)&lt;/jc&gt;</span>
<span class="source-line-no">3551</span><span id="line-3551">    * &lt;/p&gt;</span>
<span class="source-line-no">3552</span><span id="line-3552">    *</span>
<span class="source-line-no">3553</span><span id="line-3553">    * @param dateStr The date string to validate. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">3554</span><span id="line-3554">    * @param format The date format pattern (e.g., "yyyy-MM-dd"). Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">3555</span><span id="line-3555">    * @return &lt;jk&gt;true&lt;/jk&gt; if the date string matches the format, &lt;jk&gt;false&lt;/jk&gt; otherwise.</span>
<span class="source-line-no">3556</span><span id="line-3556">    */</span>
<span class="source-line-no">3557</span><span id="line-3557">   public static boolean isValidDateFormat(String dateStr, String format) {</span>
<span class="source-line-no">3558</span><span id="line-3558">      if (isEmpty(dateStr) || isEmpty(format))</span>
<span class="source-line-no">3559</span><span id="line-3559">         return false;</span>
<span class="source-line-no">3560</span><span id="line-3560">      try {</span>
<span class="source-line-no">3561</span><span id="line-3561">         var sdf = new SimpleDateFormat(format);</span>
<span class="source-line-no">3562</span><span id="line-3562">         sdf.setLenient(false); // Strict parsing</span>
<span class="source-line-no">3563</span><span id="line-3563">         sdf.parse(dateStr);</span>
<span class="source-line-no">3564</span><span id="line-3564">         return true;</span>
<span class="source-line-no">3565</span><span id="line-3565">      } catch (@SuppressWarnings("unused") ParseException | IllegalArgumentException e) {</span>
<span class="source-line-no">3566</span><span id="line-3566">         // IllegalArgumentException thrown for invalid format patterns</span>
<span class="source-line-no">3567</span><span id="line-3567">         return false;</span>
<span class="source-line-no">3568</span><span id="line-3568">      }</span>
<span class="source-line-no">3569</span><span id="line-3569">   }</span>
<span class="source-line-no">3570</span><span id="line-3570"></span>
<span class="source-line-no">3571</span><span id="line-3571">   /**</span>
<span class="source-line-no">3572</span><span id="line-3572">    * Validates if a string is a valid hostname.</span>
<span class="source-line-no">3573</span><span id="line-3573">    *</span>
<span class="source-line-no">3574</span><span id="line-3574">    * &lt;p&gt;</span>
<span class="source-line-no">3575</span><span id="line-3575">    * Validates hostnames according to RFC 1123. A valid hostname:</span>
<span class="source-line-no">3576</span><span id="line-3576">    * &lt;ul&gt;</span>
<span class="source-line-no">3577</span><span id="line-3577">    *   &lt;li&gt;Can contain letters, digits, and hyphens&lt;/li&gt;</span>
<span class="source-line-no">3578</span><span id="line-3578">    *   &lt;li&gt;Cannot start or end with a hyphen&lt;/li&gt;</span>
<span class="source-line-no">3579</span><span id="line-3579">    *   &lt;li&gt;Each label (dot-separated part) can be up to 63 characters&lt;/li&gt;</span>
<span class="source-line-no">3580</span><span id="line-3580">    *   &lt;li&gt;Total length can be up to 253 characters&lt;/li&gt;</span>
<span class="source-line-no">3581</span><span id="line-3581">    *   &lt;li&gt;Labels cannot be empty&lt;/li&gt;</span>
<span class="source-line-no">3582</span><span id="line-3582">    * &lt;/ul&gt;</span>
<span class="source-line-no">3583</span><span id="line-3583">    *</span>
<span class="source-line-no">3584</span><span id="line-3584">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">3585</span><span id="line-3585">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">3586</span><span id="line-3586">    *    isValidHostname(&lt;js&gt;"example.com"&lt;/js&gt;);        &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">3587</span><span id="line-3587">    *    isValidHostname(&lt;js&gt;"sub.example.com"&lt;/js&gt;);    &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">3588</span><span id="line-3588">    *    isValidHostname(&lt;js&gt;"-invalid.com"&lt;/js&gt;);       &lt;jc&gt;// false (starts with hyphen)&lt;/jc&gt;</span>
<span class="source-line-no">3589</span><span id="line-3589">    *    isValidHostname(&lt;js&gt;"example..com"&lt;/js&gt;);       &lt;jc&gt;// false (empty label)&lt;/jc&gt;</span>
<span class="source-line-no">3590</span><span id="line-3590">    * &lt;/p&gt;</span>
<span class="source-line-no">3591</span><span id="line-3591">    *</span>
<span class="source-line-no">3592</span><span id="line-3592">    * @param hostname The hostname string to validate. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">3593</span><span id="line-3593">    * @return &lt;jk&gt;true&lt;/jk&gt; if the string is a valid hostname, &lt;jk&gt;false&lt;/jk&gt; otherwise.</span>
<span class="source-line-no">3594</span><span id="line-3594">    */</span>
<span class="source-line-no">3595</span><span id="line-3595">   public static boolean isValidHostname(String hostname) {</span>
<span class="source-line-no">3596</span><span id="line-3596">      if (isEmpty(hostname))</span>
<span class="source-line-no">3597</span><span id="line-3597">         return false;</span>
<span class="source-line-no">3598</span><span id="line-3598"></span>
<span class="source-line-no">3599</span><span id="line-3599">      // Cannot start or end with a dot</span>
<span class="source-line-no">3600</span><span id="line-3600">      if (hostname.startsWith(".") || hostname.endsWith("."))</span>
<span class="source-line-no">3601</span><span id="line-3601">         return false;</span>
<span class="source-line-no">3602</span><span id="line-3602"></span>
<span class="source-line-no">3603</span><span id="line-3603">      // Total length cannot exceed 253 characters</span>
<span class="source-line-no">3604</span><span id="line-3604">      if (hostname.length() &gt; 253)</span>
<span class="source-line-no">3605</span><span id="line-3605">         return false;</span>
<span class="source-line-no">3606</span><span id="line-3606"></span>
<span class="source-line-no">3607</span><span id="line-3607">      // Split by dots (use -1 to preserve trailing empty strings)</span>
<span class="source-line-no">3608</span><span id="line-3608">      var labels = hostname.split("\\.", -1);</span>
<span class="source-line-no">3609</span><span id="line-3609"></span>
<span class="source-line-no">3610</span><span id="line-3610">      // Check each label</span>
<span class="source-line-no">3611</span><span id="line-3611">      for (var label : labels) {</span>
<span class="source-line-no">3612</span><span id="line-3612">         // Label cannot be empty</span>
<span class="source-line-no">3613</span><span id="line-3613">         if (label.isEmpty())</span>
<span class="source-line-no">3614</span><span id="line-3614">            return false;</span>
<span class="source-line-no">3615</span><span id="line-3615"></span>
<span class="source-line-no">3616</span><span id="line-3616">         // Label cannot exceed 63 characters</span>
<span class="source-line-no">3617</span><span id="line-3617">         if (label.length() &gt; 63)</span>
<span class="source-line-no">3618</span><span id="line-3618">            return false;</span>
<span class="source-line-no">3619</span><span id="line-3619"></span>
<span class="source-line-no">3620</span><span id="line-3620">         // Label cannot start or end with hyphen</span>
<span class="source-line-no">3621</span><span id="line-3621">         if (label.startsWith("-") || label.endsWith("-"))</span>
<span class="source-line-no">3622</span><span id="line-3622">            return false;</span>
<span class="source-line-no">3623</span><span id="line-3623"></span>
<span class="source-line-no">3624</span><span id="line-3624">         // Label can only contain letters, digits, and hyphens</span>
<span class="source-line-no">3625</span><span id="line-3625">         if (! label.matches("^[a-zA-Z0-9-]+$"))</span>
<span class="source-line-no">3626</span><span id="line-3626">            return false;</span>
<span class="source-line-no">3627</span><span id="line-3627">      }</span>
<span class="source-line-no">3628</span><span id="line-3628"></span>
<span class="source-line-no">3629</span><span id="line-3629">      return true;</span>
<span class="source-line-no">3630</span><span id="line-3630">   }</span>
<span class="source-line-no">3631</span><span id="line-3631"></span>
<span class="source-line-no">3632</span><span id="line-3632">   /**</span>
<span class="source-line-no">3633</span><span id="line-3633">    * Validates if a string is a valid IP address (IPv4 or IPv6).</span>
<span class="source-line-no">3634</span><span id="line-3634">    *</span>
<span class="source-line-no">3635</span><span id="line-3635">    * &lt;p&gt;</span>
<span class="source-line-no">3636</span><span id="line-3636">    * Supports both IPv4 (e.g., "192.168.1.1") and IPv6 (e.g., "2001:0db8:85a3:0000:0000:8a2e:0370:7334") formats.</span>
<span class="source-line-no">3637</span><span id="line-3637">    *</span>
<span class="source-line-no">3638</span><span id="line-3638">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">3639</span><span id="line-3639">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">3640</span><span id="line-3640">    *    isValidIpAddress(&lt;js&gt;"192.168.1.1"&lt;/js&gt;);                    &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">3641</span><span id="line-3641">    *    isValidIpAddress(&lt;js&gt;"2001:0db8:85a3::8a2e:0370:7334"&lt;/js&gt;); &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">3642</span><span id="line-3642">    *    isValidIpAddress(&lt;js&gt;"256.1.1.1"&lt;/js&gt;);                      &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">3643</span><span id="line-3643">    *    isValidIpAddress(&lt;js&gt;"not.an.ip"&lt;/js&gt;);                      &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">3644</span><span id="line-3644">    * &lt;/p&gt;</span>
<span class="source-line-no">3645</span><span id="line-3645">    *</span>
<span class="source-line-no">3646</span><span id="line-3646">    * @param ip The IP address string to validate. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">3647</span><span id="line-3647">    * @return &lt;jk&gt;true&lt;/jk&gt; if the string is a valid IP address, &lt;jk&gt;false&lt;/jk&gt; otherwise.</span>
<span class="source-line-no">3648</span><span id="line-3648">    */</span>
<span class="source-line-no">3649</span><span id="line-3649">   public static boolean isValidIpAddress(String ip) {</span>
<span class="source-line-no">3650</span><span id="line-3650">      if (isEmpty(ip))</span>
<span class="source-line-no">3651</span><span id="line-3651">         return false;</span>
<span class="source-line-no">3652</span><span id="line-3652">      try {</span>
<span class="source-line-no">3653</span><span id="line-3653">         // Try IPv4 first</span>
<span class="source-line-no">3654</span><span id="line-3654">         if (ip.contains(".") &amp;&amp; ! ip.contains(":")) {</span>
<span class="source-line-no">3655</span><span id="line-3655">            var parts = ip.split("\\.");</span>
<span class="source-line-no">3656</span><span id="line-3656">            if (parts.length != 4)</span>
<span class="source-line-no">3657</span><span id="line-3657">               return false;</span>
<span class="source-line-no">3658</span><span id="line-3658">            for (var part : parts) {</span>
<span class="source-line-no">3659</span><span id="line-3659">               var num = Integer.parseInt(part);</span>
<span class="source-line-no">3660</span><span id="line-3660">               if (num &lt; 0 || num &gt; 255)</span>
<span class="source-line-no">3661</span><span id="line-3661">                  return false;</span>
<span class="source-line-no">3662</span><span id="line-3662">            }</span>
<span class="source-line-no">3663</span><span id="line-3663">            return true;</span>
<span class="source-line-no">3664</span><span id="line-3664">         }</span>
<span class="source-line-no">3665</span><span id="line-3665">         // Try IPv6 - validate format without network operations</span>
<span class="source-line-no">3666</span><span id="line-3666">         if (ip.contains(":")) {</span>
<span class="source-line-no">3667</span><span id="line-3667">            return isValidIPv6Address(ip);</span>
<span class="source-line-no">3668</span><span id="line-3668">         }</span>
<span class="source-line-no">3669</span><span id="line-3669">         return false;</span>
<span class="source-line-no">3670</span><span id="line-3670">      } catch (@SuppressWarnings("unused") NumberFormatException e) {</span>
<span class="source-line-no">3671</span><span id="line-3671">         return false;</span>
<span class="source-line-no">3672</span><span id="line-3672">      }</span>
<span class="source-line-no">3673</span><span id="line-3673">   }</span>
<span class="source-line-no">3674</span><span id="line-3674"></span>
<span class="source-line-no">3675</span><span id="line-3675">   /**</span>
<span class="source-line-no">3676</span><span id="line-3676">    * Validates if a string is a valid MAC address.</span>
<span class="source-line-no">3677</span><span id="line-3677">    *</span>
<span class="source-line-no">3678</span><span id="line-3678">    * &lt;p&gt;</span>
<span class="source-line-no">3679</span><span id="line-3679">    * Supports common MAC address formats:</span>
<span class="source-line-no">3680</span><span id="line-3680">    * &lt;ul&gt;</span>
<span class="source-line-no">3681</span><span id="line-3681">    *   &lt;li&gt;Colon-separated: &lt;js&gt;"00:1B:44:11:3A:B7"&lt;/js&gt;&lt;/li&gt;</span>
<span class="source-line-no">3682</span><span id="line-3682">    *   &lt;li&gt;Hyphen-separated: &lt;js&gt;"00-1B-44-11-3A-B7"&lt;/js&gt;&lt;/li&gt;</span>
<span class="source-line-no">3683</span><span id="line-3683">    *   &lt;li&gt;No separators: &lt;js&gt;"001B44113AB7"&lt;/js&gt;&lt;/li&gt;</span>
<span class="source-line-no">3684</span><span id="line-3684">    * &lt;/ul&gt;</span>
<span class="source-line-no">3685</span><span id="line-3685">    *</span>
<span class="source-line-no">3686</span><span id="line-3686">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">3687</span><span id="line-3687">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">3688</span><span id="line-3688">    *    isValidMacAddress(&lt;js&gt;"00:1B:44:11:3A:B7"&lt;/js&gt;);  &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">3689</span><span id="line-3689">    *    isValidMacAddress(&lt;js&gt;"00-1B-44-11-3A-B7"&lt;/js&gt;);  &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">3690</span><span id="line-3690">    *    isValidMacAddress(&lt;js&gt;"001B44113AB7"&lt;/js&gt;);       &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">3691</span><span id="line-3691">    *    isValidMacAddress(&lt;js&gt;"00:1B:44:11:3A"&lt;/js&gt;);     &lt;jc&gt;// false (too short)&lt;/jc&gt;</span>
<span class="source-line-no">3692</span><span id="line-3692">    * &lt;/p&gt;</span>
<span class="source-line-no">3693</span><span id="line-3693">    *</span>
<span class="source-line-no">3694</span><span id="line-3694">    * @param mac The MAC address string to validate. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">3695</span><span id="line-3695">    * @return &lt;jk&gt;true&lt;/jk&gt; if the string is a valid MAC address, &lt;jk&gt;false&lt;/jk&gt; otherwise.</span>
<span class="source-line-no">3696</span><span id="line-3696">    */</span>
<span class="source-line-no">3697</span><span id="line-3697">   public static boolean isValidMacAddress(String mac) {</span>
<span class="source-line-no">3698</span><span id="line-3698">      if (isEmpty(mac))</span>
<span class="source-line-no">3699</span><span id="line-3699">         return false;</span>
<span class="source-line-no">3700</span><span id="line-3700"></span>
<span class="source-line-no">3701</span><span id="line-3701">      // Remove separators and check if it's 12 hex digits</span>
<span class="source-line-no">3702</span><span id="line-3702">      var cleaned = mac.replaceAll("[:-]", "").toUpperCase();</span>
<span class="source-line-no">3703</span><span id="line-3703">      if (cleaned.length() != 12)</span>
<span class="source-line-no">3704</span><span id="line-3704">         return false;</span>
<span class="source-line-no">3705</span><span id="line-3705"></span>
<span class="source-line-no">3706</span><span id="line-3706">      // Check if all characters are valid hex digits</span>
<span class="source-line-no">3707</span><span id="line-3707">      return cleaned.matches("^[0-9A-F]{12}$");</span>
<span class="source-line-no">3708</span><span id="line-3708">   }</span>
<span class="source-line-no">3709</span><span id="line-3709"></span>
<span class="source-line-no">3710</span><span id="line-3710">   /**</span>
<span class="source-line-no">3711</span><span id="line-3711">    * Validates if a string is a valid regular expression pattern.</span>
<span class="source-line-no">3712</span><span id="line-3712">    *</span>
<span class="source-line-no">3713</span><span id="line-3713">    * &lt;p&gt;</span>
<span class="source-line-no">3714</span><span id="line-3714">    * Attempts to compile the regex pattern to verify it's syntactically correct.</span>
<span class="source-line-no">3715</span><span id="line-3715">    *</span>
<span class="source-line-no">3716</span><span id="line-3716">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">3717</span><span id="line-3717">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">3718</span><span id="line-3718">    *    isValidRegex(&lt;js&gt;"[a-z]+"&lt;/js&gt;);        &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">3719</span><span id="line-3719">    *    isValidRegex(&lt;js&gt;"[a-z"&lt;/js&gt;);          &lt;jc&gt;// false (unclosed bracket)&lt;/jc&gt;</span>
<span class="source-line-no">3720</span><span id="line-3720">    *    isValidRegex(&lt;js&gt;"(test"&lt;/js&gt;);         &lt;jc&gt;// false (unclosed parenthesis)&lt;/jc&gt;</span>
<span class="source-line-no">3721</span><span id="line-3721">    * &lt;/p&gt;</span>
<span class="source-line-no">3722</span><span id="line-3722">    *</span>
<span class="source-line-no">3723</span><span id="line-3723">    * @param regex The regex pattern to validate. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">3724</span><span id="line-3724">    * @return &lt;jk&gt;true&lt;/jk&gt; if the string is a valid regex pattern, &lt;jk&gt;false&lt;/jk&gt; otherwise.</span>
<span class="source-line-no">3725</span><span id="line-3725">    */</span>
<span class="source-line-no">3726</span><span id="line-3726">   public static boolean isValidRegex(String regex) {</span>
<span class="source-line-no">3727</span><span id="line-3727">      if (isEmpty(regex))</span>
<span class="source-line-no">3728</span><span id="line-3728">         return false;</span>
<span class="source-line-no">3729</span><span id="line-3729">      try {</span>
<span class="source-line-no">3730</span><span id="line-3730">         Pattern.compile(regex);</span>
<span class="source-line-no">3731</span><span id="line-3731">         return true;</span>
<span class="source-line-no">3732</span><span id="line-3732">      } catch (@SuppressWarnings("unused") PatternSyntaxException e) {</span>
<span class="source-line-no">3733</span><span id="line-3733">         return false;</span>
<span class="source-line-no">3734</span><span id="line-3734">      }</span>
<span class="source-line-no">3735</span><span id="line-3735">   }</span>
<span class="source-line-no">3736</span><span id="line-3736"></span>
<span class="source-line-no">3737</span><span id="line-3737">   /**</span>
<span class="source-line-no">3738</span><span id="line-3738">    * Validates if a time string matches the specified time format.</span>
<span class="source-line-no">3739</span><span id="line-3739">    *</span>
<span class="source-line-no">3740</span><span id="line-3740">    * &lt;p&gt;</span>
<span class="source-line-no">3741</span><span id="line-3741">    * Uses {@link SimpleDateFormat} to parse the time string according to the format pattern.</span>
<span class="source-line-no">3742</span><span id="line-3742">    *</span>
<span class="source-line-no">3743</span><span id="line-3743">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">3744</span><span id="line-3744">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">3745</span><span id="line-3745">    *    isValidTimeFormat(&lt;js&gt;"14:30:00"&lt;/js&gt;, &lt;js&gt;"HH:mm:ss"&lt;/js&gt;);  &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">3746</span><span id="line-3746">    *    isValidTimeFormat(&lt;js&gt;"2:30 PM"&lt;/js&gt;, &lt;js&gt;"h:mm a"&lt;/js&gt;);     &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">3747</span><span id="line-3747">    *    isValidTimeFormat(&lt;js&gt;"25:00:00"&lt;/js&gt;, &lt;js&gt;"HH:mm:ss"&lt;/js&gt;);  &lt;jc&gt;// false (invalid hour)&lt;/jc&gt;</span>
<span class="source-line-no">3748</span><span id="line-3748">    * &lt;/p&gt;</span>
<span class="source-line-no">3749</span><span id="line-3749">    *</span>
<span class="source-line-no">3750</span><span id="line-3750">    * @param timeStr The time string to validate. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">3751</span><span id="line-3751">    * @param format The time format pattern (e.g., "HH:mm:ss"). Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">3752</span><span id="line-3752">    * @return &lt;jk&gt;true&lt;/jk&gt; if the time string matches the format, &lt;jk&gt;false&lt;/jk&gt; otherwise.</span>
<span class="source-line-no">3753</span><span id="line-3753">    */</span>
<span class="source-line-no">3754</span><span id="line-3754">   public static boolean isValidTimeFormat(String timeStr, String format) {</span>
<span class="source-line-no">3755</span><span id="line-3755">      if (isEmpty(timeStr) || isEmpty(format))</span>
<span class="source-line-no">3756</span><span id="line-3756">         return false;</span>
<span class="source-line-no">3757</span><span id="line-3757">      try {</span>
<span class="source-line-no">3758</span><span id="line-3758">         var sdf = new SimpleDateFormat(format);</span>
<span class="source-line-no">3759</span><span id="line-3759">         sdf.setLenient(false); // Strict parsing</span>
<span class="source-line-no">3760</span><span id="line-3760">         sdf.parse(timeStr);</span>
<span class="source-line-no">3761</span><span id="line-3761">         return true;</span>
<span class="source-line-no">3762</span><span id="line-3762">      } catch (@SuppressWarnings("unused") ParseException | IllegalArgumentException e) {</span>
<span class="source-line-no">3763</span><span id="line-3763">         // IllegalArgumentException thrown for invalid format patterns</span>
<span class="source-line-no">3764</span><span id="line-3764">         return false;</span>
<span class="source-line-no">3765</span><span id="line-3765">      }</span>
<span class="source-line-no">3766</span><span id="line-3766">   }</span>
<span class="source-line-no">3767</span><span id="line-3767"></span>
<span class="source-line-no">3768</span><span id="line-3768">   /**</span>
<span class="source-line-no">3769</span><span id="line-3769">    * Checks if a character is whitespace.</span>
<span class="source-line-no">3770</span><span id="line-3770">    *</span>
<span class="source-line-no">3771</span><span id="line-3771">    * @param c The character to check.</span>
<span class="source-line-no">3772</span><span id="line-3772">    * @return &lt;jk&gt;true&lt;/jk&gt; if the character is whitespace.</span>
<span class="source-line-no">3773</span><span id="line-3773">    */</span>
<span class="source-line-no">3774</span><span id="line-3774">   public static boolean isWhitespace(int c) {</span>
<span class="source-line-no">3775</span><span id="line-3775">      return Character.isWhitespace(c);</span>
<span class="source-line-no">3776</span><span id="line-3776">   }</span>
<span class="source-line-no">3777</span><span id="line-3777"></span>
<span class="source-line-no">3778</span><span id="line-3778">   /**</span>
<span class="source-line-no">3779</span><span id="line-3779">    * Checks if a string contains only whitespace characters.</span>
<span class="source-line-no">3780</span><span id="line-3780">    *</span>
<span class="source-line-no">3781</span><span id="line-3781">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">3782</span><span id="line-3782">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">3783</span><span id="line-3783">    *    isWhitespace(&lt;jk&gt;null&lt;/jk&gt;);         &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">3784</span><span id="line-3784">    *    isWhitespace(&lt;js&gt;""&lt;/js&gt;);           &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">3785</span><span id="line-3785">    *    isWhitespace(&lt;js&gt;"   "&lt;/js&gt;);        &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">3786</span><span id="line-3786">    *    isWhitespace(&lt;js&gt;"\t\n"&lt;/js&gt;);       &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">3787</span><span id="line-3787">    *    isWhitespace(&lt;js&gt;" a "&lt;/js&gt;);        &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">3788</span><span id="line-3788">    * &lt;/p&gt;</span>
<span class="source-line-no">3789</span><span id="line-3789">    *</span>
<span class="source-line-no">3790</span><span id="line-3790">    * @param str The string to check.</span>
<span class="source-line-no">3791</span><span id="line-3791">    * @return &lt;jk&gt;true&lt;/jk&gt; if the string is not null and contains only whitespace characters (or is empty).</span>
<span class="source-line-no">3792</span><span id="line-3792">    */</span>
<span class="source-line-no">3793</span><span id="line-3793">   public static boolean isWhitespace(String str) {</span>
<span class="source-line-no">3794</span><span id="line-3794">      if (str == null)</span>
<span class="source-line-no">3795</span><span id="line-3795">         return false;</span>
<span class="source-line-no">3796</span><span id="line-3796">      if (str.isEmpty())</span>
<span class="source-line-no">3797</span><span id="line-3797">         return true;</span>
<span class="source-line-no">3798</span><span id="line-3798">      for (var i = 0; i &lt; str.length(); i++) {</span>
<span class="source-line-no">3799</span><span id="line-3799">         if (! isWhitespace(str.charAt(i)))</span>
<span class="source-line-no">3800</span><span id="line-3800">            return false;</span>
<span class="source-line-no">3801</span><span id="line-3801">      }</span>
<span class="source-line-no">3802</span><span id="line-3802">      return true;</span>
<span class="source-line-no">3803</span><span id="line-3803">   }</span>
<span class="source-line-no">3804</span><span id="line-3804"></span>
<span class="source-line-no">3805</span><span id="line-3805">   /**</span>
<span class="source-line-no">3806</span><span id="line-3806">    * Combines collection values into a simple comma-delimited string.</span>
<span class="source-line-no">3807</span><span id="line-3807">    *</span>
<span class="source-line-no">3808</span><span id="line-3808">    * @param values The values to join.</span>
<span class="source-line-no">3809</span><span id="line-3809">    * @return A comma-delimited string.</span>
<span class="source-line-no">3810</span><span id="line-3810">    */</span>
<span class="source-line-no">3811</span><span id="line-3811">   public static String join(Collection&lt;?&gt; values) {</span>
<span class="source-line-no">3812</span><span id="line-3812">      return joine(toList(values), ',');</span>
<span class="source-line-no">3813</span><span id="line-3813">   }</span>
<span class="source-line-no">3814</span><span id="line-3814"></span>
<span class="source-line-no">3815</span><span id="line-3815">   /**</span>
<span class="source-line-no">3816</span><span id="line-3816">    * Join the specified tokens into a delimited string.</span>
<span class="source-line-no">3817</span><span id="line-3817">    *</span>
<span class="source-line-no">3818</span><span id="line-3818">    * @param tokens The tokens to join.</span>
<span class="source-line-no">3819</span><span id="line-3819">    * @param d The delimiter.</span>
<span class="source-line-no">3820</span><span id="line-3820">    * @return The delimited string.  If &lt;c&gt;tokens&lt;/c&gt; is &lt;jk&gt;null&lt;/jk&gt;, returns &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">3821</span><span id="line-3821">    */</span>
<span class="source-line-no">3822</span><span id="line-3822">   public static String join(Collection&lt;?&gt; tokens, char d) {</span>
<span class="source-line-no">3823</span><span id="line-3823">      if (tokens == null)</span>
<span class="source-line-no">3824</span><span id="line-3824">         return null;</span>
<span class="source-line-no">3825</span><span id="line-3825">      var sb = new StringBuilder();</span>
<span class="source-line-no">3826</span><span id="line-3826">      for (var iter = tokens.iterator(); iter.hasNext();) {</span>
<span class="source-line-no">3827</span><span id="line-3827">         sb.append(iter.next());</span>
<span class="source-line-no">3828</span><span id="line-3828">         if (iter.hasNext())</span>
<span class="source-line-no">3829</span><span id="line-3829">            sb.append(d);</span>
<span class="source-line-no">3830</span><span id="line-3830">      }</span>
<span class="source-line-no">3831</span><span id="line-3831">      return sb.toString();</span>
<span class="source-line-no">3832</span><span id="line-3832">   }</span>
<span class="source-line-no">3833</span><span id="line-3833"></span>
<span class="source-line-no">3834</span><span id="line-3834">   /**</span>
<span class="source-line-no">3835</span><span id="line-3835">    * Join the specified tokens into a delimited string.</span>
<span class="source-line-no">3836</span><span id="line-3836">    *</span>
<span class="source-line-no">3837</span><span id="line-3837">    * @param tokens The tokens to join.</span>
<span class="source-line-no">3838</span><span id="line-3838">    * @param d The delimiter.</span>
<span class="source-line-no">3839</span><span id="line-3839">    * @return The delimited string.  If &lt;c&gt;tokens&lt;/c&gt; is &lt;jk&gt;null&lt;/jk&gt;, returns &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">3840</span><span id="line-3840">    */</span>
<span class="source-line-no">3841</span><span id="line-3841">   public static String join(Collection&lt;?&gt; tokens, String d) {</span>
<span class="source-line-no">3842</span><span id="line-3842">      if (tokens == null)</span>
<span class="source-line-no">3843</span><span id="line-3843">         return null;</span>
<span class="source-line-no">3844</span><span id="line-3844">      return StringUtils.join(tokens, d, new StringBuilder()).toString();</span>
<span class="source-line-no">3845</span><span id="line-3845">   }</span>
<span class="source-line-no">3846</span><span id="line-3846"></span>
<span class="source-line-no">3847</span><span id="line-3847">   /**</span>
<span class="source-line-no">3848</span><span id="line-3848">    * Joins the specified tokens into a delimited string and writes the output to the specified string builder.</span>
<span class="source-line-no">3849</span><span id="line-3849">    *</span>
<span class="source-line-no">3850</span><span id="line-3850">    * @param tokens The tokens to join.</span>
<span class="source-line-no">3851</span><span id="line-3851">    * @param d The delimiter.</span>
<span class="source-line-no">3852</span><span id="line-3852">    * @param sb The string builder to append the response to.</span>
<span class="source-line-no">3853</span><span id="line-3853">    * @return The same string builder passed in as &lt;c&gt;sb&lt;/c&gt;.</span>
<span class="source-line-no">3854</span><span id="line-3854">    */</span>
<span class="source-line-no">3855</span><span id="line-3855">   public static StringBuilder join(Collection&lt;?&gt; tokens, String d, StringBuilder sb) {</span>
<span class="source-line-no">3856</span><span id="line-3856">      if (tokens == null)</span>
<span class="source-line-no">3857</span><span id="line-3857">         return sb;</span>
<span class="source-line-no">3858</span><span id="line-3858">      for (var iter = tokens.iterator(); iter.hasNext();) {</span>
<span class="source-line-no">3859</span><span id="line-3859">         sb.append(iter.next());</span>
<span class="source-line-no">3860</span><span id="line-3860">         if (iter.hasNext())</span>
<span class="source-line-no">3861</span><span id="line-3861">            sb.append(d);</span>
<span class="source-line-no">3862</span><span id="line-3862">      }</span>
<span class="source-line-no">3863</span><span id="line-3863">      return sb;</span>
<span class="source-line-no">3864</span><span id="line-3864">   }</span>
<span class="source-line-no">3865</span><span id="line-3865"></span>
<span class="source-line-no">3866</span><span id="line-3866">   /**</span>
<span class="source-line-no">3867</span><span id="line-3867">    * Join the specified tokens into a delimited string.</span>
<span class="source-line-no">3868</span><span id="line-3868">    *</span>
<span class="source-line-no">3869</span><span id="line-3869">    * @param tokens The tokens to join.</span>
<span class="source-line-no">3870</span><span id="line-3870">    * @param d The delimiter.</span>
<span class="source-line-no">3871</span><span id="line-3871">    * @return The delimited string.  If &lt;c&gt;tokens&lt;/c&gt; is &lt;jk&gt;null&lt;/jk&gt;, returns &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">3872</span><span id="line-3872">    */</span>
<span class="source-line-no">3873</span><span id="line-3873">   public static String join(int[] tokens, char d) {</span>
<span class="source-line-no">3874</span><span id="line-3874">      if (tokens == null)</span>
<span class="source-line-no">3875</span><span id="line-3875">         return null;</span>
<span class="source-line-no">3876</span><span id="line-3876">      var sb = new StringBuilder();</span>
<span class="source-line-no">3877</span><span id="line-3877">      for (var i = 0; i &lt; tokens.length; i++) {</span>
<span class="source-line-no">3878</span><span id="line-3878">         if (i &gt; 0)</span>
<span class="source-line-no">3879</span><span id="line-3879">            sb.append(d);</span>
<span class="source-line-no">3880</span><span id="line-3880">         sb.append(tokens[i]);</span>
<span class="source-line-no">3881</span><span id="line-3881">      }</span>
<span class="source-line-no">3882</span><span id="line-3882">      return sb.toString();</span>
<span class="source-line-no">3883</span><span id="line-3883">   }</span>
<span class="source-line-no">3884</span><span id="line-3884"></span>
<span class="source-line-no">3885</span><span id="line-3885">   /**</span>
<span class="source-line-no">3886</span><span id="line-3886">    * Joins an array of integers with a delimiter.</span>
<span class="source-line-no">3887</span><span id="line-3887">    *</span>
<span class="source-line-no">3888</span><span id="line-3888">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">3889</span><span id="line-3889">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">3890</span><span id="line-3890">    *    join(&lt;jk&gt;new int&lt;/jk&gt;[]{1, 2, 3}, &lt;js&gt;","&lt;/js&gt;);   &lt;jc&gt;// "1,2,3"&lt;/jc&gt;</span>
<span class="source-line-no">3891</span><span id="line-3891">    *    join(&lt;jk&gt;new int&lt;/jk&gt;[]{}, &lt;js&gt;","&lt;/js&gt;);          &lt;jc&gt;// ""&lt;/jc&gt;</span>
<span class="source-line-no">3892</span><span id="line-3892">    * &lt;/p&gt;</span>
<span class="source-line-no">3893</span><span id="line-3893">    *</span>
<span class="source-line-no">3894</span><span id="line-3894">    * @param array The array to join.</span>
<span class="source-line-no">3895</span><span id="line-3895">    * @param delimiter The delimiter string.</span>
<span class="source-line-no">3896</span><span id="line-3896">    * @return The joined string.</span>
<span class="source-line-no">3897</span><span id="line-3897">    */</span>
<span class="source-line-no">3898</span><span id="line-3898">   public static String join(int[] array, String delimiter) {</span>
<span class="source-line-no">3899</span><span id="line-3899">      if (array == null || array.length == 0)</span>
<span class="source-line-no">3900</span><span id="line-3900">         return "";</span>
<span class="source-line-no">3901</span><span id="line-3901">      if (delimiter == null)</span>
<span class="source-line-no">3902</span><span id="line-3902">         delimiter = "";</span>
<span class="source-line-no">3903</span><span id="line-3903">      return Arrays.stream(array).mapToObj(String::valueOf).collect(Collectors.joining(delimiter));</span>
<span class="source-line-no">3904</span><span id="line-3904">   }</span>
<span class="source-line-no">3905</span><span id="line-3905"></span>
<span class="source-line-no">3906</span><span id="line-3906"></span>
<span class="source-line-no">3907</span><span id="line-3907">   /**</span>
<span class="source-line-no">3908</span><span id="line-3908">    * Joins the specified tokens into a delimited string.</span>
<span class="source-line-no">3909</span><span id="line-3909">    *</span>
<span class="source-line-no">3910</span><span id="line-3910">    * @param tokens The tokens to join.</span>
<span class="source-line-no">3911</span><span id="line-3911">    * @param d The delimiter.</span>
<span class="source-line-no">3912</span><span id="line-3912">    * @return The delimited string.  If &lt;c&gt;tokens&lt;/c&gt; is &lt;jk&gt;null&lt;/jk&gt;, returns &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">3913</span><span id="line-3913">    */</span>
<span class="source-line-no">3914</span><span id="line-3914">   public static String join(Object[] tokens, char d) {</span>
<span class="source-line-no">3915</span><span id="line-3915">      if (tokens == null)</span>
<span class="source-line-no">3916</span><span id="line-3916">         return null;</span>
<span class="source-line-no">3917</span><span id="line-3917">      if (tokens.length == 1)</span>
<span class="source-line-no">3918</span><span id="line-3918">         return emptyIfNull(s(tokens[0]));</span>
<span class="source-line-no">3919</span><span id="line-3919">      return StringUtils.join(tokens, d, new StringBuilder()).toString();</span>
<span class="source-line-no">3920</span><span id="line-3920">   }</span>
<span class="source-line-no">3921</span><span id="line-3921"></span>
<span class="source-line-no">3922</span><span id="line-3922">   /**</span>
<span class="source-line-no">3923</span><span id="line-3923">    * Join the specified tokens into a delimited string and writes the output to the specified string builder.</span>
<span class="source-line-no">3924</span><span id="line-3924">    *</span>
<span class="source-line-no">3925</span><span id="line-3925">    * @param tokens The tokens to join.</span>
<span class="source-line-no">3926</span><span id="line-3926">    * @param d The delimiter.</span>
<span class="source-line-no">3927</span><span id="line-3927">    * @param sb The string builder to append the response to.</span>
<span class="source-line-no">3928</span><span id="line-3928">    * @return The same string builder passed in as &lt;c&gt;sb&lt;/c&gt;.</span>
<span class="source-line-no">3929</span><span id="line-3929">    */</span>
<span class="source-line-no">3930</span><span id="line-3930">   public static StringBuilder join(Object[] tokens, char d, StringBuilder sb) {</span>
<span class="source-line-no">3931</span><span id="line-3931">      if (tokens == null)</span>
<span class="source-line-no">3932</span><span id="line-3932">         return sb;</span>
<span class="source-line-no">3933</span><span id="line-3933">      for (var i = 0; i &lt; tokens.length; i++) {</span>
<span class="source-line-no">3934</span><span id="line-3934">         if (i &gt; 0)</span>
<span class="source-line-no">3935</span><span id="line-3935">            sb.append(d);</span>
<span class="source-line-no">3936</span><span id="line-3936">         sb.append(tokens[i]);</span>
<span class="source-line-no">3937</span><span id="line-3937">      }</span>
<span class="source-line-no">3938</span><span id="line-3938">      return sb;</span>
<span class="source-line-no">3939</span><span id="line-3939">   }</span>
<span class="source-line-no">3940</span><span id="line-3940"></span>
<span class="source-line-no">3941</span><span id="line-3941">   /**</span>
<span class="source-line-no">3942</span><span id="line-3942">    * Join the specified tokens into a delimited string.</span>
<span class="source-line-no">3943</span><span id="line-3943">    *</span>
<span class="source-line-no">3944</span><span id="line-3944">    * @param tokens The tokens to join.</span>
<span class="source-line-no">3945</span><span id="line-3945">    * @param separator The delimiter.</span>
<span class="source-line-no">3946</span><span id="line-3946">    * @return The delimited string.  If &lt;c&gt;tokens&lt;/c&gt; is &lt;jk&gt;null&lt;/jk&gt;, returns &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">3947</span><span id="line-3947">    */</span>
<span class="source-line-no">3948</span><span id="line-3948">   public static String join(Object[] tokens, String separator) {</span>
<span class="source-line-no">3949</span><span id="line-3949">      if (tokens == null)</span>
<span class="source-line-no">3950</span><span id="line-3950">         return null;</span>
<span class="source-line-no">3951</span><span id="line-3951">      var sb = new StringBuilder();</span>
<span class="source-line-no">3952</span><span id="line-3952">      for (var i = 0; i &lt; tokens.length; i++) {</span>
<span class="source-line-no">3953</span><span id="line-3953">         if (i &gt; 0)</span>
<span class="source-line-no">3954</span><span id="line-3954">            sb.append(separator);</span>
<span class="source-line-no">3955</span><span id="line-3955">         sb.append(tokens[i]);</span>
<span class="source-line-no">3956</span><span id="line-3956">      }</span>
<span class="source-line-no">3957</span><span id="line-3957">      return sb.toString();</span>
<span class="source-line-no">3958</span><span id="line-3958">   }</span>
<span class="source-line-no">3959</span><span id="line-3959"></span>
<span class="source-line-no">3960</span><span id="line-3960">   /**</span>
<span class="source-line-no">3961</span><span id="line-3961">    * Combines values into a simple comma-delimited string.</span>
<span class="source-line-no">3962</span><span id="line-3962">    *</span>
<span class="source-line-no">3963</span><span id="line-3963">    * @param values The values to join.</span>
<span class="source-line-no">3964</span><span id="line-3964">    * @return A comma-delimited string.</span>
<span class="source-line-no">3965</span><span id="line-3965">    */</span>
<span class="source-line-no">3966</span><span id="line-3966">   public static String join(String...values) {</span>
<span class="source-line-no">3967</span><span id="line-3967">      return join(values, ',');</span>
<span class="source-line-no">3968</span><span id="line-3968">   }</span>
<span class="source-line-no">3969</span><span id="line-3969"></span>
<span class="source-line-no">3970</span><span id="line-3970">   /**</span>
<span class="source-line-no">3971</span><span id="line-3971">    * Same as {@link StringUtils#join(Collection, char)} but escapes the delimiter if found in the tokens.</span>
<span class="source-line-no">3972</span><span id="line-3972">    *</span>
<span class="source-line-no">3973</span><span id="line-3973">    * @param tokens The tokens to join.</span>
<span class="source-line-no">3974</span><span id="line-3974">    * @param d The delimiter.</span>
<span class="source-line-no">3975</span><span id="line-3975">    * @return The delimited string.  If &lt;c&gt;tokens&lt;/c&gt; is &lt;jk&gt;null&lt;/jk&gt;, returns &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">3976</span><span id="line-3976">    */</span>
<span class="source-line-no">3977</span><span id="line-3977">   public static String joine(List&lt;?&gt; tokens, char d) {</span>
<span class="source-line-no">3978</span><span id="line-3978">      if (tokens == null)</span>
<span class="source-line-no">3979</span><span id="line-3979">         return null;</span>
<span class="source-line-no">3980</span><span id="line-3980">      var as = getEscapeSet(d);</span>
<span class="source-line-no">3981</span><span id="line-3981">      var sb = new StringBuilder();</span>
<span class="source-line-no">3982</span><span id="line-3982">      for (int i = 0, j = tokens.size(); i &lt; j; i++) {</span>
<span class="source-line-no">3983</span><span id="line-3983">         if (i &gt; 0)</span>
<span class="source-line-no">3984</span><span id="line-3984">            sb.append(d);</span>
<span class="source-line-no">3985</span><span id="line-3985">         sb.append(escapeChars(s(tokens.get(i)), as));</span>
<span class="source-line-no">3986</span><span id="line-3986">      }</span>
<span class="source-line-no">3987</span><span id="line-3987">      return sb.toString();</span>
<span class="source-line-no">3988</span><span id="line-3988">   }</span>
<span class="source-line-no">3989</span><span id="line-3989"></span>
<span class="source-line-no">3990</span><span id="line-3990">   /**</span>
<span class="source-line-no">3991</span><span id="line-3991">    * Joins tokens with newlines.</span>
<span class="source-line-no">3992</span><span id="line-3992">    *</span>
<span class="source-line-no">3993</span><span id="line-3993">    * @param tokens The tokens to concatenate.</span>
<span class="source-line-no">3994</span><span id="line-3994">    * @return A string with the specified tokens contatenated with newlines.</span>
<span class="source-line-no">3995</span><span id="line-3995">    */</span>
<span class="source-line-no">3996</span><span id="line-3996">   public static String joinnl(Object[] tokens) {</span>
<span class="source-line-no">3997</span><span id="line-3997">      return join(tokens, '\n');</span>
<span class="source-line-no">3998</span><span id="line-3998">   }</span>
<span class="source-line-no">3999</span><span id="line-3999"></span>
<span class="source-line-no">4000</span><span id="line-4000">   /**</span>
<span class="source-line-no">4001</span><span id="line-4001">    * Converts a string to kebab-case format.</span>
<span class="source-line-no">4002</span><span id="line-4002">    *</span>
<span class="source-line-no">4003</span><span id="line-4003">    * &lt;p&gt;</span>
<span class="source-line-no">4004</span><span id="line-4004">    * Handles various input formats:</span>
<span class="source-line-no">4005</span><span id="line-4005">    * &lt;ul&gt;</span>
<span class="source-line-no">4006</span><span id="line-4006">    *   &lt;li&gt;Space-separated: "hello world"  "hello-world"&lt;/li&gt;</span>
<span class="source-line-no">4007</span><span id="line-4007">    *   &lt;li&gt;CamelCase: "helloWorld"  "hello-world"&lt;/li&gt;</span>
<span class="source-line-no">4008</span><span id="line-4008">    *   &lt;li&gt;PascalCase: "HelloWorld"  "hello-world"&lt;/li&gt;</span>
<span class="source-line-no">4009</span><span id="line-4009">    *   &lt;li&gt;Snake_case: "hello_world"  "hello-world"&lt;/li&gt;</span>
<span class="source-line-no">4010</span><span id="line-4010">    * &lt;/ul&gt;</span>
<span class="source-line-no">4011</span><span id="line-4011">    *</span>
<span class="source-line-no">4012</span><span id="line-4012">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">4013</span><span id="line-4013">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">4014</span><span id="line-4014">    *    kebabCase(&lt;jk&gt;null&lt;/jk&gt;);                    &lt;jc&gt;// null&lt;/jc&gt;</span>
<span class="source-line-no">4015</span><span id="line-4015">    *    kebabCase(&lt;js&gt;""&lt;/js&gt;);                      &lt;jc&gt;// ""&lt;/jc&gt;</span>
<span class="source-line-no">4016</span><span id="line-4016">    *    kebabCase(&lt;js&gt;"hello world"&lt;/js&gt;);           &lt;jc&gt;// "hello-world"&lt;/jc&gt;</span>
<span class="source-line-no">4017</span><span id="line-4017">    *    kebabCase(&lt;js&gt;"helloWorld"&lt;/js&gt;);            &lt;jc&gt;// "hello-world"&lt;/jc&gt;</span>
<span class="source-line-no">4018</span><span id="line-4018">    *    kebabCase(&lt;js&gt;"HelloWorld"&lt;/js&gt;);            &lt;jc&gt;// "hello-world"&lt;/jc&gt;</span>
<span class="source-line-no">4019</span><span id="line-4019">    *    kebabCase(&lt;js&gt;"hello_world"&lt;/js&gt;);           &lt;jc&gt;// "hello-world"&lt;/jc&gt;</span>
<span class="source-line-no">4020</span><span id="line-4020">    * &lt;/p&gt;</span>
<span class="source-line-no">4021</span><span id="line-4021">    *</span>
<span class="source-line-no">4022</span><span id="line-4022">    * @param str The string to convert.</span>
<span class="source-line-no">4023</span><span id="line-4023">    * @return The kebab-case string, or &lt;jk&gt;null&lt;/jk&gt; if input is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">4024</span><span id="line-4024">    */</span>
<span class="source-line-no">4025</span><span id="line-4025">   public static String kebabCase(String str) {</span>
<span class="source-line-no">4026</span><span id="line-4026">      if (isEmpty(str))</span>
<span class="source-line-no">4027</span><span id="line-4027">         return str;</span>
<span class="source-line-no">4028</span><span id="line-4028"></span>
<span class="source-line-no">4029</span><span id="line-4029">      var words = splitWords(str);</span>
<span class="source-line-no">4030</span><span id="line-4030">      if (words.isEmpty())</span>
<span class="source-line-no">4031</span><span id="line-4031">         return "";</span>
<span class="source-line-no">4032</span><span id="line-4032"></span>
<span class="source-line-no">4033</span><span id="line-4033">      var result = new StringBuilder();</span>
<span class="source-line-no">4034</span><span id="line-4034">      for (var i = 0; i &lt; words.size(); i++) {</span>
<span class="source-line-no">4035</span><span id="line-4035">         if (i &gt; 0)</span>
<span class="source-line-no">4036</span><span id="line-4036">            result.append('-');</span>
<span class="source-line-no">4037</span><span id="line-4037">         result.append(words.get(i).toLowerCase());</span>
<span class="source-line-no">4038</span><span id="line-4038">      }</span>
<span class="source-line-no">4039</span><span id="line-4039"></span>
<span class="source-line-no">4040</span><span id="line-4040">      return result.toString();</span>
<span class="source-line-no">4041</span><span id="line-4041">   }</span>
<span class="source-line-no">4042</span><span id="line-4042"></span>
<span class="source-line-no">4043</span><span id="line-4043">   /**</span>
<span class="source-line-no">4044</span><span id="line-4044">    * Finds the index of the last occurrence of a substring within a string.</span>
<span class="source-line-no">4045</span><span id="line-4045">    *</span>
<span class="source-line-no">4046</span><span id="line-4046">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">4047</span><span id="line-4047">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">4048</span><span id="line-4048">    *    lastIndexOf(&lt;js&gt;"hello world world"&lt;/js&gt;, &lt;js&gt;"world"&lt;/js&gt;);     &lt;jc&gt;// 12&lt;/jc&gt;</span>
<span class="source-line-no">4049</span><span id="line-4049">    *    lastIndexOf(&lt;js&gt;"hello world"&lt;/js&gt;, &lt;js&gt;"xyz"&lt;/js&gt;);             &lt;jc&gt;// -1&lt;/jc&gt;</span>
<span class="source-line-no">4050</span><span id="line-4050">    *    lastIndexOf(&lt;jk&gt;null&lt;/jk&gt;, &lt;js&gt;"test"&lt;/js&gt;);                     &lt;jc&gt;// -1&lt;/jc&gt;</span>
<span class="source-line-no">4051</span><span id="line-4051">    * &lt;/p&gt;</span>
<span class="source-line-no">4052</span><span id="line-4052">    *</span>
<span class="source-line-no">4053</span><span id="line-4053">    * @param str The string to search in.</span>
<span class="source-line-no">4054</span><span id="line-4054">    * @param search The substring to search for.</span>
<span class="source-line-no">4055</span><span id="line-4055">    * @return The index of the last occurrence, or &lt;c&gt;-1&lt;/c&gt; if not found or if either parameter is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">4056</span><span id="line-4056">    */</span>
<span class="source-line-no">4057</span><span id="line-4057">   public static int lastIndexOf(String str, String search) {</span>
<span class="source-line-no">4058</span><span id="line-4058">      if (str == null || search == null)</span>
<span class="source-line-no">4059</span><span id="line-4059">         return -1;</span>
<span class="source-line-no">4060</span><span id="line-4060">      return str.lastIndexOf(search);</span>
<span class="source-line-no">4061</span><span id="line-4061">   }</span>
<span class="source-line-no">4062</span><span id="line-4062"></span>
<span class="source-line-no">4063</span><span id="line-4063">   /**</span>
<span class="source-line-no">4064</span><span id="line-4064">    * Finds the index of the last occurrence of a substring within a string, ignoring case.</span>
<span class="source-line-no">4065</span><span id="line-4065">    *</span>
<span class="source-line-no">4066</span><span id="line-4066">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">4067</span><span id="line-4067">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">4068</span><span id="line-4068">    *    lastIndexOfIgnoreCase(&lt;js&gt;"Hello World World"&lt;/js&gt;, &lt;js&gt;"world"&lt;/js&gt;);     &lt;jc&gt;// 12&lt;/jc&gt;</span>
<span class="source-line-no">4069</span><span id="line-4069">    *    lastIndexOfIgnoreCase(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;"WORLD"&lt;/js&gt;);           &lt;jc&gt;// 6&lt;/jc&gt;</span>
<span class="source-line-no">4070</span><span id="line-4070">    *    lastIndexOfIgnoreCase(&lt;js&gt;"hello world"&lt;/js&gt;, &lt;js&gt;"xyz"&lt;/js&gt;);             &lt;jc&gt;// -1&lt;/jc&gt;</span>
<span class="source-line-no">4071</span><span id="line-4071">    * &lt;/p&gt;</span>
<span class="source-line-no">4072</span><span id="line-4072">    *</span>
<span class="source-line-no">4073</span><span id="line-4073">    * @param str The string to search in.</span>
<span class="source-line-no">4074</span><span id="line-4074">    * @param search The substring to search for.</span>
<span class="source-line-no">4075</span><span id="line-4075">    * @return The index of the last occurrence, or &lt;c&gt;-1&lt;/c&gt; if not found or if either parameter is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">4076</span><span id="line-4076">    */</span>
<span class="source-line-no">4077</span><span id="line-4077">   public static int lastIndexOfIgnoreCase(String str, String search) {</span>
<span class="source-line-no">4078</span><span id="line-4078">      if (str == null || search == null)</span>
<span class="source-line-no">4079</span><span id="line-4079">         return -1;</span>
<span class="source-line-no">4080</span><span id="line-4080">      return str.toLowerCase().lastIndexOf(search.toLowerCase());</span>
<span class="source-line-no">4081</span><span id="line-4081">   }</span>
<span class="source-line-no">4082</span><span id="line-4082"></span>
<span class="source-line-no">4083</span><span id="line-4083">   /**</span>
<span class="source-line-no">4084</span><span id="line-4084">    * Returns the last non-whitespace character in the string.</span>
<span class="source-line-no">4085</span><span id="line-4085">    *</span>
<span class="source-line-no">4086</span><span id="line-4086">    * @param s The string to check.</span>
<span class="source-line-no">4087</span><span id="line-4087">    * @return</span>
<span class="source-line-no">4088</span><span id="line-4088">    *    The last non-whitespace character, or &lt;c&gt;0&lt;/c&gt; if the string is &lt;jk&gt;null&lt;/jk&gt;, empty, or composed</span>
<span class="source-line-no">4089</span><span id="line-4089">    *    of only whitespace.</span>
<span class="source-line-no">4090</span><span id="line-4090">    */</span>
<span class="source-line-no">4091</span><span id="line-4091">   public static char lastNonWhitespaceChar(String s) {</span>
<span class="source-line-no">4092</span><span id="line-4092">      if (nn(s))</span>
<span class="source-line-no">4093</span><span id="line-4093">         for (var i = s.length() - 1; i &gt;= 0; i--)</span>
<span class="source-line-no">4094</span><span id="line-4094">            if (! isWhitespace(s.charAt(i)))</span>
<span class="source-line-no">4095</span><span id="line-4095">               return s.charAt(i);</span>
<span class="source-line-no">4096</span><span id="line-4096">      return 0;</span>
<span class="source-line-no">4097</span><span id="line-4097">   }</span>
<span class="source-line-no">4098</span><span id="line-4098"></span>
<span class="source-line-no">4099</span><span id="line-4099">   /**</span>
<span class="source-line-no">4100</span><span id="line-4100">    * Returns the leftmost characters of a string.</span>
<span class="source-line-no">4101</span><span id="line-4101">    *</span>
<span class="source-line-no">4102</span><span id="line-4102">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">4103</span><span id="line-4103">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">4104</span><span id="line-4104">    *    left(&lt;jk&gt;null&lt;/jk&gt;, 3);          &lt;jc&gt;// null&lt;/jc&gt;</span>
<span class="source-line-no">4105</span><span id="line-4105">    *    left(&lt;js&gt;""&lt;/js&gt;, 3);            &lt;jc&gt;// ""&lt;/jc&gt;</span>
<span class="source-line-no">4106</span><span id="line-4106">    *    left(&lt;js&gt;"hello"&lt;/js&gt;, 3);       &lt;jc&gt;// "hel"&lt;/jc&gt;</span>
<span class="source-line-no">4107</span><span id="line-4107">    *    left(&lt;js&gt;"hello"&lt;/js&gt;, 10);      &lt;jc&gt;// "hello"&lt;/jc&gt;</span>
<span class="source-line-no">4108</span><span id="line-4108">    * &lt;/p&gt;</span>
<span class="source-line-no">4109</span><span id="line-4109">    *</span>
<span class="source-line-no">4110</span><span id="line-4110">    * @param str The string to get characters from.</span>
<span class="source-line-no">4111</span><span id="line-4111">    * @param len The number of characters to get.</span>
<span class="source-line-no">4112</span><span id="line-4112">    * @return The leftmost characters, or &lt;jk&gt;null&lt;/jk&gt; if input is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">4113</span><span id="line-4113">    */</span>
<span class="source-line-no">4114</span><span id="line-4114">   public static String left(String str, int len) {</span>
<span class="source-line-no">4115</span><span id="line-4115">      if (str == null)</span>
<span class="source-line-no">4116</span><span id="line-4116">         return null;</span>
<span class="source-line-no">4117</span><span id="line-4117">      if (len &lt; 0)</span>
<span class="source-line-no">4118</span><span id="line-4118">         return "";</span>
<span class="source-line-no">4119</span><span id="line-4119">      if (len &gt;= str.length())</span>
<span class="source-line-no">4120</span><span id="line-4120">         return str;</span>
<span class="source-line-no">4121</span><span id="line-4121">      return str.substring(0, len);</span>
<span class="source-line-no">4122</span><span id="line-4122">   }</span>
<span class="source-line-no">4123</span><span id="line-4123"></span>
<span class="source-line-no">4124</span><span id="line-4124">   /**</span>
<span class="source-line-no">4125</span><span id="line-4125">    * Calculates the Levenshtein distance (edit distance) between two strings.</span>
<span class="source-line-no">4126</span><span id="line-4126">    *</span>
<span class="source-line-no">4127</span><span id="line-4127">    * &lt;p&gt;</span>
<span class="source-line-no">4128</span><span id="line-4128">    * The Levenshtein distance is the minimum number of single-character edits (insertions, deletions, or substitutions) required to change one string into another.</span>
<span class="source-line-no">4129</span><span id="line-4129">    *</span>
<span class="source-line-no">4130</span><span id="line-4130">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">4131</span><span id="line-4131">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">4132</span><span id="line-4132">    *    levenshteinDistance(&lt;js&gt;"kitten"&lt;/js&gt;, &lt;js&gt;"sitting"&lt;/js&gt;);     &lt;jc&gt;// 3&lt;/jc&gt;</span>
<span class="source-line-no">4133</span><span id="line-4133">    *    levenshteinDistance(&lt;js&gt;"hello"&lt;/js&gt;, &lt;js&gt;"hello"&lt;/js&gt;);        &lt;jc&gt;// 0&lt;/jc&gt;</span>
<span class="source-line-no">4134</span><span id="line-4134">    *    levenshteinDistance(&lt;js&gt;"abc"&lt;/js&gt;, &lt;js&gt;""&lt;/js&gt;);               &lt;jc&gt;// 3&lt;/jc&gt;</span>
<span class="source-line-no">4135</span><span id="line-4135">    * &lt;/p&gt;</span>
<span class="source-line-no">4136</span><span id="line-4136">    *</span>
<span class="source-line-no">4137</span><span id="line-4137">    * @param str1 The first string.</span>
<span class="source-line-no">4138</span><span id="line-4138">    * @param str2 The second string.</span>
<span class="source-line-no">4139</span><span id="line-4139">    * @return The Levenshtein distance between the two strings.</span>
<span class="source-line-no">4140</span><span id="line-4140">    */</span>
<span class="source-line-no">4141</span><span id="line-4141">   public static int levenshteinDistance(String str1, String str2) {</span>
<span class="source-line-no">4142</span><span id="line-4142">      if (str1 == null)</span>
<span class="source-line-no">4143</span><span id="line-4143">         str1 = "";</span>
<span class="source-line-no">4144</span><span id="line-4144">      if (str2 == null)</span>
<span class="source-line-no">4145</span><span id="line-4145">         str2 = "";</span>
<span class="source-line-no">4146</span><span id="line-4146"></span>
<span class="source-line-no">4147</span><span id="line-4147">      var len1 = str1.length();</span>
<span class="source-line-no">4148</span><span id="line-4148">      var len2 = str2.length();</span>
<span class="source-line-no">4149</span><span id="line-4149"></span>
<span class="source-line-no">4150</span><span id="line-4150">      // Use dynamic programming with optimized space (only need previous row)</span>
<span class="source-line-no">4151</span><span id="line-4151">      var prev = new int[len2 + 1];</span>
<span class="source-line-no">4152</span><span id="line-4152">      var curr = new int[len2 + 1];</span>
<span class="source-line-no">4153</span><span id="line-4153"></span>
<span class="source-line-no">4154</span><span id="line-4154">      // Initialize first row</span>
<span class="source-line-no">4155</span><span id="line-4155">      for (var j = 0; j &lt;= len2; j++)</span>
<span class="source-line-no">4156</span><span id="line-4156">         prev[j] = j;</span>
<span class="source-line-no">4157</span><span id="line-4157"></span>
<span class="source-line-no">4158</span><span id="line-4158">      for (var i = 1; i &lt;= len1; i++) {</span>
<span class="source-line-no">4159</span><span id="line-4159">         curr[0] = i;</span>
<span class="source-line-no">4160</span><span id="line-4160">         for (var j = 1; j &lt;= len2; j++) {</span>
<span class="source-line-no">4161</span><span id="line-4161">            if (str1.charAt(i - 1) == str2.charAt(j - 1)) {</span>
<span class="source-line-no">4162</span><span id="line-4162">               curr[j] = prev[j - 1];</span>
<span class="source-line-no">4163</span><span id="line-4163">            } else {</span>
<span class="source-line-no">4164</span><span id="line-4164">               curr[j] = 1 + Math.min(Math.min(prev[j], curr[j - 1]), prev[j - 1]);</span>
<span class="source-line-no">4165</span><span id="line-4165">            }</span>
<span class="source-line-no">4166</span><span id="line-4166">         }</span>
<span class="source-line-no">4167</span><span id="line-4167">         // Swap arrays</span>
<span class="source-line-no">4168</span><span id="line-4168">         var temp = prev;</span>
<span class="source-line-no">4169</span><span id="line-4169">         prev = curr;</span>
<span class="source-line-no">4170</span><span id="line-4170">         curr = temp;</span>
<span class="source-line-no">4171</span><span id="line-4171">      }</span>
<span class="source-line-no">4172</span><span id="line-4172"></span>
<span class="source-line-no">4173</span><span id="line-4173">      return prev[len2];</span>
<span class="source-line-no">4174</span><span id="line-4174">   }</span>
<span class="source-line-no">4175</span><span id="line-4175"></span>
<span class="source-line-no">4176</span><span id="line-4176">   /**</span>
<span class="source-line-no">4177</span><span id="line-4177">    * Counts the number of lines in a string.</span>
<span class="source-line-no">4178</span><span id="line-4178">    *</span>
<span class="source-line-no">4179</span><span id="line-4179">    * &lt;p&gt;</span>
<span class="source-line-no">4180</span><span id="line-4180">    * Counts newline characters. A string ending without a newline is counted as one line.</span>
<span class="source-line-no">4181</span><span id="line-4181">    *</span>
<span class="source-line-no">4182</span><span id="line-4182">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">4183</span><span id="line-4183">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">4184</span><span id="line-4184">    *    lineCount(&lt;js&gt;"line1\nline2\nline3"&lt;/js&gt;);      &lt;jc&gt;// 3&lt;/jc&gt;</span>
<span class="source-line-no">4185</span><span id="line-4185">    *    lineCount(&lt;js&gt;"single line"&lt;/js&gt;);              &lt;jc&gt;// 1&lt;/jc&gt;</span>
<span class="source-line-no">4186</span><span id="line-4186">    *    lineCount(&lt;js&gt;"line1\r\nline2"&lt;/js&gt;);          &lt;jc&gt;// 2&lt;/jc&gt;</span>
<span class="source-line-no">4187</span><span id="line-4187">    * &lt;/p&gt;</span>
<span class="source-line-no">4188</span><span id="line-4188">    *</span>
<span class="source-line-no">4189</span><span id="line-4189">    * @param str The string to count lines in. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">4190</span><span id="line-4190">    * @return The number of lines, or &lt;c&gt;0&lt;/c&gt; if the string is &lt;jk&gt;null&lt;/jk&gt; or empty.</span>
<span class="source-line-no">4191</span><span id="line-4191">    */</span>
<span class="source-line-no">4192</span><span id="line-4192">   public static int lineCount(String str) {</span>
<span class="source-line-no">4193</span><span id="line-4193">      if (isEmpty(str))</span>
<span class="source-line-no">4194</span><span id="line-4194">         return 0;</span>
<span class="source-line-no">4195</span><span id="line-4195"></span>
<span class="source-line-no">4196</span><span id="line-4196">      var count = 1; // At least one line</span>
<span class="source-line-no">4197</span><span id="line-4197">      for (var i = 0; i &lt; str.length(); i++) {</span>
<span class="source-line-no">4198</span><span id="line-4198">         var c = str.charAt(i);</span>
<span class="source-line-no">4199</span><span id="line-4199">         if (c == '\n') {</span>
<span class="source-line-no">4200</span><span id="line-4200">            count++;</span>
<span class="source-line-no">4201</span><span id="line-4201">         } else if (c == '\r') {</span>
<span class="source-line-no">4202</span><span id="line-4202">            // Handle \r\n as a single line break</span>
<span class="source-line-no">4203</span><span id="line-4203">            if (i + 1 &lt; str.length() &amp;&amp; str.charAt(i + 1) == '\n') {</span>
<span class="source-line-no">4204</span><span id="line-4204">               i++; // Skip the \n</span>
<span class="source-line-no">4205</span><span id="line-4205">            }</span>
<span class="source-line-no">4206</span><span id="line-4206">            count++;</span>
<span class="source-line-no">4207</span><span id="line-4207">         }</span>
<span class="source-line-no">4208</span><span id="line-4208">      }</span>
<span class="source-line-no">4209</span><span id="line-4209"></span>
<span class="source-line-no">4210</span><span id="line-4210">      return count;</span>
<span class="source-line-no">4211</span><span id="line-4211">   }</span>
<span class="source-line-no">4212</span><span id="line-4212"></span>
<span class="source-line-no">4213</span><span id="line-4213">   // TODO: See if we can remove StringUtils.parseIsoCalendar.</span>
<span class="source-line-no">4214</span><span id="line-4214">   // Currently used by:</span>
<span class="source-line-no">4215</span><span id="line-4215">   //   - OpenApiParserSession.java for DATE/DATE_TIME format parsing</span>
<span class="source-line-no">4216</span><span id="line-4216">   //   - StringUtils.parseIsoDate() (which wraps this method)</span>
<span class="source-line-no">4217</span><span id="line-4217">   // Investigation needed: Can we replace this with java.time APIs or other standard date parsing?</span>
<span class="source-line-no">4218</span><span id="line-4218"></span>
<span class="source-line-no">4219</span><span id="line-4219">   /**</span>
<span class="source-line-no">4220</span><span id="line-4220">    * Null-safe convenience method for {@link String#toLowerCase()}.</span>
<span class="source-line-no">4221</span><span id="line-4221">    *</span>
<span class="source-line-no">4222</span><span id="line-4222">    * &lt;p&gt;</span>
<span class="source-line-no">4223</span><span id="line-4223">    * Converts the string to lowercase if not null.</span>
<span class="source-line-no">4224</span><span id="line-4224">    *</span>
<span class="source-line-no">4225</span><span id="line-4225">    * @param s The string to convert.</span>
<span class="source-line-no">4226</span><span id="line-4226">    * @return The lowercase string, or &lt;jk&gt;null&lt;/jk&gt; if the input was &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">4227</span><span id="line-4227">    * @see #upperCase(String)</span>
<span class="source-line-no">4228</span><span id="line-4228">    * @see Utils#lc(String)</span>
<span class="source-line-no">4229</span><span id="line-4229">    */</span>
<span class="source-line-no">4230</span><span id="line-4230">   public static String lowerCase(String s) {</span>
<span class="source-line-no">4231</span><span id="line-4231">      return s == null ? null : s.toLowerCase();</span>
<span class="source-line-no">4232</span><span id="line-4232">   }</span>
<span class="source-line-no">4233</span><span id="line-4233"></span>
<span class="source-line-no">4234</span><span id="line-4234">   /**</span>
<span class="source-line-no">4235</span><span id="line-4235">    * Maps each element of a string array using the specified function.</span>
<span class="source-line-no">4236</span><span id="line-4236">    *</span>
<span class="source-line-no">4237</span><span id="line-4237">    * &lt;p&gt;</span>
<span class="source-line-no">4238</span><span id="line-4238">    * Returns &lt;jk&gt;null&lt;/jk&gt; if the array is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">4239</span><span id="line-4239">    * Returns an array with &lt;jk&gt;null&lt;/jk&gt; elements if the function is &lt;jk&gt;null&lt;/jk&gt; or returns &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">4240</span><span id="line-4240">    *</span>
<span class="source-line-no">4241</span><span id="line-4241">    * &lt;h5 class='section'&gt;Examples:&lt;/h5&gt;</span>
<span class="source-line-no">4242</span><span id="line-4242">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">4243</span><span id="line-4243">    *    String[] &lt;jv&gt;array&lt;/jv&gt; = {&lt;js&gt;"foo"&lt;/js&gt;, &lt;js&gt;"bar"&lt;/js&gt;, &lt;js&gt;"baz"&lt;/js&gt;};</span>
<span class="source-line-no">4244</span><span id="line-4244">    *    String[] &lt;jv&gt;uppercased&lt;/jv&gt; = map(&lt;jv&gt;array&lt;/jv&gt;, String::toUpperCase);</span>
<span class="source-line-no">4245</span><span id="line-4245">    *    &lt;jc&gt;// Returns: ["FOO", "BAR", "BAZ"]&lt;/jc&gt;</span>
<span class="source-line-no">4246</span><span id="line-4246">    *</span>
<span class="source-line-no">4247</span><span id="line-4247">    *    String[] &lt;jv&gt;prefixed&lt;/jv&gt; = map(&lt;jv&gt;array&lt;/jv&gt;, s -&amp;gt; &lt;js&gt;"prefix-"&lt;/js&gt; + s);</span>
<span class="source-line-no">4248</span><span id="line-4248">    *    &lt;jc&gt;// Returns: ["prefix-foo", "prefix-bar", "prefix-baz"]&lt;/jc&gt;</span>
<span class="source-line-no">4249</span><span id="line-4249">    * &lt;/p&gt;</span>
<span class="source-line-no">4250</span><span id="line-4250">    *</span>
<span class="source-line-no">4251</span><span id="line-4251">    * @param array The array to map. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">4252</span><span id="line-4252">    * @param mapper The function to apply to each element. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">4253</span><span id="line-4253">    * @return A new array with the mapped elements, or &lt;jk&gt;null&lt;/jk&gt; if the array was &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">4254</span><span id="line-4254">    */</span>
<span class="source-line-no">4255</span><span id="line-4255">   public static String[] mapped(String[] array, Function&lt;String,String&gt; mapper) {</span>
<span class="source-line-no">4256</span><span id="line-4256">      if (array == null)</span>
<span class="source-line-no">4257</span><span id="line-4257">         return null;  // NOSONAR - Intentional.</span>
<span class="source-line-no">4258</span><span id="line-4258">      if (mapper == null)</span>
<span class="source-line-no">4259</span><span id="line-4259">         return Arrays.copyOf(array, array.length);</span>
<span class="source-line-no">4260</span><span id="line-4260">      return Arrays.stream(array).map(mapper).toArray(String[]::new);</span>
<span class="source-line-no">4261</span><span id="line-4261">   }</span>
<span class="source-line-no">4262</span><span id="line-4262"></span>
<span class="source-line-no">4263</span><span id="line-4263">   /**</span>
<span class="source-line-no">4264</span><span id="line-4264">    * Checks if a string matches a regular expression pattern.</span>
<span class="source-line-no">4265</span><span id="line-4265">    *</span>
<span class="source-line-no">4266</span><span id="line-4266">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">4267</span><span id="line-4267">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">4268</span><span id="line-4268">    *    matches(&lt;js&gt;"12345"&lt;/js&gt;, &lt;js&gt;"\\d+"&lt;/js&gt;);              &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">4269</span><span id="line-4269">    *    matches(&lt;js&gt;"abc123"&lt;/js&gt;, &lt;js&gt;"^[a-z]+\\d+$"&lt;/js&gt;);     &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">4270</span><span id="line-4270">    *    matches(&lt;js&gt;"abc"&lt;/js&gt;, &lt;js&gt;"\\d+"&lt;/js&gt;);                &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">4271</span><span id="line-4271">    * &lt;/p&gt;</span>
<span class="source-line-no">4272</span><span id="line-4272">    *</span>
<span class="source-line-no">4273</span><span id="line-4273">    * @param str The string to check.</span>
<span class="source-line-no">4274</span><span id="line-4274">    * @param regex The regular expression pattern.</span>
<span class="source-line-no">4275</span><span id="line-4275">    * @return &lt;jk&gt;true&lt;/jk&gt; if the string matches the pattern, &lt;jk&gt;false&lt;/jk&gt; otherwise.</span>
<span class="source-line-no">4276</span><span id="line-4276">    * @throws PatternSyntaxException If the regex pattern is invalid.</span>
<span class="source-line-no">4277</span><span id="line-4277">    */</span>
<span class="source-line-no">4278</span><span id="line-4278">   public static boolean matches(String str, String regex) {</span>
<span class="source-line-no">4279</span><span id="line-4279">      if (str == null || regex == null)</span>
<span class="source-line-no">4280</span><span id="line-4280">         return false;</span>
<span class="source-line-no">4281</span><span id="line-4281">      return str.matches(regex);</span>
<span class="source-line-no">4282</span><span id="line-4282">   }</span>
<span class="source-line-no">4283</span><span id="line-4283"></span>
<span class="source-line-no">4284</span><span id="line-4284">   /**</span>
<span class="source-line-no">4285</span><span id="line-4285">    * Generates a Metaphone code for a string.</span>
<span class="source-line-no">4286</span><span id="line-4286">    *</span>
<span class="source-line-no">4287</span><span id="line-4287">    * &lt;p&gt;</span>
<span class="source-line-no">4288</span><span id="line-4288">    * Metaphone is a phonetic algorithm that produces codes representing how words sound.</span>
<span class="source-line-no">4289</span><span id="line-4289">    * It's more accurate than Soundex for English words.</span>
<span class="source-line-no">4290</span><span id="line-4290">    *</span>
<span class="source-line-no">4291</span><span id="line-4291">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">4292</span><span id="line-4292">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">4293</span><span id="line-4293">    *    metaphone(&lt;js&gt;"Smith"&lt;/js&gt;);   &lt;jc&gt;// "SM0"&lt;/jc&gt;</span>
<span class="source-line-no">4294</span><span id="line-4294">    *    metaphone(&lt;js&gt;"Smythe"&lt;/js&gt;);  &lt;jc&gt;// "SM0"&lt;/jc&gt;</span>
<span class="source-line-no">4295</span><span id="line-4295">    *    metaphone(&lt;js&gt;"Robert"&lt;/js&gt;);  &lt;jc&gt;// "RBRT"&lt;/jc&gt;</span>
<span class="source-line-no">4296</span><span id="line-4296">    * &lt;/p&gt;</span>
<span class="source-line-no">4297</span><span id="line-4297">    *</span>
<span class="source-line-no">4298</span><span id="line-4298">    * @param str The string to generate a Metaphone code for. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">4299</span><span id="line-4299">    * @return The Metaphone code, or &lt;jk&gt;null&lt;/jk&gt; if input is &lt;jk&gt;null&lt;/jk&gt; or empty.</span>
<span class="source-line-no">4300</span><span id="line-4300">    */</span>
<span class="source-line-no">4301</span><span id="line-4301">   public static String metaphone(String str) {</span>
<span class="source-line-no">4302</span><span id="line-4302">      if (isEmpty(str))</span>
<span class="source-line-no">4303</span><span id="line-4303">         return null;</span>
<span class="source-line-no">4304</span><span id="line-4304"></span>
<span class="source-line-no">4305</span><span id="line-4305">      var upper = str.toUpperCase().replaceAll("[^A-Z]", "");</span>
<span class="source-line-no">4306</span><span id="line-4306">      if (upper.isEmpty())</span>
<span class="source-line-no">4307</span><span id="line-4307">         return "";</span>
<span class="source-line-no">4308</span><span id="line-4308"></span>
<span class="source-line-no">4309</span><span id="line-4309">      var result = new StringBuilder();</span>
<span class="source-line-no">4310</span><span id="line-4310">      var i = 0;</span>
<span class="source-line-no">4311</span><span id="line-4311">      var len = upper.length();</span>
<span class="source-line-no">4312</span><span id="line-4312"></span>
<span class="source-line-no">4313</span><span id="line-4313">      // Handle initial characters</span>
<span class="source-line-no">4314</span><span id="line-4314">      if (upper.startsWith("KN") || upper.startsWith("GN") || upper.startsWith("PN") || upper.startsWith("AE") || upper.startsWith("WR")) {</span>
<span class="source-line-no">4315</span><span id="line-4315">         i = 1;</span>
<span class="source-line-no">4316</span><span id="line-4316">      } else if (upper.startsWith("X")) {</span>
<span class="source-line-no">4317</span><span id="line-4317">         result.append('S');</span>
<span class="source-line-no">4318</span><span id="line-4318">         i = 1;</span>
<span class="source-line-no">4319</span><span id="line-4319">      } else if (upper.startsWith("WH")) {</span>
<span class="source-line-no">4320</span><span id="line-4320">         result.append('W');</span>
<span class="source-line-no">4321</span><span id="line-4321">         i = 2;</span>
<span class="source-line-no">4322</span><span id="line-4322">      }</span>
<span class="source-line-no">4323</span><span id="line-4323"></span>
<span class="source-line-no">4324</span><span id="line-4324">      // Process remaining characters</span>
<span class="source-line-no">4325</span><span id="line-4325">      while (i &lt; len &amp;&amp; result.length() &lt; 4) {</span>
<span class="source-line-no">4326</span><span id="line-4326">         var c = upper.charAt(i);</span>
<span class="source-line-no">4327</span><span id="line-4327">         var prev = i &gt; 0 ? upper.charAt(i - 1) : '\0';</span>
<span class="source-line-no">4328</span><span id="line-4328">         var next = i &lt; len - 1 ? upper.charAt(i + 1) : '\0';</span>
<span class="source-line-no">4329</span><span id="line-4329">         var next2 = i &lt; len - 2 ? upper.charAt(i + 2) : '\0';</span>
<span class="source-line-no">4330</span><span id="line-4330"></span>
<span class="source-line-no">4331</span><span id="line-4331">         // Skip duplicates (except C)</span>
<span class="source-line-no">4332</span><span id="line-4332">         if (c == prev &amp;&amp; c != 'C') {</span>
<span class="source-line-no">4333</span><span id="line-4333">            i++;</span>
<span class="source-line-no">4334</span><span id="line-4334">            continue;</span>
<span class="source-line-no">4335</span><span id="line-4335">         }</span>
<span class="source-line-no">4336</span><span id="line-4336"></span>
<span class="source-line-no">4337</span><span id="line-4337">         switch (c) {</span>
<span class="source-line-no">4338</span><span id="line-4338">            case 'B':</span>
<span class="source-line-no">4339</span><span id="line-4339">               if (prev != 'M' || next != '\0')</span>
<span class="source-line-no">4340</span><span id="line-4340">                  result.append('B');</span>
<span class="source-line-no">4341</span><span id="line-4341">               break;</span>
<span class="source-line-no">4342</span><span id="line-4342">            case 'C':</span>
<span class="source-line-no">4343</span><span id="line-4343">               if (next == 'H') {</span>
<span class="source-line-no">4344</span><span id="line-4344">                  if (prev == 'S')</span>
<span class="source-line-no">4345</span><span id="line-4345">                     result.append('K');</span>
<span class="source-line-no">4346</span><span id="line-4346">                  else</span>
<span class="source-line-no">4347</span><span id="line-4347">                     result.append('X');</span>
<span class="source-line-no">4348</span><span id="line-4348">                  i++;</span>
<span class="source-line-no">4349</span><span id="line-4349">               } else if (next == 'I' || next == 'E' || next == 'Y') {</span>
<span class="source-line-no">4350</span><span id="line-4350">                  result.append('S');</span>
<span class="source-line-no">4351</span><span id="line-4351">               } else {</span>
<span class="source-line-no">4352</span><span id="line-4352">                  result.append('K');</span>
<span class="source-line-no">4353</span><span id="line-4353">               }</span>
<span class="source-line-no">4354</span><span id="line-4354">               break;</span>
<span class="source-line-no">4355</span><span id="line-4355">            case 'D':</span>
<span class="source-line-no">4356</span><span id="line-4356">               if (next == 'G' &amp;&amp; (next2 == 'E' || next2 == 'I' || next2 == 'Y')) {</span>
<span class="source-line-no">4357</span><span id="line-4357">                  result.append('J');</span>
<span class="source-line-no">4358</span><span id="line-4358">                  i++;</span>
<span class="source-line-no">4359</span><span id="line-4359">               } else {</span>
<span class="source-line-no">4360</span><span id="line-4360">                  result.append('T');</span>
<span class="source-line-no">4361</span><span id="line-4361">               }</span>
<span class="source-line-no">4362</span><span id="line-4362">               break;</span>
<span class="source-line-no">4363</span><span id="line-4363">            case 'F':</span>
<span class="source-line-no">4364</span><span id="line-4364">            case 'J':</span>
<span class="source-line-no">4365</span><span id="line-4365">            case 'L':</span>
<span class="source-line-no">4366</span><span id="line-4366">            case 'M':</span>
<span class="source-line-no">4367</span><span id="line-4367">            case 'N':</span>
<span class="source-line-no">4368</span><span id="line-4368">            case 'R':</span>
<span class="source-line-no">4369</span><span id="line-4369">               result.append(c);</span>
<span class="source-line-no">4370</span><span id="line-4370">               break;</span>
<span class="source-line-no">4371</span><span id="line-4371">            case 'G':</span>
<span class="source-line-no">4372</span><span id="line-4372">               if (next == 'H' &amp;&amp; (next2 == 'A' || next2 == 'E' || next2 == 'I' || next2 == 'O' || next2 == 'U')) {</span>
<span class="source-line-no">4373</span><span id="line-4373">                  // Silent GH</span>
<span class="source-line-no">4374</span><span id="line-4374">               } else if (next == 'N' &amp;&amp; (next2 == 'E' || next2 == 'D')) {</span>
<span class="source-line-no">4375</span><span id="line-4375">                  // Silent GN</span>
<span class="source-line-no">4376</span><span id="line-4376">               } else if ((next == 'E' || next == 'I' || next == 'Y') &amp;&amp; prev != 'G') {</span>
<span class="source-line-no">4377</span><span id="line-4377">                  result.append('J');</span>
<span class="source-line-no">4378</span><span id="line-4378">               } else {</span>
<span class="source-line-no">4379</span><span id="line-4379">                  result.append('K');</span>
<span class="source-line-no">4380</span><span id="line-4380">               }</span>
<span class="source-line-no">4381</span><span id="line-4381">               break;</span>
<span class="source-line-no">4382</span><span id="line-4382">            case 'H':</span>
<span class="source-line-no">4383</span><span id="line-4383">               if (! VOWEL.contains(prev) || ! VOWEL.contains(next))</span>
<span class="source-line-no">4384</span><span id="line-4384">                  result.append('H');</span>
<span class="source-line-no">4385</span><span id="line-4385">               break;</span>
<span class="source-line-no">4386</span><span id="line-4386">            case 'K':</span>
<span class="source-line-no">4387</span><span id="line-4387">               if (prev != 'C')</span>
<span class="source-line-no">4388</span><span id="line-4388">                  result.append('K');</span>
<span class="source-line-no">4389</span><span id="line-4389">               break;</span>
<span class="source-line-no">4390</span><span id="line-4390">            case 'P':</span>
<span class="source-line-no">4391</span><span id="line-4391">               if (next == 'H') {</span>
<span class="source-line-no">4392</span><span id="line-4392">                  result.append('F');</span>
<span class="source-line-no">4393</span><span id="line-4393">                  i++;</span>
<span class="source-line-no">4394</span><span id="line-4394">               } else {</span>
<span class="source-line-no">4395</span><span id="line-4395">                  result.append('P');</span>
<span class="source-line-no">4396</span><span id="line-4396">               }</span>
<span class="source-line-no">4397</span><span id="line-4397">               break;</span>
<span class="source-line-no">4398</span><span id="line-4398">            case 'Q':</span>
<span class="source-line-no">4399</span><span id="line-4399">               result.append('K');</span>
<span class="source-line-no">4400</span><span id="line-4400">               break;</span>
<span class="source-line-no">4401</span><span id="line-4401">            case 'S':</span>
<span class="source-line-no">4402</span><span id="line-4402">               if (next == 'H') {</span>
<span class="source-line-no">4403</span><span id="line-4403">                  result.append('X');</span>
<span class="source-line-no">4404</span><span id="line-4404">                  i++;</span>
<span class="source-line-no">4405</span><span id="line-4405">               } else if (next == 'I' &amp;&amp; (next2 == 'O' || next2 == 'A')) {</span>
<span class="source-line-no">4406</span><span id="line-4406">                  result.append('X');</span>
<span class="source-line-no">4407</span><span id="line-4407">                  i++;</span>
<span class="source-line-no">4408</span><span id="line-4408">               } else {</span>
<span class="source-line-no">4409</span><span id="line-4409">                  result.append('S');</span>
<span class="source-line-no">4410</span><span id="line-4410">               }</span>
<span class="source-line-no">4411</span><span id="line-4411">               break;</span>
<span class="source-line-no">4412</span><span id="line-4412">            case 'T':</span>
<span class="source-line-no">4413</span><span id="line-4413">               if (next == 'H') {</span>
<span class="source-line-no">4414</span><span id="line-4414">                  result.append('0'); // TH sound</span>
<span class="source-line-no">4415</span><span id="line-4415">                  i++;</span>
<span class="source-line-no">4416</span><span id="line-4416">               } else if (next == 'I' &amp;&amp; (next2 == 'O' || next2 == 'A')) {</span>
<span class="source-line-no">4417</span><span id="line-4417">                  result.append('X');</span>
<span class="source-line-no">4418</span><span id="line-4418">                  i++;</span>
<span class="source-line-no">4419</span><span id="line-4419">               } else {</span>
<span class="source-line-no">4420</span><span id="line-4420">                  result.append('T');</span>
<span class="source-line-no">4421</span><span id="line-4421">               }</span>
<span class="source-line-no">4422</span><span id="line-4422">               break;</span>
<span class="source-line-no">4423</span><span id="line-4423">            case 'V':</span>
<span class="source-line-no">4424</span><span id="line-4424">               result.append('F');</span>
<span class="source-line-no">4425</span><span id="line-4425">               break;</span>
<span class="source-line-no">4426</span><span id="line-4426">            case 'W', 'Y':</span>
<span class="source-line-no">4427</span><span id="line-4427">               if (VOWEL.contains(next))</span>
<span class="source-line-no">4428</span><span id="line-4428">                  result.append(c);</span>
<span class="source-line-no">4429</span><span id="line-4429">               break;</span>
<span class="source-line-no">4430</span><span id="line-4430">            case 'X':</span>
<span class="source-line-no">4431</span><span id="line-4431">               // X at start is handled in initial section (line 4346-4348), so i is never 0 here</span>
<span class="source-line-no">4432</span><span id="line-4432">               result.append("KS");</span>
<span class="source-line-no">4433</span><span id="line-4433">               break;</span>
<span class="source-line-no">4434</span><span id="line-4434">            case 'Z':</span>
<span class="source-line-no">4435</span><span id="line-4435">               result.append('S');</span>
<span class="source-line-no">4436</span><span id="line-4436">               break;</span>
<span class="source-line-no">4437</span><span id="line-4437">            default:</span>
<span class="source-line-no">4438</span><span id="line-4438">               break;</span>
<span class="source-line-no">4439</span><span id="line-4439">         }</span>
<span class="source-line-no">4440</span><span id="line-4440">         i++;</span>
<span class="source-line-no">4441</span><span id="line-4441">      }</span>
<span class="source-line-no">4442</span><span id="line-4442"></span>
<span class="source-line-no">4443</span><span id="line-4443">      return result.length() &gt; 0 ? result.toString() : upper.substring(0, Math.min(1, upper.length()));</span>
<span class="source-line-no">4444</span><span id="line-4444">   }</span>
<span class="source-line-no">4445</span><span id="line-4445"></span>
<span class="source-line-no">4446</span><span id="line-4446">   /**</span>
<span class="source-line-no">4447</span><span id="line-4447">    * Returns the middle characters of a string.</span>
<span class="source-line-no">4448</span><span id="line-4448">    *</span>
<span class="source-line-no">4449</span><span id="line-4449">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">4450</span><span id="line-4450">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">4451</span><span id="line-4451">    *    mid(&lt;jk&gt;null&lt;/jk&gt;, 1, 3);          &lt;jc&gt;// null&lt;/jc&gt;</span>
<span class="source-line-no">4452</span><span id="line-4452">    *    mid(&lt;js&gt;""&lt;/js&gt;, 1, 3);            &lt;jc&gt;// ""&lt;/jc&gt;</span>
<span class="source-line-no">4453</span><span id="line-4453">    *    mid(&lt;js&gt;"hello"&lt;/js&gt;, 1, 3);       &lt;jc&gt;// "ell"&lt;/jc&gt;</span>
<span class="source-line-no">4454</span><span id="line-4454">    *    mid(&lt;js&gt;"hello"&lt;/js&gt;, 1, 10);      &lt;jc&gt;// "ello"&lt;/jc&gt;</span>
<span class="source-line-no">4455</span><span id="line-4455">    * &lt;/p&gt;</span>
<span class="source-line-no">4456</span><span id="line-4456">    *</span>
<span class="source-line-no">4457</span><span id="line-4457">    * @param str The string to get characters from.</span>
<span class="source-line-no">4458</span><span id="line-4458">    * @param pos The starting position (0-based).</span>
<span class="source-line-no">4459</span><span id="line-4459">    * @param len The number of characters to get.</span>
<span class="source-line-no">4460</span><span id="line-4460">    * @return The middle characters, or &lt;jk&gt;null&lt;/jk&gt; if input is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">4461</span><span id="line-4461">    */</span>
<span class="source-line-no">4462</span><span id="line-4462">   public static String mid(String str, int pos, int len) {</span>
<span class="source-line-no">4463</span><span id="line-4463">      if (str == null)</span>
<span class="source-line-no">4464</span><span id="line-4464">         return null;</span>
<span class="source-line-no">4465</span><span id="line-4465">      if (pos &lt; 0 || len &lt; 0)</span>
<span class="source-line-no">4466</span><span id="line-4466">         return "";</span>
<span class="source-line-no">4467</span><span id="line-4467">      if (pos &gt;= str.length())</span>
<span class="source-line-no">4468</span><span id="line-4468">         return "";</span>
<span class="source-line-no">4469</span><span id="line-4469">      int end = Math.min(pos + len, str.length());</span>
<span class="source-line-no">4470</span><span id="line-4470">      return str.substring(pos, end);</span>
<span class="source-line-no">4471</span><span id="line-4471">   }</span>
<span class="source-line-no">4472</span><span id="line-4472"></span>
<span class="source-line-no">4473</span><span id="line-4473">   /**</span>
<span class="source-line-no">4474</span><span id="line-4474">    * Finds the most frequent character in a string.</span>
<span class="source-line-no">4475</span><span id="line-4475">    *</span>
<span class="source-line-no">4476</span><span id="line-4476">    * &lt;p&gt;</span>
<span class="source-line-no">4477</span><span id="line-4477">    * Returns the character that appears most often. If multiple characters have the same</span>
<span class="source-line-no">4478</span><span id="line-4478">    * frequency, returns the first one encountered.</span>
<span class="source-line-no">4479</span><span id="line-4479">    *</span>
<span class="source-line-no">4480</span><span id="line-4480">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">4481</span><span id="line-4481">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">4482</span><span id="line-4482">    *    mostFrequentChar(&lt;js&gt;"hello"&lt;/js&gt;);     &lt;jc&gt;// 'l'&lt;/jc&gt;</span>
<span class="source-line-no">4483</span><span id="line-4483">    *    mostFrequentChar(&lt;js&gt;"aabbcc"&lt;/js&gt;);    &lt;jc&gt;// 'a' (first encountered)&lt;/jc&gt;</span>
<span class="source-line-no">4484</span><span id="line-4484">    * &lt;/p&gt;</span>
<span class="source-line-no">4485</span><span id="line-4485">    *</span>
<span class="source-line-no">4486</span><span id="line-4486">    * @param str The string to analyze. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">4487</span><span id="line-4487">    * @return The most frequent character, or &lt;c&gt;'\0'&lt;/c&gt; if the string is &lt;jk&gt;null&lt;/jk&gt; or empty.</span>
<span class="source-line-no">4488</span><span id="line-4488">    */</span>
<span class="source-line-no">4489</span><span id="line-4489">   public static char mostFrequentChar(String str) {</span>
<span class="source-line-no">4490</span><span id="line-4490">      if (isEmpty(str))</span>
<span class="source-line-no">4491</span><span id="line-4491">         return '\0';</span>
<span class="source-line-no">4492</span><span id="line-4492"></span>
<span class="source-line-no">4493</span><span id="line-4493">      var charCounts = new int[Character.MAX_VALUE + 1];</span>
<span class="source-line-no">4494</span><span id="line-4494">      var maxCount = 0;</span>
<span class="source-line-no">4495</span><span id="line-4495">      var maxChar = '\0';</span>
<span class="source-line-no">4496</span><span id="line-4496"></span>
<span class="source-line-no">4497</span><span id="line-4497">      // Count occurrences of each character</span>
<span class="source-line-no">4498</span><span id="line-4498">      for (var i = 0; i &lt; str.length(); i++) {</span>
<span class="source-line-no">4499</span><span id="line-4499">         var c = str.charAt(i);</span>
<span class="source-line-no">4500</span><span id="line-4500">         charCounts[c]++;</span>
<span class="source-line-no">4501</span><span id="line-4501">         if (charCounts[c] &gt; maxCount) {</span>
<span class="source-line-no">4502</span><span id="line-4502">            maxCount = charCounts[c];</span>
<span class="source-line-no">4503</span><span id="line-4503">            maxChar = c;</span>
<span class="source-line-no">4504</span><span id="line-4504">         }</span>
<span class="source-line-no">4505</span><span id="line-4505">      }</span>
<span class="source-line-no">4506</span><span id="line-4506"></span>
<span class="source-line-no">4507</span><span id="line-4507">      return maxChar;</span>
<span class="source-line-no">4508</span><span id="line-4508">   }</span>
<span class="source-line-no">4509</span><span id="line-4509"></span>
<span class="source-line-no">4510</span><span id="line-4510">   /**</span>
<span class="source-line-no">4511</span><span id="line-4511">    * Performs natural string comparison that handles numbers correctly.</span>
<span class="source-line-no">4512</span><span id="line-4512">    *</span>
<span class="source-line-no">4513</span><span id="line-4513">    * &lt;p&gt;</span>
<span class="source-line-no">4514</span><span id="line-4514">    * Compares strings in a way that numbers are compared numerically rather than lexicographically.</span>
<span class="source-line-no">4515</span><span id="line-4515">    * For example, "file2.txt" comes before "file10.txt" in natural order.</span>
<span class="source-line-no">4516</span><span id="line-4516">    *</span>
<span class="source-line-no">4517</span><span id="line-4517">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">4518</span><span id="line-4518">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">4519</span><span id="line-4519">    *    naturalCompare(&lt;js&gt;"file2.txt"&lt;/js&gt;, &lt;js&gt;"file10.txt"&lt;/js&gt;);   &lt;jc&gt;// negative (2 &amp;lt; 10)&lt;/jc&gt;</span>
<span class="source-line-no">4520</span><span id="line-4520">    *    naturalCompare(&lt;js&gt;"file10.txt"&lt;/js&gt;, &lt;js&gt;"file2.txt"&lt;/js&gt;);   &lt;jc&gt;// positive (10 &amp;gt; 2)&lt;/jc&gt;</span>
<span class="source-line-no">4521</span><span id="line-4521">    *    naturalCompare(&lt;js&gt;"file1.txt"&lt;/js&gt;, &lt;js&gt;"file1.txt"&lt;/js&gt;);    &lt;jc&gt;// 0 (equal)&lt;/jc&gt;</span>
<span class="source-line-no">4522</span><span id="line-4522">    * &lt;/p&gt;</span>
<span class="source-line-no">4523</span><span id="line-4523">    *</span>
<span class="source-line-no">4524</span><span id="line-4524">    * @param str1 The first string.</span>
<span class="source-line-no">4525</span><span id="line-4525">    * @param str2 The second string.</span>
<span class="source-line-no">4526</span><span id="line-4526">    * @return A negative integer, zero, or a positive integer as the first string is less than, equal to, or greater than the second.</span>
<span class="source-line-no">4527</span><span id="line-4527">    */</span>
<span class="source-line-no">4528</span><span id="line-4528">   public static int naturalCompare(String str1, String str2) {</span>
<span class="source-line-no">4529</span><span id="line-4529">      if (str1 == str2)</span>
<span class="source-line-no">4530</span><span id="line-4530">         return 0;</span>
<span class="source-line-no">4531</span><span id="line-4531">      if (str1 == null)</span>
<span class="source-line-no">4532</span><span id="line-4532">         return -1;</span>
<span class="source-line-no">4533</span><span id="line-4533">      if (str2 == null)</span>
<span class="source-line-no">4534</span><span id="line-4534">         return 1;</span>
<span class="source-line-no">4535</span><span id="line-4535"></span>
<span class="source-line-no">4536</span><span id="line-4536">      var len1 = str1.length();</span>
<span class="source-line-no">4537</span><span id="line-4537">      var len2 = str2.length();</span>
<span class="source-line-no">4538</span><span id="line-4538">      var i1 = 0;</span>
<span class="source-line-no">4539</span><span id="line-4539">      var i2 = 0;</span>
<span class="source-line-no">4540</span><span id="line-4540"></span>
<span class="source-line-no">4541</span><span id="line-4541">      while (i1 &lt; len1 &amp;&amp; i2 &lt; len2) {</span>
<span class="source-line-no">4542</span><span id="line-4542">         var c1 = str1.charAt(i1);</span>
<span class="source-line-no">4543</span><span id="line-4543">         var c2 = str2.charAt(i2);</span>
<span class="source-line-no">4544</span><span id="line-4544"></span>
<span class="source-line-no">4545</span><span id="line-4545">         // If both are digits, compare numerically</span>
<span class="source-line-no">4546</span><span id="line-4546">         if (DIGIT.contains(c1) &amp;&amp; DIGIT.contains(c2)) {</span>
<span class="source-line-no">4547</span><span id="line-4547">            // Skip leading zeros</span>
<span class="source-line-no">4548</span><span id="line-4548">            while (i1 &lt; len1 &amp;&amp; str1.charAt(i1) == '0')</span>
<span class="source-line-no">4549</span><span id="line-4549">               i1++;</span>
<span class="source-line-no">4550</span><span id="line-4550">            while (i2 &lt; len2 &amp;&amp; str2.charAt(i2) == '0')</span>
<span class="source-line-no">4551</span><span id="line-4551">               i2++;</span>
<span class="source-line-no">4552</span><span id="line-4552"></span>
<span class="source-line-no">4553</span><span id="line-4553">            // Find end of number sequences</span>
<span class="source-line-no">4554</span><span id="line-4554">            var end1 = i1;</span>
<span class="source-line-no">4555</span><span id="line-4555">            var end2 = i2;</span>
<span class="source-line-no">4556</span><span id="line-4556">            while (end1 &lt; len1 &amp;&amp; DIGIT.contains(str1.charAt(end1)))</span>
<span class="source-line-no">4557</span><span id="line-4557">               end1++;</span>
<span class="source-line-no">4558</span><span id="line-4558">            while (end2 &lt; len2 &amp;&amp; DIGIT.contains(str2.charAt(end2)))</span>
<span class="source-line-no">4559</span><span id="line-4559">               end2++;</span>
<span class="source-line-no">4560</span><span id="line-4560"></span>
<span class="source-line-no">4561</span><span id="line-4561">            // Compare lengths first (longer number is larger)</span>
<span class="source-line-no">4562</span><span id="line-4562">            var lenNum1 = end1 - i1;</span>
<span class="source-line-no">4563</span><span id="line-4563">            var lenNum2 = end2 - i2;</span>
<span class="source-line-no">4564</span><span id="line-4564">            if (lenNum1 != lenNum2)</span>
<span class="source-line-no">4565</span><span id="line-4565">               return lenNum1 - lenNum2;</span>
<span class="source-line-no">4566</span><span id="line-4566"></span>
<span class="source-line-no">4567</span><span id="line-4567">            // Same length, compare digit by digit</span>
<span class="source-line-no">4568</span><span id="line-4568">            for (var j = 0; j &lt; lenNum1; j++) {</span>
<span class="source-line-no">4569</span><span id="line-4569">               var d1 = str1.charAt(i1 + j);</span>
<span class="source-line-no">4570</span><span id="line-4570">               var d2 = str2.charAt(i2 + j);</span>
<span class="source-line-no">4571</span><span id="line-4571">               if (d1 != d2)</span>
<span class="source-line-no">4572</span><span id="line-4572">                  return d1 - d2;</span>
<span class="source-line-no">4573</span><span id="line-4573">            }</span>
<span class="source-line-no">4574</span><span id="line-4574"></span>
<span class="source-line-no">4575</span><span id="line-4575">            i1 = end1;</span>
<span class="source-line-no">4576</span><span id="line-4576">            i2 = end2;</span>
<span class="source-line-no">4577</span><span id="line-4577">         } else {</span>
<span class="source-line-no">4578</span><span id="line-4578">            // Compare characters (case-insensitive)</span>
<span class="source-line-no">4579</span><span id="line-4579">            var cmp = Character.toLowerCase(c1) - Character.toLowerCase(c2);</span>
<span class="source-line-no">4580</span><span id="line-4580">            if (cmp != 0)</span>
<span class="source-line-no">4581</span><span id="line-4581">               return cmp;</span>
<span class="source-line-no">4582</span><span id="line-4582">            i1++;</span>
<span class="source-line-no">4583</span><span id="line-4583">            i2++;</span>
<span class="source-line-no">4584</span><span id="line-4584">         }</span>
<span class="source-line-no">4585</span><span id="line-4585">      }</span>
<span class="source-line-no">4586</span><span id="line-4586"></span>
<span class="source-line-no">4587</span><span id="line-4587">      return len1 - len2;</span>
<span class="source-line-no">4588</span><span id="line-4588">   }</span>
<span class="source-line-no">4589</span><span id="line-4589"></span>
<span class="source-line-no">4590</span><span id="line-4590">   /**</span>
<span class="source-line-no">4591</span><span id="line-4591">    * Normalizes Unicode characters in a string.</span>
<span class="source-line-no">4592</span><span id="line-4592">    *</span>
<span class="source-line-no">4593</span><span id="line-4593">    * &lt;p&gt;</span>
<span class="source-line-no">4594</span><span id="line-4594">    * Uses Unicode normalization form NFD (Canonical Decomposition).</span>
<span class="source-line-no">4595</span><span id="line-4595">    *</span>
<span class="source-line-no">4596</span><span id="line-4596">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">4597</span><span id="line-4597">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">4598</span><span id="line-4598">    *    normalizeUnicode(&lt;js&gt;"caf"&lt;/js&gt;);</span>
<span class="source-line-no">4599</span><span id="line-4599">    *    &lt;jc&gt;// Normalized form&lt;/jc&gt;</span>
<span class="source-line-no">4600</span><span id="line-4600">    * &lt;/p&gt;</span>
<span class="source-line-no">4601</span><span id="line-4601">    *</span>
<span class="source-line-no">4602</span><span id="line-4602">    * @param str The string to normalize. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">4603</span><span id="line-4603">    * @return The normalized string, or &lt;jk&gt;null&lt;/jk&gt; if input is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">4604</span><span id="line-4604">    */</span>
<span class="source-line-no">4605</span><span id="line-4605">   public static String normalizeUnicode(String str) {</span>
<span class="source-line-no">4606</span><span id="line-4606">      if (str == null)</span>
<span class="source-line-no">4607</span><span id="line-4607">         return null;</span>
<span class="source-line-no">4608</span><span id="line-4608">      return Normalizer.normalize(str, Normalizer.Form.NFD);</span>
<span class="source-line-no">4609</span><span id="line-4609">   }</span>
<span class="source-line-no">4610</span><span id="line-4610"></span>
<span class="source-line-no">4611</span><span id="line-4611">   /**</span>
<span class="source-line-no">4612</span><span id="line-4612">    * Normalizes all whitespace in a string to single spaces.</span>
<span class="source-line-no">4613</span><span id="line-4613">    *</span>
<span class="source-line-no">4614</span><span id="line-4614">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">4615</span><span id="line-4615">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">4616</span><span id="line-4616">    *    normalizeWhitespace(&lt;js&gt;"hello  \t\n  world"&lt;/js&gt;);   &lt;jc&gt;// "hello world"&lt;/jc&gt;</span>
<span class="source-line-no">4617</span><span id="line-4617">    *    normalizeWhitespace(&lt;js&gt;"  hello  world  "&lt;/js&gt;);     &lt;jc&gt;// "hello world"&lt;/jc&gt;</span>
<span class="source-line-no">4618</span><span id="line-4618">    * &lt;/p&gt;</span>
<span class="source-line-no">4619</span><span id="line-4619">    *</span>
<span class="source-line-no">4620</span><span id="line-4620">    * @param str The string to normalize.</span>
<span class="source-line-no">4621</span><span id="line-4621">    * @return The normalized string, or &lt;jk&gt;null&lt;/jk&gt; if input is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">4622</span><span id="line-4622">    */</span>
<span class="source-line-no">4623</span><span id="line-4623">   public static String normalizeWhitespace(String str) {</span>
<span class="source-line-no">4624</span><span id="line-4624">      if (str == null)</span>
<span class="source-line-no">4625</span><span id="line-4625">         return null;</span>
<span class="source-line-no">4626</span><span id="line-4626">      return str.replaceAll("\\s+", " ").trim();</span>
<span class="source-line-no">4627</span><span id="line-4627">   }</span>
<span class="source-line-no">4628</span><span id="line-4628"></span>
<span class="source-line-no">4629</span><span id="line-4629">   /**</span>
<span class="source-line-no">4630</span><span id="line-4630">    * Checks if a string does not contain the specified character.</span>
<span class="source-line-no">4631</span><span id="line-4631">    *</span>
<span class="source-line-no">4632</span><span id="line-4632">    * &lt;p&gt;</span>
<span class="source-line-no">4633</span><span id="line-4633">    * This is the inverse of {@link #contains(String, char)}.</span>
<span class="source-line-no">4634</span><span id="line-4634">    * Returns &lt;jk&gt;true&lt;/jk&gt; if the string is &lt;jk&gt;null&lt;/jk&gt; or does not contain the character.</span>
<span class="source-line-no">4635</span><span id="line-4635">    *</span>
<span class="source-line-no">4636</span><span id="line-4636">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">4637</span><span id="line-4637">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">4638</span><span id="line-4638">    *    notContains(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;'x'&lt;/js&gt;);   &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">4639</span><span id="line-4639">    *    notContains(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;'o'&lt;/js&gt;);   &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">4640</span><span id="line-4640">    *    notContains(&lt;jk&gt;null&lt;/jk&gt;, &lt;js&gt;'a'&lt;/js&gt;);            &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">4641</span><span id="line-4641">    * &lt;/p&gt;</span>
<span class="source-line-no">4642</span><span id="line-4642">    *</span>
<span class="source-line-no">4643</span><span id="line-4643">    * @param s The string to check.</span>
<span class="source-line-no">4644</span><span id="line-4644">    * @param c The character to check for.</span>
<span class="source-line-no">4645</span><span id="line-4645">    * @return &lt;jk&gt;true&lt;/jk&gt; if the string does not contain the specified character.</span>
<span class="source-line-no">4646</span><span id="line-4646">    * @see #contains(String, char)</span>
<span class="source-line-no">4647</span><span id="line-4647">    * @see #notContainsAny(String, char...)</span>
<span class="source-line-no">4648</span><span id="line-4648">    */</span>
<span class="source-line-no">4649</span><span id="line-4649">   public static boolean notContains(String s, char c) {</span>
<span class="source-line-no">4650</span><span id="line-4650">      return ! contains(s, c);</span>
<span class="source-line-no">4651</span><span id="line-4651">   }</span>
<span class="source-line-no">4652</span><span id="line-4652"></span>
<span class="source-line-no">4653</span><span id="line-4653">   /**</span>
<span class="source-line-no">4654</span><span id="line-4654">    * Checks if a string does not contain the specified substring.</span>
<span class="source-line-no">4655</span><span id="line-4655">    *</span>
<span class="source-line-no">4656</span><span id="line-4656">    * &lt;p&gt;</span>
<span class="source-line-no">4657</span><span id="line-4657">    * This is the inverse of {@link #contains(String, CharSequence)}.</span>
<span class="source-line-no">4658</span><span id="line-4658">    * Returns &lt;jk&gt;true&lt;/jk&gt; if the string is &lt;jk&gt;null&lt;/jk&gt; or does not contain the substring.</span>
<span class="source-line-no">4659</span><span id="line-4659">    *</span>
<span class="source-line-no">4660</span><span id="line-4660">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">4661</span><span id="line-4661">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">4662</span><span id="line-4662">    *    notContains(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;"Foo"&lt;/js&gt;);     &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">4663</span><span id="line-4663">    *    notContains(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;"World"&lt;/js&gt;);   &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">4664</span><span id="line-4664">    *    notContains(&lt;jk&gt;null&lt;/jk&gt;, &lt;js&gt;"Hello"&lt;/js&gt;);            &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">4665</span><span id="line-4665">    * &lt;/p&gt;</span>
<span class="source-line-no">4666</span><span id="line-4666">    *</span>
<span class="source-line-no">4667</span><span id="line-4667">    * @param s The string to check.</span>
<span class="source-line-no">4668</span><span id="line-4668">    * @param substring The substring to check for.</span>
<span class="source-line-no">4669</span><span id="line-4669">    * @return &lt;jk&gt;true&lt;/jk&gt; if the string does not contain the specified substring.</span>
<span class="source-line-no">4670</span><span id="line-4670">    * @see #contains(String, CharSequence)</span>
<span class="source-line-no">4671</span><span id="line-4671">    * @see #notContainsAny(String, CharSequence...)</span>
<span class="source-line-no">4672</span><span id="line-4672">    */</span>
<span class="source-line-no">4673</span><span id="line-4673">   public static boolean notContains(String s, CharSequence substring) {</span>
<span class="source-line-no">4674</span><span id="line-4674">      return ! contains(s, substring);</span>
<span class="source-line-no">4675</span><span id="line-4675">   }</span>
<span class="source-line-no">4676</span><span id="line-4676"></span>
<span class="source-line-no">4677</span><span id="line-4677">   /**</span>
<span class="source-line-no">4678</span><span id="line-4678">    * Checks if a string does not contain the specified substring.</span>
<span class="source-line-no">4679</span><span id="line-4679">    *</span>
<span class="source-line-no">4680</span><span id="line-4680">    * &lt;p&gt;</span>
<span class="source-line-no">4681</span><span id="line-4681">    * This is the inverse of {@link #contains(String, String)}.</span>
<span class="source-line-no">4682</span><span id="line-4682">    * Returns &lt;jk&gt;true&lt;/jk&gt; if the string is &lt;jk&gt;null&lt;/jk&gt; or does not contain the substring.</span>
<span class="source-line-no">4683</span><span id="line-4683">    *</span>
<span class="source-line-no">4684</span><span id="line-4684">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">4685</span><span id="line-4685">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">4686</span><span id="line-4686">    *    notContains(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;"Foo"&lt;/js&gt;);     &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">4687</span><span id="line-4687">    *    notContains(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;"World"&lt;/js&gt;);   &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">4688</span><span id="line-4688">    *    notContains(&lt;jk&gt;null&lt;/jk&gt;, &lt;js&gt;"Hello"&lt;/js&gt;);            &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">4689</span><span id="line-4689">    * &lt;/p&gt;</span>
<span class="source-line-no">4690</span><span id="line-4690">    *</span>
<span class="source-line-no">4691</span><span id="line-4691">    * @param s The string to check.</span>
<span class="source-line-no">4692</span><span id="line-4692">    * @param substring The substring to check for.</span>
<span class="source-line-no">4693</span><span id="line-4693">    * @return &lt;jk&gt;true&lt;/jk&gt; if the string does not contain the specified substring.</span>
<span class="source-line-no">4694</span><span id="line-4694">    * @see #contains(String, String)</span>
<span class="source-line-no">4695</span><span id="line-4695">    * @see #notContainsAny(String, String...)</span>
<span class="source-line-no">4696</span><span id="line-4696">    */</span>
<span class="source-line-no">4697</span><span id="line-4697">   public static boolean notContains(String s, String substring) {</span>
<span class="source-line-no">4698</span><span id="line-4698">      return ! contains(s, substring);</span>
<span class="source-line-no">4699</span><span id="line-4699">   }</span>
<span class="source-line-no">4700</span><span id="line-4700"></span>
<span class="source-line-no">4701</span><span id="line-4701">   /**</span>
<span class="source-line-no">4702</span><span id="line-4702">    * Checks if a string does not contain all of the specified characters.</span>
<span class="source-line-no">4703</span><span id="line-4703">    *</span>
<span class="source-line-no">4704</span><span id="line-4704">    * &lt;p&gt;</span>
<span class="source-line-no">4705</span><span id="line-4705">    * This is the inverse of {@link #containsAll(String, char...)}.</span>
<span class="source-line-no">4706</span><span id="line-4706">    * Returns &lt;jk&gt;true&lt;/jk&gt; if:</span>
<span class="source-line-no">4707</span><span id="line-4707">    * &lt;ul&gt;</span>
<span class="source-line-no">4708</span><span id="line-4708">    *   &lt;li&gt;The string is &lt;jk&gt;null&lt;/jk&gt;&lt;/li&gt;</span>
<span class="source-line-no">4709</span><span id="line-4709">    *   &lt;li&gt;The values array is &lt;jk&gt;null&lt;/jk&gt; or empty&lt;/li&gt;</span>
<span class="source-line-no">4710</span><span id="line-4710">    *   &lt;li&gt;Any of the specified characters are not found in the string&lt;/li&gt;</span>
<span class="source-line-no">4711</span><span id="line-4711">    * &lt;/ul&gt;</span>
<span class="source-line-no">4712</span><span id="line-4712">    *</span>
<span class="source-line-no">4713</span><span id="line-4713">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">4714</span><span id="line-4714">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">4715</span><span id="line-4715">    *    notContainsAll(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;'H'&lt;/js&gt;, &lt;js&gt;'x'&lt;/js&gt;);                &lt;jc&gt;// true (missing 'x')&lt;/jc&gt;</span>
<span class="source-line-no">4716</span><span id="line-4716">    *    notContainsAll(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;'H'&lt;/js&gt;, &lt;js&gt;'e'&lt;/js&gt;, &lt;js&gt;'l'&lt;/js&gt;);   &lt;jc&gt;// false (contains all)&lt;/jc&gt;</span>
<span class="source-line-no">4717</span><span id="line-4717">    *    notContainsAll(&lt;jk&gt;null&lt;/jk&gt;, &lt;js&gt;'a'&lt;/js&gt;);                                      &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">4718</span><span id="line-4718">    * &lt;/p&gt;</span>
<span class="source-line-no">4719</span><span id="line-4719">    *</span>
<span class="source-line-no">4720</span><span id="line-4720">    * @param s The string to check.</span>
<span class="source-line-no">4721</span><span id="line-4721">    * @param values The characters to check for.</span>
<span class="source-line-no">4722</span><span id="line-4722">    * @return &lt;jk&gt;true&lt;/jk&gt; if the string does not contain all of the specified characters.</span>
<span class="source-line-no">4723</span><span id="line-4723">    * @see #containsAll(String, char...)</span>
<span class="source-line-no">4724</span><span id="line-4724">    */</span>
<span class="source-line-no">4725</span><span id="line-4725">   public static boolean notContainsAll(String s, char...values) {</span>
<span class="source-line-no">4726</span><span id="line-4726">      return ! containsAll(s, values);</span>
<span class="source-line-no">4727</span><span id="line-4727">   }</span>
<span class="source-line-no">4728</span><span id="line-4728"></span>
<span class="source-line-no">4729</span><span id="line-4729">   /**</span>
<span class="source-line-no">4730</span><span id="line-4730">    * Checks if a string does not contain all of the specified substrings.</span>
<span class="source-line-no">4731</span><span id="line-4731">    *</span>
<span class="source-line-no">4732</span><span id="line-4732">    * &lt;p&gt;</span>
<span class="source-line-no">4733</span><span id="line-4733">    * This is the inverse of {@link #containsAll(String, CharSequence...)}.</span>
<span class="source-line-no">4734</span><span id="line-4734">    * Returns &lt;jk&gt;true&lt;/jk&gt; if:</span>
<span class="source-line-no">4735</span><span id="line-4735">    * &lt;ul&gt;</span>
<span class="source-line-no">4736</span><span id="line-4736">    *   &lt;li&gt;The string is &lt;jk&gt;null&lt;/jk&gt;&lt;/li&gt;</span>
<span class="source-line-no">4737</span><span id="line-4737">    *   &lt;li&gt;The values array is &lt;jk&gt;null&lt;/jk&gt; or empty&lt;/li&gt;</span>
<span class="source-line-no">4738</span><span id="line-4738">    *   &lt;li&gt;Any of the specified substrings are not found in the string&lt;/li&gt;</span>
<span class="source-line-no">4739</span><span id="line-4739">    * &lt;/ul&gt;</span>
<span class="source-line-no">4740</span><span id="line-4740">    *</span>
<span class="source-line-no">4741</span><span id="line-4741">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">4742</span><span id="line-4742">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">4743</span><span id="line-4743">    *    notContainsAll(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;"Hello"&lt;/js&gt;, &lt;js&gt;"Foo"&lt;/js&gt;);    &lt;jc&gt;// true (missing "Foo")&lt;/jc&gt;</span>
<span class="source-line-no">4744</span><span id="line-4744">    *    notContainsAll(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;"Hello"&lt;/js&gt;, &lt;js&gt;"World"&lt;/js&gt;);   &lt;jc&gt;// false (contains all)&lt;/jc&gt;</span>
<span class="source-line-no">4745</span><span id="line-4745">    *    notContainsAll(&lt;jk&gt;null&lt;/jk&gt;, &lt;js&gt;"Hello"&lt;/js&gt;);                              &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">4746</span><span id="line-4746">    * &lt;/p&gt;</span>
<span class="source-line-no">4747</span><span id="line-4747">    *</span>
<span class="source-line-no">4748</span><span id="line-4748">    * @param s The string to check.</span>
<span class="source-line-no">4749</span><span id="line-4749">    * @param values The substrings to check for.</span>
<span class="source-line-no">4750</span><span id="line-4750">    * @return &lt;jk&gt;true&lt;/jk&gt; if the string does not contain all of the specified substrings.</span>
<span class="source-line-no">4751</span><span id="line-4751">    * @see #containsAll(String, CharSequence...)</span>
<span class="source-line-no">4752</span><span id="line-4752">    */</span>
<span class="source-line-no">4753</span><span id="line-4753">   public static boolean notContainsAll(String s, CharSequence...values) {</span>
<span class="source-line-no">4754</span><span id="line-4754">      return ! containsAll(s, values);</span>
<span class="source-line-no">4755</span><span id="line-4755">   }</span>
<span class="source-line-no">4756</span><span id="line-4756"></span>
<span class="source-line-no">4757</span><span id="line-4757">   /**</span>
<span class="source-line-no">4758</span><span id="line-4758">    * Checks if a string does not contain all of the specified substrings.</span>
<span class="source-line-no">4759</span><span id="line-4759">    *</span>
<span class="source-line-no">4760</span><span id="line-4760">    * &lt;p&gt;</span>
<span class="source-line-no">4761</span><span id="line-4761">    * This is the inverse of {@link #containsAll(String, String...)}.</span>
<span class="source-line-no">4762</span><span id="line-4762">    * Returns &lt;jk&gt;true&lt;/jk&gt; if:</span>
<span class="source-line-no">4763</span><span id="line-4763">    * &lt;ul&gt;</span>
<span class="source-line-no">4764</span><span id="line-4764">    *   &lt;li&gt;The string is &lt;jk&gt;null&lt;/jk&gt;&lt;/li&gt;</span>
<span class="source-line-no">4765</span><span id="line-4765">    *   &lt;li&gt;The values array is &lt;jk&gt;null&lt;/jk&gt; or empty&lt;/li&gt;</span>
<span class="source-line-no">4766</span><span id="line-4766">    *   &lt;li&gt;Any of the specified substrings are not found in the string&lt;/li&gt;</span>
<span class="source-line-no">4767</span><span id="line-4767">    * &lt;/ul&gt;</span>
<span class="source-line-no">4768</span><span id="line-4768">    *</span>
<span class="source-line-no">4769</span><span id="line-4769">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">4770</span><span id="line-4770">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">4771</span><span id="line-4771">    *    notContainsAll(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;"Hello"&lt;/js&gt;, &lt;js&gt;"Foo"&lt;/js&gt;);    &lt;jc&gt;// true (missing "Foo")&lt;/jc&gt;</span>
<span class="source-line-no">4772</span><span id="line-4772">    *    notContainsAll(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;"Hello"&lt;/js&gt;, &lt;js&gt;"World"&lt;/js&gt;);   &lt;jc&gt;// false (contains all)&lt;/jc&gt;</span>
<span class="source-line-no">4773</span><span id="line-4773">    *    notContainsAll(&lt;jk&gt;null&lt;/jk&gt;, &lt;js&gt;"Hello"&lt;/js&gt;);                              &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">4774</span><span id="line-4774">    * &lt;/p&gt;</span>
<span class="source-line-no">4775</span><span id="line-4775">    *</span>
<span class="source-line-no">4776</span><span id="line-4776">    * @param s The string to check.</span>
<span class="source-line-no">4777</span><span id="line-4777">    * @param values The substrings to check for.</span>
<span class="source-line-no">4778</span><span id="line-4778">    * @return &lt;jk&gt;true&lt;/jk&gt; if the string does not contain all of the specified substrings.</span>
<span class="source-line-no">4779</span><span id="line-4779">    * @see #containsAll(String, String...)</span>
<span class="source-line-no">4780</span><span id="line-4780">    */</span>
<span class="source-line-no">4781</span><span id="line-4781">   public static boolean notContainsAll(String s, String...values) {</span>
<span class="source-line-no">4782</span><span id="line-4782">      return ! containsAll(s, values);</span>
<span class="source-line-no">4783</span><span id="line-4783">   }</span>
<span class="source-line-no">4784</span><span id="line-4784"></span>
<span class="source-line-no">4785</span><span id="line-4785">   /**</span>
<span class="source-line-no">4786</span><span id="line-4786">    * Checks if a string does not contain any of the specified characters.</span>
<span class="source-line-no">4787</span><span id="line-4787">    *</span>
<span class="source-line-no">4788</span><span id="line-4788">    * &lt;p&gt;</span>
<span class="source-line-no">4789</span><span id="line-4789">    * This is the inverse of {@link #containsAny(String, char...)}.</span>
<span class="source-line-no">4790</span><span id="line-4790">    * Returns &lt;jk&gt;true&lt;/jk&gt; if:</span>
<span class="source-line-no">4791</span><span id="line-4791">    * &lt;ul&gt;</span>
<span class="source-line-no">4792</span><span id="line-4792">    *   &lt;li&gt;The string is &lt;jk&gt;null&lt;/jk&gt;&lt;/li&gt;</span>
<span class="source-line-no">4793</span><span id="line-4793">    *   &lt;li&gt;The values array is &lt;jk&gt;null&lt;/jk&gt; or empty&lt;/li&gt;</span>
<span class="source-line-no">4794</span><span id="line-4794">    *   &lt;li&gt;None of the specified characters are found in the string&lt;/li&gt;</span>
<span class="source-line-no">4795</span><span id="line-4795">    * &lt;/ul&gt;</span>
<span class="source-line-no">4796</span><span id="line-4796">    *</span>
<span class="source-line-no">4797</span><span id="line-4797">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">4798</span><span id="line-4798">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">4799</span><span id="line-4799">    *    notContainsAny(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;'x'&lt;/js&gt;, &lt;js&gt;'y'&lt;/js&gt;);   &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">4800</span><span id="line-4800">    *    notContainsAny(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;'o'&lt;/js&gt;, &lt;js&gt;'x'&lt;/js&gt;);   &lt;jc&gt;// false (contains 'o')&lt;/jc&gt;</span>
<span class="source-line-no">4801</span><span id="line-4801">    *    notContainsAny(&lt;jk&gt;null&lt;/jk&gt;, &lt;js&gt;'a'&lt;/js&gt;);                          &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">4802</span><span id="line-4802">    * &lt;/p&gt;</span>
<span class="source-line-no">4803</span><span id="line-4803">    *</span>
<span class="source-line-no">4804</span><span id="line-4804">    * @param s The string to check.</span>
<span class="source-line-no">4805</span><span id="line-4805">    * @param values The characters to check for.</span>
<span class="source-line-no">4806</span><span id="line-4806">    * @return &lt;jk&gt;true&lt;/jk&gt; if the string does not contain any of the specified characters.</span>
<span class="source-line-no">4807</span><span id="line-4807">    * @see #containsAny(String, char...)</span>
<span class="source-line-no">4808</span><span id="line-4808">    * @see #notContainsAll(String, char...)</span>
<span class="source-line-no">4809</span><span id="line-4809">    */</span>
<span class="source-line-no">4810</span><span id="line-4810">   public static boolean notContainsAny(String s, char...values) {</span>
<span class="source-line-no">4811</span><span id="line-4811">      return ! containsAny(s, values);</span>
<span class="source-line-no">4812</span><span id="line-4812">   }</span>
<span class="source-line-no">4813</span><span id="line-4813"></span>
<span class="source-line-no">4814</span><span id="line-4814">   /**</span>
<span class="source-line-no">4815</span><span id="line-4815">    * Checks if a string does not contain any of the specified substrings.</span>
<span class="source-line-no">4816</span><span id="line-4816">    *</span>
<span class="source-line-no">4817</span><span id="line-4817">    * &lt;p&gt;</span>
<span class="source-line-no">4818</span><span id="line-4818">    * This is the inverse of {@link #containsAny(String, CharSequence...)}.</span>
<span class="source-line-no">4819</span><span id="line-4819">    * Returns &lt;jk&gt;true&lt;/jk&gt; if:</span>
<span class="source-line-no">4820</span><span id="line-4820">    * &lt;ul&gt;</span>
<span class="source-line-no">4821</span><span id="line-4821">    *   &lt;li&gt;The string is &lt;jk&gt;null&lt;/jk&gt;&lt;/li&gt;</span>
<span class="source-line-no">4822</span><span id="line-4822">    *   &lt;li&gt;The values array is &lt;jk&gt;null&lt;/jk&gt; or empty&lt;/li&gt;</span>
<span class="source-line-no">4823</span><span id="line-4823">    *   &lt;li&gt;None of the specified substrings are found in the string&lt;/li&gt;</span>
<span class="source-line-no">4824</span><span id="line-4824">    * &lt;/ul&gt;</span>
<span class="source-line-no">4825</span><span id="line-4825">    *</span>
<span class="source-line-no">4826</span><span id="line-4826">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">4827</span><span id="line-4827">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">4828</span><span id="line-4828">    *    notContainsAny(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;"Foo"&lt;/js&gt;, &lt;js&gt;"Bar"&lt;/js&gt;);    &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">4829</span><span id="line-4829">    *    notContainsAny(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;"Hello"&lt;/js&gt;, &lt;js&gt;"Foo"&lt;/js&gt;);  &lt;jc&gt;// false (contains "Hello")&lt;/jc&gt;</span>
<span class="source-line-no">4830</span><span id="line-4830">    *    notContainsAny(&lt;jk&gt;null&lt;/jk&gt;, &lt;js&gt;"Hello"&lt;/js&gt;);                            &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">4831</span><span id="line-4831">    * &lt;/p&gt;</span>
<span class="source-line-no">4832</span><span id="line-4832">    *</span>
<span class="source-line-no">4833</span><span id="line-4833">    * @param s The string to check.</span>
<span class="source-line-no">4834</span><span id="line-4834">    * @param values The substrings to check for.</span>
<span class="source-line-no">4835</span><span id="line-4835">    * @return &lt;jk&gt;true&lt;/jk&gt; if the string does not contain any of the specified substrings.</span>
<span class="source-line-no">4836</span><span id="line-4836">    * @see #containsAny(String, CharSequence...)</span>
<span class="source-line-no">4837</span><span id="line-4837">    * @see #notContainsAll(String, CharSequence...)</span>
<span class="source-line-no">4838</span><span id="line-4838">    */</span>
<span class="source-line-no">4839</span><span id="line-4839">   public static boolean notContainsAny(String s, CharSequence...values) {</span>
<span class="source-line-no">4840</span><span id="line-4840">      return ! containsAny(s, values);</span>
<span class="source-line-no">4841</span><span id="line-4841">   }</span>
<span class="source-line-no">4842</span><span id="line-4842"></span>
<span class="source-line-no">4843</span><span id="line-4843">   /**</span>
<span class="source-line-no">4844</span><span id="line-4844">    * Checks if a string does not contain any of the specified substrings.</span>
<span class="source-line-no">4845</span><span id="line-4845">    *</span>
<span class="source-line-no">4846</span><span id="line-4846">    * &lt;p&gt;</span>
<span class="source-line-no">4847</span><span id="line-4847">    * This is the inverse of {@link #containsAny(String, String...)}.</span>
<span class="source-line-no">4848</span><span id="line-4848">    * Returns &lt;jk&gt;true&lt;/jk&gt; if:</span>
<span class="source-line-no">4849</span><span id="line-4849">    * &lt;ul&gt;</span>
<span class="source-line-no">4850</span><span id="line-4850">    *   &lt;li&gt;The string is &lt;jk&gt;null&lt;/jk&gt;&lt;/li&gt;</span>
<span class="source-line-no">4851</span><span id="line-4851">    *   &lt;li&gt;The values array is &lt;jk&gt;null&lt;/jk&gt; or empty&lt;/li&gt;</span>
<span class="source-line-no">4852</span><span id="line-4852">    *   &lt;li&gt;None of the specified substrings are found in the string&lt;/li&gt;</span>
<span class="source-line-no">4853</span><span id="line-4853">    * &lt;/ul&gt;</span>
<span class="source-line-no">4854</span><span id="line-4854">    *</span>
<span class="source-line-no">4855</span><span id="line-4855">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">4856</span><span id="line-4856">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">4857</span><span id="line-4857">    *    notContainsAny(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;"Foo"&lt;/js&gt;, &lt;js&gt;"Bar"&lt;/js&gt;);    &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">4858</span><span id="line-4858">    *    notContainsAny(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;"Hello"&lt;/js&gt;, &lt;js&gt;"Foo"&lt;/js&gt;);  &lt;jc&gt;// false (contains "Hello")&lt;/jc&gt;</span>
<span class="source-line-no">4859</span><span id="line-4859">    *    notContainsAny(&lt;jk&gt;null&lt;/jk&gt;, &lt;js&gt;"Hello"&lt;/js&gt;);                            &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">4860</span><span id="line-4860">    * &lt;/p&gt;</span>
<span class="source-line-no">4861</span><span id="line-4861">    *</span>
<span class="source-line-no">4862</span><span id="line-4862">    * @param s The string to check.</span>
<span class="source-line-no">4863</span><span id="line-4863">    * @param values The substrings to check for.</span>
<span class="source-line-no">4864</span><span id="line-4864">    * @return &lt;jk&gt;true&lt;/jk&gt; if the string does not contain any of the specified substrings.</span>
<span class="source-line-no">4865</span><span id="line-4865">    * @see #containsAny(String, String...)</span>
<span class="source-line-no">4866</span><span id="line-4866">    * @see #notContainsAll(String, String...)</span>
<span class="source-line-no">4867</span><span id="line-4867">    */</span>
<span class="source-line-no">4868</span><span id="line-4868">   public static boolean notContainsAny(String s, String...values) {</span>
<span class="source-line-no">4869</span><span id="line-4869">      return ! containsAny(s, values);</span>
<span class="source-line-no">4870</span><span id="line-4870">   }</span>
<span class="source-line-no">4871</span><span id="line-4871"></span>
<span class="source-line-no">4872</span><span id="line-4872">   /**</span>
<span class="source-line-no">4873</span><span id="line-4873">    * Returns an obfuscated version of the specified string.</span>
<span class="source-line-no">4874</span><span id="line-4874">    *</span>
<span class="source-line-no">4875</span><span id="line-4875">    * @param s The string to obfuscate.</span>
<span class="source-line-no">4876</span><span id="line-4876">    * @return The obfuscated string with most characters replaced by asterisks.</span>
<span class="source-line-no">4877</span><span id="line-4877">    */</span>
<span class="source-line-no">4878</span><span id="line-4878">   public static String obfuscate(String s) {</span>
<span class="source-line-no">4879</span><span id="line-4879">      if (s == null || s.length() &lt; 2)</span>
<span class="source-line-no">4880</span><span id="line-4880">         return "*";</span>
<span class="source-line-no">4881</span><span id="line-4881">      return s.substring(0, 1) + s.substring(1).replaceAll(".", "*");  // NOSONAR</span>
<span class="source-line-no">4882</span><span id="line-4882">   }</span>
<span class="source-line-no">4883</span><span id="line-4883"></span>
<span class="source-line-no">4884</span><span id="line-4884">   /**</span>
<span class="source-line-no">4885</span><span id="line-4885">    * Converts a number to its ordinal form (1st, 2nd, 3rd, 4th, etc.).</span>
<span class="source-line-no">4886</span><span id="line-4886">    *</span>
<span class="source-line-no">4887</span><span id="line-4887">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">4888</span><span id="line-4888">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">4889</span><span id="line-4889">    *    ordinal(&lt;js&gt;1&lt;/js&gt;);     &lt;jc&gt;// "1st"&lt;/jc&gt;</span>
<span class="source-line-no">4890</span><span id="line-4890">    *    ordinal(&lt;js&gt;2&lt;/js&gt;);     &lt;jc&gt;// "2nd"&lt;/jc&gt;</span>
<span class="source-line-no">4891</span><span id="line-4891">    *    ordinal(&lt;js&gt;3&lt;/js&gt;);     &lt;jc&gt;// "3rd"&lt;/jc&gt;</span>
<span class="source-line-no">4892</span><span id="line-4892">    *    ordinal(&lt;js&gt;4&lt;/js&gt;);     &lt;jc&gt;// "4th"&lt;/jc&gt;</span>
<span class="source-line-no">4893</span><span id="line-4893">    *    ordinal(&lt;js&gt;11&lt;/js&gt;);    &lt;jc&gt;// "11th"&lt;/jc&gt;</span>
<span class="source-line-no">4894</span><span id="line-4894">    *    ordinal(&lt;js&gt;21&lt;/js&gt;);    &lt;jc&gt;// "21st"&lt;/jc&gt;</span>
<span class="source-line-no">4895</span><span id="line-4895">    * &lt;/p&gt;</span>
<span class="source-line-no">4896</span><span id="line-4896">    *</span>
<span class="source-line-no">4897</span><span id="line-4897">    * @param number The number to convert.</span>
<span class="source-line-no">4898</span><span id="line-4898">    * @return The ordinal string representation of the number.</span>
<span class="source-line-no">4899</span><span id="line-4899">    */</span>
<span class="source-line-no">4900</span><span id="line-4900">   public static String ordinal(int number) {</span>
<span class="source-line-no">4901</span><span id="line-4901">      var abs = Math.abs(number);</span>
<span class="source-line-no">4902</span><span id="line-4902">      var suffix = "th";</span>
<span class="source-line-no">4903</span><span id="line-4903"></span>
<span class="source-line-no">4904</span><span id="line-4904">      // Special cases for 11, 12, 13 (all use "th")</span>
<span class="source-line-no">4905</span><span id="line-4905">      if (abs % 100 != 11 &amp;&amp; abs % 100 != 12 &amp;&amp; abs % 100 != 13) {</span>
<span class="source-line-no">4906</span><span id="line-4906">         var lastDigit = abs % 10;</span>
<span class="source-line-no">4907</span><span id="line-4907">         if (lastDigit == 1)</span>
<span class="source-line-no">4908</span><span id="line-4908">            suffix = "st";</span>
<span class="source-line-no">4909</span><span id="line-4909">         else if (lastDigit == 2)</span>
<span class="source-line-no">4910</span><span id="line-4910">            suffix = "nd";</span>
<span class="source-line-no">4911</span><span id="line-4911">         else if (lastDigit == 3)</span>
<span class="source-line-no">4912</span><span id="line-4912">            suffix = "rd";</span>
<span class="source-line-no">4913</span><span id="line-4913">      }</span>
<span class="source-line-no">4914</span><span id="line-4914"></span>
<span class="source-line-no">4915</span><span id="line-4915">      return number + suffix;</span>
<span class="source-line-no">4916</span><span id="line-4916">   }</span>
<span class="source-line-no">4917</span><span id="line-4917"></span>
<span class="source-line-no">4918</span><span id="line-4918">   /**</span>
<span class="source-line-no">4919</span><span id="line-4919">    * Center pads a string with a specified character.</span>
<span class="source-line-no">4920</span><span id="line-4920">    *</span>
<span class="source-line-no">4921</span><span id="line-4921">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">4922</span><span id="line-4922">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">4923</span><span id="line-4923">    *    padCenter(&lt;jk&gt;null&lt;/jk&gt;, 5, &lt;js&gt;' '&lt;/js&gt;);          &lt;jc&gt;// "     "&lt;/jc&gt;</span>
<span class="source-line-no">4924</span><span id="line-4924">    *    padCenter(&lt;js&gt;""&lt;/js&gt;, 5, &lt;js&gt;' '&lt;/js&gt;);            &lt;jc&gt;// "     "&lt;/jc&gt;</span>
<span class="source-line-no">4925</span><span id="line-4925">    *    padCenter(&lt;js&gt;"hi"&lt;/js&gt;, 6, &lt;js&gt;' '&lt;/js&gt;);          &lt;jc&gt;// "  hi  "&lt;/jc&gt;</span>
<span class="source-line-no">4926</span><span id="line-4926">    *    padCenter(&lt;js&gt;"hi"&lt;/js&gt;, 7, &lt;js&gt;' '&lt;/js&gt;);          &lt;jc&gt;// "   hi  "&lt;/jc&gt;</span>
<span class="source-line-no">4927</span><span id="line-4927">    *    padCenter(&lt;js&gt;"hello"&lt;/js&gt;, 3, &lt;js&gt;' '&lt;/js&gt;);       &lt;jc&gt;// "hello"&lt;/jc&gt;</span>
<span class="source-line-no">4928</span><span id="line-4928">    * &lt;/p&gt;</span>
<span class="source-line-no">4929</span><span id="line-4929">    *</span>
<span class="source-line-no">4930</span><span id="line-4930">    * @param str The string to pad.</span>
<span class="source-line-no">4931</span><span id="line-4931">    * @param size The desired total string length.</span>
<span class="source-line-no">4932</span><span id="line-4932">    * @param padChar The character to pad with.</span>
<span class="source-line-no">4933</span><span id="line-4933">    * @return The center-padded string.</span>
<span class="source-line-no">4934</span><span id="line-4934">    */</span>
<span class="source-line-no">4935</span><span id="line-4935">   public static String padCenter(String str, int size, char padChar) {</span>
<span class="source-line-no">4936</span><span id="line-4936">      if (str == null)</span>
<span class="source-line-no">4937</span><span id="line-4937">         str = "";</span>
<span class="source-line-no">4938</span><span id="line-4938">      int pads = size - str.length();</span>
<span class="source-line-no">4939</span><span id="line-4939">      if (pads &lt;= 0)</span>
<span class="source-line-no">4940</span><span id="line-4940">         return str;</span>
<span class="source-line-no">4941</span><span id="line-4941">      int rightPads = pads / 2;</span>
<span class="source-line-no">4942</span><span id="line-4942">      int leftPads = pads - rightPads;</span>
<span class="source-line-no">4943</span><span id="line-4943">      return String.valueOf(padChar).repeat(leftPads) + str + String.valueOf(padChar).repeat(rightPads);</span>
<span class="source-line-no">4944</span><span id="line-4944">   }</span>
<span class="source-line-no">4945</span><span id="line-4945"></span>
<span class="source-line-no">4946</span><span id="line-4946">   /**</span>
<span class="source-line-no">4947</span><span id="line-4947">    * Left pads a string with a specified character.</span>
<span class="source-line-no">4948</span><span id="line-4948">    *</span>
<span class="source-line-no">4949</span><span id="line-4949">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">4950</span><span id="line-4950">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">4951</span><span id="line-4951">    *    padLeft(&lt;jk&gt;null&lt;/jk&gt;, 5, &lt;js&gt;' '&lt;/js&gt;);          &lt;jc&gt;// "     "&lt;/jc&gt;</span>
<span class="source-line-no">4952</span><span id="line-4952">    *    padLeft(&lt;js&gt;""&lt;/js&gt;, 5, &lt;js&gt;' '&lt;/js&gt;);            &lt;jc&gt;// "     "&lt;/jc&gt;</span>
<span class="source-line-no">4953</span><span id="line-4953">    *    padLeft(&lt;js&gt;"hello"&lt;/js&gt;, 8, &lt;js&gt;' '&lt;/js&gt;);       &lt;jc&gt;// "   hello"&lt;/jc&gt;</span>
<span class="source-line-no">4954</span><span id="line-4954">    *    padLeft(&lt;js&gt;"hello"&lt;/js&gt;, 3, &lt;js&gt;' '&lt;/js&gt;);       &lt;jc&gt;// "hello"&lt;/jc&gt;</span>
<span class="source-line-no">4955</span><span id="line-4955">    *    padLeft(&lt;js&gt;"123"&lt;/js&gt;, 5, &lt;js&gt;'0'&lt;/js&gt;);         &lt;jc&gt;// "00123"&lt;/jc&gt;</span>
<span class="source-line-no">4956</span><span id="line-4956">    * &lt;/p&gt;</span>
<span class="source-line-no">4957</span><span id="line-4957">    *</span>
<span class="source-line-no">4958</span><span id="line-4958">    * @param str The string to pad.</span>
<span class="source-line-no">4959</span><span id="line-4959">    * @param size The desired total string length.</span>
<span class="source-line-no">4960</span><span id="line-4960">    * @param padChar The character to pad with.</span>
<span class="source-line-no">4961</span><span id="line-4961">    * @return The left-padded string.</span>
<span class="source-line-no">4962</span><span id="line-4962">    */</span>
<span class="source-line-no">4963</span><span id="line-4963">   public static String padLeft(String str, int size, char padChar) {</span>
<span class="source-line-no">4964</span><span id="line-4964">      if (str == null)</span>
<span class="source-line-no">4965</span><span id="line-4965">         str = "";</span>
<span class="source-line-no">4966</span><span id="line-4966">      int pads = size - str.length();</span>
<span class="source-line-no">4967</span><span id="line-4967">      if (pads &lt;= 0)</span>
<span class="source-line-no">4968</span><span id="line-4968">         return str;</span>
<span class="source-line-no">4969</span><span id="line-4969">      return String.valueOf(padChar).repeat(pads) + str;</span>
<span class="source-line-no">4970</span><span id="line-4970">   }</span>
<span class="source-line-no">4971</span><span id="line-4971"></span>
<span class="source-line-no">4972</span><span id="line-4972">   /**</span>
<span class="source-line-no">4973</span><span id="line-4973">    * Right pads a string with a specified character.</span>
<span class="source-line-no">4974</span><span id="line-4974">    *</span>
<span class="source-line-no">4975</span><span id="line-4975">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">4976</span><span id="line-4976">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">4977</span><span id="line-4977">    *    padRight(&lt;jk&gt;null&lt;/jk&gt;, 5, &lt;js&gt;' '&lt;/js&gt;);          &lt;jc&gt;// "     "&lt;/jc&gt;</span>
<span class="source-line-no">4978</span><span id="line-4978">    *    padRight(&lt;js&gt;""&lt;/js&gt;, 5, &lt;js&gt;' '&lt;/js&gt;);            &lt;jc&gt;// "     "&lt;/jc&gt;</span>
<span class="source-line-no">4979</span><span id="line-4979">    *    padRight(&lt;js&gt;"hello"&lt;/js&gt;, 8, &lt;js&gt;' '&lt;/js&gt;);       &lt;jc&gt;// "hello   "&lt;/jc&gt;</span>
<span class="source-line-no">4980</span><span id="line-4980">    *    padRight(&lt;js&gt;"hello"&lt;/js&gt;, 3, &lt;js&gt;' '&lt;/js&gt;);       &lt;jc&gt;// "hello"&lt;/jc&gt;</span>
<span class="source-line-no">4981</span><span id="line-4981">    *    padRight(&lt;js&gt;"123"&lt;/js&gt;, 5, &lt;js&gt;'0'&lt;/js&gt;);         &lt;jc&gt;// "12300"&lt;/jc&gt;</span>
<span class="source-line-no">4982</span><span id="line-4982">    * &lt;/p&gt;</span>
<span class="source-line-no">4983</span><span id="line-4983">    *</span>
<span class="source-line-no">4984</span><span id="line-4984">    * @param str The string to pad.</span>
<span class="source-line-no">4985</span><span id="line-4985">    * @param size The desired total string length.</span>
<span class="source-line-no">4986</span><span id="line-4986">    * @param padChar The character to pad with.</span>
<span class="source-line-no">4987</span><span id="line-4987">    * @return The right-padded string.</span>
<span class="source-line-no">4988</span><span id="line-4988">    */</span>
<span class="source-line-no">4989</span><span id="line-4989">   public static String padRight(String str, int size, char padChar) {</span>
<span class="source-line-no">4990</span><span id="line-4990">      if (str == null)</span>
<span class="source-line-no">4991</span><span id="line-4991">         str = "";</span>
<span class="source-line-no">4992</span><span id="line-4992">      int pads = size - str.length();</span>
<span class="source-line-no">4993</span><span id="line-4993">      if (pads &lt;= 0)</span>
<span class="source-line-no">4994</span><span id="line-4994">         return str;</span>
<span class="source-line-no">4995</span><span id="line-4995">      return str + String.valueOf(padChar).repeat(pads);</span>
<span class="source-line-no">4996</span><span id="line-4996">   }</span>
<span class="source-line-no">4997</span><span id="line-4997"></span>
<span class="source-line-no">4998</span><span id="line-4998">   /**</span>
<span class="source-line-no">4999</span><span id="line-4999">    * Converts a &lt;c&gt;String&lt;/c&gt; to a &lt;c&gt;Character&lt;/c&gt;</span>
<span class="source-line-no">5000</span><span id="line-5000">    *</span>
<span class="source-line-no">5001</span><span id="line-5001">    * @param o The string to convert.</span>
<span class="source-line-no">5002</span><span id="line-5002">    * @return The first character of the string if the string is of length 1, or &lt;jk&gt;null&lt;/jk&gt; if the string is &lt;jk&gt;null&lt;/jk&gt; or empty.</span>
<span class="source-line-no">5003</span><span id="line-5003">    * @throws IllegalArgumentException If the string length is not 1.</span>
<span class="source-line-no">5004</span><span id="line-5004">    */</span>
<span class="source-line-no">5005</span><span id="line-5005">   public static Character parseCharacter(Object o) {</span>
<span class="source-line-no">5006</span><span id="line-5006">      if (o == null)</span>
<span class="source-line-no">5007</span><span id="line-5007">         return null;</span>
<span class="source-line-no">5008</span><span id="line-5008">      var s = o.toString();</span>
<span class="source-line-no">5009</span><span id="line-5009">      if (s.isEmpty())</span>
<span class="source-line-no">5010</span><span id="line-5010">         return null;</span>
<span class="source-line-no">5011</span><span id="line-5011">      if (s.length() == 1)</span>
<span class="source-line-no">5012</span><span id="line-5012">         return s.charAt(0);</span>
<span class="source-line-no">5013</span><span id="line-5013">      throw illegalArg("Invalid character: ''{0}''", s);</span>
<span class="source-line-no">5014</span><span id="line-5014">   }</span>
<span class="source-line-no">5015</span><span id="line-5015"></span>
<span class="source-line-no">5016</span><span id="line-5016">   /**</span>
<span class="source-line-no">5017</span><span id="line-5017">    * Same as {@link Float#parseFloat(String)} but removes any underscore characters first.</span>
<span class="source-line-no">5018</span><span id="line-5018">    *</span>
<span class="source-line-no">5019</span><span id="line-5019">    * &lt;p&gt;Allows for better readability of numeric literals (e.g., &lt;js&gt;"1_000.5"&lt;/js&gt;).</span>
<span class="source-line-no">5020</span><span id="line-5020">    *</span>
<span class="source-line-no">5021</span><span id="line-5021">    * @param value The string to parse.</span>
<span class="source-line-no">5022</span><span id="line-5022">    * @return The parsed float value.</span>
<span class="source-line-no">5023</span><span id="line-5023">    * @throws NumberFormatException If the string cannot be parsed.</span>
<span class="source-line-no">5024</span><span id="line-5024">    * @throws NullPointerException If the string is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">5025</span><span id="line-5025">    */</span>
<span class="source-line-no">5026</span><span id="line-5026">   public static float parseFloat(String value) {</span>
<span class="source-line-no">5027</span><span id="line-5027">      return Float.parseFloat(StringUtils.removeUnderscores(value));</span>
<span class="source-line-no">5028</span><span id="line-5028">   }</span>
<span class="source-line-no">5029</span><span id="line-5029"></span>
<span class="source-line-no">5030</span><span id="line-5030">   /**</span>
<span class="source-line-no">5031</span><span id="line-5031">    * Same as {@link Integer#parseInt(String)} but removes any underscore characters first.</span>
<span class="source-line-no">5032</span><span id="line-5032">    *</span>
<span class="source-line-no">5033</span><span id="line-5033">    * &lt;p&gt;Allows for better readability of numeric literals (e.g., &lt;js&gt;"1_000_000"&lt;/js&gt;).</span>
<span class="source-line-no">5034</span><span id="line-5034">    *</span>
<span class="source-line-no">5035</span><span id="line-5035">    * @param value The string to parse.</span>
<span class="source-line-no">5036</span><span id="line-5036">    * @return The parsed integer value.</span>
<span class="source-line-no">5037</span><span id="line-5037">    * @throws NumberFormatException If the string cannot be parsed.</span>
<span class="source-line-no">5038</span><span id="line-5038">    * @throws NullPointerException If the string is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">5039</span><span id="line-5039">    */</span>
<span class="source-line-no">5040</span><span id="line-5040">   public static int parseInt(String value) {</span>
<span class="source-line-no">5041</span><span id="line-5041">      return Integer.parseInt(StringUtils.removeUnderscores(value));</span>
<span class="source-line-no">5042</span><span id="line-5042">   }</span>
<span class="source-line-no">5043</span><span id="line-5043"></span>
<span class="source-line-no">5044</span><span id="line-5044">   /**</span>
<span class="source-line-no">5045</span><span id="line-5045">    * Converts a string containing a possible multiplier suffix to an integer.</span>
<span class="source-line-no">5046</span><span id="line-5046">    *</span>
<span class="source-line-no">5047</span><span id="line-5047">    * &lt;p&gt;</span>
<span class="source-line-no">5048</span><span id="line-5048">    * The string can contain any of the following multiplier suffixes:</span>
<span class="source-line-no">5049</span><span id="line-5049">    * &lt;ul&gt;</span>
<span class="source-line-no">5050</span><span id="line-5050">    *    &lt;li&gt;&lt;js&gt;"K"&lt;/js&gt; - x 1024</span>
<span class="source-line-no">5051</span><span id="line-5051">    *    &lt;li&gt;&lt;js&gt;"M"&lt;/js&gt; - x 1024*1024</span>
<span class="source-line-no">5052</span><span id="line-5052">    *    &lt;li&gt;&lt;js&gt;"G"&lt;/js&gt; - x 1024*1024*1024</span>
<span class="source-line-no">5053</span><span id="line-5053">    *    &lt;li&gt;&lt;js&gt;"k"&lt;/js&gt; - x 1000</span>
<span class="source-line-no">5054</span><span id="line-5054">    *    &lt;li&gt;&lt;js&gt;"m"&lt;/js&gt; - x 1000*1000</span>
<span class="source-line-no">5055</span><span id="line-5055">    *    &lt;li&gt;&lt;js&gt;"g"&lt;/js&gt; - x 1000*1000*1000</span>
<span class="source-line-no">5056</span><span id="line-5056">    * &lt;/ul&gt;</span>
<span class="source-line-no">5057</span><span id="line-5057">    *</span>
<span class="source-line-no">5058</span><span id="line-5058">    * @param s The string to parse.</span>
<span class="source-line-no">5059</span><span id="line-5059">    * @return The parsed value.</span>
<span class="source-line-no">5060</span><span id="line-5060">    */</span>
<span class="source-line-no">5061</span><span id="line-5061">   public static int parseIntWithSuffix(String s) {</span>
<span class="source-line-no">5062</span><span id="line-5062">      assertArgNotNull("s", s);</span>
<span class="source-line-no">5063</span><span id="line-5063">      var m = multiplierInt(s);</span>
<span class="source-line-no">5064</span><span id="line-5064">      if (m == 1)</span>
<span class="source-line-no">5065</span><span id="line-5065">         return Integer.decode(s);</span>
<span class="source-line-no">5066</span><span id="line-5066">      return Integer.decode(s.substring(0, s.length() - 1).trim()) * m;  // NOSONAR - NPE not possible here.</span>
<span class="source-line-no">5067</span><span id="line-5067">   }</span>
<span class="source-line-no">5068</span><span id="line-5068"></span>
<span class="source-line-no">5069</span><span id="line-5069">   /**</span>
<span class="source-line-no">5070</span><span id="line-5070">    * Same as {@link Long#parseLong(String)} but removes any underscore characters first.</span>
<span class="source-line-no">5071</span><span id="line-5071">    *</span>
<span class="source-line-no">5072</span><span id="line-5072">    * &lt;p&gt;Allows for better readability of numeric literals (e.g., &lt;js&gt;"1_000_000"&lt;/js&gt;).</span>
<span class="source-line-no">5073</span><span id="line-5073">    *</span>
<span class="source-line-no">5074</span><span id="line-5074">    * @param value The string to parse.</span>
<span class="source-line-no">5075</span><span id="line-5075">    * @return The parsed long value.</span>
<span class="source-line-no">5076</span><span id="line-5076">    * @throws NumberFormatException If the string cannot be parsed.</span>
<span class="source-line-no">5077</span><span id="line-5077">    * @throws NullPointerException If the string is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">5078</span><span id="line-5078">    */</span>
<span class="source-line-no">5079</span><span id="line-5079">   public static long parseLong(String value) {</span>
<span class="source-line-no">5080</span><span id="line-5080">      return Long.parseLong(StringUtils.removeUnderscores(value));</span>
<span class="source-line-no">5081</span><span id="line-5081">   }</span>
<span class="source-line-no">5082</span><span id="line-5082"></span>
<span class="source-line-no">5083</span><span id="line-5083">   /**</span>
<span class="source-line-no">5084</span><span id="line-5084">    * Converts a string containing a possible multiplier suffix to a long.</span>
<span class="source-line-no">5085</span><span id="line-5085">    *</span>
<span class="source-line-no">5086</span><span id="line-5086">    * &lt;p&gt;</span>
<span class="source-line-no">5087</span><span id="line-5087">    * The string can contain any of the following multiplier suffixes:</span>
<span class="source-line-no">5088</span><span id="line-5088">    * &lt;ul&gt;</span>
<span class="source-line-no">5089</span><span id="line-5089">    *    &lt;li&gt;&lt;js&gt;"K"&lt;/js&gt; - x 1024</span>
<span class="source-line-no">5090</span><span id="line-5090">    *    &lt;li&gt;&lt;js&gt;"M"&lt;/js&gt; - x 1024*1024</span>
<span class="source-line-no">5091</span><span id="line-5091">    *    &lt;li&gt;&lt;js&gt;"G"&lt;/js&gt; - x 1024*1024*1024</span>
<span class="source-line-no">5092</span><span id="line-5092">    *    &lt;li&gt;&lt;js&gt;"T"&lt;/js&gt; - x 1024*1024*1024*1024</span>
<span class="source-line-no">5093</span><span id="line-5093">    *    &lt;li&gt;&lt;js&gt;"P"&lt;/js&gt; - x 1024*1024*1024*1024*1024</span>
<span class="source-line-no">5094</span><span id="line-5094">    *    &lt;li&gt;&lt;js&gt;"k"&lt;/js&gt; - x 1000</span>
<span class="source-line-no">5095</span><span id="line-5095">    *    &lt;li&gt;&lt;js&gt;"m"&lt;/js&gt; - x 1000*1000</span>
<span class="source-line-no">5096</span><span id="line-5096">    *    &lt;li&gt;&lt;js&gt;"g"&lt;/js&gt; - x 1000*1000*1000</span>
<span class="source-line-no">5097</span><span id="line-5097">    *    &lt;li&gt;&lt;js&gt;"t"&lt;/js&gt; - x 1000*1000*1000*1000</span>
<span class="source-line-no">5098</span><span id="line-5098">    *    &lt;li&gt;&lt;js&gt;"p"&lt;/js&gt; - x 1000*1000*1000*1000*1000</span>
<span class="source-line-no">5099</span><span id="line-5099">    * &lt;/ul&gt;</span>
<span class="source-line-no">5100</span><span id="line-5100">    *</span>
<span class="source-line-no">5101</span><span id="line-5101">    * @param s The string to parse.</span>
<span class="source-line-no">5102</span><span id="line-5102">    * @return The parsed value.</span>
<span class="source-line-no">5103</span><span id="line-5103">    */</span>
<span class="source-line-no">5104</span><span id="line-5104">   public static long parseLongWithSuffix(String s) {</span>
<span class="source-line-no">5105</span><span id="line-5105">      assertArgNotNull("s", s);</span>
<span class="source-line-no">5106</span><span id="line-5106">      var m = multiplierLong(s);</span>
<span class="source-line-no">5107</span><span id="line-5107">      if (m == 1) {</span>
<span class="source-line-no">5108</span><span id="line-5108">         // If multiplier is 1, try to decode the whole string</span>
<span class="source-line-no">5109</span><span id="line-5109">         // This will throw NumberFormatException if it contains a suffix character</span>
<span class="source-line-no">5110</span><span id="line-5110">         return Long.decode(s);</span>
<span class="source-line-no">5111</span><span id="line-5111">      }</span>
<span class="source-line-no">5112</span><span id="line-5112">      var baseStr = s.substring(0, s.length() - 1).trim();</span>
<span class="source-line-no">5113</span><span id="line-5113">      var base = Long.decode(baseStr);  // NOSONAR - NPE not possible here.</span>
<span class="source-line-no">5114</span><span id="line-5114">      try {</span>
<span class="source-line-no">5115</span><span id="line-5115">         return Math.multiplyExact(base, m);</span>
<span class="source-line-no">5116</span><span id="line-5116">      } catch (@SuppressWarnings("unused") ArithmeticException e) {</span>
<span class="source-line-no">5117</span><span id="line-5117">         throw new NumberFormatException("Value " + s + " exceeds Long.MAX_VALUE");</span>
<span class="source-line-no">5118</span><span id="line-5118">      }</span>
<span class="source-line-no">5119</span><span id="line-5119">   }</span>
<span class="source-line-no">5120</span><span id="line-5120"></span>
<span class="source-line-no">5121</span><span id="line-5121">   /**</span>
<span class="source-line-no">5122</span><span id="line-5122">    * Parses a string containing key-value pairs into a map.</span>
<span class="source-line-no">5123</span><span id="line-5123">    *</span>
<span class="source-line-no">5124</span><span id="line-5124">    * &lt;p&gt;</span>
<span class="source-line-no">5125</span><span id="line-5125">    * Splits the string by the entry delimiter, then splits each entry by the key-value delimiter.</span>
<span class="source-line-no">5126</span><span id="line-5126">    *</span>
<span class="source-line-no">5127</span><span id="line-5127">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">5128</span><span id="line-5128">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">5129</span><span id="line-5129">    *    parseMap(&lt;js&gt;"key1=value1,key2=value2"&lt;/js&gt;, &lt;js&gt;'='&lt;/js&gt;, &lt;js&gt;','&lt;/js&gt;, &lt;jk&gt;false&lt;/jk&gt;);</span>
<span class="source-line-no">5130</span><span id="line-5130">    *    &lt;jc&gt;// {"key1":"value1","key2":"value2"}&lt;/jc&gt;</span>
<span class="source-line-no">5131</span><span id="line-5131">    *    parseMap(&lt;js&gt;" key1 = value1 ; key2 = value2 "&lt;/js&gt;, &lt;js&gt;'='&lt;/js&gt;, &lt;js&gt;';'&lt;/js&gt;, &lt;jk&gt;true&lt;/jk&gt;);</span>
<span class="source-line-no">5132</span><span id="line-5132">    *    &lt;jc&gt;// {"key1":"value1","key2":"value2"}&lt;/jc&gt;</span>
<span class="source-line-no">5133</span><span id="line-5133">    * &lt;/p&gt;</span>
<span class="source-line-no">5134</span><span id="line-5134">    *</span>
<span class="source-line-no">5135</span><span id="line-5135">    * @param str The string to parse. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">5136</span><span id="line-5136">    * @param keyValueDelimiter The character that separates keys from values.</span>
<span class="source-line-no">5137</span><span id="line-5137">    * @param entryDelimiter The character that separates entries.</span>
<span class="source-line-no">5138</span><span id="line-5138">    * @param trimKeys If &lt;jk&gt;true&lt;/jk&gt;, trims whitespace from keys and values.</span>
<span class="source-line-no">5139</span><span id="line-5139">    * @return A map containing the parsed key-value pairs, or an empty map if the string is &lt;jk&gt;null&lt;/jk&gt; or empty.</span>
<span class="source-line-no">5140</span><span id="line-5140">    */</span>
<span class="source-line-no">5141</span><span id="line-5141">   public static Map&lt;String,String&gt; parseMap(String str, char keyValueDelimiter, char entryDelimiter, boolean trimKeys) {</span>
<span class="source-line-no">5142</span><span id="line-5142">      var result = new LinkedHashMap&lt;String,String&gt;();</span>
<span class="source-line-no">5143</span><span id="line-5143">      if (isEmpty(str))</span>
<span class="source-line-no">5144</span><span id="line-5144">         return result;</span>
<span class="source-line-no">5145</span><span id="line-5145"></span>
<span class="source-line-no">5146</span><span id="line-5146">      var entries = split(str, entryDelimiter);</span>
<span class="source-line-no">5147</span><span id="line-5147">      for (var entry : entries) {</span>
<span class="source-line-no">5148</span><span id="line-5148">         if (isEmpty(entry))</span>
<span class="source-line-no">5149</span><span id="line-5149">            continue;</span>
<span class="source-line-no">5150</span><span id="line-5150">         var delimiterIndex = entry.indexOf(keyValueDelimiter);</span>
<span class="source-line-no">5151</span><span id="line-5151">         if (delimiterIndex == -1) {</span>
<span class="source-line-no">5152</span><span id="line-5152">            // No delimiter found, treat entire entry as key with empty value</span>
<span class="source-line-no">5153</span><span id="line-5153">            var key = trimKeys ? entry.trim() : entry;</span>
<span class="source-line-no">5154</span><span id="line-5154">            result.put(key, "");</span>
<span class="source-line-no">5155</span><span id="line-5155">         } else {</span>
<span class="source-line-no">5156</span><span id="line-5156">            var key = entry.substring(0, delimiterIndex);</span>
<span class="source-line-no">5157</span><span id="line-5157">            var value = entry.substring(delimiterIndex + 1);</span>
<span class="source-line-no">5158</span><span id="line-5158">            if (trimKeys) {</span>
<span class="source-line-no">5159</span><span id="line-5159">               key = key.trim();</span>
<span class="source-line-no">5160</span><span id="line-5160">               value = value.trim();</span>
<span class="source-line-no">5161</span><span id="line-5161">            }</span>
<span class="source-line-no">5162</span><span id="line-5162">            result.put(key, value);</span>
<span class="source-line-no">5163</span><span id="line-5163">         }</span>
<span class="source-line-no">5164</span><span id="line-5164">      }</span>
<span class="source-line-no">5165</span><span id="line-5165">      return result;</span>
<span class="source-line-no">5166</span><span id="line-5166">   }</span>
<span class="source-line-no">5167</span><span id="line-5167"></span>
<span class="source-line-no">5168</span><span id="line-5168">   /**</span>
<span class="source-line-no">5169</span><span id="line-5169">    * Parses a number from the specified string.</span>
<span class="source-line-no">5170</span><span id="line-5170">    *</span>
<span class="source-line-no">5171</span><span id="line-5171">    * &lt;p&gt;</span>
<span class="source-line-no">5172</span><span id="line-5172">    * Supports Java 7+ numeric literals with underscores (e.g., &lt;js&gt;"1_000_000"&lt;/js&gt;).</span>
<span class="source-line-no">5173</span><span id="line-5173">    * The underscores are automatically removed before parsing.</span>
<span class="source-line-no">5174</span><span id="line-5174">    *</span>
<span class="source-line-no">5175</span><span id="line-5175">    * @param s The string to parse the number from.</span>
<span class="source-line-no">5176</span><span id="line-5176">    * @param type</span>
<span class="source-line-no">5177</span><span id="line-5177">    *    The number type to created.</span>
<span class="source-line-no">5178</span><span id="line-5178">    *    Can be any of the following:</span>
<span class="source-line-no">5179</span><span id="line-5179">    *    &lt;ul&gt;</span>
<span class="source-line-no">5180</span><span id="line-5180">    *       &lt;li&gt; Integer (or &lt;c&gt;int&lt;/c&gt; primitive)</span>
<span class="source-line-no">5181</span><span id="line-5181">    *       &lt;li&gt; Long (or &lt;c&gt;long&lt;/c&gt; primitive)</span>
<span class="source-line-no">5182</span><span id="line-5182">    *       &lt;li&gt; Short (or &lt;c&gt;short&lt;/c&gt; primitive)</span>
<span class="source-line-no">5183</span><span id="line-5183">    *       &lt;li&gt; Byte (or &lt;c&gt;byte&lt;/c&gt; primitive)</span>
<span class="source-line-no">5184</span><span id="line-5184">    *       &lt;li&gt; Float (or &lt;c&gt;float&lt;/c&gt; primitive)</span>
<span class="source-line-no">5185</span><span id="line-5185">    *       &lt;li&gt; Double (or &lt;c&gt;double&lt;/c&gt; primitive)</span>
<span class="source-line-no">5186</span><span id="line-5186">    *       &lt;li&gt; BigInteger</span>
<span class="source-line-no">5187</span><span id="line-5187">    *       &lt;li&gt; BigDecimal</span>
<span class="source-line-no">5188</span><span id="line-5188">    *       &lt;li&gt; AtomicInteger</span>
<span class="source-line-no">5189</span><span id="line-5189">    *       &lt;li&gt; AtomicLong</span>
<span class="source-line-no">5190</span><span id="line-5190">    *    &lt;/ul&gt;</span>
<span class="source-line-no">5191</span><span id="line-5191">    *    If &lt;jk&gt;null&lt;/jk&gt; or &lt;c&gt;Number&lt;/c&gt;, uses the best guess.</span>
<span class="source-line-no">5192</span><span id="line-5192">    * @return The parsed number, or &lt;jk&gt;null&lt;/jk&gt; if the string was null.</span>
<span class="source-line-no">5193</span><span id="line-5193">    */</span>
<span class="source-line-no">5194</span><span id="line-5194">   public static Number parseNumber(String s, Class&lt;? extends Number&gt; type) {</span>
<span class="source-line-no">5195</span><span id="line-5195">      if (s == null)</span>
<span class="source-line-no">5196</span><span id="line-5196">         return null;</span>
<span class="source-line-no">5197</span><span id="line-5197">      if (s.isEmpty())</span>
<span class="source-line-no">5198</span><span id="line-5198">         s = "0";</span>
<span class="source-line-no">5199</span><span id="line-5199">      if (type == null)</span>
<span class="source-line-no">5200</span><span id="line-5200">         type = Number.class;</span>
<span class="source-line-no">5201</span><span id="line-5201"></span>
<span class="source-line-no">5202</span><span id="line-5202">      // Remove underscores (Java 7+ numeric literal support) before parsing</span>
<span class="source-line-no">5203</span><span id="line-5203">      // Note: We do this before type detection to ensure clean parsing</span>
<span class="source-line-no">5204</span><span id="line-5204">      s = s.replace("_", "");</span>
<span class="source-line-no">5205</span><span id="line-5205"></span>
<span class="source-line-no">5206</span><span id="line-5206">      // Determine the data type if it wasn't specified.</span>
<span class="source-line-no">5207</span><span id="line-5207">      var isAutoDetect = (type == Number.class);</span>
<span class="source-line-no">5208</span><span id="line-5208">      var isDecimal = false;</span>
<span class="source-line-no">5209</span><span id="line-5209">      if (isAutoDetect) {</span>
<span class="source-line-no">5210</span><span id="line-5210">         // If we're auto-detecting, then we use either an Integer, Long, or Double depending on how</span>
<span class="source-line-no">5211</span><span id="line-5211">         // long the string is.</span>
<span class="source-line-no">5212</span><span id="line-5212">         // An integer range is -2,147,483,648 to 2,147,483,647</span>
<span class="source-line-no">5213</span><span id="line-5213">         // An long range is -9,223,372,036,854,775,808 to +9,223,372,036,854,775,807</span>
<span class="source-line-no">5214</span><span id="line-5214">         isDecimal = isDecimal(s);</span>
<span class="source-line-no">5215</span><span id="line-5215">         if (isDecimal) {</span>
<span class="source-line-no">5216</span><span id="line-5216">            if (s.length() &gt; 20)</span>
<span class="source-line-no">5217</span><span id="line-5217">               type = Double.class;</span>
<span class="source-line-no">5218</span><span id="line-5218">            else if (s.length() &gt;= 10)</span>
<span class="source-line-no">5219</span><span id="line-5219">               type = Long.class;</span>
<span class="source-line-no">5220</span><span id="line-5220">            else</span>
<span class="source-line-no">5221</span><span id="line-5221">               type = Integer.class;</span>
<span class="source-line-no">5222</span><span id="line-5222">         } else if (isFloat(s))</span>
<span class="source-line-no">5223</span><span id="line-5223">            type = Double.class;</span>
<span class="source-line-no">5224</span><span id="line-5224">         else</span>
<span class="source-line-no">5225</span><span id="line-5225">            throw new NumberFormatException(s);</span>
<span class="source-line-no">5226</span><span id="line-5226">      }</span>
<span class="source-line-no">5227</span><span id="line-5227"></span>
<span class="source-line-no">5228</span><span id="line-5228">      if (type == Double.class || type == Double.TYPE) {</span>
<span class="source-line-no">5229</span><span id="line-5229">         var d = Double.valueOf(s);</span>
<span class="source-line-no">5230</span><span id="line-5230">         var f = Float.valueOf(s);</span>
<span class="source-line-no">5231</span><span id="line-5231">         if (isAutoDetect &amp;&amp; (! isDecimal) &amp;&amp; d.toString().equals(f.toString()))</span>
<span class="source-line-no">5232</span><span id="line-5232">            return f;</span>
<span class="source-line-no">5233</span><span id="line-5233">         return d;</span>
<span class="source-line-no">5234</span><span id="line-5234">      }</span>
<span class="source-line-no">5235</span><span id="line-5235">      if (type == Float.class || type == Float.TYPE)</span>
<span class="source-line-no">5236</span><span id="line-5236">         return Float.valueOf(s);</span>
<span class="source-line-no">5237</span><span id="line-5237">      if (type == BigDecimal.class)</span>
<span class="source-line-no">5238</span><span id="line-5238">         return new BigDecimal(s);</span>
<span class="source-line-no">5239</span><span id="line-5239">      if (type == Long.class || type == Long.TYPE || type == AtomicLong.class) {</span>
<span class="source-line-no">5240</span><span id="line-5240">         try {</span>
<span class="source-line-no">5241</span><span id="line-5241">            var l = parseLongWithSuffix(s);</span>
<span class="source-line-no">5242</span><span id="line-5242">            if (type == AtomicLong.class)</span>
<span class="source-line-no">5243</span><span id="line-5243">               return new AtomicLong(l);</span>
<span class="source-line-no">5244</span><span id="line-5244">            if (isAutoDetect &amp;&amp; l &gt;= Integer.MIN_VALUE &amp;&amp; l &lt;= Integer.MAX_VALUE) {</span>
<span class="source-line-no">5245</span><span id="line-5245">               // This occurs if the string is 10 characters long but is still a valid integer value.</span>
<span class="source-line-no">5246</span><span id="line-5246">               return (int)l;</span>
<span class="source-line-no">5247</span><span id="line-5247">            }</span>
<span class="source-line-no">5248</span><span id="line-5248">            return l;</span>
<span class="source-line-no">5249</span><span id="line-5249">         } catch (NumberFormatException e) {</span>
<span class="source-line-no">5250</span><span id="line-5250">            if (isAutoDetect) {</span>
<span class="source-line-no">5251</span><span id="line-5251">               // This occurs if the string is 20 characters long but still falls outside the range of a valid long.</span>
<span class="source-line-no">5252</span><span id="line-5252">               return Double.valueOf(s);</span>
<span class="source-line-no">5253</span><span id="line-5253">            }</span>
<span class="source-line-no">5254</span><span id="line-5254">            throw e;</span>
<span class="source-line-no">5255</span><span id="line-5255">         }</span>
<span class="source-line-no">5256</span><span id="line-5256">      }</span>
<span class="source-line-no">5257</span><span id="line-5257">      if (type == Integer.class || type == Integer.TYPE)</span>
<span class="source-line-no">5258</span><span id="line-5258">         return Integer.decode(s);</span>
<span class="source-line-no">5259</span><span id="line-5259">      if (type == Short.class || type == Short.TYPE)</span>
<span class="source-line-no">5260</span><span id="line-5260">         return Short.decode(s);</span>
<span class="source-line-no">5261</span><span id="line-5261">      if (type == Byte.class || type == Byte.TYPE)</span>
<span class="source-line-no">5262</span><span id="line-5262">         return Byte.decode(s);</span>
<span class="source-line-no">5263</span><span id="line-5263">      if (type == BigInteger.class)</span>
<span class="source-line-no">5264</span><span id="line-5264">         return new BigInteger(s);</span>
<span class="source-line-no">5265</span><span id="line-5265">      if (type == AtomicInteger.class)</span>
<span class="source-line-no">5266</span><span id="line-5266">         return new AtomicInteger(Integer.decode(s));</span>
<span class="source-line-no">5267</span><span id="line-5267">      throw new NumberFormatException("Unsupported Number type: " + type.getName());</span>
<span class="source-line-no">5268</span><span id="line-5268">   }</span>
<span class="source-line-no">5269</span><span id="line-5269"></span>
<span class="source-line-no">5270</span><span id="line-5270">   /**</span>
<span class="source-line-no">5271</span><span id="line-5271">    * Converts a string to PascalCase format.</span>
<span class="source-line-no">5272</span><span id="line-5272">    *</span>
<span class="source-line-no">5273</span><span id="line-5273">    * &lt;p&gt;</span>
<span class="source-line-no">5274</span><span id="line-5274">    * Handles various input formats:</span>
<span class="source-line-no">5275</span><span id="line-5275">    * &lt;ul&gt;</span>
<span class="source-line-no">5276</span><span id="line-5276">    *   &lt;li&gt;Space-separated: "hello world"  "HelloWorld"&lt;/li&gt;</span>
<span class="source-line-no">5277</span><span id="line-5277">    *   &lt;li&gt;CamelCase: "helloWorld"  "HelloWorld"&lt;/li&gt;</span>
<span class="source-line-no">5278</span><span id="line-5278">    *   &lt;li&gt;Snake_case: "hello_world"  "HelloWorld"&lt;/li&gt;</span>
<span class="source-line-no">5279</span><span id="line-5279">    *   &lt;li&gt;Kebab-case: "hello-world"  "HelloWorld"&lt;/li&gt;</span>
<span class="source-line-no">5280</span><span id="line-5280">    * &lt;/ul&gt;</span>
<span class="source-line-no">5281</span><span id="line-5281">    *</span>
<span class="source-line-no">5282</span><span id="line-5282">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">5283</span><span id="line-5283">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">5284</span><span id="line-5284">    *    pascalCase(&lt;jk&gt;null&lt;/jk&gt;);                    &lt;jc&gt;// null&lt;/jc&gt;</span>
<span class="source-line-no">5285</span><span id="line-5285">    *    pascalCase(&lt;js&gt;""&lt;/js&gt;);                      &lt;jc&gt;// ""&lt;/jc&gt;</span>
<span class="source-line-no">5286</span><span id="line-5286">    *    pascalCase(&lt;js&gt;"hello world"&lt;/js&gt;);           &lt;jc&gt;// "HelloWorld"&lt;/jc&gt;</span>
<span class="source-line-no">5287</span><span id="line-5287">    *    pascalCase(&lt;js&gt;"helloWorld"&lt;/js&gt;);            &lt;jc&gt;// "HelloWorld"&lt;/jc&gt;</span>
<span class="source-line-no">5288</span><span id="line-5288">    *    pascalCase(&lt;js&gt;"hello_world"&lt;/js&gt;);           &lt;jc&gt;// "HelloWorld"&lt;/jc&gt;</span>
<span class="source-line-no">5289</span><span id="line-5289">    *    pascalCase(&lt;js&gt;"hello-world"&lt;/js&gt;);           &lt;jc&gt;// "HelloWorld"&lt;/jc&gt;</span>
<span class="source-line-no">5290</span><span id="line-5290">    * &lt;/p&gt;</span>
<span class="source-line-no">5291</span><span id="line-5291">    *</span>
<span class="source-line-no">5292</span><span id="line-5292">    * @param str The string to convert.</span>
<span class="source-line-no">5293</span><span id="line-5293">    * @return The PascalCase string, or &lt;jk&gt;null&lt;/jk&gt; if input is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">5294</span><span id="line-5294">    */</span>
<span class="source-line-no">5295</span><span id="line-5295">   public static String pascalCase(String str) {</span>
<span class="source-line-no">5296</span><span id="line-5296">      if (isEmpty(str))</span>
<span class="source-line-no">5297</span><span id="line-5297">         return str;</span>
<span class="source-line-no">5298</span><span id="line-5298"></span>
<span class="source-line-no">5299</span><span id="line-5299">      var words = splitWords(str);</span>
<span class="source-line-no">5300</span><span id="line-5300">      if (words.isEmpty())</span>
<span class="source-line-no">5301</span><span id="line-5301">         return "";</span>
<span class="source-line-no">5302</span><span id="line-5302"></span>
<span class="source-line-no">5303</span><span id="line-5303">      var result = new StringBuilder();</span>
<span class="source-line-no">5304</span><span id="line-5304">      for (var word : words) {</span>
<span class="source-line-no">5305</span><span id="line-5305">         result.append(capitalize(word.toLowerCase()));</span>
<span class="source-line-no">5306</span><span id="line-5306">      }</span>
<span class="source-line-no">5307</span><span id="line-5307"></span>
<span class="source-line-no">5308</span><span id="line-5308">      return result.toString();</span>
<span class="source-line-no">5309</span><span id="line-5309">   }</span>
<span class="source-line-no">5310</span><span id="line-5310"></span>
<span class="source-line-no">5311</span><span id="line-5311">   /**</span>
<span class="source-line-no">5312</span><span id="line-5312">    * Pluralizes a word based on a count.</span>
<span class="source-line-no">5313</span><span id="line-5313">    *</span>
<span class="source-line-no">5314</span><span id="line-5314">    * &lt;p&gt;</span>
<span class="source-line-no">5315</span><span id="line-5315">    * Simple pluralization that adds "s" to most words, with basic rules for words ending in "s", "x", "z", "ch", "sh" (add "es"),</span>
<span class="source-line-no">5316</span><span id="line-5316">    * and words ending in "y" preceded by a consonant (replace "y" with "ies").</span>
<span class="source-line-no">5317</span><span id="line-5317">    *</span>
<span class="source-line-no">5318</span><span id="line-5318">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">5319</span><span id="line-5319">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">5320</span><span id="line-5320">    *    pluralize(&lt;js&gt;"cat"&lt;/js&gt;, &lt;js&gt;1&lt;/js&gt;);        &lt;jc&gt;// "cat"&lt;/jc&gt;</span>
<span class="source-line-no">5321</span><span id="line-5321">    *    pluralize(&lt;js&gt;"cat"&lt;/js&gt;, &lt;js&gt;2&lt;/js&gt;);        &lt;jc&gt;// "cats"&lt;/jc&gt;</span>
<span class="source-line-no">5322</span><span id="line-5322">    *    pluralize(&lt;js&gt;"box"&lt;/js&gt;, &lt;js&gt;2&lt;/js&gt;);        &lt;jc&gt;// "boxes"&lt;/jc&gt;</span>
<span class="source-line-no">5323</span><span id="line-5323">    *    pluralize(&lt;js&gt;"city"&lt;/js&gt;, &lt;js&gt;2&lt;/js&gt;);       &lt;jc&gt;// "cities"&lt;/jc&gt;</span>
<span class="source-line-no">5324</span><span id="line-5324">    * &lt;/p&gt;</span>
<span class="source-line-no">5325</span><span id="line-5325">    *</span>
<span class="source-line-no">5326</span><span id="line-5326">    * @param word The word to pluralize.</span>
<span class="source-line-no">5327</span><span id="line-5327">    * @param count The count to determine if pluralization is needed.</span>
<span class="source-line-no">5328</span><span id="line-5328">    * @return The pluralized word if count is not 1, otherwise the original word.</span>
<span class="source-line-no">5329</span><span id="line-5329">    */</span>
<span class="source-line-no">5330</span><span id="line-5330">   public static String pluralize(String word, int count) {</span>
<span class="source-line-no">5331</span><span id="line-5331">      if (word == null || word.isEmpty())</span>
<span class="source-line-no">5332</span><span id="line-5332">         return word;</span>
<span class="source-line-no">5333</span><span id="line-5333">      if (count == 1)</span>
<span class="source-line-no">5334</span><span id="line-5334">         return word;</span>
<span class="source-line-no">5335</span><span id="line-5335"></span>
<span class="source-line-no">5336</span><span id="line-5336">      var lower = word.toLowerCase();</span>
<span class="source-line-no">5337</span><span id="line-5337">      var length = word.length();</span>
<span class="source-line-no">5338</span><span id="line-5338"></span>
<span class="source-line-no">5339</span><span id="line-5339">      // Words ending in s, x, z, ch, sh -&gt; add "es"</span>
<span class="source-line-no">5340</span><span id="line-5340">      if (lower.endsWith("s") || lower.endsWith("x") || lower.endsWith("z") || lower.endsWith("ch") || lower.endsWith("sh")) {</span>
<span class="source-line-no">5341</span><span id="line-5341">         return word + "es";</span>
<span class="source-line-no">5342</span><span id="line-5342">      }</span>
<span class="source-line-no">5343</span><span id="line-5343"></span>
<span class="source-line-no">5344</span><span id="line-5344">      // Words ending in "y" preceded by a consonant -&gt; replace "y" with "ies"</span>
<span class="source-line-no">5345</span><span id="line-5345">      if (length &gt; 1 &amp;&amp; lower.endsWith("y")) {</span>
<span class="source-line-no">5346</span><span id="line-5346">         var secondLast = lower.charAt(length - 2);</span>
<span class="source-line-no">5347</span><span id="line-5347">         if (! VOWEL.contains(secondLast)) {</span>
<span class="source-line-no">5348</span><span id="line-5348">            return word.substring(0, length - 1) + "ies";</span>
<span class="source-line-no">5349</span><span id="line-5349">         }</span>
<span class="source-line-no">5350</span><span id="line-5350">      }</span>
<span class="source-line-no">5351</span><span id="line-5351"></span>
<span class="source-line-no">5352</span><span id="line-5352">      // Words ending in "f" or "fe" -&gt; replace with "ves" (basic rule)</span>
<span class="source-line-no">5353</span><span id="line-5353">      if (lower.endsWith("f")) {</span>
<span class="source-line-no">5354</span><span id="line-5354">         return word.substring(0, length - 1) + "ves";</span>
<span class="source-line-no">5355</span><span id="line-5355">      }</span>
<span class="source-line-no">5356</span><span id="line-5356">      if (lower.endsWith("fe")) {</span>
<span class="source-line-no">5357</span><span id="line-5357">         return word.substring(0, length - 2) + "ves";</span>
<span class="source-line-no">5358</span><span id="line-5358">      }</span>
<span class="source-line-no">5359</span><span id="line-5359"></span>
<span class="source-line-no">5360</span><span id="line-5360">      // Default: add "s"</span>
<span class="source-line-no">5361</span><span id="line-5361">      return word + "s";</span>
<span class="source-line-no">5362</span><span id="line-5362">   }</span>
<span class="source-line-no">5363</span><span id="line-5363"></span>
<span class="source-line-no">5364</span><span id="line-5364">   /**</span>
<span class="source-line-no">5365</span><span id="line-5365">    * Generated a random UUID with the specified number of characters.</span>
<span class="source-line-no">5366</span><span id="line-5366">    *</span>
<span class="source-line-no">5367</span><span id="line-5367">    * &lt;p&gt;</span>
<span class="source-line-no">5368</span><span id="line-5368">    * Characters are composed of lower-case ASCII letters and numbers only.</span>
<span class="source-line-no">5369</span><span id="line-5369">    *</span>
<span class="source-line-no">5370</span><span id="line-5370">    * &lt;p&gt;</span>
<span class="source-line-no">5371</span><span id="line-5371">    * This method conforms to the restrictions for hostnames as specified in &lt;a class="doclink" href="https://tools.ietf.org/html/rfc952"&gt;RFC 952&lt;/a&gt;</span>
<span class="source-line-no">5372</span><span id="line-5372">    * Since each character has 36 possible values, the square approximation formula for the number of generated IDs</span>
<span class="source-line-no">5373</span><span id="line-5373">    * that would produce a 50% chance of collision is:</span>
<span class="source-line-no">5374</span><span id="line-5374">    * &lt;c&gt;sqrt(36^N)&lt;/c&gt;.</span>
<span class="source-line-no">5375</span><span id="line-5375">    * Dividing this number by 10 gives you an approximation of the number of generated IDs needed to produce a</span>
<span class="source-line-no">5376</span><span id="line-5376">    * &amp;lt;1% chance of collision.</span>
<span class="source-line-no">5377</span><span id="line-5377">    *</span>
<span class="source-line-no">5378</span><span id="line-5378">    * &lt;p&gt;</span>
<span class="source-line-no">5379</span><span id="line-5379">    * For example, given 5 characters, the number of generated IDs need to produce a &amp;lt;1% chance of collision would</span>
<span class="source-line-no">5380</span><span id="line-5380">    * be:</span>
<span class="source-line-no">5381</span><span id="line-5381">    * &lt;c&gt;sqrt(36^5)/10=777&lt;/c&gt;</span>
<span class="source-line-no">5382</span><span id="line-5382">    *</span>
<span class="source-line-no">5383</span><span id="line-5383">    * @param numchars The number of characters in the generated UUID.</span>
<span class="source-line-no">5384</span><span id="line-5384">    * @return A new random UUID.</span>
<span class="source-line-no">5385</span><span id="line-5385">    */</span>
<span class="source-line-no">5386</span><span id="line-5386">   public static String random(int numchars) {</span>
<span class="source-line-no">5387</span><span id="line-5387">      var sb = new StringBuilder(numchars);</span>
<span class="source-line-no">5388</span><span id="line-5388">      for (var i = 0; i &lt; numchars; i++) {</span>
<span class="source-line-no">5389</span><span id="line-5389">         var c = RANDOM.nextInt(36) + 97;</span>
<span class="source-line-no">5390</span><span id="line-5390">         if (c &gt; 'z')</span>
<span class="source-line-no">5391</span><span id="line-5391">            c -= ('z' - '0' + 1);</span>
<span class="source-line-no">5392</span><span id="line-5392">         sb.append((char)c);</span>
<span class="source-line-no">5393</span><span id="line-5393">      }</span>
<span class="source-line-no">5394</span><span id="line-5394">      return sb.toString();</span>
<span class="source-line-no">5395</span><span id="line-5395">   }</span>
<span class="source-line-no">5396</span><span id="line-5396"></span>
<span class="source-line-no">5397</span><span id="line-5397">   /**</span>
<span class="source-line-no">5398</span><span id="line-5398">    * Generates a random alphabetic string of the specified length.</span>
<span class="source-line-no">5399</span><span id="line-5399">    *</span>
<span class="source-line-no">5400</span><span id="line-5400">    * &lt;p&gt;</span>
<span class="source-line-no">5401</span><span id="line-5401">    * Characters are composed of upper-case and lower-case ASCII letters (a-z, A-Z).</span>
<span class="source-line-no">5402</span><span id="line-5402">    *</span>
<span class="source-line-no">5403</span><span id="line-5403">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">5404</span><span id="line-5404">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">5405</span><span id="line-5405">    *    randomAlphabetic(&lt;jk&gt;5&lt;/jk&gt;);  &lt;jc&gt;// "aBcDe"&lt;/jc&gt;</span>
<span class="source-line-no">5406</span><span id="line-5406">    * &lt;/p&gt;</span>
<span class="source-line-no">5407</span><span id="line-5407">    *</span>
<span class="source-line-no">5408</span><span id="line-5408">    * @param length The length of the generated string.</span>
<span class="source-line-no">5409</span><span id="line-5409">    * @return A new random alphabetic string.</span>
<span class="source-line-no">5410</span><span id="line-5410">    */</span>
<span class="source-line-no">5411</span><span id="line-5411">   public static String randomAlphabetic(int length) {</span>
<span class="source-line-no">5412</span><span id="line-5412">      if (length &lt; 0)</span>
<span class="source-line-no">5413</span><span id="line-5413">         throw new IllegalArgumentException("Length must be non-negative: " + length);</span>
<span class="source-line-no">5414</span><span id="line-5414">      var sb = new StringBuilder(length);</span>
<span class="source-line-no">5415</span><span id="line-5415">      for (var i = 0; i &lt; length; i++) {</span>
<span class="source-line-no">5416</span><span id="line-5416">         var c = RANDOM.nextInt(52);</span>
<span class="source-line-no">5417</span><span id="line-5417">         if (c &lt; 26)</span>
<span class="source-line-no">5418</span><span id="line-5418">            sb.append((char)('a' + c));</span>
<span class="source-line-no">5419</span><span id="line-5419">         else</span>
<span class="source-line-no">5420</span><span id="line-5420">            sb.append((char)('A' + c - 26));</span>
<span class="source-line-no">5421</span><span id="line-5421">      }</span>
<span class="source-line-no">5422</span><span id="line-5422">      return sb.toString();</span>
<span class="source-line-no">5423</span><span id="line-5423">   }</span>
<span class="source-line-no">5424</span><span id="line-5424"></span>
<span class="source-line-no">5425</span><span id="line-5425">   /**</span>
<span class="source-line-no">5426</span><span id="line-5426">    * Generates a random alphanumeric string of the specified length.</span>
<span class="source-line-no">5427</span><span id="line-5427">    *</span>
<span class="source-line-no">5428</span><span id="line-5428">    * &lt;p&gt;</span>
<span class="source-line-no">5429</span><span id="line-5429">    * Characters are composed of upper-case and lower-case ASCII letters and digits (a-z, A-Z, 0-9).</span>
<span class="source-line-no">5430</span><span id="line-5430">    *</span>
<span class="source-line-no">5431</span><span id="line-5431">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">5432</span><span id="line-5432">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">5433</span><span id="line-5433">    *    randomAlphanumeric(&lt;jk&gt;8&lt;/jk&gt;);  &lt;jc&gt;// "aB3dE5fG"&lt;/jc&gt;</span>
<span class="source-line-no">5434</span><span id="line-5434">    * &lt;/p&gt;</span>
<span class="source-line-no">5435</span><span id="line-5435">    *</span>
<span class="source-line-no">5436</span><span id="line-5436">    * @param length The length of the generated string.</span>
<span class="source-line-no">5437</span><span id="line-5437">    * @return A new random alphanumeric string.</span>
<span class="source-line-no">5438</span><span id="line-5438">    */</span>
<span class="source-line-no">5439</span><span id="line-5439">   public static String randomAlphanumeric(int length) {</span>
<span class="source-line-no">5440</span><span id="line-5440">      if (length &lt; 0)</span>
<span class="source-line-no">5441</span><span id="line-5441">         throw new IllegalArgumentException("Length must be non-negative: " + length);</span>
<span class="source-line-no">5442</span><span id="line-5442">      var sb = new StringBuilder(length);</span>
<span class="source-line-no">5443</span><span id="line-5443">      for (var i = 0; i &lt; length; i++) {</span>
<span class="source-line-no">5444</span><span id="line-5444">         var c = RANDOM.nextInt(62);</span>
<span class="source-line-no">5445</span><span id="line-5445">         if (c &lt; 10)</span>
<span class="source-line-no">5446</span><span id="line-5446">            sb.append((char)('0' + c));</span>
<span class="source-line-no">5447</span><span id="line-5447">         else if (c &lt; 36)</span>
<span class="source-line-no">5448</span><span id="line-5448">            sb.append((char)('a' + c - 10));</span>
<span class="source-line-no">5449</span><span id="line-5449">         else</span>
<span class="source-line-no">5450</span><span id="line-5450">            sb.append((char)('A' + c - 36));</span>
<span class="source-line-no">5451</span><span id="line-5451">      }</span>
<span class="source-line-no">5452</span><span id="line-5452">      return sb.toString();</span>
<span class="source-line-no">5453</span><span id="line-5453">   }</span>
<span class="source-line-no">5454</span><span id="line-5454"></span>
<span class="source-line-no">5455</span><span id="line-5455">   /**</span>
<span class="source-line-no">5456</span><span id="line-5456">    * Generates a random ASCII string of the specified length.</span>
<span class="source-line-no">5457</span><span id="line-5457">    *</span>
<span class="source-line-no">5458</span><span id="line-5458">    * &lt;p&gt;</span>
<span class="source-line-no">5459</span><span id="line-5459">    * Characters are composed of printable ASCII characters (32-126).</span>
<span class="source-line-no">5460</span><span id="line-5460">    *</span>
<span class="source-line-no">5461</span><span id="line-5461">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">5462</span><span id="line-5462">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">5463</span><span id="line-5463">    *    randomAscii(&lt;jk&gt;10&lt;/jk&gt;);  &lt;jc&gt;// "!@#$%^&amp;amp;*()"&lt;/jc&gt;</span>
<span class="source-line-no">5464</span><span id="line-5464">    * &lt;/p&gt;</span>
<span class="source-line-no">5465</span><span id="line-5465">    *</span>
<span class="source-line-no">5466</span><span id="line-5466">    * @param length The length of the generated string.</span>
<span class="source-line-no">5467</span><span id="line-5467">    * @return A new random ASCII string.</span>
<span class="source-line-no">5468</span><span id="line-5468">    */</span>
<span class="source-line-no">5469</span><span id="line-5469">   public static String randomAscii(int length) {</span>
<span class="source-line-no">5470</span><span id="line-5470">      if (length &lt; 0)</span>
<span class="source-line-no">5471</span><span id="line-5471">         throw new IllegalArgumentException("Length must be non-negative: " + length);</span>
<span class="source-line-no">5472</span><span id="line-5472">      var sb = new StringBuilder(length);</span>
<span class="source-line-no">5473</span><span id="line-5473">      for (var i = 0; i &lt; length; i++) {</span>
<span class="source-line-no">5474</span><span id="line-5474">         sb.append((char)(32 + RANDOM.nextInt(95))); // 95 printable ASCII chars (32-126)</span>
<span class="source-line-no">5475</span><span id="line-5475">      }</span>
<span class="source-line-no">5476</span><span id="line-5476">      return sb.toString();</span>
<span class="source-line-no">5477</span><span id="line-5477">   }</span>
<span class="source-line-no">5478</span><span id="line-5478"></span>
<span class="source-line-no">5479</span><span id="line-5479">   /**</span>
<span class="source-line-no">5480</span><span id="line-5480">    * Generates a random numeric string of the specified length.</span>
<span class="source-line-no">5481</span><span id="line-5481">    *</span>
<span class="source-line-no">5482</span><span id="line-5482">    * &lt;p&gt;</span>
<span class="source-line-no">5483</span><span id="line-5483">    * Characters are composed of digits (0-9).</span>
<span class="source-line-no">5484</span><span id="line-5484">    *</span>
<span class="source-line-no">5485</span><span id="line-5485">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">5486</span><span id="line-5486">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">5487</span><span id="line-5487">    *    randomNumeric(&lt;jk&gt;6&lt;/jk&gt;);  &lt;jc&gt;// "123456"&lt;/jc&gt;</span>
<span class="source-line-no">5488</span><span id="line-5488">    * &lt;/p&gt;</span>
<span class="source-line-no">5489</span><span id="line-5489">    *</span>
<span class="source-line-no">5490</span><span id="line-5490">    * @param length The length of the generated string.</span>
<span class="source-line-no">5491</span><span id="line-5491">    * @return A new random numeric string.</span>
<span class="source-line-no">5492</span><span id="line-5492">    */</span>
<span class="source-line-no">5493</span><span id="line-5493">   public static String randomNumeric(int length) {</span>
<span class="source-line-no">5494</span><span id="line-5494">      if (length &lt; 0)</span>
<span class="source-line-no">5495</span><span id="line-5495">         throw new IllegalArgumentException("Length must be non-negative: " + length);</span>
<span class="source-line-no">5496</span><span id="line-5496">      var sb = new StringBuilder(length);</span>
<span class="source-line-no">5497</span><span id="line-5497">      for (var i = 0; i &lt; length; i++) {</span>
<span class="source-line-no">5498</span><span id="line-5498">         sb.append((char)('0' + RANDOM.nextInt(10)));</span>
<span class="source-line-no">5499</span><span id="line-5499">      }</span>
<span class="source-line-no">5500</span><span id="line-5500">      return sb.toString();</span>
<span class="source-line-no">5501</span><span id="line-5501">   }</span>
<span class="source-line-no">5502</span><span id="line-5502"></span>
<span class="source-line-no">5503</span><span id="line-5503">   /**</span>
<span class="source-line-no">5504</span><span id="line-5504">    * Generates a random string of the specified length using characters from the given character set.</span>
<span class="source-line-no">5505</span><span id="line-5505">    *</span>
<span class="source-line-no">5506</span><span id="line-5506">    * &lt;p&gt;</span>
<span class="source-line-no">5507</span><span id="line-5507">    * Each character in the generated string is randomly selected from the provided character set.</span>
<span class="source-line-no">5508</span><span id="line-5508">    *</span>
<span class="source-line-no">5509</span><span id="line-5509">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">5510</span><span id="line-5510">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">5511</span><span id="line-5511">    *    randomString(&lt;jk&gt;5&lt;/jk&gt;, &lt;js&gt;"ABC"&lt;/js&gt;);  &lt;jc&gt;// "BACAB"&lt;/jc&gt;</span>
<span class="source-line-no">5512</span><span id="line-5512">    * &lt;/p&gt;</span>
<span class="source-line-no">5513</span><span id="line-5513">    *</span>
<span class="source-line-no">5514</span><span id="line-5514">    * @param length The length of the generated string.</span>
<span class="source-line-no">5515</span><span id="line-5515">    * @param chars The character set to use. Must not be null or empty.</span>
<span class="source-line-no">5516</span><span id="line-5516">    * @return A new random string.</span>
<span class="source-line-no">5517</span><span id="line-5517">    * @throws IllegalArgumentException If chars is null or empty, or length is negative.</span>
<span class="source-line-no">5518</span><span id="line-5518">    */</span>
<span class="source-line-no">5519</span><span id="line-5519">   public static String randomString(int length, String chars) {</span>
<span class="source-line-no">5520</span><span id="line-5520">      if (length &lt; 0)</span>
<span class="source-line-no">5521</span><span id="line-5521">         throw new IllegalArgumentException("Length must be non-negative: " + length);</span>
<span class="source-line-no">5522</span><span id="line-5522">      if (chars == null || chars.isEmpty())</span>
<span class="source-line-no">5523</span><span id="line-5523">         throw new IllegalArgumentException("Character set must not be null or empty");</span>
<span class="source-line-no">5524</span><span id="line-5524">      var sb = new StringBuilder(length);</span>
<span class="source-line-no">5525</span><span id="line-5525">      var charsLen = chars.length();</span>
<span class="source-line-no">5526</span><span id="line-5526">      for (var i = 0; i &lt; length; i++) {</span>
<span class="source-line-no">5527</span><span id="line-5527">         sb.append(chars.charAt(RANDOM.nextInt(charsLen)));</span>
<span class="source-line-no">5528</span><span id="line-5528">      }</span>
<span class="source-line-no">5529</span><span id="line-5529">      return sb.toString();</span>
<span class="source-line-no">5530</span><span id="line-5530">   }</span>
<span class="source-line-no">5531</span><span id="line-5531"></span>
<span class="source-line-no">5532</span><span id="line-5532">   /**</span>
<span class="source-line-no">5533</span><span id="line-5533">    * Calculates a simple readability score for a string.</span>
<span class="source-line-no">5534</span><span id="line-5534">    *</span>
<span class="source-line-no">5535</span><span id="line-5535">    * &lt;p&gt;</span>
<span class="source-line-no">5536</span><span id="line-5536">    * Uses a simplified Flesch Reading Ease-like formula based on:</span>
<span class="source-line-no">5537</span><span id="line-5537">    * &lt;ul&gt;</span>
<span class="source-line-no">5538</span><span id="line-5538">    *   &lt;li&gt;Average words per sentence&lt;/li&gt;</span>
<span class="source-line-no">5539</span><span id="line-5539">    *   &lt;li&gt;Average syllables per word (estimated)&lt;/li&gt;</span>
<span class="source-line-no">5540</span><span id="line-5540">    * &lt;/ul&gt;</span>
<span class="source-line-no">5541</span><span id="line-5541">    * Returns a score from 0-100, where higher scores indicate easier reading.</span>
<span class="source-line-no">5542</span><span id="line-5542">    *</span>
<span class="source-line-no">5543</span><span id="line-5543">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">5544</span><span id="line-5544">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">5545</span><span id="line-5545">    *    readabilityScore(&lt;js&gt;"The cat sat."&lt;/js&gt;);      &lt;jc&gt;// Higher score (simple)&lt;/jc&gt;</span>
<span class="source-line-no">5546</span><span id="line-5546">    *    readabilityScore(&lt;js&gt;"The sophisticated..."&lt;/js&gt;); &lt;jc&gt;// Lower score (complex)&lt;/jc&gt;</span>
<span class="source-line-no">5547</span><span id="line-5547">    * &lt;/p&gt;</span>
<span class="source-line-no">5548</span><span id="line-5548">    *</span>
<span class="source-line-no">5549</span><span id="line-5549">    * @param str The string to analyze. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">5550</span><span id="line-5550">    * @return A readability score from 0-100, or &lt;c&gt;0.0&lt;/c&gt; if the string is &lt;jk&gt;null&lt;/jk&gt; or empty.</span>
<span class="source-line-no">5551</span><span id="line-5551">    */</span>
<span class="source-line-no">5552</span><span id="line-5552">   public static double readabilityScore(String str) {</span>
<span class="source-line-no">5553</span><span id="line-5553">      if (isEmpty(str))</span>
<span class="source-line-no">5554</span><span id="line-5554">         return 0.0;</span>
<span class="source-line-no">5555</span><span id="line-5555"></span>
<span class="source-line-no">5556</span><span id="line-5556">      var words = extractWords(str);</span>
<span class="source-line-no">5557</span><span id="line-5557">      if (words.isEmpty())</span>
<span class="source-line-no">5558</span><span id="line-5558">         return 0.0;</span>
<span class="source-line-no">5559</span><span id="line-5559"></span>
<span class="source-line-no">5560</span><span id="line-5560">      // Count sentences (ending with . ! ?)</span>
<span class="source-line-no">5561</span><span id="line-5561">      var sentenceCount = 0;</span>
<span class="source-line-no">5562</span><span id="line-5562">      for (var i = 0; i &lt; str.length(); i++) {</span>
<span class="source-line-no">5563</span><span id="line-5563">         var c = str.charAt(i);</span>
<span class="source-line-no">5564</span><span id="line-5564">         if (c == '.' || c == '!' || c == '?') {</span>
<span class="source-line-no">5565</span><span id="line-5565">            sentenceCount++;</span>
<span class="source-line-no">5566</span><span id="line-5566">         }</span>
<span class="source-line-no">5567</span><span id="line-5567">      }</span>
<span class="source-line-no">5568</span><span id="line-5568">      if (sentenceCount == 0)</span>
<span class="source-line-no">5569</span><span id="line-5569">         sentenceCount = 1; // At least one sentence</span>
<span class="source-line-no">5570</span><span id="line-5570"></span>
<span class="source-line-no">5571</span><span id="line-5571">      // Calculate average words per sentence</span>
<span class="source-line-no">5572</span><span id="line-5572">      var avgWordsPerSentence = (double)words.size() / sentenceCount;</span>
<span class="source-line-no">5573</span><span id="line-5573"></span>
<span class="source-line-no">5574</span><span id="line-5574">      // Estimate average syllables per word (simplified: count vowel groups)</span>
<span class="source-line-no">5575</span><span id="line-5575">      var totalSyllables = 0;</span>
<span class="source-line-no">5576</span><span id="line-5576">      for (var word : words) {</span>
<span class="source-line-no">5577</span><span id="line-5577">         totalSyllables += estimateSyllables(word);</span>
<span class="source-line-no">5578</span><span id="line-5578">      }</span>
<span class="source-line-no">5579</span><span id="line-5579">      var avgSyllablesPerWord = (double)totalSyllables / words.size();</span>
<span class="source-line-no">5580</span><span id="line-5580"></span>
<span class="source-line-no">5581</span><span id="line-5581">      // Simplified Flesch Reading Ease formula</span>
<span class="source-line-no">5582</span><span id="line-5582">      // Score = 206.835 - (1.015 * ASL) - (84.6 * ASW)</span>
<span class="source-line-no">5583</span><span id="line-5583">      // Where ASL = average sentence length (words), ASW = average syllables per word</span>
<span class="source-line-no">5584</span><span id="line-5584">      var score = 206.835 - (1.015 * avgWordsPerSentence) - (84.6 * avgSyllablesPerWord);</span>
<span class="source-line-no">5585</span><span id="line-5585"></span>
<span class="source-line-no">5586</span><span id="line-5586">      // Clamp to 0-100 range</span>
<span class="source-line-no">5587</span><span id="line-5587">      return Math.max(0.0, Math.min(100.0, score));</span>
<span class="source-line-no">5588</span><span id="line-5588">   }</span>
<span class="source-line-no">5589</span><span id="line-5589"></span>
<span class="source-line-no">5590</span><span id="line-5590">   /**</span>
<span class="source-line-no">5591</span><span id="line-5591">    * Converts an arbitrary object to a readable string format suitable for debugging and testing.</span>
<span class="source-line-no">5592</span><span id="line-5592">    *</span>
<span class="source-line-no">5593</span><span id="line-5593">    * &lt;p&gt;This method provides intelligent formatting for various Java types, recursively processing</span>
<span class="source-line-no">5594</span><span id="line-5594">    * nested structures to create human-readable representations. It's extensively used throughout</span>
<span class="source-line-no">5595</span><span id="line-5595">    * the Juneau framework for test assertions and debugging output.&lt;/p&gt;</span>
<span class="source-line-no">5596</span><span id="line-5596">    *</span>
<span class="source-line-no">5597</span><span id="line-5597">    * &lt;h5 class='section'&gt;Type-Specific Formatting:&lt;/h5&gt;</span>
<span class="source-line-no">5598</span><span id="line-5598">    * &lt;ul&gt;</span>
<span class="source-line-no">5599</span><span id="line-5599">    *    &lt;li&gt;&lt;b&gt;null:&lt;/b&gt; Returns &lt;js&gt;null&lt;/js&gt;&lt;/li&gt;</span>
<span class="source-line-no">5600</span><span id="line-5600">    *    &lt;li&gt;&lt;b&gt;Optional:&lt;/b&gt; Recursively formats the contained value (or &lt;js&gt;null&lt;/js&gt; if empty)&lt;/li&gt;</span>
<span class="source-line-no">5601</span><span id="line-5601">    *    &lt;li&gt;&lt;b&gt;Collections:&lt;/b&gt; Formats as &lt;js&gt;"[item1,item2,item3]"&lt;/js&gt; with comma-separated elements&lt;/li&gt;</span>
<span class="source-line-no">5602</span><span id="line-5602">    *    &lt;li&gt;&lt;b&gt;Maps:&lt;/b&gt; Formats as &lt;js&gt;"{key1=value1,key2=value2}"&lt;/js&gt; with comma-separated entries&lt;/li&gt;</span>
<span class="source-line-no">5603</span><span id="line-5603">    *    &lt;li&gt;&lt;b&gt;Map.Entry:&lt;/b&gt; Formats as &lt;js&gt;"key=value"&lt;/js&gt;&lt;/li&gt;</span>
<span class="source-line-no">5604</span><span id="line-5604">    *    &lt;li&gt;&lt;b&gt;Arrays:&lt;/b&gt; Converts to list format &lt;js&gt;"[item1,item2,item3]"&lt;/js&gt;&lt;/li&gt;</span>
<span class="source-line-no">5605</span><span id="line-5605">    *    &lt;li&gt;&lt;b&gt;Iterables/Iterators/Enumerations:&lt;/b&gt; Converts to list and formats recursively&lt;/li&gt;</span>
<span class="source-line-no">5606</span><span id="line-5606">    *    &lt;li&gt;&lt;b&gt;GregorianCalendar:&lt;/b&gt; Formats as ISO instant timestamp&lt;/li&gt;</span>
<span class="source-line-no">5607</span><span id="line-5607">    *    &lt;li&gt;&lt;b&gt;Date:&lt;/b&gt; Formats as ISO instant string (e.g., &lt;js&gt;"2023-12-25T10:30:00Z"&lt;/js&gt;)&lt;/li&gt;</span>
<span class="source-line-no">5608</span><span id="line-5608">    *    &lt;li&gt;&lt;b&gt;InputStream:&lt;/b&gt; Converts to hexadecimal representation&lt;/li&gt;</span>
<span class="source-line-no">5609</span><span id="line-5609">    *    &lt;li&gt;&lt;b&gt;Reader:&lt;/b&gt; Reads content and returns as string&lt;/li&gt;</span>
<span class="source-line-no">5610</span><span id="line-5610">    *    &lt;li&gt;&lt;b&gt;File:&lt;/b&gt; Reads file content and returns as string&lt;/li&gt;</span>
<span class="source-line-no">5611</span><span id="line-5611">    *    &lt;li&gt;&lt;b&gt;byte[]:&lt;/b&gt; Converts to hexadecimal representation&lt;/li&gt;</span>
<span class="source-line-no">5612</span><span id="line-5612">    *    &lt;li&gt;&lt;b&gt;Enum:&lt;/b&gt; Returns the enum name via {@link Enum#name()}&lt;/li&gt;</span>
<span class="source-line-no">5613</span><span id="line-5613">    *    &lt;li&gt;&lt;b&gt;All other types:&lt;/b&gt; Uses {@link Object#toString()}&lt;/li&gt;</span>
<span class="source-line-no">5614</span><span id="line-5614">    * &lt;/ul&gt;</span>
<span class="source-line-no">5615</span><span id="line-5615">    *</span>
<span class="source-line-no">5616</span><span id="line-5616">    * &lt;h5 class='section'&gt;Examples:&lt;/h5&gt;</span>
<span class="source-line-no">5617</span><span id="line-5617">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">5618</span><span id="line-5618">    *    &lt;jc&gt;// Collections&lt;/jc&gt;</span>
<span class="source-line-no">5619</span><span id="line-5619">    *    readable(List.of("a", "b", "c")) &lt;jc&gt;// Returns: "[a,b,c]"&lt;/jc&gt;</span>
<span class="source-line-no">5620</span><span id="line-5620">    *    readable(Set.of(1, 2, 3)) &lt;jc&gt;// Returns: "[1,2,3]" (order may vary)&lt;/jc&gt;</span>
<span class="source-line-no">5621</span><span id="line-5621">    *</span>
<span class="source-line-no">5622</span><span id="line-5622">    *    &lt;jc&gt;// Maps&lt;/jc&gt;</span>
<span class="source-line-no">5623</span><span id="line-5623">    *    readable(Map.of("foo", "bar", "baz", 123)) &lt;jc&gt;// Returns: "{foo=bar,baz=123}"&lt;/jc&gt;</span>
<span class="source-line-no">5624</span><span id="line-5624">    *</span>
<span class="source-line-no">5625</span><span id="line-5625">    *    &lt;jc&gt;// Arrays&lt;/jc&gt;</span>
<span class="source-line-no">5626</span><span id="line-5626">    *    readable(ints(1, 2, 3)) &lt;jc&gt;// Returns: "[1,2,3]"&lt;/jc&gt;</span>
<span class="source-line-no">5627</span><span id="line-5627">    *    readable(new String[]{"a", "b"}) &lt;jc&gt;// Returns: "[a,b]"&lt;/jc&gt;</span>
<span class="source-line-no">5628</span><span id="line-5628">    *</span>
<span class="source-line-no">5629</span><span id="line-5629">    *    &lt;jc&gt;// Nested structures&lt;/jc&gt;</span>
<span class="source-line-no">5630</span><span id="line-5630">    *    readable(List.of(Map.of("x", 1), Set.of("a", "b"))) &lt;jc&gt;// Returns: "[{x=1},[a,b]]"&lt;/jc&gt;</span>
<span class="source-line-no">5631</span><span id="line-5631">    *</span>
<span class="source-line-no">5632</span><span id="line-5632">    *    &lt;jc&gt;// Special types&lt;/jc&gt;</span>
<span class="source-line-no">5633</span><span id="line-5633">    *    readable(Optional.of("test")) &lt;jc&gt;// Returns: "test"&lt;/jc&gt;</span>
<span class="source-line-no">5634</span><span id="line-5634">    *    readable(Optional.empty()) &lt;jc&gt;// Returns: null&lt;/jc&gt;</span>
<span class="source-line-no">5635</span><span id="line-5635">    *    readable(new Date(1640995200000L)) &lt;jc&gt;// Returns: "2022-01-01T00:00:00Z"&lt;/jc&gt;</span>
<span class="source-line-no">5636</span><span id="line-5636">    *    readable(MyEnum.FOO) &lt;jc&gt;// Returns: "FOO"&lt;/jc&gt;</span>
<span class="source-line-no">5637</span><span id="line-5637">    * &lt;/p&gt;</span>
<span class="source-line-no">5638</span><span id="line-5638">    *</span>
<span class="source-line-no">5639</span><span id="line-5639">    * &lt;h5 class='section'&gt;Recursive Processing:&lt;/h5&gt;</span>
<span class="source-line-no">5640</span><span id="line-5640">    * &lt;p&gt;The method recursively processes nested structures, so complex objects containing</span>
<span class="source-line-no">5641</span><span id="line-5641">    * collections, maps, and arrays are fully flattened into readable format. This makes it</span>
<span class="source-line-no">5642</span><span id="line-5642">    * ideal for test assertions where you need to compare complex object structures.&lt;/p&gt;</span>
<span class="source-line-no">5643</span><span id="line-5643">    *</span>
<span class="source-line-no">5644</span><span id="line-5644">    * &lt;h5 class='section'&gt;Error Handling:&lt;/h5&gt;</span>
<span class="source-line-no">5645</span><span id="line-5645">    * &lt;p&gt;IO operations (reading files, streams) are wrapped in safe() calls, converting</span>
<span class="source-line-no">5646</span><span id="line-5646">    * any exceptions to RuntimeExceptions. Binary data (InputStreams, byte arrays) is</span>
<span class="source-line-no">5647</span><span id="line-5647">    * converted to hexadecimal representation for readability.&lt;/p&gt;</span>
<span class="source-line-no">5648</span><span id="line-5648">    *</span>
<span class="source-line-no">5649</span><span id="line-5649">    * @param o The object to convert to readable format. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">5650</span><span id="line-5650">    * @return A readable string representation of the object, or &lt;jk&gt;null&lt;/jk&gt; if the input was &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">5651</span><span id="line-5651">    */</span>
<span class="source-line-no">5652</span><span id="line-5652">   public static String readable(Object o) {</span>
<span class="source-line-no">5653</span><span id="line-5653">      if (o == null)</span>
<span class="source-line-no">5654</span><span id="line-5654">         return null;</span>
<span class="source-line-no">5655</span><span id="line-5655">      var c = o.getClass();</span>
<span class="source-line-no">5656</span><span id="line-5656"></span>
<span class="source-line-no">5657</span><span id="line-5657">      // Special case for byte[] - must be handled before general array check</span>
<span class="source-line-no">5658</span><span id="line-5658">      if (c == byte[].class) {</span>
<span class="source-line-no">5659</span><span id="line-5659">         return toHex((byte[])o);</span>
<span class="source-line-no">5660</span><span id="line-5660">      }</span>
<span class="source-line-no">5661</span><span id="line-5661"></span>
<span class="source-line-no">5662</span><span id="line-5662">      // Check cache first</span>
<span class="source-line-no">5663</span><span id="line-5663">      var f = READIFIER_CACHE.get(c, () -&gt; {</span>
<span class="source-line-no">5664</span><span id="line-5664">         // Find readifier from READIFIERS list</span>
<span class="source-line-no">5665</span><span id="line-5665">         // First try exact match, then isAssignableFrom</span>
<span class="source-line-no">5666</span><span id="line-5666">         var readifier = READIFIERS.stream()</span>
<span class="source-line-no">5667</span><span id="line-5667">            .filter(r -&gt; r.forClass() == c || r.forClass().isAssignableFrom(c))</span>
<span class="source-line-no">5668</span><span id="line-5668">            .map(Readifier::toFunction)</span>
<span class="source-line-no">5669</span><span id="line-5669">            .findFirst()</span>
<span class="source-line-no">5670</span><span id="line-5670">            .orElse(null);</span>
<span class="source-line-no">5671</span><span id="line-5671"></span>
<span class="source-line-no">5672</span><span id="line-5672">         // If readifier found, use it</span>
<span class="source-line-no">5673</span><span id="line-5673">         if (readifier != null)</span>
<span class="source-line-no">5674</span><span id="line-5674">            return readifier;</span>
<span class="source-line-no">5675</span><span id="line-5675"></span>
<span class="source-line-no">5676</span><span id="line-5676">         // If no readifier found, check if it's an array</span>
<span class="source-line-no">5677</span><span id="line-5677">         if (c.isArray()) {</span>
<span class="source-line-no">5678</span><span id="line-5678">            return x -&gt; {</span>
<span class="source-line-no">5679</span><span id="line-5679">               var l = list();</span>
<span class="source-line-no">5680</span><span id="line-5680">               for (var i = 0; i &lt; Array.getLength(x); i++) {</span>
<span class="source-line-no">5681</span><span id="line-5681">                  l.add(Array.get(x, i));</span>
<span class="source-line-no">5682</span><span id="line-5682">               }</span>
<span class="source-line-no">5683</span><span id="line-5683">               return readable(l);</span>
<span class="source-line-no">5684</span><span id="line-5684">            };</span>
<span class="source-line-no">5685</span><span id="line-5685">         }</span>
<span class="source-line-no">5686</span><span id="line-5686"></span>
<span class="source-line-no">5687</span><span id="line-5687">         // If no readifier found, use toString() as fallback</span>
<span class="source-line-no">5688</span><span id="line-5688">         return x -&gt; x.toString();</span>
<span class="source-line-no">5689</span><span id="line-5689">      });</span>
<span class="source-line-no">5690</span><span id="line-5690"></span>
<span class="source-line-no">5691</span><span id="line-5691">      return f.apply(o);</span>
<span class="source-line-no">5692</span><span id="line-5692">   }</span>
<span class="source-line-no">5693</span><span id="line-5693"></span>
<span class="source-line-no">5694</span><span id="line-5694">   /**</span>
<span class="source-line-no">5695</span><span id="line-5695">    * Removes all occurrences of a substring from a string.</span>
<span class="source-line-no">5696</span><span id="line-5696">    *</span>
<span class="source-line-no">5697</span><span id="line-5697">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">5698</span><span id="line-5698">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">5699</span><span id="line-5699">    *    remove(&lt;jk&gt;null&lt;/jk&gt;, &lt;js&gt;"x"&lt;/js&gt;);              &lt;jc&gt;// null&lt;/jc&gt;</span>
<span class="source-line-no">5700</span><span id="line-5700">    *    remove(&lt;js&gt;"hello"&lt;/js&gt;, &lt;jk&gt;null&lt;/jk&gt;);          &lt;jc&gt;// "hello"&lt;/jc&gt;</span>
<span class="source-line-no">5701</span><span id="line-5701">    *    remove(&lt;js&gt;"hello world"&lt;/js&gt;, &lt;js&gt;"o"&lt;/js&gt;);     &lt;jc&gt;// "hell wrld"&lt;/jc&gt;</span>
<span class="source-line-no">5702</span><span id="line-5702">    *    remove(&lt;js&gt;"hello world"&lt;/js&gt;, &lt;js&gt;"xyz"&lt;/js&gt;);   &lt;jc&gt;// "hello world"&lt;/jc&gt;</span>
<span class="source-line-no">5703</span><span id="line-5703">    * &lt;/p&gt;</span>
<span class="source-line-no">5704</span><span id="line-5704">    *</span>
<span class="source-line-no">5705</span><span id="line-5705">    * @param str The string to process.</span>
<span class="source-line-no">5706</span><span id="line-5706">    * @param remove The substring to remove.</span>
<span class="source-line-no">5707</span><span id="line-5707">    * @return The string with all occurrences of the substring removed, or &lt;jk&gt;null&lt;/jk&gt; if input is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">5708</span><span id="line-5708">    */</span>
<span class="source-line-no">5709</span><span id="line-5709">   public static String remove(String str, String remove) {</span>
<span class="source-line-no">5710</span><span id="line-5710">      if (isEmpty(str) || isEmpty(remove))</span>
<span class="source-line-no">5711</span><span id="line-5711">         return str;</span>
<span class="source-line-no">5712</span><span id="line-5712">      return str.replace(remove, "");</span>
<span class="source-line-no">5713</span><span id="line-5713">   }</span>
<span class="source-line-no">5714</span><span id="line-5714"></span>
<span class="source-line-no">5715</span><span id="line-5715">   /**</span>
<span class="source-line-no">5716</span><span id="line-5716">    * Removes diacritical marks (accents) from characters in a string.</span>
<span class="source-line-no">5717</span><span id="line-5717">    *</span>
<span class="source-line-no">5718</span><span id="line-5718">    * &lt;p&gt;</span>
<span class="source-line-no">5719</span><span id="line-5719">    * Normalizes the string to NFD form and removes combining diacritical marks.</span>
<span class="source-line-no">5720</span><span id="line-5720">    *</span>
<span class="source-line-no">5721</span><span id="line-5721">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">5722</span><span id="line-5722">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">5723</span><span id="line-5723">    *    removeAccents(&lt;js&gt;"caf"&lt;/js&gt;);     &lt;jc&gt;// "cafe"&lt;/jc&gt;</span>
<span class="source-line-no">5724</span><span id="line-5724">    *    removeAccents(&lt;js&gt;"nave"&lt;/js&gt;);    &lt;jc&gt;// "naive"&lt;/jc&gt;</span>
<span class="source-line-no">5725</span><span id="line-5725">    *    removeAccents(&lt;js&gt;"rsum"&lt;/js&gt;);   &lt;jc&gt;// "resume"&lt;/jc&gt;</span>
<span class="source-line-no">5726</span><span id="line-5726">    * &lt;/p&gt;</span>
<span class="source-line-no">5727</span><span id="line-5727">    *</span>
<span class="source-line-no">5728</span><span id="line-5728">    * @param str The string to remove accents from. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">5729</span><span id="line-5729">    * @return The string with accents removed, or &lt;jk&gt;null&lt;/jk&gt; if input is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">5730</span><span id="line-5730">    */</span>
<span class="source-line-no">5731</span><span id="line-5731">   public static String removeAccents(String str) {</span>
<span class="source-line-no">5732</span><span id="line-5732">      if (str == null)</span>
<span class="source-line-no">5733</span><span id="line-5733">         return null;</span>
<span class="source-line-no">5734</span><span id="line-5734"></span>
<span class="source-line-no">5735</span><span id="line-5735">      // Normalize to NFD (decomposed form)</span>
<span class="source-line-no">5736</span><span id="line-5736">      var normalized = Normalizer.normalize(str, Normalizer.Form.NFD);</span>
<span class="source-line-no">5737</span><span id="line-5737"></span>
<span class="source-line-no">5738</span><span id="line-5738">      // Remove combining diacritical marks (Unicode category Mn)</span>
<span class="source-line-no">5739</span><span id="line-5739">      var sb = new StringBuilder(normalized.length());</span>
<span class="source-line-no">5740</span><span id="line-5740">      for (var i = 0; i &lt; normalized.length(); i++) {</span>
<span class="source-line-no">5741</span><span id="line-5741">         var c = normalized.charAt(i);</span>
<span class="source-line-no">5742</span><span id="line-5742">         var type = Character.getType(c);</span>
<span class="source-line-no">5743</span><span id="line-5743">         // Mn = Nonspacing_Mark (combining marks)</span>
<span class="source-line-no">5744</span><span id="line-5744">         if (type != Character.NON_SPACING_MARK) {</span>
<span class="source-line-no">5745</span><span id="line-5745">            sb.append(c);</span>
<span class="source-line-no">5746</span><span id="line-5746">         }</span>
<span class="source-line-no">5747</span><span id="line-5747">      }</span>
<span class="source-line-no">5748</span><span id="line-5748"></span>
<span class="source-line-no">5749</span><span id="line-5749">      return sb.toString();</span>
<span class="source-line-no">5750</span><span id="line-5750">   }</span>
<span class="source-line-no">5751</span><span id="line-5751"></span>
<span class="source-line-no">5752</span><span id="line-5752">   /**</span>
<span class="source-line-no">5753</span><span id="line-5753">    * Removes multiple substrings from a string.</span>
<span class="source-line-no">5754</span><span id="line-5754">    *</span>
<span class="source-line-no">5755</span><span id="line-5755">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">5756</span><span id="line-5756">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">5757</span><span id="line-5757">    *    removeAll(&lt;js&gt;"hello world test"&lt;/js&gt;, &lt;js&gt;"hello"&lt;/js&gt;, &lt;js&gt;"test"&lt;/js&gt;);  &lt;jc&gt;// " world "&lt;/jc&gt;</span>
<span class="source-line-no">5758</span><span id="line-5758">    *    removeAll(&lt;jk&gt;null&lt;/jk&gt;, &lt;js&gt;"x"&lt;/js&gt;);                                     &lt;jc&gt;// null&lt;/jc&gt;</span>
<span class="source-line-no">5759</span><span id="line-5759">    * &lt;/p&gt;</span>
<span class="source-line-no">5760</span><span id="line-5760">    *</span>
<span class="source-line-no">5761</span><span id="line-5761">    * @param str The string to process.</span>
<span class="source-line-no">5762</span><span id="line-5762">    * @param remove The substrings to remove.</span>
<span class="source-line-no">5763</span><span id="line-5763">    * @return The string with all specified substrings removed, or &lt;jk&gt;null&lt;/jk&gt; if input is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">5764</span><span id="line-5764">    */</span>
<span class="source-line-no">5765</span><span id="line-5765">   public static String removeAll(String str, String...remove) {</span>
<span class="source-line-no">5766</span><span id="line-5766">      if (str == null)</span>
<span class="source-line-no">5767</span><span id="line-5767">         return null;</span>
<span class="source-line-no">5768</span><span id="line-5768">      if (isEmpty(str) || remove == null || remove.length == 0)</span>
<span class="source-line-no">5769</span><span id="line-5769">         return str;</span>
<span class="source-line-no">5770</span><span id="line-5770">      var result = str;</span>
<span class="source-line-no">5771</span><span id="line-5771">      for (var r : remove) {</span>
<span class="source-line-no">5772</span><span id="line-5772">         if (r != null)</span>
<span class="source-line-no">5773</span><span id="line-5773">            result = result.replace(r, "");</span>
<span class="source-line-no">5774</span><span id="line-5774">      }</span>
<span class="source-line-no">5775</span><span id="line-5775">      return result;</span>
<span class="source-line-no">5776</span><span id="line-5776">   }</span>
<span class="source-line-no">5777</span><span id="line-5777"></span>
<span class="source-line-no">5778</span><span id="line-5778">   /**</span>
<span class="source-line-no">5779</span><span id="line-5779">    * Removes control characters from a string, replacing them with spaces.</span>
<span class="source-line-no">5780</span><span id="line-5780">    *</span>
<span class="source-line-no">5781</span><span id="line-5781">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">5782</span><span id="line-5782">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">5783</span><span id="line-5783">    *    removeControlChars(&lt;js&gt;"hello\u0000\u0001world"&lt;/js&gt;);   &lt;jc&gt;// "hello  world"&lt;/jc&gt;</span>
<span class="source-line-no">5784</span><span id="line-5784">    *    removeControlChars(&lt;js&gt;"hello\nworld"&lt;/js&gt;);             &lt;jc&gt;// "hello\nworld"&lt;/jc&gt;</span>
<span class="source-line-no">5785</span><span id="line-5785">    * &lt;/p&gt;</span>
<span class="source-line-no">5786</span><span id="line-5786">    *</span>
<span class="source-line-no">5787</span><span id="line-5787">    * @param str The string to process.</span>
<span class="source-line-no">5788</span><span id="line-5788">    * @return The string with control characters replaced by spaces (except whitespace control chars), or &lt;jk&gt;null&lt;/jk&gt; if input is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">5789</span><span id="line-5789">    */</span>
<span class="source-line-no">5790</span><span id="line-5790">   public static String removeControlChars(String str) {</span>
<span class="source-line-no">5791</span><span id="line-5791">      if (str == null)</span>
<span class="source-line-no">5792</span><span id="line-5792">         return null;</span>
<span class="source-line-no">5793</span><span id="line-5793">      var sb = new StringBuilder();</span>
<span class="source-line-no">5794</span><span id="line-5794">      for (var i = 0; i &lt; str.length(); i++) {</span>
<span class="source-line-no">5795</span><span id="line-5795">         var c = str.charAt(i);</span>
<span class="source-line-no">5796</span><span id="line-5796">         if (Character.isISOControl(c) &amp;&amp; ! Character.isWhitespace(c))</span>
<span class="source-line-no">5797</span><span id="line-5797">            sb.append(' ');</span>
<span class="source-line-no">5798</span><span id="line-5798">         else</span>
<span class="source-line-no">5799</span><span id="line-5799">            sb.append(c);</span>
<span class="source-line-no">5800</span><span id="line-5800">      }</span>
<span class="source-line-no">5801</span><span id="line-5801">      return sb.toString();</span>
<span class="source-line-no">5802</span><span id="line-5802">   }</span>
<span class="source-line-no">5803</span><span id="line-5803"></span>
<span class="source-line-no">5804</span><span id="line-5804">   /**</span>
<span class="source-line-no">5805</span><span id="line-5805">    * Removes a suffix from a string if present.</span>
<span class="source-line-no">5806</span><span id="line-5806">    *</span>
<span class="source-line-no">5807</span><span id="line-5807">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">5808</span><span id="line-5808">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">5809</span><span id="line-5809">    *    removeEnd(&lt;jk&gt;null&lt;/jk&gt;, &lt;js&gt;"x"&lt;/js&gt;);              &lt;jc&gt;// null&lt;/jc&gt;</span>
<span class="source-line-no">5810</span><span id="line-5810">    *    removeEnd(&lt;js&gt;"hello"&lt;/js&gt;, &lt;jk&gt;null&lt;/jk&gt;);          &lt;jc&gt;// "hello"&lt;/jc&gt;</span>
<span class="source-line-no">5811</span><span id="line-5811">    *    removeEnd(&lt;js&gt;"hello world"&lt;/js&gt;, &lt;js&gt;"world"&lt;/js&gt;); &lt;jc&gt;// "hello "&lt;/jc&gt;</span>
<span class="source-line-no">5812</span><span id="line-5812">    *    removeEnd(&lt;js&gt;"hello world"&lt;/js&gt;, &lt;js&gt;"xyz"&lt;/js&gt;);   &lt;jc&gt;// "hello world"&lt;/jc&gt;</span>
<span class="source-line-no">5813</span><span id="line-5813">    * &lt;/p&gt;</span>
<span class="source-line-no">5814</span><span id="line-5814">    *</span>
<span class="source-line-no">5815</span><span id="line-5815">    * @param str The string to process.</span>
<span class="source-line-no">5816</span><span id="line-5816">    * @param suffix The suffix to remove.</span>
<span class="source-line-no">5817</span><span id="line-5817">    * @return The string with the suffix removed if present, or &lt;jk&gt;null&lt;/jk&gt; if input is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">5818</span><span id="line-5818">    */</span>
<span class="source-line-no">5819</span><span id="line-5819">   public static String removeEnd(String str, String suffix) {</span>
<span class="source-line-no">5820</span><span id="line-5820">      if (isEmpty(str) || isEmpty(suffix))</span>
<span class="source-line-no">5821</span><span id="line-5821">         return str;</span>
<span class="source-line-no">5822</span><span id="line-5822">      if (str.endsWith(suffix))</span>
<span class="source-line-no">5823</span><span id="line-5823">         return str.substring(0, str.length() - suffix.length());</span>
<span class="source-line-no">5824</span><span id="line-5824">      return str;</span>
<span class="source-line-no">5825</span><span id="line-5825">   }</span>
<span class="source-line-no">5826</span><span id="line-5826"></span>
<span class="source-line-no">5827</span><span id="line-5827">   /**</span>
<span class="source-line-no">5828</span><span id="line-5828">    * Removes non-printable characters from a string.</span>
<span class="source-line-no">5829</span><span id="line-5829">    *</span>
<span class="source-line-no">5830</span><span id="line-5830">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">5831</span><span id="line-5831">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">5832</span><span id="line-5832">    *    removeNonPrintable(&lt;js&gt;"hello\u0000world"&lt;/js&gt;);   &lt;jc&gt;// "helloworld"&lt;/jc&gt;</span>
<span class="source-line-no">5833</span><span id="line-5833">    * &lt;/p&gt;</span>
<span class="source-line-no">5834</span><span id="line-5834">    *</span>
<span class="source-line-no">5835</span><span id="line-5835">    * @param str The string to process.</span>
<span class="source-line-no">5836</span><span id="line-5836">    * @return The string with non-printable characters removed, or &lt;jk&gt;null&lt;/jk&gt; if input is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">5837</span><span id="line-5837">    */</span>
<span class="source-line-no">5838</span><span id="line-5838">   public static String removeNonPrintable(String str) {</span>
<span class="source-line-no">5839</span><span id="line-5839">      if (str == null)</span>
<span class="source-line-no">5840</span><span id="line-5840">         return null;</span>
<span class="source-line-no">5841</span><span id="line-5841">      return str.replaceAll("\\p{C}", "");</span>
<span class="source-line-no">5842</span><span id="line-5842">   }</span>
<span class="source-line-no">5843</span><span id="line-5843"></span>
<span class="source-line-no">5844</span><span id="line-5844">   /**</span>
<span class="source-line-no">5845</span><span id="line-5845">    * Removes a prefix from a string if present.</span>
<span class="source-line-no">5846</span><span id="line-5846">    *</span>
<span class="source-line-no">5847</span><span id="line-5847">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">5848</span><span id="line-5848">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">5849</span><span id="line-5849">    *    removeStart(&lt;jk&gt;null&lt;/jk&gt;, &lt;js&gt;"x"&lt;/js&gt;);              &lt;jc&gt;// null&lt;/jc&gt;</span>
<span class="source-line-no">5850</span><span id="line-5850">    *    removeStart(&lt;js&gt;"hello"&lt;/js&gt;, &lt;jk&gt;null&lt;/jk&gt;);          &lt;jc&gt;// "hello"&lt;/jc&gt;</span>
<span class="source-line-no">5851</span><span id="line-5851">    *    removeStart(&lt;js&gt;"hello world"&lt;/js&gt;, &lt;js&gt;"hello"&lt;/js&gt;); &lt;jc&gt;// " world"&lt;/jc&gt;</span>
<span class="source-line-no">5852</span><span id="line-5852">    *    removeStart(&lt;js&gt;"hello world"&lt;/js&gt;, &lt;js&gt;"xyz"&lt;/js&gt;);   &lt;jc&gt;// "hello world"&lt;/jc&gt;</span>
<span class="source-line-no">5853</span><span id="line-5853">    * &lt;/p&gt;</span>
<span class="source-line-no">5854</span><span id="line-5854">    *</span>
<span class="source-line-no">5855</span><span id="line-5855">    * @param str The string to process.</span>
<span class="source-line-no">5856</span><span id="line-5856">    * @param prefix The prefix to remove.</span>
<span class="source-line-no">5857</span><span id="line-5857">    * @return The string with the prefix removed if present, or &lt;jk&gt;null&lt;/jk&gt; if input is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">5858</span><span id="line-5858">    */</span>
<span class="source-line-no">5859</span><span id="line-5859">   public static String removeStart(String str, String prefix) {</span>
<span class="source-line-no">5860</span><span id="line-5860">      if (isEmpty(str) || isEmpty(prefix))</span>
<span class="source-line-no">5861</span><span id="line-5861">         return str;</span>
<span class="source-line-no">5862</span><span id="line-5862">      if (str.startsWith(prefix))</span>
<span class="source-line-no">5863</span><span id="line-5863">         return str.substring(prefix.length());</span>
<span class="source-line-no">5864</span><span id="line-5864">      return str;</span>
<span class="source-line-no">5865</span><span id="line-5865">   }</span>
<span class="source-line-no">5866</span><span id="line-5866"></span>
<span class="source-line-no">5867</span><span id="line-5867">   /**</span>
<span class="source-line-no">5868</span><span id="line-5868">    * Removes all underscore characters from a string.</span>
<span class="source-line-no">5869</span><span id="line-5869">    *</span>
<span class="source-line-no">5870</span><span id="line-5870">    * &lt;p&gt;</span>
<span class="source-line-no">5871</span><span id="line-5871">    * This method is commonly used to process numeric literals that may contain underscores for readability</span>
<span class="source-line-no">5872</span><span id="line-5872">    * (e.g., &lt;js&gt;"1_000_000"&lt;/js&gt; becomes &lt;js&gt;"1000000"&lt;/js&gt;), as Java allows underscores in numeric literals</span>
<span class="source-line-no">5873</span><span id="line-5873">    * but some parsing methods do not support them.</span>
<span class="source-line-no">5874</span><span id="line-5874">    *</span>
<span class="source-line-no">5875</span><span id="line-5875">    * &lt;p&gt;</span>
<span class="source-line-no">5876</span><span id="line-5876">    * If the string does not contain any underscores, the original string is returned (no new object created).</span>
<span class="source-line-no">5877</span><span id="line-5877">    *</span>
<span class="source-line-no">5878</span><span id="line-5878">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">5879</span><span id="line-5879">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">5880</span><span id="line-5880">    *    removeUnderscores(&lt;js&gt;"1_000_000"&lt;/js&gt;);        &lt;jc&gt;// "1000000"&lt;/jc&gt;</span>
<span class="source-line-no">5881</span><span id="line-5881">    *    removeUnderscores(&lt;js&gt;"1_000.5"&lt;/js&gt;);          &lt;jc&gt;// "1000.5"&lt;/jc&gt;</span>
<span class="source-line-no">5882</span><span id="line-5882">    *    removeUnderscores(&lt;js&gt;"hello_world"&lt;/js&gt;);      &lt;jc&gt;// "helloworld"&lt;/jc&gt;</span>
<span class="source-line-no">5883</span><span id="line-5883">    *    removeUnderscores(&lt;js&gt;"no_underscores"&lt;/js&gt;);   &lt;jc&gt;// "nounderscores"&lt;/jc&gt;</span>
<span class="source-line-no">5884</span><span id="line-5884">    *    removeUnderscores(&lt;js&gt;"Hello"&lt;/js&gt;);            &lt;jc&gt;// "Hello" (no change, same object returned)&lt;/jc&gt;</span>
<span class="source-line-no">5885</span><span id="line-5885">    * &lt;/p&gt;</span>
<span class="source-line-no">5886</span><span id="line-5886">    *</span>
<span class="source-line-no">5887</span><span id="line-5887">    * @param value The string from which to remove underscores. Must not be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">5888</span><span id="line-5888">    * @return A new string with all underscores removed, or the original string if it contains no underscores.</span>
<span class="source-line-no">5889</span><span id="line-5889">    * @throws IllegalArgumentException If &lt;c&gt;value&lt;/c&gt; is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">5890</span><span id="line-5890">    * @see #parseInt(String)</span>
<span class="source-line-no">5891</span><span id="line-5891">    * @see #parseLong(String)</span>
<span class="source-line-no">5892</span><span id="line-5892">    * @see #parseFloat(String)</span>
<span class="source-line-no">5893</span><span id="line-5893">    * @see #parseNumber(String, Class)</span>
<span class="source-line-no">5894</span><span id="line-5894">    */</span>
<span class="source-line-no">5895</span><span id="line-5895">   public static String removeUnderscores(String value) {</span>
<span class="source-line-no">5896</span><span id="line-5896">      assertArgNotNull("value", value);</span>
<span class="source-line-no">5897</span><span id="line-5897">      return notContains(value, '_') ? value : value.replace("_", "");</span>
<span class="source-line-no">5898</span><span id="line-5898">   }</span>
<span class="source-line-no">5899</span><span id="line-5899"></span>
<span class="source-line-no">5900</span><span id="line-5900">   /**</span>
<span class="source-line-no">5901</span><span id="line-5901">    * Creates a repeated pattern.</span>
<span class="source-line-no">5902</span><span id="line-5902">    *</span>
<span class="source-line-no">5903</span><span id="line-5903">    * @param count The number of times to repeat the pattern.</span>
<span class="source-line-no">5904</span><span id="line-5904">    * @param pattern The pattern to repeat.</span>
<span class="source-line-no">5905</span><span id="line-5905">    * @return A new string consisting of the repeated pattern.</span>
<span class="source-line-no">5906</span><span id="line-5906">    */</span>
<span class="source-line-no">5907</span><span id="line-5907">   public static String repeat(int count, String pattern) {</span>
<span class="source-line-no">5908</span><span id="line-5908">      var sb = new StringBuilder(pattern.length() * count);</span>
<span class="source-line-no">5909</span><span id="line-5909">      for (var i = 0; i &lt; count; i++)</span>
<span class="source-line-no">5910</span><span id="line-5910">         sb.append(pattern);</span>
<span class="source-line-no">5911</span><span id="line-5911">      return sb.toString();</span>
<span class="source-line-no">5912</span><span id="line-5912">   }</span>
<span class="source-line-no">5913</span><span id="line-5913"></span>
<span class="source-line-no">5914</span><span id="line-5914">   /**</span>
<span class="source-line-no">5915</span><span id="line-5915">    * Replaces &lt;js&gt;"\\uXXXX"&lt;/js&gt; character sequences with their unicode characters.</span>
<span class="source-line-no">5916</span><span id="line-5916">    *</span>
<span class="source-line-no">5917</span><span id="line-5917">    * @param s The string to replace unicode sequences in.</span>
<span class="source-line-no">5918</span><span id="line-5918">    * @return A string with unicode sequences replaced.</span>
<span class="source-line-no">5919</span><span id="line-5919">    */</span>
<span class="source-line-no">5920</span><span id="line-5920">   public static String replaceUnicodeSequences(String s) {</span>
<span class="source-line-no">5921</span><span id="line-5921"></span>
<span class="source-line-no">5922</span><span id="line-5922">      if (s.indexOf('\\') == -1)</span>
<span class="source-line-no">5923</span><span id="line-5923">         return s;</span>
<span class="source-line-no">5924</span><span id="line-5924"></span>
<span class="source-line-no">5925</span><span id="line-5925">      var p = Pattern.compile("\\\\u(\\p{XDigit}{4})");</span>
<span class="source-line-no">5926</span><span id="line-5926">      var m = p.matcher(s);</span>
<span class="source-line-no">5927</span><span id="line-5927">      var sb = new StringBuffer(s.length());</span>
<span class="source-line-no">5928</span><span id="line-5928"></span>
<span class="source-line-no">5929</span><span id="line-5929">      while (m.find()) {</span>
<span class="source-line-no">5930</span><span id="line-5930">         var ch = String.valueOf((char)Integer.parseInt(m.group(1), 16));</span>
<span class="source-line-no">5931</span><span id="line-5931">         m.appendReplacement(sb, Matcher.quoteReplacement(ch));</span>
<span class="source-line-no">5932</span><span id="line-5932">      }</span>
<span class="source-line-no">5933</span><span id="line-5933"></span>
<span class="source-line-no">5934</span><span id="line-5934">      m.appendTail(sb);</span>
<span class="source-line-no">5935</span><span id="line-5935">      return sb.toString();</span>
<span class="source-line-no">5936</span><span id="line-5936">   }</span>
<span class="source-line-no">5937</span><span id="line-5937"></span>
<span class="source-line-no">5938</span><span id="line-5938">   /**</span>
<span class="source-line-no">5939</span><span id="line-5939">    * Reverses a string.</span>
<span class="source-line-no">5940</span><span id="line-5940">    *</span>
<span class="source-line-no">5941</span><span id="line-5941">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">5942</span><span id="line-5942">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">5943</span><span id="line-5943">    *    reverse(&lt;jk&gt;null&lt;/jk&gt;);          &lt;jc&gt;// null&lt;/jc&gt;</span>
<span class="source-line-no">5944</span><span id="line-5944">    *    reverse(&lt;js&gt;""&lt;/js&gt;);            &lt;jc&gt;// ""&lt;/jc&gt;</span>
<span class="source-line-no">5945</span><span id="line-5945">    *    reverse(&lt;js&gt;"hello"&lt;/js&gt;);       &lt;jc&gt;// "olleh"&lt;/jc&gt;</span>
<span class="source-line-no">5946</span><span id="line-5946">    * &lt;/p&gt;</span>
<span class="source-line-no">5947</span><span id="line-5947">    *</span>
<span class="source-line-no">5948</span><span id="line-5948">    * @param str The string to reverse.</span>
<span class="source-line-no">5949</span><span id="line-5949">    * @return The reversed string, or &lt;jk&gt;null&lt;/jk&gt; if input is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">5950</span><span id="line-5950">    */</span>
<span class="source-line-no">5951</span><span id="line-5951">   public static String reverse(String str) {</span>
<span class="source-line-no">5952</span><span id="line-5952">      if (str == null)</span>
<span class="source-line-no">5953</span><span id="line-5953">         return null;</span>
<span class="source-line-no">5954</span><span id="line-5954">      return new StringBuilder(str).reverse().toString();</span>
<span class="source-line-no">5955</span><span id="line-5955">   }</span>
<span class="source-line-no">5956</span><span id="line-5956"></span>
<span class="source-line-no">5957</span><span id="line-5957">   /**</span>
<span class="source-line-no">5958</span><span id="line-5958">    * Returns the rightmost characters of a string.</span>
<span class="source-line-no">5959</span><span id="line-5959">    *</span>
<span class="source-line-no">5960</span><span id="line-5960">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">5961</span><span id="line-5961">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">5962</span><span id="line-5962">    *    right(&lt;jk&gt;null&lt;/jk&gt;, 3);          &lt;jc&gt;// null&lt;/jc&gt;</span>
<span class="source-line-no">5963</span><span id="line-5963">    *    right(&lt;js&gt;""&lt;/js&gt;, 3);            &lt;jc&gt;// ""&lt;/jc&gt;</span>
<span class="source-line-no">5964</span><span id="line-5964">    *    right(&lt;js&gt;"hello"&lt;/js&gt;, 3);       &lt;jc&gt;// "llo"&lt;/jc&gt;</span>
<span class="source-line-no">5965</span><span id="line-5965">    *    right(&lt;js&gt;"hello"&lt;/js&gt;, 10);      &lt;jc&gt;// "hello"&lt;/jc&gt;</span>
<span class="source-line-no">5966</span><span id="line-5966">    * &lt;/p&gt;</span>
<span class="source-line-no">5967</span><span id="line-5967">    *</span>
<span class="source-line-no">5968</span><span id="line-5968">    * @param str The string to get characters from.</span>
<span class="source-line-no">5969</span><span id="line-5969">    * @param len The number of characters to get.</span>
<span class="source-line-no">5970</span><span id="line-5970">    * @return The rightmost characters, or &lt;jk&gt;null&lt;/jk&gt; if input is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">5971</span><span id="line-5971">    */</span>
<span class="source-line-no">5972</span><span id="line-5972">   public static String right(String str, int len) {</span>
<span class="source-line-no">5973</span><span id="line-5973">      if (str == null)</span>
<span class="source-line-no">5974</span><span id="line-5974">         return null;</span>
<span class="source-line-no">5975</span><span id="line-5975">      if (len &lt; 0)</span>
<span class="source-line-no">5976</span><span id="line-5976">         return "";</span>
<span class="source-line-no">5977</span><span id="line-5977">      if (len &gt;= str.length())</span>
<span class="source-line-no">5978</span><span id="line-5978">         return str;</span>
<span class="source-line-no">5979</span><span id="line-5979">      return str.substring(str.length() - len);</span>
<span class="source-line-no">5980</span><span id="line-5980">   }</span>
<span class="source-line-no">5981</span><span id="line-5981"></span>
<span class="source-line-no">5982</span><span id="line-5982">   /**</span>
<span class="source-line-no">5983</span><span id="line-5983">    * Basic HTML/XML sanitization - removes or escapes potentially dangerous content.</span>
<span class="source-line-no">5984</span><span id="line-5984">    *</span>
<span class="source-line-no">5985</span><span id="line-5985">    * &lt;p&gt;</span>
<span class="source-line-no">5986</span><span id="line-5986">    * Removes HTML/XML tags and escapes special characters to prevent XSS attacks.</span>
<span class="source-line-no">5987</span><span id="line-5987">    * This is a basic sanitization - for production use, consider a more robust library.</span>
<span class="source-line-no">5988</span><span id="line-5988">    *</span>
<span class="source-line-no">5989</span><span id="line-5989">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">5990</span><span id="line-5990">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">5991</span><span id="line-5991">    *    sanitize(&lt;js&gt;"&amp;lt;script&amp;gt;alert('xss')&amp;lt;/script&amp;gt;"&lt;/js&gt;);     &lt;jc&gt;// "&amp;amp;lt;script&amp;amp;gt;alert('xss')&amp;amp;lt;/script&amp;amp;gt;"&lt;/jc&gt;</span>
<span class="source-line-no">5992</span><span id="line-5992">    *    sanitize(&lt;js&gt;"Hello &amp;lt;b&amp;gt;World&amp;lt;/b&amp;gt;"&lt;/js&gt;);                &lt;jc&gt;// "Hello &amp;amp;lt;b&amp;amp;gt;World&amp;amp;lt;/b&amp;amp;gt;"&lt;/jc&gt;</span>
<span class="source-line-no">5993</span><span id="line-5993">    * &lt;/p&gt;</span>
<span class="source-line-no">5994</span><span id="line-5994">    *</span>
<span class="source-line-no">5995</span><span id="line-5995">    * @param str The string to sanitize.</span>
<span class="source-line-no">5996</span><span id="line-5996">    * @return The sanitized string with HTML/XML tags escaped, or &lt;jk&gt;null&lt;/jk&gt; if input is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">5997</span><span id="line-5997">    */</span>
<span class="source-line-no">5998</span><span id="line-5998">   public static String sanitize(String str) {</span>
<span class="source-line-no">5999</span><span id="line-5999">      if (str == null)</span>
<span class="source-line-no">6000</span><span id="line-6000">         return null;</span>
<span class="source-line-no">6001</span><span id="line-6001">      // Escape HTML/XML special characters</span>
<span class="source-line-no">6002</span><span id="line-6002">      return escapeHtml(str);</span>
<span class="source-line-no">6003</span><span id="line-6003">   }</span>
<span class="source-line-no">6004</span><span id="line-6004"></span>
<span class="source-line-no">6005</span><span id="line-6005">   /**</span>
<span class="source-line-no">6006</span><span id="line-6006">    * Calculates the similarity percentage between two strings using Levenshtein distance.</span>
<span class="source-line-no">6007</span><span id="line-6007">    *</span>
<span class="source-line-no">6008</span><span id="line-6008">    * &lt;p&gt;</span>
<span class="source-line-no">6009</span><span id="line-6009">    * Returns a value between 0.0 (completely different) and 1.0 (identical).</span>
<span class="source-line-no">6010</span><span id="line-6010">    *</span>
<span class="source-line-no">6011</span><span id="line-6011">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">6012</span><span id="line-6012">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">6013</span><span id="line-6013">    *    similarity(&lt;js&gt;"hello"&lt;/js&gt;, &lt;js&gt;"hello"&lt;/js&gt;);           &lt;jc&gt;// 1.0 (100%)&lt;/jc&gt;</span>
<span class="source-line-no">6014</span><span id="line-6014">    *    similarity(&lt;js&gt;"kitten"&lt;/js&gt;, &lt;js&gt;"sitting"&lt;/js&gt;);        &lt;jc&gt;// ~0.57 (57%)&lt;/jc&gt;</span>
<span class="source-line-no">6015</span><span id="line-6015">    *    similarity(&lt;js&gt;"abc"&lt;/js&gt;, &lt;js&gt;"xyz"&lt;/js&gt;);               &lt;jc&gt;// 0.0 (0%)&lt;/jc&gt;</span>
<span class="source-line-no">6016</span><span id="line-6016">    * &lt;/p&gt;</span>
<span class="source-line-no">6017</span><span id="line-6017">    *</span>
<span class="source-line-no">6018</span><span id="line-6018">    * @param str1 The first string.</span>
<span class="source-line-no">6019</span><span id="line-6019">    * @param str2 The second string.</span>
<span class="source-line-no">6020</span><span id="line-6020">    * @return A similarity value between 0.0 and 1.0, where 1.0 means identical.</span>
<span class="source-line-no">6021</span><span id="line-6021">    */</span>
<span class="source-line-no">6022</span><span id="line-6022">   public static double similarity(String str1, String str2) {</span>
<span class="source-line-no">6023</span><span id="line-6023">      if (str1 == null)</span>
<span class="source-line-no">6024</span><span id="line-6024">         str1 = "";</span>
<span class="source-line-no">6025</span><span id="line-6025">      if (str2 == null)</span>
<span class="source-line-no">6026</span><span id="line-6026">         str2 = "";</span>
<span class="source-line-no">6027</span><span id="line-6027"></span>
<span class="source-line-no">6028</span><span id="line-6028">      if (str1.equals(str2))</span>
<span class="source-line-no">6029</span><span id="line-6029">         return 1.0;</span>
<span class="source-line-no">6030</span><span id="line-6030"></span>
<span class="source-line-no">6031</span><span id="line-6031">      var maxLen = Math.max(str1.length(), str2.length());</span>
<span class="source-line-no">6032</span><span id="line-6032"></span>
<span class="source-line-no">6033</span><span id="line-6033">      var distance = levenshteinDistance(str1, str2);</span>
<span class="source-line-no">6034</span><span id="line-6034">      return 1.0 - ((double)distance / maxLen);</span>
<span class="source-line-no">6035</span><span id="line-6035">   }</span>
<span class="source-line-no">6036</span><span id="line-6036"></span>
<span class="source-line-no">6037</span><span id="line-6037">   /**</span>
<span class="source-line-no">6038</span><span id="line-6038">    * Converts a string to snake_case format.</span>
<span class="source-line-no">6039</span><span id="line-6039">    *</span>
<span class="source-line-no">6040</span><span id="line-6040">    * &lt;p&gt;</span>
<span class="source-line-no">6041</span><span id="line-6041">    * Handles various input formats:</span>
<span class="source-line-no">6042</span><span id="line-6042">    * &lt;ul&gt;</span>
<span class="source-line-no">6043</span><span id="line-6043">    *   &lt;li&gt;Space-separated: "hello world"  "hello_world"&lt;/li&gt;</span>
<span class="source-line-no">6044</span><span id="line-6044">    *   &lt;li&gt;CamelCase: "helloWorld"  "hello_world"&lt;/li&gt;</span>
<span class="source-line-no">6045</span><span id="line-6045">    *   &lt;li&gt;PascalCase: "HelloWorld"  "hello_world"&lt;/li&gt;</span>
<span class="source-line-no">6046</span><span id="line-6046">    *   &lt;li&gt;Kebab-case: "hello-world"  "hello_world"&lt;/li&gt;</span>
<span class="source-line-no">6047</span><span id="line-6047">    * &lt;/ul&gt;</span>
<span class="source-line-no">6048</span><span id="line-6048">    *</span>
<span class="source-line-no">6049</span><span id="line-6049">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">6050</span><span id="line-6050">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">6051</span><span id="line-6051">    *    snakeCase(&lt;jk&gt;null&lt;/jk&gt;);                    &lt;jc&gt;// null&lt;/jc&gt;</span>
<span class="source-line-no">6052</span><span id="line-6052">    *    snakeCase(&lt;js&gt;""&lt;/js&gt;);                      &lt;jc&gt;// ""&lt;/jc&gt;</span>
<span class="source-line-no">6053</span><span id="line-6053">    *    snakeCase(&lt;js&gt;"hello world"&lt;/js&gt;);           &lt;jc&gt;// "hello_world"&lt;/jc&gt;</span>
<span class="source-line-no">6054</span><span id="line-6054">    *    snakeCase(&lt;js&gt;"helloWorld"&lt;/js&gt;);            &lt;jc&gt;// "hello_world"&lt;/jc&gt;</span>
<span class="source-line-no">6055</span><span id="line-6055">    *    snakeCase(&lt;js&gt;"HelloWorld"&lt;/js&gt;);            &lt;jc&gt;// "hello_world"&lt;/jc&gt;</span>
<span class="source-line-no">6056</span><span id="line-6056">    *    snakeCase(&lt;js&gt;"hello-world"&lt;/js&gt;);           &lt;jc&gt;// "hello_world"&lt;/jc&gt;</span>
<span class="source-line-no">6057</span><span id="line-6057">    * &lt;/p&gt;</span>
<span class="source-line-no">6058</span><span id="line-6058">    *</span>
<span class="source-line-no">6059</span><span id="line-6059">    * @param str The string to convert.</span>
<span class="source-line-no">6060</span><span id="line-6060">    * @return The snake_case string, or &lt;jk&gt;null&lt;/jk&gt; if input is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">6061</span><span id="line-6061">    */</span>
<span class="source-line-no">6062</span><span id="line-6062">   public static String snakeCase(String str) {</span>
<span class="source-line-no">6063</span><span id="line-6063">      if (str == null)</span>
<span class="source-line-no">6064</span><span id="line-6064">         return null;</span>
<span class="source-line-no">6065</span><span id="line-6065">      if (isEmpty(str))</span>
<span class="source-line-no">6066</span><span id="line-6066">         return str;</span>
<span class="source-line-no">6067</span><span id="line-6067"></span>
<span class="source-line-no">6068</span><span id="line-6068">      var words = splitWords(str);</span>
<span class="source-line-no">6069</span><span id="line-6069">      if (words.isEmpty())</span>
<span class="source-line-no">6070</span><span id="line-6070">         return "";</span>
<span class="source-line-no">6071</span><span id="line-6071"></span>
<span class="source-line-no">6072</span><span id="line-6072">      var result = new StringBuilder();</span>
<span class="source-line-no">6073</span><span id="line-6073">      for (var i = 0; i &lt; words.size(); i++) {</span>
<span class="source-line-no">6074</span><span id="line-6074">         if (i &gt; 0)</span>
<span class="source-line-no">6075</span><span id="line-6075">            result.append('_');</span>
<span class="source-line-no">6076</span><span id="line-6076">         result.append(words.get(i).toLowerCase());</span>
<span class="source-line-no">6077</span><span id="line-6077">      }</span>
<span class="source-line-no">6078</span><span id="line-6078"></span>
<span class="source-line-no">6079</span><span id="line-6079">      return result.toString();</span>
<span class="source-line-no">6080</span><span id="line-6080">   }</span>
<span class="source-line-no">6081</span><span id="line-6081"></span>
<span class="source-line-no">6082</span><span id="line-6082">   /**</span>
<span class="source-line-no">6083</span><span id="line-6083">    * Sorts a string array in natural order.</span>
<span class="source-line-no">6084</span><span id="line-6084">    *</span>
<span class="source-line-no">6085</span><span id="line-6085">    * &lt;p&gt;</span>
<span class="source-line-no">6086</span><span id="line-6086">    * Returns &lt;jk&gt;null&lt;/jk&gt; if the array is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">6087</span><span id="line-6087">    * This method creates a copy of the array and sorts it, leaving the original array unchanged.</span>
<span class="source-line-no">6088</span><span id="line-6088">    *</span>
<span class="source-line-no">6089</span><span id="line-6089">    * &lt;h5 class='section'&gt;Examples:&lt;/h5&gt;</span>
<span class="source-line-no">6090</span><span id="line-6090">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">6091</span><span id="line-6091">    *    String[] &lt;jv&gt;array&lt;/jv&gt; = {&lt;js&gt;"zebra"&lt;/js&gt;, &lt;js&gt;"apple"&lt;/js&gt;, &lt;js&gt;"banana"&lt;/js&gt;};</span>
<span class="source-line-no">6092</span><span id="line-6092">    *    String[] &lt;jv&gt;sorted&lt;/jv&gt; = sort(&lt;jv&gt;array&lt;/jv&gt;);</span>
<span class="source-line-no">6093</span><span id="line-6093">    *    &lt;jc&gt;// Returns: ["apple", "banana", "zebra"]&lt;/jc&gt;</span>
<span class="source-line-no">6094</span><span id="line-6094">    * &lt;/p&gt;</span>
<span class="source-line-no">6095</span><span id="line-6095">    *</span>
<span class="source-line-no">6096</span><span id="line-6096">    * @param array The array to sort. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">6097</span><span id="line-6097">    * @return A new sorted array, or &lt;jk&gt;null&lt;/jk&gt; if the array was &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">6098</span><span id="line-6098">    */</span>
<span class="source-line-no">6099</span><span id="line-6099">   public static String[] sort(String[] array) {</span>
<span class="source-line-no">6100</span><span id="line-6100">      if (array == null)</span>
<span class="source-line-no">6101</span><span id="line-6101">         return null;  // NOSONAR - Intentional.</span>
<span class="source-line-no">6102</span><span id="line-6102">      var result = Arrays.copyOf(array, array.length);</span>
<span class="source-line-no">6103</span><span id="line-6103">      Arrays.sort(result);</span>
<span class="source-line-no">6104</span><span id="line-6104">      return result;</span>
<span class="source-line-no">6105</span><span id="line-6105">   }</span>
<span class="source-line-no">6106</span><span id="line-6106"></span>
<span class="source-line-no">6107</span><span id="line-6107">   /**</span>
<span class="source-line-no">6108</span><span id="line-6108">    * Sorts a string array in case-insensitive order.</span>
<span class="source-line-no">6109</span><span id="line-6109">    *</span>
<span class="source-line-no">6110</span><span id="line-6110">    * &lt;p&gt;</span>
<span class="source-line-no">6111</span><span id="line-6111">    * Returns &lt;jk&gt;null&lt;/jk&gt; if the array is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">6112</span><span id="line-6112">    * This method creates a copy of the array and sorts it using case-insensitive comparison,</span>
<span class="source-line-no">6113</span><span id="line-6113">    * leaving the original array unchanged.</span>
<span class="source-line-no">6114</span><span id="line-6114">    *</span>
<span class="source-line-no">6115</span><span id="line-6115">    * &lt;h5 class='section'&gt;Examples:&lt;/h5&gt;</span>
<span class="source-line-no">6116</span><span id="line-6116">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">6117</span><span id="line-6117">    *    String[] &lt;jv&gt;array&lt;/jv&gt; = {&lt;js&gt;"Zebra"&lt;/js&gt;, &lt;js&gt;"apple"&lt;/js&gt;, &lt;js&gt;"Banana"&lt;/js&gt;};</span>
<span class="source-line-no">6118</span><span id="line-6118">    *    String[] &lt;jv&gt;sorted&lt;/jv&gt; = sortIgnoreCase(&lt;jv&gt;array&lt;/jv&gt;);</span>
<span class="source-line-no">6119</span><span id="line-6119">    *    &lt;jc&gt;// Returns: ["apple", "Banana", "Zebra"]&lt;/jc&gt;</span>
<span class="source-line-no">6120</span><span id="line-6120">    * &lt;/p&gt;</span>
<span class="source-line-no">6121</span><span id="line-6121">    *</span>
<span class="source-line-no">6122</span><span id="line-6122">    * @param array The array to sort. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">6123</span><span id="line-6123">    * @return A new sorted array (case-insensitive), or &lt;jk&gt;null&lt;/jk&gt; if the array was &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">6124</span><span id="line-6124">    */</span>
<span class="source-line-no">6125</span><span id="line-6125">   public static String[] sortIgnoreCase(String[] array) {</span>
<span class="source-line-no">6126</span><span id="line-6126">      if (array == null)</span>
<span class="source-line-no">6127</span><span id="line-6127">         return null;  // NOSONAR - Intentional.</span>
<span class="source-line-no">6128</span><span id="line-6128">      var result = Arrays.copyOf(array, array.length);</span>
<span class="source-line-no">6129</span><span id="line-6129">      Arrays.sort(result, String.CASE_INSENSITIVE_ORDER);</span>
<span class="source-line-no">6130</span><span id="line-6130">      return result;</span>
<span class="source-line-no">6131</span><span id="line-6131">   }</span>
<span class="source-line-no">6132</span><span id="line-6132"></span>
<span class="source-line-no">6133</span><span id="line-6133">   /**</span>
<span class="source-line-no">6134</span><span id="line-6134">    * Generates a Soundex code for a string.</span>
<span class="source-line-no">6135</span><span id="line-6135">    *</span>
<span class="source-line-no">6136</span><span id="line-6136">    * &lt;p&gt;</span>
<span class="source-line-no">6137</span><span id="line-6137">    * Soundex is a phonetic algorithm for indexing names by sound. The code consists of</span>
<span class="source-line-no">6138</span><span id="line-6138">    * a letter followed by three digits. Similar-sounding names produce the same code.</span>
<span class="source-line-no">6139</span><span id="line-6139">    *</span>
<span class="source-line-no">6140</span><span id="line-6140">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">6141</span><span id="line-6141">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">6142</span><span id="line-6142">    *    soundex(&lt;js&gt;"Smith"&lt;/js&gt;);   &lt;jc&gt;// "S530"&lt;/jc&gt;</span>
<span class="source-line-no">6143</span><span id="line-6143">    *    soundex(&lt;js&gt;"Smythe"&lt;/js&gt;);  &lt;jc&gt;// "S530"&lt;/jc&gt;</span>
<span class="source-line-no">6144</span><span id="line-6144">    *    soundex(&lt;js&gt;"Robert"&lt;/js&gt;);  &lt;jc&gt;// "R163"&lt;/jc&gt;</span>
<span class="source-line-no">6145</span><span id="line-6145">    * &lt;/p&gt;</span>
<span class="source-line-no">6146</span><span id="line-6146">    *</span>
<span class="source-line-no">6147</span><span id="line-6147">    * @param str The string to generate a Soundex code for. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">6148</span><span id="line-6148">    * @return The Soundex code (1 letter + 3 digits), or &lt;jk&gt;null&lt;/jk&gt; if input is &lt;jk&gt;null&lt;/jk&gt; or empty.</span>
<span class="source-line-no">6149</span><span id="line-6149">    */</span>
<span class="source-line-no">6150</span><span id="line-6150">   public static String soundex(String str) {</span>
<span class="source-line-no">6151</span><span id="line-6151">      if (isEmpty(str))</span>
<span class="source-line-no">6152</span><span id="line-6152">         return null;</span>
<span class="source-line-no">6153</span><span id="line-6153"></span>
<span class="source-line-no">6154</span><span id="line-6154">      var upper = str.toUpperCase();</span>
<span class="source-line-no">6155</span><span id="line-6155">      var result = new StringBuilder(4);</span>
<span class="source-line-no">6156</span><span id="line-6156">      result.append(upper.charAt(0));</span>
<span class="source-line-no">6157</span><span id="line-6157"></span>
<span class="source-line-no">6158</span><span id="line-6158">      // Soundex mapping: 0 = AEIOUHWY, 1 = BFPV, 2 = CGJKQSXZ, 3 = DT, 4 = L, 5 = MN, 6 = R</span>
<span class="source-line-no">6159</span><span id="line-6159">      // H/W/Y don't get codes but don't break sequences either</span>
<span class="source-line-no">6160</span><span id="line-6160">      // Initialize lastCode to a value that won't match any real code</span>
<span class="source-line-no">6161</span><span id="line-6161">      var lastCode = '\0';</span>
<span class="source-line-no">6162</span><span id="line-6162"></span>
<span class="source-line-no">6163</span><span id="line-6163">      for (var i = 1; i &lt; upper.length() &amp;&amp; result.length() &lt; 4; i++) {</span>
<span class="source-line-no">6164</span><span id="line-6164">         var c = upper.charAt(i);</span>
<span class="source-line-no">6165</span><span id="line-6165">         var code = getSoundexCode(c);</span>
<span class="source-line-no">6166</span><span id="line-6166">         if (code == '0') {</span>
<span class="source-line-no">6167</span><span id="line-6167">            // H/W/Y/vowels - don't add code, but don't update lastCode either</span>
<span class="source-line-no">6168</span><span id="line-6168">            // This allows sequences to continue across H/W/Y/vowels</span>
<span class="source-line-no">6169</span><span id="line-6169">            continue;</span>
<span class="source-line-no">6170</span><span id="line-6170">         }</span>
<span class="source-line-no">6171</span><span id="line-6171">         if (code != lastCode) {</span>
<span class="source-line-no">6172</span><span id="line-6172">            result.append(code);</span>
<span class="source-line-no">6173</span><span id="line-6173">            lastCode = code;</span>
<span class="source-line-no">6174</span><span id="line-6174">         }</span>
<span class="source-line-no">6175</span><span id="line-6175">         // If code == lastCode, skip it (consecutive same codes)</span>
<span class="source-line-no">6176</span><span id="line-6176">      }</span>
<span class="source-line-no">6177</span><span id="line-6177"></span>
<span class="source-line-no">6178</span><span id="line-6178">      // Pad with zeros if needed</span>
<span class="source-line-no">6179</span><span id="line-6179">      while (result.length() &lt; 4) {</span>
<span class="source-line-no">6180</span><span id="line-6180">         result.append('0');</span>
<span class="source-line-no">6181</span><span id="line-6181">      }</span>
<span class="source-line-no">6182</span><span id="line-6182"></span>
<span class="source-line-no">6183</span><span id="line-6183">      return result.toString();</span>
<span class="source-line-no">6184</span><span id="line-6184">   }</span>
<span class="source-line-no">6185</span><span id="line-6185"></span>
<span class="source-line-no">6186</span><span id="line-6186">   /**</span>
<span class="source-line-no">6187</span><span id="line-6187">    * Splits a comma-delimited list into a list of strings.</span>
<span class="source-line-no">6188</span><span id="line-6188">    *</span>
<span class="source-line-no">6189</span><span id="line-6189">    * @param s The string to split.</span>
<span class="source-line-no">6190</span><span id="line-6190">    * @return A list of split strings, or an empty list if the input is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">6191</span><span id="line-6191">    */</span>
<span class="source-line-no">6192</span><span id="line-6192">   public static List&lt;String&gt; split(String s) {</span>
<span class="source-line-no">6193</span><span id="line-6193">      return s == null ? Collections.emptyList() : split(s, ',');</span>
<span class="source-line-no">6194</span><span id="line-6194">   }</span>
<span class="source-line-no">6195</span><span id="line-6195"></span>
<span class="source-line-no">6196</span><span id="line-6196">   /**</span>
<span class="source-line-no">6197</span><span id="line-6197">    * Splits a character-delimited string into a string array.</span>
<span class="source-line-no">6198</span><span id="line-6198">    *</span>
<span class="source-line-no">6199</span><span id="line-6199">    * &lt;p&gt;</span>
<span class="source-line-no">6200</span><span id="line-6200">    * Does not split on escaped-delimiters (e.g. "\,");</span>
<span class="source-line-no">6201</span><span id="line-6201">    * Resulting tokens are trimmed of whitespace.</span>
<span class="source-line-no">6202</span><span id="line-6202">    *</span>
<span class="source-line-no">6203</span><span id="line-6203">    * &lt;p&gt;</span>
<span class="source-line-no">6204</span><span id="line-6204">    * &lt;b&gt;NOTE:&lt;/b&gt;  This behavior is different than the Jakarta equivalent.</span>
<span class="source-line-no">6205</span><span id="line-6205">    * split("a,b,c",',') -&amp;gt; {"a","b","c"}</span>
<span class="source-line-no">6206</span><span id="line-6206">    * split("a, b ,c ",',') -&amp;gt; {"a","b","c"}</span>
<span class="source-line-no">6207</span><span id="line-6207">    * split("a,,c",',') -&amp;gt; {"a","","c"}</span>
<span class="source-line-no">6208</span><span id="line-6208">    * split(",,",',') -&amp;gt; {"","",""}</span>
<span class="source-line-no">6209</span><span id="line-6209">    * split("",',') -&amp;gt; {}</span>
<span class="source-line-no">6210</span><span id="line-6210">    * split(null,',') -&amp;gt; null</span>
<span class="source-line-no">6211</span><span id="line-6211">    * split("a,b\,c,d", ',', false) -&amp;gt; {"a","b\,c","d"}</span>
<span class="source-line-no">6212</span><span id="line-6212">    * split("a,b\\,c,d", ',', false) -&amp;gt; {"a","b\","c","d"}</span>
<span class="source-line-no">6213</span><span id="line-6213">    * split("a,b\,c,d", ',', true) -&amp;gt; {"a","b,c","d"}</span>
<span class="source-line-no">6214</span><span id="line-6214">    *</span>
<span class="source-line-no">6215</span><span id="line-6215">    * @param s The string to split.  Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">6216</span><span id="line-6216">    * @param c The character to split on.</span>
<span class="source-line-no">6217</span><span id="line-6217">    * @return The tokens, or &lt;jk&gt;null&lt;/jk&gt; if the string was null.</span>
<span class="source-line-no">6218</span><span id="line-6218">    */</span>
<span class="source-line-no">6219</span><span id="line-6219">   public static List&lt;String&gt; split(String s, char c) {</span>
<span class="source-line-no">6220</span><span id="line-6220">      return split(s, c, Integer.MAX_VALUE);</span>
<span class="source-line-no">6221</span><span id="line-6221">   }</span>
<span class="source-line-no">6222</span><span id="line-6222"></span>
<span class="source-line-no">6223</span><span id="line-6223">   /**</span>
<span class="source-line-no">6224</span><span id="line-6224">    * Same as {@link splita} but consumes the tokens instead of creating an array.</span>
<span class="source-line-no">6225</span><span id="line-6225">    *</span>
<span class="source-line-no">6226</span><span id="line-6226">    * @param s The string to split.</span>
<span class="source-line-no">6227</span><span id="line-6227">    * @param c The character to split on.</span>
<span class="source-line-no">6228</span><span id="line-6228">    * @param consumer The consumer of the tokens.</span>
<span class="source-line-no">6229</span><span id="line-6229">    */</span>
<span class="source-line-no">6230</span><span id="line-6230">   public static void split(String s, char c, Consumer&lt;String&gt; consumer) {</span>
<span class="source-line-no">6231</span><span id="line-6231">      var escapeChars = getEscapeSet(c);</span>
<span class="source-line-no">6232</span><span id="line-6232"></span>
<span class="source-line-no">6233</span><span id="line-6233">      if (isEmpty(s))</span>
<span class="source-line-no">6234</span><span id="line-6234">         return;</span>
<span class="source-line-no">6235</span><span id="line-6235">      if (s.indexOf(c) == -1) {</span>
<span class="source-line-no">6236</span><span id="line-6236">         consumer.accept(s);</span>
<span class="source-line-no">6237</span><span id="line-6237">         return;</span>
<span class="source-line-no">6238</span><span id="line-6238">      }</span>
<span class="source-line-no">6239</span><span id="line-6239"></span>
<span class="source-line-no">6240</span><span id="line-6240">      var x1 = 0;</span>
<span class="source-line-no">6241</span><span id="line-6241">      var escapeCount = 0;</span>
<span class="source-line-no">6242</span><span id="line-6242"></span>
<span class="source-line-no">6243</span><span id="line-6243">      for (var i = 0; i &lt; s.length(); i++) {</span>
<span class="source-line-no">6244</span><span id="line-6244">         if (s.charAt(i) == '\\')</span>
<span class="source-line-no">6245</span><span id="line-6245">            escapeCount++;</span>
<span class="source-line-no">6246</span><span id="line-6246">         else if (s.charAt(i) == c &amp;&amp; escapeCount % 2 == 0) {</span>
<span class="source-line-no">6247</span><span id="line-6247">            var s2 = s.substring(x1, i);</span>
<span class="source-line-no">6248</span><span id="line-6248">            var s3 = unescapeChars(s2, escapeChars);</span>
<span class="source-line-no">6249</span><span id="line-6249">            consumer.accept(s3.trim());  // NOSONAR - NPE not possible.</span>
<span class="source-line-no">6250</span><span id="line-6250">            x1 = i + 1;</span>
<span class="source-line-no">6251</span><span id="line-6251">         }</span>
<span class="source-line-no">6252</span><span id="line-6252">         if (s.charAt(i) != '\\')</span>
<span class="source-line-no">6253</span><span id="line-6253">            escapeCount = 0;</span>
<span class="source-line-no">6254</span><span id="line-6254">      }</span>
<span class="source-line-no">6255</span><span id="line-6255">      var s2 = s.substring(x1);</span>
<span class="source-line-no">6256</span><span id="line-6256">      var s3 = unescapeChars(s2, escapeChars);</span>
<span class="source-line-no">6257</span><span id="line-6257">      consumer.accept(s3.trim());  // NOSONAR - NPE not possible.</span>
<span class="source-line-no">6258</span><span id="line-6258">   }</span>
<span class="source-line-no">6259</span><span id="line-6259"></span>
<span class="source-line-no">6260</span><span id="line-6260">   /**</span>
<span class="source-line-no">6261</span><span id="line-6261">    * Same as {@link splita} but limits the number of tokens returned.</span>
<span class="source-line-no">6262</span><span id="line-6262">    *</span>
<span class="source-line-no">6263</span><span id="line-6263">    * @param s The string to split.  Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">6264</span><span id="line-6264">    * @param c The character to split on.</span>
<span class="source-line-no">6265</span><span id="line-6265">    * @param limit The maximum number of tokens to return.</span>
<span class="source-line-no">6266</span><span id="line-6266">    * @return The tokens, or &lt;jk&gt;null&lt;/jk&gt; if the string was null.</span>
<span class="source-line-no">6267</span><span id="line-6267">    */</span>
<span class="source-line-no">6268</span><span id="line-6268">   public static List&lt;String&gt; split(String s, char c, int limit) {</span>
<span class="source-line-no">6269</span><span id="line-6269"></span>
<span class="source-line-no">6270</span><span id="line-6270">      var escapeChars = getEscapeSet(c);</span>
<span class="source-line-no">6271</span><span id="line-6271"></span>
<span class="source-line-no">6272</span><span id="line-6272">      if (s == null)</span>
<span class="source-line-no">6273</span><span id="line-6273">         return null;  // NOSONAR - Intentional.</span>
<span class="source-line-no">6274</span><span id="line-6274">      if (isEmpty(s))</span>
<span class="source-line-no">6275</span><span id="line-6275">         return Collections.emptyList();</span>
<span class="source-line-no">6276</span><span id="line-6276">      if (s.indexOf(c) == -1)</span>
<span class="source-line-no">6277</span><span id="line-6277">         return Collections.singletonList(s);</span>
<span class="source-line-no">6278</span><span id="line-6278"></span>
<span class="source-line-no">6279</span><span id="line-6279">      var l = new LinkedList&lt;String&gt;();</span>
<span class="source-line-no">6280</span><span id="line-6280">      var sArray = s.toCharArray();</span>
<span class="source-line-no">6281</span><span id="line-6281">      var x1 = 0;</span>
<span class="source-line-no">6282</span><span id="line-6282">      var escapeCount = 0;</span>
<span class="source-line-no">6283</span><span id="line-6283">      limit--;</span>
<span class="source-line-no">6284</span><span id="line-6284">      for (var i = 0; i &lt; sArray.length &amp;&amp; limit &gt; 0; i++) {</span>
<span class="source-line-no">6285</span><span id="line-6285">         if (sArray[i] == '\\')</span>
<span class="source-line-no">6286</span><span id="line-6286">            escapeCount++;</span>
<span class="source-line-no">6287</span><span id="line-6287">         else if (sArray[i] == c &amp;&amp; escapeCount % 2 == 0) {</span>
<span class="source-line-no">6288</span><span id="line-6288">            var s2 = new String(sArray, x1, i - x1);</span>
<span class="source-line-no">6289</span><span id="line-6289">            var s3 = unescapeChars(s2, escapeChars);</span>
<span class="source-line-no">6290</span><span id="line-6290">            l.add(s3.trim());</span>
<span class="source-line-no">6291</span><span id="line-6291">            limit--;</span>
<span class="source-line-no">6292</span><span id="line-6292">            x1 = i + 1;</span>
<span class="source-line-no">6293</span><span id="line-6293">         }</span>
<span class="source-line-no">6294</span><span id="line-6294">         if (sArray[i] != '\\')</span>
<span class="source-line-no">6295</span><span id="line-6295">            escapeCount = 0;</span>
<span class="source-line-no">6296</span><span id="line-6296">      }</span>
<span class="source-line-no">6297</span><span id="line-6297">      var s2 = new String(sArray, x1, sArray.length - x1);</span>
<span class="source-line-no">6298</span><span id="line-6298">      var s3 = unescapeChars(s2, escapeChars);</span>
<span class="source-line-no">6299</span><span id="line-6299">      l.add(s3.trim());</span>
<span class="source-line-no">6300</span><span id="line-6300"></span>
<span class="source-line-no">6301</span><span id="line-6301">      return l;</span>
<span class="source-line-no">6302</span><span id="line-6302">   }</span>
<span class="source-line-no">6303</span><span id="line-6303"></span>
<span class="source-line-no">6304</span><span id="line-6304">   /**</span>
<span class="source-line-no">6305</span><span id="line-6305">    * Same as {@link splita} but consumes the tokens instead of creating an array.</span>
<span class="source-line-no">6306</span><span id="line-6306">    *</span>
<span class="source-line-no">6307</span><span id="line-6307">    * @param s The string to split.</span>
<span class="source-line-no">6308</span><span id="line-6308">    * @param consumer The consumer of the tokens.</span>
<span class="source-line-no">6309</span><span id="line-6309">    */</span>
<span class="source-line-no">6310</span><span id="line-6310">   public static void split(String s, Consumer&lt;String&gt; consumer) {</span>
<span class="source-line-no">6311</span><span id="line-6311">      StringUtils.split(s, ',', consumer);</span>
<span class="source-line-no">6312</span><span id="line-6312">   }</span>
<span class="source-line-no">6313</span><span id="line-6313"></span>
<span class="source-line-no">6314</span><span id="line-6314">   /**</span>
<span class="source-line-no">6315</span><span id="line-6315">    * Splits a comma-delimited list into an array of strings.</span>
<span class="source-line-no">6316</span><span id="line-6316">    *</span>
<span class="source-line-no">6317</span><span id="line-6317">    * @param s The string to split.</span>
<span class="source-line-no">6318</span><span id="line-6318">    * @return An array of split strings.</span>
<span class="source-line-no">6319</span><span id="line-6319">    */</span>
<span class="source-line-no">6320</span><span id="line-6320">   public static String[] splita(String s) {</span>
<span class="source-line-no">6321</span><span id="line-6321">      return splita(s, ',');</span>
<span class="source-line-no">6322</span><span id="line-6322">   }</span>
<span class="source-line-no">6323</span><span id="line-6323"></span>
<span class="source-line-no">6324</span><span id="line-6324">   /**</span>
<span class="source-line-no">6325</span><span id="line-6325">    * Splits a character-delimited string into a string array.</span>
<span class="source-line-no">6326</span><span id="line-6326">    *</span>
<span class="source-line-no">6327</span><span id="line-6327">    * &lt;p&gt;</span>
<span class="source-line-no">6328</span><span id="line-6328">    * Does not split on escaped-delimiters (e.g. "\,");</span>
<span class="source-line-no">6329</span><span id="line-6329">    * Resulting tokens are trimmed of whitespace.</span>
<span class="source-line-no">6330</span><span id="line-6330">    *</span>
<span class="source-line-no">6331</span><span id="line-6331">    * &lt;p&gt;</span>
<span class="source-line-no">6332</span><span id="line-6332">    * &lt;b&gt;NOTE:&lt;/b&gt;  This behavior is different than the Jakarta equivalent.</span>
<span class="source-line-no">6333</span><span id="line-6333">    * split("a,b,c",',') -&amp;gt; {"a","b","c"}</span>
<span class="source-line-no">6334</span><span id="line-6334">    * split("a, b ,c ",',') -&amp;gt; {"a","b","c"}</span>
<span class="source-line-no">6335</span><span id="line-6335">    * split("a,,c",',') -&amp;gt; {"a","","c"}</span>
<span class="source-line-no">6336</span><span id="line-6336">    * split(",,",',') -&amp;gt; {"","",""}</span>
<span class="source-line-no">6337</span><span id="line-6337">    * split("",',') -&amp;gt; {}</span>
<span class="source-line-no">6338</span><span id="line-6338">    * split(null,',') -&amp;gt; null</span>
<span class="source-line-no">6339</span><span id="line-6339">    * split("a,b\,c,d", ',', false) -&amp;gt; {"a","b\,c","d"}</span>
<span class="source-line-no">6340</span><span id="line-6340">    * split("a,b\\,c,d", ',', false) -&amp;gt; {"a","b\","c","d"}</span>
<span class="source-line-no">6341</span><span id="line-6341">    * split("a,b\,c,d", ',', true) -&amp;gt; {"a","b,c","d"}</span>
<span class="source-line-no">6342</span><span id="line-6342">    *</span>
<span class="source-line-no">6343</span><span id="line-6343">    * @param s The string to split.  Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">6344</span><span id="line-6344">    * @param c The character to split on.</span>
<span class="source-line-no">6345</span><span id="line-6345">    * @return The tokens, or &lt;jk&gt;null&lt;/jk&gt; if the string was null.</span>
<span class="source-line-no">6346</span><span id="line-6346">    */</span>
<span class="source-line-no">6347</span><span id="line-6347">   public static String[] splita(String s, char c) {</span>
<span class="source-line-no">6348</span><span id="line-6348">      return splita(s, c, Integer.MAX_VALUE);</span>
<span class="source-line-no">6349</span><span id="line-6349">   }</span>
<span class="source-line-no">6350</span><span id="line-6350"></span>
<span class="source-line-no">6351</span><span id="line-6351">   /**</span>
<span class="source-line-no">6352</span><span id="line-6352">    * Same as {@link #splita(String, char)} but limits the number of tokens returned.</span>
<span class="source-line-no">6353</span><span id="line-6353">    *</span>
<span class="source-line-no">6354</span><span id="line-6354">    * @param s The string to split.  Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">6355</span><span id="line-6355">    * @param c The character to split on.</span>
<span class="source-line-no">6356</span><span id="line-6356">    * @param limit The maximum number of tokens to return.</span>
<span class="source-line-no">6357</span><span id="line-6357">    * @return The tokens, or &lt;jk&gt;null&lt;/jk&gt; if the string was null.</span>
<span class="source-line-no">6358</span><span id="line-6358">    */</span>
<span class="source-line-no">6359</span><span id="line-6359">   public static String[] splita(String s, char c, int limit) {</span>
<span class="source-line-no">6360</span><span id="line-6360">      var l = StringUtils.split(s, c, limit);</span>
<span class="source-line-no">6361</span><span id="line-6361">      return l == null ? null : l.toArray(new String[l.size()]);</span>
<span class="source-line-no">6362</span><span id="line-6362">   }</span>
<span class="source-line-no">6363</span><span id="line-6363"></span>
<span class="source-line-no">6364</span><span id="line-6364">   /**</span>
<span class="source-line-no">6365</span><span id="line-6365">    * Same as {@link #splita(String, char)} except splits all strings in the input and returns a single result.</span>
<span class="source-line-no">6366</span><span id="line-6366">    *</span>
<span class="source-line-no">6367</span><span id="line-6367">    * @param s The string to split.  Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">6368</span><span id="line-6368">    * @param c The character to split on.</span>
<span class="source-line-no">6369</span><span id="line-6369">    * @return The tokens, or null if the input array was null</span>
<span class="source-line-no">6370</span><span id="line-6370">    */</span>
<span class="source-line-no">6371</span><span id="line-6371">   public static String[] splita(String[] s, char c) {</span>
<span class="source-line-no">6372</span><span id="line-6372">      if (s == null)</span>
<span class="source-line-no">6373</span><span id="line-6373">         return null;  // NOSONAR - Intentional.</span>
<span class="source-line-no">6374</span><span id="line-6374">      var l = new LinkedList&lt;String&gt;();</span>
<span class="source-line-no">6375</span><span id="line-6375">      for (var ss : s) {</span>
<span class="source-line-no">6376</span><span id="line-6376">         if (ss == null || ss.indexOf(c) == -1)</span>
<span class="source-line-no">6377</span><span id="line-6377">            l.add(ss);</span>
<span class="source-line-no">6378</span><span id="line-6378">         else</span>
<span class="source-line-no">6379</span><span id="line-6379">            Collections.addAll(l, splita(ss, c));</span>
<span class="source-line-no">6380</span><span id="line-6380">      }</span>
<span class="source-line-no">6381</span><span id="line-6381">      return l.toArray(new String[l.size()]);</span>
<span class="source-line-no">6382</span><span id="line-6382">   }</span>
<span class="source-line-no">6383</span><span id="line-6383"></span>
<span class="source-line-no">6384</span><span id="line-6384">   /**</span>
<span class="source-line-no">6385</span><span id="line-6385">    * Splits a list of key-value pairs into an ordered map.</span>
<span class="source-line-no">6386</span><span id="line-6386">    *</span>
<span class="source-line-no">6387</span><span id="line-6387">    * &lt;p&gt;</span>
<span class="source-line-no">6388</span><span id="line-6388">    * Example:</span>
<span class="source-line-no">6389</span><span id="line-6389">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">6390</span><span id="line-6390">    *    String &lt;jv&gt;in&lt;/jv&gt; = &lt;js&gt;"foo=1;bar=2"&lt;/js&gt;;</span>
<span class="source-line-no">6391</span><span id="line-6391">    *    Map &lt;jv&gt;map&lt;/jv&gt; = StringUtils.&lt;jsm&gt;splitMap&lt;/jsm&gt;(in, &lt;js&gt;';'&lt;/js&gt;, &lt;js&gt;'='&lt;/js&gt;, &lt;jk&gt;true&lt;/jk&gt;);</span>
<span class="source-line-no">6392</span><span id="line-6392">    * &lt;/p&gt;</span>
<span class="source-line-no">6393</span><span id="line-6393">    *</span>
<span class="source-line-no">6394</span><span id="line-6394">    * @param s The string to split.</span>
<span class="source-line-no">6395</span><span id="line-6395">    * @param trim Trim strings after parsing.</span>
<span class="source-line-no">6396</span><span id="line-6396">    * @return The parsed map, or null if the string was null.</span>
<span class="source-line-no">6397</span><span id="line-6397">    */</span>
<span class="source-line-no">6398</span><span id="line-6398">   public static Map&lt;String,String&gt; splitMap(String s, boolean trim) {</span>
<span class="source-line-no">6399</span><span id="line-6399"></span>
<span class="source-line-no">6400</span><span id="line-6400">      if (s == null)</span>
<span class="source-line-no">6401</span><span id="line-6401">         return null;  // NOSONAR - Intentional.</span>
<span class="source-line-no">6402</span><span id="line-6402">      if (isEmpty(s))</span>
<span class="source-line-no">6403</span><span id="line-6403">         return mape();</span>
<span class="source-line-no">6404</span><span id="line-6404"></span>
<span class="source-line-no">6405</span><span id="line-6405">      var m = new LinkedHashMap&lt;String,String&gt;();</span>
<span class="source-line-no">6406</span><span id="line-6406"></span>
<span class="source-line-no">6407</span><span id="line-6407">      // S1: Found start of key, looking for equals.</span>
<span class="source-line-no">6408</span><span id="line-6408">      // S2: Found equals, looking for delimiter (or end).</span>
<span class="source-line-no">6409</span><span id="line-6409"></span>
<span class="source-line-no">6410</span><span id="line-6410">      var state = S1;</span>
<span class="source-line-no">6411</span><span id="line-6411"></span>
<span class="source-line-no">6412</span><span id="line-6412">      var sArray = s.toCharArray();</span>
<span class="source-line-no">6413</span><span id="line-6413">      var x1 = 0;</span>
<span class="source-line-no">6414</span><span id="line-6414">      var escapeCount = 0;</span>
<span class="source-line-no">6415</span><span id="line-6415">      var key = (String)null;</span>
<span class="source-line-no">6416</span><span id="line-6416">      for (var i = 0; i &lt; sArray.length + 1; i++) {</span>
<span class="source-line-no">6417</span><span id="line-6417">         var c = i == sArray.length ? ',' : sArray[i];</span>
<span class="source-line-no">6418</span><span id="line-6418">         if (c == '\\')</span>
<span class="source-line-no">6419</span><span id="line-6419">            escapeCount++;</span>
<span class="source-line-no">6420</span><span id="line-6420">         if (escapeCount % 2 == 0) {</span>
<span class="source-line-no">6421</span><span id="line-6421">            if (state == S1) {</span>
<span class="source-line-no">6422</span><span id="line-6422">               if (c == '=') {</span>
<span class="source-line-no">6423</span><span id="line-6423">                  key = s.substring(x1, i);</span>
<span class="source-line-no">6424</span><span id="line-6424">                  if (trim)</span>
<span class="source-line-no">6425</span><span id="line-6425">                     key = trim(key);</span>
<span class="source-line-no">6426</span><span id="line-6426">                  key = unescapeChars(key, MAP_ESCAPE_SET);</span>
<span class="source-line-no">6427</span><span id="line-6427">                  state = S2;</span>
<span class="source-line-no">6428</span><span id="line-6428">                  x1 = i + 1;</span>
<span class="source-line-no">6429</span><span id="line-6429">               } else if (c == ',') {</span>
<span class="source-line-no">6430</span><span id="line-6430">                  key = s.substring(x1, i);</span>
<span class="source-line-no">6431</span><span id="line-6431">                  if (trim)</span>
<span class="source-line-no">6432</span><span id="line-6432">                     key = trim(key);</span>
<span class="source-line-no">6433</span><span id="line-6433">                  key = unescapeChars(key, MAP_ESCAPE_SET);</span>
<span class="source-line-no">6434</span><span id="line-6434">                  m.put(key, "");</span>
<span class="source-line-no">6435</span><span id="line-6435">                  state = S1;</span>
<span class="source-line-no">6436</span><span id="line-6436">                  x1 = i + 1;</span>
<span class="source-line-no">6437</span><span id="line-6437">               }</span>
<span class="source-line-no">6438</span><span id="line-6438">            } else /* state == S2 */ {</span>
<span class="source-line-no">6439</span><span id="line-6439">               if (c == ',') {  // NOSONAR - Intentional.</span>
<span class="source-line-no">6440</span><span id="line-6440">                  var val = s.substring(x1, i);</span>
<span class="source-line-no">6441</span><span id="line-6441">                  if (trim)</span>
<span class="source-line-no">6442</span><span id="line-6442">                     val = trim(val);</span>
<span class="source-line-no">6443</span><span id="line-6443">                  val = unescapeChars(val, MAP_ESCAPE_SET);</span>
<span class="source-line-no">6444</span><span id="line-6444">                  m.put(key, val);</span>
<span class="source-line-no">6445</span><span id="line-6445">                  key = null;</span>
<span class="source-line-no">6446</span><span id="line-6446">                  x1 = i + 1;</span>
<span class="source-line-no">6447</span><span id="line-6447">                  state = S1;</span>
<span class="source-line-no">6448</span><span id="line-6448">               }</span>
<span class="source-line-no">6449</span><span id="line-6449">            }</span>
<span class="source-line-no">6450</span><span id="line-6450">         }</span>
<span class="source-line-no">6451</span><span id="line-6451">         if (c != '\\')</span>
<span class="source-line-no">6452</span><span id="line-6452">            escapeCount = 0;</span>
<span class="source-line-no">6453</span><span id="line-6453">      }</span>
<span class="source-line-no">6454</span><span id="line-6454"></span>
<span class="source-line-no">6455</span><span id="line-6455">      return m;</span>
<span class="source-line-no">6456</span><span id="line-6456">   }</span>
<span class="source-line-no">6457</span><span id="line-6457"></span>
<span class="source-line-no">6458</span><span id="line-6458">   /**</span>
<span class="source-line-no">6459</span><span id="line-6459">    * Splits the method arguments in the signature of a method.</span>
<span class="source-line-no">6460</span><span id="line-6460">    *</span>
<span class="source-line-no">6461</span><span id="line-6461">    * @param s The arguments to split.</span>
<span class="source-line-no">6462</span><span id="line-6462">    * @return The split arguments, or null if the input string is null.</span>
<span class="source-line-no">6463</span><span id="line-6463">    */</span>
<span class="source-line-no">6464</span><span id="line-6464">   public static String[] splitMethodArgs(String s) {</span>
<span class="source-line-no">6465</span><span id="line-6465"></span>
<span class="source-line-no">6466</span><span id="line-6466">      if (s == null)</span>
<span class="source-line-no">6467</span><span id="line-6467">         return null;  // NOSONAR - Intentional.</span>
<span class="source-line-no">6468</span><span id="line-6468">      if (isEmpty(s))</span>
<span class="source-line-no">6469</span><span id="line-6469">         return new String[0];</span>
<span class="source-line-no">6470</span><span id="line-6470">      if (s.indexOf(',') == -1)</span>
<span class="source-line-no">6471</span><span id="line-6471">         return a(s);</span>
<span class="source-line-no">6472</span><span id="line-6472"></span>
<span class="source-line-no">6473</span><span id="line-6473">      var l = new LinkedList&lt;String&gt;();</span>
<span class="source-line-no">6474</span><span id="line-6474">      var sArray = s.toCharArray();</span>
<span class="source-line-no">6475</span><span id="line-6475">      var x1 = 0;</span>
<span class="source-line-no">6476</span><span id="line-6476">      var paramDepth = 0;</span>
<span class="source-line-no">6477</span><span id="line-6477"></span>
<span class="source-line-no">6478</span><span id="line-6478">      for (var i = 0; i &lt; sArray.length; i++) {</span>
<span class="source-line-no">6479</span><span id="line-6479">         var c = s.charAt(i);</span>
<span class="source-line-no">6480</span><span id="line-6480">         if (c == '&gt;')</span>
<span class="source-line-no">6481</span><span id="line-6481">            paramDepth++;</span>
<span class="source-line-no">6482</span><span id="line-6482">         else if (c == '&lt;')</span>
<span class="source-line-no">6483</span><span id="line-6483">            paramDepth--;</span>
<span class="source-line-no">6484</span><span id="line-6484">         else if (c == ',' &amp;&amp; paramDepth == 0) {</span>
<span class="source-line-no">6485</span><span id="line-6485">            var s2 = new String(sArray, x1, i - x1);</span>
<span class="source-line-no">6486</span><span id="line-6486">            l.add(s2.trim());</span>
<span class="source-line-no">6487</span><span id="line-6487">            x1 = i + 1;</span>
<span class="source-line-no">6488</span><span id="line-6488">         }</span>
<span class="source-line-no">6489</span><span id="line-6489">      }</span>
<span class="source-line-no">6490</span><span id="line-6490"></span>
<span class="source-line-no">6491</span><span id="line-6491">      var s2 = new String(sArray, x1, sArray.length - x1);</span>
<span class="source-line-no">6492</span><span id="line-6492">      l.add(s2.trim());</span>
<span class="source-line-no">6493</span><span id="line-6493"></span>
<span class="source-line-no">6494</span><span id="line-6494">      return l.toArray(new String[l.size()]);</span>
<span class="source-line-no">6495</span><span id="line-6495">   }</span>
<span class="source-line-no">6496</span><span id="line-6496"></span>
<span class="source-line-no">6497</span><span id="line-6497">   /**</span>
<span class="source-line-no">6498</span><span id="line-6498">    * Splits a comma-delimited list containing "nesting constructs".</span>
<span class="source-line-no">6499</span><span id="line-6499">    *</span>
<span class="source-line-no">6500</span><span id="line-6500">    * Nesting constructs are simple embedded "{...}" comma-delimted lists.</span>
<span class="source-line-no">6501</span><span id="line-6501">    *</span>
<span class="source-line-no">6502</span><span id="line-6502">    * Example:</span>
<span class="source-line-no">6503</span><span id="line-6503">    *    "a{b,c},d" -&gt; ["a{b,c}","d"]</span>
<span class="source-line-no">6504</span><span id="line-6504">    *</span>
<span class="source-line-no">6505</span><span id="line-6505">    * Handles escapes and trims whitespace from tokens.</span>
<span class="source-line-no">6506</span><span id="line-6506">    *</span>
<span class="source-line-no">6507</span><span id="line-6507">    * @param s The input string.</span>
<span class="source-line-no">6508</span><span id="line-6508">    * @return</span>
<span class="source-line-no">6509</span><span id="line-6509">    *    The results, or &lt;jk&gt;null&lt;/jk&gt; if the input was &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">6510</span><span id="line-6510">    *    &lt;br&gt;An empty string results in an empty array.</span>
<span class="source-line-no">6511</span><span id="line-6511">    */</span>
<span class="source-line-no">6512</span><span id="line-6512">   public static List&lt;String&gt; splitNested(String s) {</span>
<span class="source-line-no">6513</span><span id="line-6513">      var escapeChars = getEscapeSet(',');</span>
<span class="source-line-no">6514</span><span id="line-6514"></span>
<span class="source-line-no">6515</span><span id="line-6515">      if (s == null)</span>
<span class="source-line-no">6516</span><span id="line-6516">         return null;  // NOSONAR - Intentional.</span>
<span class="source-line-no">6517</span><span id="line-6517">      if (isEmpty(s))</span>
<span class="source-line-no">6518</span><span id="line-6518">         return Collections.emptyList();</span>
<span class="source-line-no">6519</span><span id="line-6519">      if (s.indexOf(',') == -1)</span>
<span class="source-line-no">6520</span><span id="line-6520">         return Collections.singletonList(trim(s));</span>
<span class="source-line-no">6521</span><span id="line-6521"></span>
<span class="source-line-no">6522</span><span id="line-6522">      var l = new LinkedList&lt;String&gt;();</span>
<span class="source-line-no">6523</span><span id="line-6523"></span>
<span class="source-line-no">6524</span><span id="line-6524">      var x1 = 0;</span>
<span class="source-line-no">6525</span><span id="line-6525">      var inEscape = false;</span>
<span class="source-line-no">6526</span><span id="line-6526">      var depthCount = 0;</span>
<span class="source-line-no">6527</span><span id="line-6527"></span>
<span class="source-line-no">6528</span><span id="line-6528">      for (var i = 0; i &lt; s.length(); i++) {</span>
<span class="source-line-no">6529</span><span id="line-6529">         var c = s.charAt(i);</span>
<span class="source-line-no">6530</span><span id="line-6530">         if (inEscape) {</span>
<span class="source-line-no">6531</span><span id="line-6531">            if (c == '\\') {</span>
<span class="source-line-no">6532</span><span id="line-6532">               inEscape = false;</span>
<span class="source-line-no">6533</span><span id="line-6533">            }</span>
<span class="source-line-no">6534</span><span id="line-6534">         } else {</span>
<span class="source-line-no">6535</span><span id="line-6535">            if (c == '\\') {</span>
<span class="source-line-no">6536</span><span id="line-6536">               inEscape = true;</span>
<span class="source-line-no">6537</span><span id="line-6537">            } else if (c == '{') {</span>
<span class="source-line-no">6538</span><span id="line-6538">               depthCount++;</span>
<span class="source-line-no">6539</span><span id="line-6539">            } else if (c == '}') {</span>
<span class="source-line-no">6540</span><span id="line-6540">               depthCount--;</span>
<span class="source-line-no">6541</span><span id="line-6541">            } else if (c == ',' &amp;&amp; depthCount == 0) {</span>
<span class="source-line-no">6542</span><span id="line-6542">               l.add(trim(unescapeChars(s.substring(x1, i), escapeChars)));</span>
<span class="source-line-no">6543</span><span id="line-6543">               x1 = i + 1;</span>
<span class="source-line-no">6544</span><span id="line-6544">            }</span>
<span class="source-line-no">6545</span><span id="line-6545">         }</span>
<span class="source-line-no">6546</span><span id="line-6546">      }</span>
<span class="source-line-no">6547</span><span id="line-6547">      l.add(trim(unescapeChars(s.substring(x1, s.length()), escapeChars)));</span>
<span class="source-line-no">6548</span><span id="line-6548"></span>
<span class="source-line-no">6549</span><span id="line-6549">      return l;</span>
<span class="source-line-no">6550</span><span id="line-6550">   }</span>
<span class="source-line-no">6551</span><span id="line-6551"></span>
<span class="source-line-no">6552</span><span id="line-6552">   /**</span>
<span class="source-line-no">6553</span><span id="line-6553">    * Splits a nested comma-delimited list.</span>
<span class="source-line-no">6554</span><span id="line-6554">    *</span>
<span class="source-line-no">6555</span><span id="line-6555">    * Nesting constructs are simple embedded "{...}" comma-delimted lists.</span>
<span class="source-line-no">6556</span><span id="line-6556">    *</span>
<span class="source-line-no">6557</span><span id="line-6557">    * Example:</span>
<span class="source-line-no">6558</span><span id="line-6558">    *    "a{b,c{d,e}}" -&gt; ["b","c{d,e}"]</span>
<span class="source-line-no">6559</span><span id="line-6559">    *</span>
<span class="source-line-no">6560</span><span id="line-6560">    * Handles escapes and trims whitespace from tokens.</span>
<span class="source-line-no">6561</span><span id="line-6561">    *</span>
<span class="source-line-no">6562</span><span id="line-6562">    * @param s The input string.</span>
<span class="source-line-no">6563</span><span id="line-6563">    * @return</span>
<span class="source-line-no">6564</span><span id="line-6564">    *    The results, or &lt;jk&gt;null&lt;/jk&gt; if the input was &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">6565</span><span id="line-6565">    *    &lt;br&gt;An empty string results in an empty array.</span>
<span class="source-line-no">6566</span><span id="line-6566">    */</span>
<span class="source-line-no">6567</span><span id="line-6567">   public static List&lt;String&gt; splitNestedInner(String s) {</span>
<span class="source-line-no">6568</span><span id="line-6568">      assertArg(nn(s), "String was null.");</span>
<span class="source-line-no">6569</span><span id="line-6569">      assertArg(ne(s), "String was empty.");</span>
<span class="source-line-no">6570</span><span id="line-6570"></span>
<span class="source-line-no">6571</span><span id="line-6571">      // S1: Looking for '{'</span>
<span class="source-line-no">6572</span><span id="line-6572">      // S2: Found '{', looking for '}'</span>
<span class="source-line-no">6573</span><span id="line-6573"></span>
<span class="source-line-no">6574</span><span id="line-6574">      var start = -1;</span>
<span class="source-line-no">6575</span><span id="line-6575">      var end = -1;</span>
<span class="source-line-no">6576</span><span id="line-6576">      var state = S1;</span>
<span class="source-line-no">6577</span><span id="line-6577"></span>
<span class="source-line-no">6578</span><span id="line-6578">      var depth = 0;</span>
<span class="source-line-no">6579</span><span id="line-6579">      var inEscape = false;</span>
<span class="source-line-no">6580</span><span id="line-6580"></span>
<span class="source-line-no">6581</span><span id="line-6581">      for (var i = 0; i &lt; s.length(); i++) {</span>
<span class="source-line-no">6582</span><span id="line-6582">         var c = s.charAt(i);</span>
<span class="source-line-no">6583</span><span id="line-6583">         if (inEscape) {</span>
<span class="source-line-no">6584</span><span id="line-6584">            if (c == '\\') {</span>
<span class="source-line-no">6585</span><span id="line-6585">               inEscape = false;</span>
<span class="source-line-no">6586</span><span id="line-6586">            }</span>
<span class="source-line-no">6587</span><span id="line-6587">         } else {</span>
<span class="source-line-no">6588</span><span id="line-6588">            if (c == '\\') {</span>
<span class="source-line-no">6589</span><span id="line-6589">               inEscape = true;</span>
<span class="source-line-no">6590</span><span id="line-6590">            } else if (state == S1) {</span>
<span class="source-line-no">6591</span><span id="line-6591">               if (c == '{') {</span>
<span class="source-line-no">6592</span><span id="line-6592">                  start = i + 1;</span>
<span class="source-line-no">6593</span><span id="line-6593">                  state = S2;</span>
<span class="source-line-no">6594</span><span id="line-6594">               }</span>
<span class="source-line-no">6595</span><span id="line-6595">            } else /* state == S2 */ {</span>
<span class="source-line-no">6596</span><span id="line-6596">               if (c == '{') {</span>
<span class="source-line-no">6597</span><span id="line-6597">                  depth++;</span>
<span class="source-line-no">6598</span><span id="line-6598">               } else if (depth &gt; 0 &amp;&amp; c == '}') {</span>
<span class="source-line-no">6599</span><span id="line-6599">                  depth--;</span>
<span class="source-line-no">6600</span><span id="line-6600">               } else if (c == '}') {</span>
<span class="source-line-no">6601</span><span id="line-6601">                  end = i;</span>
<span class="source-line-no">6602</span><span id="line-6602">                  break;</span>
<span class="source-line-no">6603</span><span id="line-6603">               }</span>
<span class="source-line-no">6604</span><span id="line-6604">            }</span>
<span class="source-line-no">6605</span><span id="line-6605">         }</span>
<span class="source-line-no">6606</span><span id="line-6606">      }</span>
<span class="source-line-no">6607</span><span id="line-6607"></span>
<span class="source-line-no">6608</span><span id="line-6608">      if (start == -1)</span>
<span class="source-line-no">6609</span><span id="line-6609">         throw illegalArg("Start character '{' not found in string:  {0}", s);</span>
<span class="source-line-no">6610</span><span id="line-6610">      if (end == -1)</span>
<span class="source-line-no">6611</span><span id="line-6611">         throw illegalArg("End character '}' not found in string  {0}", s);</span>
<span class="source-line-no">6612</span><span id="line-6612">      return splitNested(s.substring(start, end));</span>
<span class="source-line-no">6613</span><span id="line-6613">   }</span>
<span class="source-line-no">6614</span><span id="line-6614"></span>
<span class="source-line-no">6615</span><span id="line-6615">   /**</span>
<span class="source-line-no">6616</span><span id="line-6616">    * Splits a space-delimited string with optionally quoted arguments.</span>
<span class="source-line-no">6617</span><span id="line-6617">    *</span>
<span class="source-line-no">6618</span><span id="line-6618">    * &lt;p&gt;</span>
<span class="source-line-no">6619</span><span id="line-6619">    * Examples:</span>
<span class="source-line-no">6620</span><span id="line-6620">    * &lt;ul&gt;</span>
<span class="source-line-no">6621</span><span id="line-6621">    *    &lt;li&gt;&lt;js&gt;"foo"&lt;/js&gt; =&amp;gt; &lt;c&gt;["foo"]&lt;/c&gt;</span>
<span class="source-line-no">6622</span><span id="line-6622">    *    &lt;li&gt;&lt;js&gt;" foo "&lt;/js&gt; =&amp;gt; &lt;c&gt;["foo"]&lt;/c&gt;</span>
<span class="source-line-no">6623</span><span id="line-6623">    *    &lt;li&gt;&lt;js&gt;"foo bar baz"&lt;/js&gt; =&amp;gt; &lt;c&gt;["foo","bar","baz"]&lt;/c&gt;</span>
<span class="source-line-no">6624</span><span id="line-6624">    *    &lt;li&gt;&lt;js&gt;"foo 'bar baz'"&lt;/js&gt; =&amp;gt; &lt;c&gt;["foo","bar baz"]&lt;/c&gt;</span>
<span class="source-line-no">6625</span><span id="line-6625">    *    &lt;li&gt;&lt;js&gt;"foo \"bar baz\""&lt;/js&gt; =&amp;gt; &lt;c&gt;["foo","bar baz"]&lt;/c&gt;</span>
<span class="source-line-no">6626</span><span id="line-6626">    *    &lt;li&gt;&lt;js&gt;"foo 'bar\'baz'"&lt;/js&gt; =&amp;gt; &lt;c&gt;["foo","bar'baz"]&lt;/c&gt;</span>
<span class="source-line-no">6627</span><span id="line-6627">    * &lt;/ul&gt;</span>
<span class="source-line-no">6628</span><span id="line-6628">    *</span>
<span class="source-line-no">6629</span><span id="line-6629">    * @param s The input string.</span>
<span class="source-line-no">6630</span><span id="line-6630">    * @return</span>
<span class="source-line-no">6631</span><span id="line-6631">    *    The results, or &lt;jk&gt;null&lt;/jk&gt; if the input was &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">6632</span><span id="line-6632">    *    &lt;br&gt;An empty string results in an empty array.</span>
<span class="source-line-no">6633</span><span id="line-6633">    */</span>
<span class="source-line-no">6634</span><span id="line-6634">   public static String[] splitQuoted(String s) {</span>
<span class="source-line-no">6635</span><span id="line-6635">      return splitQuoted(s, false);</span>
<span class="source-line-no">6636</span><span id="line-6636">   }</span>
<span class="source-line-no">6637</span><span id="line-6637"></span>
<span class="source-line-no">6638</span><span id="line-6638">   /**</span>
<span class="source-line-no">6639</span><span id="line-6639">    * Same as {@link StringUtils#splitQuoted(String)} but allows you to optionally keep the quote characters.</span>
<span class="source-line-no">6640</span><span id="line-6640">    *</span>
<span class="source-line-no">6641</span><span id="line-6641">    * @param s The input string.</span>
<span class="source-line-no">6642</span><span id="line-6642">    * @param keepQuotes If &lt;jk&gt;true&lt;/jk&gt;, quote characters are kept on the tokens.</span>
<span class="source-line-no">6643</span><span id="line-6643">    * @return</span>
<span class="source-line-no">6644</span><span id="line-6644">    *    The results, or &lt;jk&gt;null&lt;/jk&gt; if the input was &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">6645</span><span id="line-6645">    *    &lt;br&gt;An empty string results in an empty array.</span>
<span class="source-line-no">6646</span><span id="line-6646">    */</span>
<span class="source-line-no">6647</span><span id="line-6647">   public static String[] splitQuoted(String s, boolean keepQuotes) {</span>
<span class="source-line-no">6648</span><span id="line-6648"></span>
<span class="source-line-no">6649</span><span id="line-6649">      if (s == null)</span>
<span class="source-line-no">6650</span><span id="line-6650">         return null;  // NOSONAR - Intentional.</span>
<span class="source-line-no">6651</span><span id="line-6651"></span>
<span class="source-line-no">6652</span><span id="line-6652">      s = s.trim();</span>
<span class="source-line-no">6653</span><span id="line-6653"></span>
<span class="source-line-no">6654</span><span id="line-6654">      if (isEmpty(s))</span>
<span class="source-line-no">6655</span><span id="line-6655">         return a();</span>
<span class="source-line-no">6656</span><span id="line-6656"></span>
<span class="source-line-no">6657</span><span id="line-6657">      if (! containsAny(s, ' ', '\t', '\'', '"'))</span>
<span class="source-line-no">6658</span><span id="line-6658">         return a(s);</span>
<span class="source-line-no">6659</span><span id="line-6659"></span>
<span class="source-line-no">6660</span><span id="line-6660">      // S1: Looking for start of token.</span>
<span class="source-line-no">6661</span><span id="line-6661">      // S2: Found ', looking for end '</span>
<span class="source-line-no">6662</span><span id="line-6662">      // S3: Found ", looking for end "</span>
<span class="source-line-no">6663</span><span id="line-6663">      // S4: Found non-whitespace, looking for end whitespace.</span>
<span class="source-line-no">6664</span><span id="line-6664"></span>
<span class="source-line-no">6665</span><span id="line-6665">      var state = S1;</span>
<span class="source-line-no">6666</span><span id="line-6666"></span>
<span class="source-line-no">6667</span><span id="line-6667">      var isInEscape = false;</span>
<span class="source-line-no">6668</span><span id="line-6668">      var needsUnescape = false;</span>
<span class="source-line-no">6669</span><span id="line-6669">      var mark = 0;</span>
<span class="source-line-no">6670</span><span id="line-6670"></span>
<span class="source-line-no">6671</span><span id="line-6671">      var l = new ArrayList&lt;String&gt;();</span>
<span class="source-line-no">6672</span><span id="line-6672">      for (var i = 0; i &lt; s.length(); i++) {</span>
<span class="source-line-no">6673</span><span id="line-6673">         var c = s.charAt(i);</span>
<span class="source-line-no">6674</span><span id="line-6674"></span>
<span class="source-line-no">6675</span><span id="line-6675">         if (state == S1) {</span>
<span class="source-line-no">6676</span><span id="line-6676">            if (c == '\'') {</span>
<span class="source-line-no">6677</span><span id="line-6677">               state = S2;</span>
<span class="source-line-no">6678</span><span id="line-6678">               mark = keepQuotes ? i : i + 1;</span>
<span class="source-line-no">6679</span><span id="line-6679">            } else if (c == '"') {</span>
<span class="source-line-no">6680</span><span id="line-6680">               state = S3;</span>
<span class="source-line-no">6681</span><span id="line-6681">               mark = keepQuotes ? i : i + 1;</span>
<span class="source-line-no">6682</span><span id="line-6682">            } else if (c != ' ' &amp;&amp; c != '\t') {</span>
<span class="source-line-no">6683</span><span id="line-6683">               state = S4;</span>
<span class="source-line-no">6684</span><span id="line-6684">               mark = i;</span>
<span class="source-line-no">6685</span><span id="line-6685">            }</span>
<span class="source-line-no">6686</span><span id="line-6686">         } else if (state == S2 || state == S3) {</span>
<span class="source-line-no">6687</span><span id="line-6687">            if (c == '\\') {</span>
<span class="source-line-no">6688</span><span id="line-6688">               isInEscape = ! isInEscape;</span>
<span class="source-line-no">6689</span><span id="line-6689">               needsUnescape = ! keepQuotes;</span>
<span class="source-line-no">6690</span><span id="line-6690">            } else if (! isInEscape) {</span>
<span class="source-line-no">6691</span><span id="line-6691">               if (c == (state == S2 ? '\'' : '"')) {</span>
<span class="source-line-no">6692</span><span id="line-6692">                  var s2 = s.substring(mark, keepQuotes ? i + 1 : i);</span>
<span class="source-line-no">6693</span><span id="line-6693">                  if (needsUnescape)  // NOSONAR - False positive check.</span>
<span class="source-line-no">6694</span><span id="line-6694">                     s2 = unescapeChars(s2, QUOTE_ESCAPE_SET);</span>
<span class="source-line-no">6695</span><span id="line-6695">                  l.add(s2);</span>
<span class="source-line-no">6696</span><span id="line-6696">                  state = S1;</span>
<span class="source-line-no">6697</span><span id="line-6697">                  isInEscape = needsUnescape = false;</span>
<span class="source-line-no">6698</span><span id="line-6698">               }</span>
<span class="source-line-no">6699</span><span id="line-6699">            } else {</span>
<span class="source-line-no">6700</span><span id="line-6700">               isInEscape = false;</span>
<span class="source-line-no">6701</span><span id="line-6701">            }</span>
<span class="source-line-no">6702</span><span id="line-6702">         } else /* state == S4 */ {</span>
<span class="source-line-no">6703</span><span id="line-6703">            if (c == ' ' || c == '\t') {</span>
<span class="source-line-no">6704</span><span id="line-6704">               l.add(s.substring(mark, i));</span>
<span class="source-line-no">6705</span><span id="line-6705">               state = S1;</span>
<span class="source-line-no">6706</span><span id="line-6706">            }</span>
<span class="source-line-no">6707</span><span id="line-6707">         }</span>
<span class="source-line-no">6708</span><span id="line-6708">      }</span>
<span class="source-line-no">6709</span><span id="line-6709">      if (state == S4)</span>
<span class="source-line-no">6710</span><span id="line-6710">         l.add(s.substring(mark));</span>
<span class="source-line-no">6711</span><span id="line-6711">      else if (state == S2 || state == S3)</span>
<span class="source-line-no">6712</span><span id="line-6712">         throw illegalArg("Unmatched string quotes: {0}", s);</span>
<span class="source-line-no">6713</span><span id="line-6713">      return l.toArray(new String[l.size()]);</span>
<span class="source-line-no">6714</span><span id="line-6714">   }</span>
<span class="source-line-no">6715</span><span id="line-6715"></span>
<span class="source-line-no">6716</span><span id="line-6716">   /**</span>
<span class="source-line-no">6717</span><span id="line-6717">    * An efficient method for checking if a string starts with a character.</span>
<span class="source-line-no">6718</span><span id="line-6718">    *</span>
<span class="source-line-no">6719</span><span id="line-6719">    * @param s The string to check.  Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">6720</span><span id="line-6720">    * @param c The character to check for.</span>
<span class="source-line-no">6721</span><span id="line-6721">    * @return &lt;jk&gt;true&lt;/jk&gt; if the specified string is not &lt;jk&gt;null&lt;/jk&gt; and starts with the specified character.</span>
<span class="source-line-no">6722</span><span id="line-6722">    */</span>
<span class="source-line-no">6723</span><span id="line-6723">   public static boolean startsWith(String s, char c) {</span>
<span class="source-line-no">6724</span><span id="line-6724">      if (nn(s)) {</span>
<span class="source-line-no">6725</span><span id="line-6725">         var i = s.length();</span>
<span class="source-line-no">6726</span><span id="line-6726">         if (i &gt; 0)</span>
<span class="source-line-no">6727</span><span id="line-6727">            return s.charAt(0) == c;</span>
<span class="source-line-no">6728</span><span id="line-6728">      }</span>
<span class="source-line-no">6729</span><span id="line-6729">      return false;</span>
<span class="source-line-no">6730</span><span id="line-6730">   }</span>
<span class="source-line-no">6731</span><span id="line-6731"></span>
<span class="source-line-no">6732</span><span id="line-6732">   /**</span>
<span class="source-line-no">6733</span><span id="line-6733">    * Checks if a string starts with a prefix, ignoring case.</span>
<span class="source-line-no">6734</span><span id="line-6734">    *</span>
<span class="source-line-no">6735</span><span id="line-6735">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">6736</span><span id="line-6736">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">6737</span><span id="line-6737">    *    startsWithIgnoreCase(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;"hello"&lt;/js&gt;);     &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">6738</span><span id="line-6738">    *    startsWithIgnoreCase(&lt;js&gt;"Hello World"&lt;/js&gt;, &lt;js&gt;"HELLO"&lt;/js&gt;);     &lt;jc&gt;// true&lt;/jc&gt;</span>
<span class="source-line-no">6739</span><span id="line-6739">    *    startsWithIgnoreCase(&lt;js&gt;"hello world"&lt;/js&gt;, &lt;js&gt;"world"&lt;/js&gt;);     &lt;jc&gt;// false&lt;/jc&gt;</span>
<span class="source-line-no">6740</span><span id="line-6740">    * &lt;/p&gt;</span>
<span class="source-line-no">6741</span><span id="line-6741">    *</span>
<span class="source-line-no">6742</span><span id="line-6742">    * @param str The string to check.</span>
<span class="source-line-no">6743</span><span id="line-6743">    * @param prefix The prefix to check for.</span>
<span class="source-line-no">6744</span><span id="line-6744">    * @return &lt;jk&gt;true&lt;/jk&gt; if the string starts with the prefix (ignoring case), &lt;jk&gt;false&lt;/jk&gt; otherwise.</span>
<span class="source-line-no">6745</span><span id="line-6745">    */</span>
<span class="source-line-no">6746</span><span id="line-6746">   public static boolean startsWithIgnoreCase(String str, String prefix) {</span>
<span class="source-line-no">6747</span><span id="line-6747">      if (str == null || prefix == null)</span>
<span class="source-line-no">6748</span><span id="line-6748">         return false;</span>
<span class="source-line-no">6749</span><span id="line-6749">      return str.toLowerCase().startsWith(prefix.toLowerCase());</span>
<span class="source-line-no">6750</span><span id="line-6750">   }</span>
<span class="source-line-no">6751</span><span id="line-6751"></span>
<span class="source-line-no">6752</span><span id="line-6752">   /**</span>
<span class="source-line-no">6753</span><span id="line-6753">    * Takes a supplier of any type and returns a {@link Supplier}{@code &lt;String&gt;}.</span>
<span class="source-line-no">6754</span><span id="line-6754">    *</span>
<span class="source-line-no">6755</span><span id="line-6755">    * &lt;p&gt;Useful when passing arguments to loggers.</span>
<span class="source-line-no">6756</span><span id="line-6756">    *</span>
<span class="source-line-no">6757</span><span id="line-6757">    * @param s The supplier.</span>
<span class="source-line-no">6758</span><span id="line-6758">    * @return A string supplier that calls {@link #readable(Object)} on the supplied value.</span>
<span class="source-line-no">6759</span><span id="line-6759">    */</span>
<span class="source-line-no">6760</span><span id="line-6760">   public static Supplier&lt;String&gt; stringSupplier(Supplier&lt;?&gt; s) {</span>
<span class="source-line-no">6761</span><span id="line-6761">      return () -&gt; readable(s.get());</span>
<span class="source-line-no">6762</span><span id="line-6762">   }</span>
<span class="source-line-no">6763</span><span id="line-6763"></span>
<span class="source-line-no">6764</span><span id="line-6764">   /**</span>
<span class="source-line-no">6765</span><span id="line-6765">    * Strips the first and last character from a string.</span>
<span class="source-line-no">6766</span><span id="line-6766">    *</span>
<span class="source-line-no">6767</span><span id="line-6767">    * @param s The string to strip.</span>
<span class="source-line-no">6768</span><span id="line-6768">    * @return The striped string, or the same string if the input was &lt;jk&gt;null&lt;/jk&gt; or less than length 2.</span>
<span class="source-line-no">6769</span><span id="line-6769">    */</span>
<span class="source-line-no">6770</span><span id="line-6770">   public static String strip(String s) {</span>
<span class="source-line-no">6771</span><span id="line-6771">      if (s == null || s.length() &lt;= 1)</span>
<span class="source-line-no">6772</span><span id="line-6772">         return s;</span>
<span class="source-line-no">6773</span><span id="line-6773">      return s.substring(1, s.length() - 1);</span>
<span class="source-line-no">6774</span><span id="line-6774">   }</span>
<span class="source-line-no">6775</span><span id="line-6775"></span>
<span class="source-line-no">6776</span><span id="line-6776">   /**</span>
<span class="source-line-no">6777</span><span id="line-6777">    * Strips invalid characters such as CTRL characters from a string meant to be encoded</span>
<span class="source-line-no">6778</span><span id="line-6778">    * as an HTTP header value.</span>
<span class="source-line-no">6779</span><span id="line-6779">    *</span>
<span class="source-line-no">6780</span><span id="line-6780">    * @param s The string to strip chars from.</span>
<span class="source-line-no">6781</span><span id="line-6781">    * @return The string with invalid characters removed.</span>
<span class="source-line-no">6782</span><span id="line-6782">    */</span>
<span class="source-line-no">6783</span><span id="line-6783">   public static String stripInvalidHttpHeaderChars(String s) {</span>
<span class="source-line-no">6784</span><span id="line-6784"></span>
<span class="source-line-no">6785</span><span id="line-6785">      if (s == null)</span>
<span class="source-line-no">6786</span><span id="line-6786">         return null;</span>
<span class="source-line-no">6787</span><span id="line-6787"></span>
<span class="source-line-no">6788</span><span id="line-6788">      var needsReplace = false;</span>
<span class="source-line-no">6789</span><span id="line-6789">      for (var i = 0; i &lt; s.length() &amp;&amp; ! needsReplace; i++)</span>
<span class="source-line-no">6790</span><span id="line-6790">         needsReplace |= HTTP_HEADER_CHARS.contains(s.charAt(i));</span>
<span class="source-line-no">6791</span><span id="line-6791"></span>
<span class="source-line-no">6792</span><span id="line-6792">      if (! needsReplace)</span>
<span class="source-line-no">6793</span><span id="line-6793">         return s;</span>
<span class="source-line-no">6794</span><span id="line-6794"></span>
<span class="source-line-no">6795</span><span id="line-6795">      var sb = new StringBuilder(s.length());</span>
<span class="source-line-no">6796</span><span id="line-6796">      for (var i = 0; i &lt; s.length(); i++) {</span>
<span class="source-line-no">6797</span><span id="line-6797">         var c = s.charAt(i);</span>
<span class="source-line-no">6798</span><span id="line-6798">         if (HTTP_HEADER_CHARS.contains(c))</span>
<span class="source-line-no">6799</span><span id="line-6799">            sb.append(c);</span>
<span class="source-line-no">6800</span><span id="line-6800">      }</span>
<span class="source-line-no">6801</span><span id="line-6801"></span>
<span class="source-line-no">6802</span><span id="line-6802">      return sb.toString();</span>
<span class="source-line-no">6803</span><span id="line-6803">   }</span>
<span class="source-line-no">6804</span><span id="line-6804"></span>
<span class="source-line-no">6805</span><span id="line-6805">   /**</span>
<span class="source-line-no">6806</span><span id="line-6806">    * Returns the substring after the first occurrence of a separator.</span>
<span class="source-line-no">6807</span><span id="line-6807">    *</span>
<span class="source-line-no">6808</span><span id="line-6808">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">6809</span><span id="line-6809">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">6810</span><span id="line-6810">    *    substringAfter(&lt;jk&gt;null&lt;/jk&gt;, &lt;js&gt;"."&lt;/js&gt;);              &lt;jc&gt;// null&lt;/jc&gt;</span>
<span class="source-line-no">6811</span><span id="line-6811">    *    substringAfter(&lt;js&gt;"hello.world"&lt;/js&gt;, &lt;jk&gt;null&lt;/jk&gt;);    &lt;jc&gt;// ""&lt;/jc&gt;</span>
<span class="source-line-no">6812</span><span id="line-6812">    *    substringAfter(&lt;js&gt;"hello.world"&lt;/js&gt;, &lt;js&gt;"."&lt;/js&gt;);     &lt;jc&gt;// "world"&lt;/jc&gt;</span>
<span class="source-line-no">6813</span><span id="line-6813">    *    substringAfter(&lt;js&gt;"hello.world"&lt;/js&gt;, &lt;js&gt;"xyz"&lt;/js&gt;);   &lt;jc&gt;// ""&lt;/jc&gt;</span>
<span class="source-line-no">6814</span><span id="line-6814">    * &lt;/p&gt;</span>
<span class="source-line-no">6815</span><span id="line-6815">    *</span>
<span class="source-line-no">6816</span><span id="line-6816">    * @param str The string to get a substring from.</span>
<span class="source-line-no">6817</span><span id="line-6817">    * @param separator The separator string.</span>
<span class="source-line-no">6818</span><span id="line-6818">    * @return The substring after the first occurrence of the separator, or empty string if separator not found.</span>
<span class="source-line-no">6819</span><span id="line-6819">    */</span>
<span class="source-line-no">6820</span><span id="line-6820">   public static String substringAfter(String str, String separator) {</span>
<span class="source-line-no">6821</span><span id="line-6821">      if (isEmpty(str))</span>
<span class="source-line-no">6822</span><span id="line-6822">         return str;</span>
<span class="source-line-no">6823</span><span id="line-6823">      if (separator == null)</span>
<span class="source-line-no">6824</span><span id="line-6824">         return "";</span>
<span class="source-line-no">6825</span><span id="line-6825">      var pos = str.indexOf(separator);</span>
<span class="source-line-no">6826</span><span id="line-6826">      if (pos == -1)</span>
<span class="source-line-no">6827</span><span id="line-6827">         return "";</span>
<span class="source-line-no">6828</span><span id="line-6828">      return str.substring(pos + separator.length());</span>
<span class="source-line-no">6829</span><span id="line-6829">   }</span>
<span class="source-line-no">6830</span><span id="line-6830"></span>
<span class="source-line-no">6831</span><span id="line-6831">   /**</span>
<span class="source-line-no">6832</span><span id="line-6832">    * Returns the substring before the first occurrence of a separator.</span>
<span class="source-line-no">6833</span><span id="line-6833">    *</span>
<span class="source-line-no">6834</span><span id="line-6834">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">6835</span><span id="line-6835">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">6836</span><span id="line-6836">    *    substringBefore(&lt;jk&gt;null&lt;/jk&gt;, &lt;js&gt;"."&lt;/js&gt;);              &lt;jc&gt;// null&lt;/jc&gt;</span>
<span class="source-line-no">6837</span><span id="line-6837">    *    substringBefore(&lt;js&gt;"hello.world"&lt;/js&gt;, &lt;jk&gt;null&lt;/jk&gt;);    &lt;jc&gt;// "hello.world"&lt;/jc&gt;</span>
<span class="source-line-no">6838</span><span id="line-6838">    *    substringBefore(&lt;js&gt;"hello.world"&lt;/js&gt;, &lt;js&gt;"."&lt;/js&gt;);     &lt;jc&gt;// "hello"&lt;/jc&gt;</span>
<span class="source-line-no">6839</span><span id="line-6839">    *    substringBefore(&lt;js&gt;"hello.world"&lt;/js&gt;, &lt;js&gt;"xyz"&lt;/js&gt;);   &lt;jc&gt;// "hello.world"&lt;/jc&gt;</span>
<span class="source-line-no">6840</span><span id="line-6840">    * &lt;/p&gt;</span>
<span class="source-line-no">6841</span><span id="line-6841">    *</span>
<span class="source-line-no">6842</span><span id="line-6842">    * @param str The string to get a substring from.</span>
<span class="source-line-no">6843</span><span id="line-6843">    * @param separator The separator string.</span>
<span class="source-line-no">6844</span><span id="line-6844">    * @return The substring before the first occurrence of the separator, or the original string if separator not found.</span>
<span class="source-line-no">6845</span><span id="line-6845">    */</span>
<span class="source-line-no">6846</span><span id="line-6846">   public static String substringBefore(String str, String separator) {</span>
<span class="source-line-no">6847</span><span id="line-6847">      if (isEmpty(str) || separator == null)</span>
<span class="source-line-no">6848</span><span id="line-6848">         return str;</span>
<span class="source-line-no">6849</span><span id="line-6849">      var pos = str.indexOf(separator);</span>
<span class="source-line-no">6850</span><span id="line-6850">      if (pos == -1)</span>
<span class="source-line-no">6851</span><span id="line-6851">         return str;</span>
<span class="source-line-no">6852</span><span id="line-6852">      return str.substring(0, pos);</span>
<span class="source-line-no">6853</span><span id="line-6853">   }</span>
<span class="source-line-no">6854</span><span id="line-6854"></span>
<span class="source-line-no">6855</span><span id="line-6855">   /**</span>
<span class="source-line-no">6856</span><span id="line-6856">    * Returns the substring between two delimiters.</span>
<span class="source-line-no">6857</span><span id="line-6857">    *</span>
<span class="source-line-no">6858</span><span id="line-6858">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">6859</span><span id="line-6859">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">6860</span><span id="line-6860">    *    substringBetween(&lt;jk&gt;null&lt;/jk&gt;, &lt;js&gt;"&amp;lt;"&lt;/js&gt;, &lt;js&gt;"&amp;gt;"&lt;/js&gt;);              &lt;jc&gt;// null&lt;/jc&gt;</span>
<span class="source-line-no">6861</span><span id="line-6861">    *    substringBetween(&lt;js&gt;"&amp;lt;hello&amp;gt;"&lt;/js&gt;, &lt;js&gt;"&amp;lt;"&lt;/js&gt;, &lt;js&gt;"&amp;gt;"&lt;/js&gt;);   &lt;jc&gt;// "hello"&lt;/jc&gt;</span>
<span class="source-line-no">6862</span><span id="line-6862">    *    substringBetween(&lt;js&gt;"&amp;lt;hello&amp;gt;"&lt;/js&gt;, &lt;js&gt;"["&lt;/js&gt;, &lt;js&gt;"]"&lt;/js&gt;);         &lt;jc&gt;// null&lt;/jc&gt;</span>
<span class="source-line-no">6863</span><span id="line-6863">    * &lt;/p&gt;</span>
<span class="source-line-no">6864</span><span id="line-6864">    *</span>
<span class="source-line-no">6865</span><span id="line-6865">    * @param str The string to get a substring from.</span>
<span class="source-line-no">6866</span><span id="line-6866">    * @param open The opening delimiter.</span>
<span class="source-line-no">6867</span><span id="line-6867">    * @param close The closing delimiter.</span>
<span class="source-line-no">6868</span><span id="line-6868">    * @return The substring between the delimiters, or &lt;jk&gt;null&lt;/jk&gt; if delimiters not found.</span>
<span class="source-line-no">6869</span><span id="line-6869">    */</span>
<span class="source-line-no">6870</span><span id="line-6870">   public static String substringBetween(String str, String open, String close) {</span>
<span class="source-line-no">6871</span><span id="line-6871">      if (str == null || open == null || close == null)</span>
<span class="source-line-no">6872</span><span id="line-6872">         return null;</span>
<span class="source-line-no">6873</span><span id="line-6873">      var start = str.indexOf(open);</span>
<span class="source-line-no">6874</span><span id="line-6874">      if (start == -1)</span>
<span class="source-line-no">6875</span><span id="line-6875">         return null;</span>
<span class="source-line-no">6876</span><span id="line-6876">      var end = str.indexOf(close, start + open.length());</span>
<span class="source-line-no">6877</span><span id="line-6877">      if (end == -1)</span>
<span class="source-line-no">6878</span><span id="line-6878">         return null;</span>
<span class="source-line-no">6879</span><span id="line-6879">      return str.substring(start + open.length(), end);</span>
<span class="source-line-no">6880</span><span id="line-6880">   }</span>
<span class="source-line-no">6881</span><span id="line-6881"></span>
<span class="source-line-no">6882</span><span id="line-6882">   /**</span>
<span class="source-line-no">6883</span><span id="line-6883">    * Swaps the case of all characters in a string.</span>
<span class="source-line-no">6884</span><span id="line-6884">    *</span>
<span class="source-line-no">6885</span><span id="line-6885">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">6886</span><span id="line-6886">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">6887</span><span id="line-6887">    *    swapCase(&lt;js&gt;"Hello World"&lt;/js&gt;);   &lt;jc&gt;// "hELLO wORLD"&lt;/jc&gt;</span>
<span class="source-line-no">6888</span><span id="line-6888">    *    swapCase(&lt;js&gt;"ABC123xyz"&lt;/js&gt;);     &lt;jc&gt;// "abc123XYZ"&lt;/jc&gt;</span>
<span class="source-line-no">6889</span><span id="line-6889">    * &lt;/p&gt;</span>
<span class="source-line-no">6890</span><span id="line-6890">    *</span>
<span class="source-line-no">6891</span><span id="line-6891">    * @param str The string to process.</span>
<span class="source-line-no">6892</span><span id="line-6892">    * @return The string with case swapped, or &lt;jk&gt;null&lt;/jk&gt; if input is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">6893</span><span id="line-6893">    */</span>
<span class="source-line-no">6894</span><span id="line-6894">   public static String swapCase(String str) {</span>
<span class="source-line-no">6895</span><span id="line-6895">      if (str == null)</span>
<span class="source-line-no">6896</span><span id="line-6896">         return null;</span>
<span class="source-line-no">6897</span><span id="line-6897">      var sb = new StringBuilder(str.length());</span>
<span class="source-line-no">6898</span><span id="line-6898">      for (var i = 0; i &lt; str.length(); i++) {</span>
<span class="source-line-no">6899</span><span id="line-6899">         var c = str.charAt(i);</span>
<span class="source-line-no">6900</span><span id="line-6900">         if (LETTER_UC.contains(c))</span>
<span class="source-line-no">6901</span><span id="line-6901">            sb.append(Character.toLowerCase(c));</span>
<span class="source-line-no">6902</span><span id="line-6902">         else if (LETTER_LC.contains(c))</span>
<span class="source-line-no">6903</span><span id="line-6903">            sb.append(Character.toUpperCase(c));</span>
<span class="source-line-no">6904</span><span id="line-6904">         else</span>
<span class="source-line-no">6905</span><span id="line-6905">            sb.append(c);</span>
<span class="source-line-no">6906</span><span id="line-6906">      }</span>
<span class="source-line-no">6907</span><span id="line-6907">      return sb.toString();</span>
<span class="source-line-no">6908</span><span id="line-6908">   }</span>
<span class="source-line-no">6909</span><span id="line-6909"></span>
<span class="source-line-no">6910</span><span id="line-6910">   /**</span>
<span class="source-line-no">6911</span><span id="line-6911">    * Converts a string to Title Case format (first letter of each word capitalized, separated by spaces).</span>
<span class="source-line-no">6912</span><span id="line-6912">    *</span>
<span class="source-line-no">6913</span><span id="line-6913">    * &lt;p&gt;</span>
<span class="source-line-no">6914</span><span id="line-6914">    * Handles various input formats:</span>
<span class="source-line-no">6915</span><span id="line-6915">    * &lt;ul&gt;</span>
<span class="source-line-no">6916</span><span id="line-6916">    *   &lt;li&gt;CamelCase: "helloWorld"  "Hello World"&lt;/li&gt;</span>
<span class="source-line-no">6917</span><span id="line-6917">    *   &lt;li&gt;PascalCase: "HelloWorld"  "Hello World"&lt;/li&gt;</span>
<span class="source-line-no">6918</span><span id="line-6918">    *   &lt;li&gt;Snake_case: "hello_world"  "Hello World"&lt;/li&gt;</span>
<span class="source-line-no">6919</span><span id="line-6919">    *   &lt;li&gt;Kebab-case: "hello-world"  "Hello World"&lt;/li&gt;</span>
<span class="source-line-no">6920</span><span id="line-6920">    * &lt;/ul&gt;</span>
<span class="source-line-no">6921</span><span id="line-6921">    *</span>
<span class="source-line-no">6922</span><span id="line-6922">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">6923</span><span id="line-6923">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">6924</span><span id="line-6924">    *    titleCase(&lt;jk&gt;null&lt;/jk&gt;);                    &lt;jc&gt;// null&lt;/jc&gt;</span>
<span class="source-line-no">6925</span><span id="line-6925">    *    titleCase(&lt;js&gt;""&lt;/js&gt;);                      &lt;jc&gt;// ""&lt;/jc&gt;</span>
<span class="source-line-no">6926</span><span id="line-6926">    *    titleCase(&lt;js&gt;"hello world"&lt;/js&gt;);           &lt;jc&gt;// "Hello World"&lt;/jc&gt;</span>
<span class="source-line-no">6927</span><span id="line-6927">    *    titleCase(&lt;js&gt;"helloWorld"&lt;/js&gt;);            &lt;jc&gt;// "Hello World"&lt;/jc&gt;</span>
<span class="source-line-no">6928</span><span id="line-6928">    *    titleCase(&lt;js&gt;"hello_world"&lt;/js&gt;);           &lt;jc&gt;// "Hello World"&lt;/jc&gt;</span>
<span class="source-line-no">6929</span><span id="line-6929">    *    titleCase(&lt;js&gt;"hello-world"&lt;/js&gt;);           &lt;jc&gt;// "Hello World"&lt;/jc&gt;</span>
<span class="source-line-no">6930</span><span id="line-6930">    * &lt;/p&gt;</span>
<span class="source-line-no">6931</span><span id="line-6931">    *</span>
<span class="source-line-no">6932</span><span id="line-6932">    * @param str The string to convert.</span>
<span class="source-line-no">6933</span><span id="line-6933">    * @return The Title Case string, or &lt;jk&gt;null&lt;/jk&gt; if input is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">6934</span><span id="line-6934">    */</span>
<span class="source-line-no">6935</span><span id="line-6935">   public static String titleCase(String str) {</span>
<span class="source-line-no">6936</span><span id="line-6936">      if (str == null)</span>
<span class="source-line-no">6937</span><span id="line-6937">         return null;</span>
<span class="source-line-no">6938</span><span id="line-6938">      if (isEmpty(str))</span>
<span class="source-line-no">6939</span><span id="line-6939">         return str;</span>
<span class="source-line-no">6940</span><span id="line-6940"></span>
<span class="source-line-no">6941</span><span id="line-6941">      var words = splitWords(str);</span>
<span class="source-line-no">6942</span><span id="line-6942">      if (words.isEmpty())</span>
<span class="source-line-no">6943</span><span id="line-6943">         return "";</span>
<span class="source-line-no">6944</span><span id="line-6944"></span>
<span class="source-line-no">6945</span><span id="line-6945">      var result = new StringBuilder();</span>
<span class="source-line-no">6946</span><span id="line-6946">      for (var i = 0; i &lt; words.size(); i++) {</span>
<span class="source-line-no">6947</span><span id="line-6947">         if (i &gt; 0)</span>
<span class="source-line-no">6948</span><span id="line-6948">            result.append(' ');</span>
<span class="source-line-no">6949</span><span id="line-6949">         result.append(capitalize(words.get(i).toLowerCase()));</span>
<span class="source-line-no">6950</span><span id="line-6950">      }</span>
<span class="source-line-no">6951</span><span id="line-6951"></span>
<span class="source-line-no">6952</span><span id="line-6952">      return result.toString();</span>
<span class="source-line-no">6953</span><span id="line-6953">   }</span>
<span class="source-line-no">6954</span><span id="line-6954"></span>
<span class="source-line-no">6955</span><span id="line-6955">   /**</span>
<span class="source-line-no">6956</span><span id="line-6956">    * Converts the specified object to a comma-delimited list.</span>
<span class="source-line-no">6957</span><span id="line-6957">    *</span>
<span class="source-line-no">6958</span><span id="line-6958">    * @param o The object to convert.</span>
<span class="source-line-no">6959</span><span id="line-6959">    * @return The specified object as a comma-delimited list.</span>
<span class="source-line-no">6960</span><span id="line-6960">    */</span>
<span class="source-line-no">6961</span><span id="line-6961">   public static String toCdl(Object o) {</span>
<span class="source-line-no">6962</span><span id="line-6962">      if (o == null)</span>
<span class="source-line-no">6963</span><span id="line-6963">         return null;</span>
<span class="source-line-no">6964</span><span id="line-6964">      if (isArray(o)) {</span>
<span class="source-line-no">6965</span><span id="line-6965">         var sb = new StringBuilder();</span>
<span class="source-line-no">6966</span><span id="line-6966">         for (int i = 0, j = Array.getLength(o); i &lt; j; i++) {</span>
<span class="source-line-no">6967</span><span id="line-6967">            if (i &gt; 0)</span>
<span class="source-line-no">6968</span><span id="line-6968">               sb.append(", ");</span>
<span class="source-line-no">6969</span><span id="line-6969">            sb.append(Array.get(o, i));</span>
<span class="source-line-no">6970</span><span id="line-6970">         }</span>
<span class="source-line-no">6971</span><span id="line-6971">         return sb.toString();</span>
<span class="source-line-no">6972</span><span id="line-6972">      }</span>
<span class="source-line-no">6973</span><span id="line-6973">      if (o instanceof Collection&lt;?&gt; c)</span>
<span class="source-line-no">6974</span><span id="line-6974">         return join(c, ", ");</span>
<span class="source-line-no">6975</span><span id="line-6975">      return o.toString();</span>
<span class="source-line-no">6976</span><span id="line-6976">   }</span>
<span class="source-line-no">6977</span><span id="line-6977"></span>
<span class="source-line-no">6978</span><span id="line-6978">   /**</span>
<span class="source-line-no">6979</span><span id="line-6979">    * Converts the specified byte into a 2 hexadecimal characters.</span>
<span class="source-line-no">6980</span><span id="line-6980">    *</span>
<span class="source-line-no">6981</span><span id="line-6981">    * @param b The number to convert to hex.</span>
<span class="source-line-no">6982</span><span id="line-6982">    * @return A &lt;code&gt;&lt;jk&gt;char&lt;/jk&gt;[2]&lt;/code&gt; containing the specified characters.</span>
<span class="source-line-no">6983</span><span id="line-6983">    */</span>
<span class="source-line-no">6984</span><span id="line-6984">   public static String toHex(byte b) {</span>
<span class="source-line-no">6985</span><span id="line-6985">      var c = new char[2];</span>
<span class="source-line-no">6986</span><span id="line-6986">      var v = b &amp; 0xFF;</span>
<span class="source-line-no">6987</span><span id="line-6987">      c[0] = HEX[v &gt;&gt;&gt; 4];</span>
<span class="source-line-no">6988</span><span id="line-6988">      c[1] = HEX[v &amp; 0x0F];</span>
<span class="source-line-no">6989</span><span id="line-6989">      return new String(c);</span>
<span class="source-line-no">6990</span><span id="line-6990">   }</span>
<span class="source-line-no">6991</span><span id="line-6991"></span>
<span class="source-line-no">6992</span><span id="line-6992">   /**</span>
<span class="source-line-no">6993</span><span id="line-6993">    * Converts a byte array into a simple hexadecimal character string.</span>
<span class="source-line-no">6994</span><span id="line-6994">    *</span>
<span class="source-line-no">6995</span><span id="line-6995">    * @param bytes The bytes to convert to hexadecimal.</span>
<span class="source-line-no">6996</span><span id="line-6996">    * @return A new string consisting of hexadecimal characters.</span>
<span class="source-line-no">6997</span><span id="line-6997">    */</span>
<span class="source-line-no">6998</span><span id="line-6998">   public static String toHex(byte[] bytes) {</span>
<span class="source-line-no">6999</span><span id="line-6999">      var sb = new StringBuilder(bytes.length * 2);</span>
<span class="source-line-no">7000</span><span id="line-7000">      for (var element : bytes) {</span>
<span class="source-line-no">7001</span><span id="line-7001">         var v = element &amp; 0xFF;</span>
<span class="source-line-no">7002</span><span id="line-7002">         sb.append(HEX[v &gt;&gt;&gt; 4]).append(HEX[v &amp; 0x0F]);</span>
<span class="source-line-no">7003</span><span id="line-7003">      }</span>
<span class="source-line-no">7004</span><span id="line-7004">      return sb.toString();</span>
<span class="source-line-no">7005</span><span id="line-7005">   }</span>
<span class="source-line-no">7006</span><span id="line-7006"></span>
<span class="source-line-no">7007</span><span id="line-7007">   /**</span>
<span class="source-line-no">7008</span><span id="line-7008">    * Converts the contents of the specified input stream to a hex string.</span>
<span class="source-line-no">7009</span><span id="line-7009">    *</span>
<span class="source-line-no">7010</span><span id="line-7010">    * @param is The input stream to convert.</span>
<span class="source-line-no">7011</span><span id="line-7011">    * @return The hex string representation of the input stream contents, or &lt;jk&gt;null&lt;/jk&gt; if the stream is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">7012</span><span id="line-7012">    */</span>
<span class="source-line-no">7013</span><span id="line-7013">   public static String toHex(InputStream is) {</span>
<span class="source-line-no">7014</span><span id="line-7014">      return safe(() -&gt; is == null ? null : toHex(readBytes(is)));</span>
<span class="source-line-no">7015</span><span id="line-7015">   }</span>
<span class="source-line-no">7016</span><span id="line-7016"></span>
<span class="source-line-no">7017</span><span id="line-7017">   /**</span>
<span class="source-line-no">7018</span><span id="line-7018">    * Converts the specified number into a 2 hexadecimal characters.</span>
<span class="source-line-no">7019</span><span id="line-7019">    *</span>
<span class="source-line-no">7020</span><span id="line-7020">    * @param num The number to convert to hex.</span>
<span class="source-line-no">7021</span><span id="line-7021">    * @return A &lt;code&gt;&lt;jk&gt;char&lt;/jk&gt;[2]&lt;/code&gt; containing the specified characters.</span>
<span class="source-line-no">7022</span><span id="line-7022">    */</span>
<span class="source-line-no">7023</span><span id="line-7023">   public static char[] toHex2(int num) {</span>
<span class="source-line-no">7024</span><span id="line-7024">      if (num &lt; 0 || num &gt; 255)</span>
<span class="source-line-no">7025</span><span id="line-7025">         throw new NumberFormatException("toHex2 can only be used on numbers between 0 and 255");</span>
<span class="source-line-no">7026</span><span id="line-7026">      var n = new char[2];</span>
<span class="source-line-no">7027</span><span id="line-7027">      var a = num % 16;</span>
<span class="source-line-no">7028</span><span id="line-7028">      n[1] = (char)(a &gt; 9 ? 'A' + a - 10 : '0' + a);</span>
<span class="source-line-no">7029</span><span id="line-7029">      a = (num / 16) % 16;</span>
<span class="source-line-no">7030</span><span id="line-7030">      n[0] = (char)(a &gt; 9 ? 'A' + a - 10 : '0' + a);</span>
<span class="source-line-no">7031</span><span id="line-7031">      return n;</span>
<span class="source-line-no">7032</span><span id="line-7032">   }</span>
<span class="source-line-no">7033</span><span id="line-7033"></span>
<span class="source-line-no">7034</span><span id="line-7034">   /**</span>
<span class="source-line-no">7035</span><span id="line-7035">    * Converts the specified number into a 4 hexadecimal characters.</span>
<span class="source-line-no">7036</span><span id="line-7036">    *</span>
<span class="source-line-no">7037</span><span id="line-7037">    * @param num The number to convert to hex.</span>
<span class="source-line-no">7038</span><span id="line-7038">    * @return A &lt;code&gt;&lt;jk&gt;char&lt;/jk&gt;[4]&lt;/code&gt; containing the specified characters.</span>
<span class="source-line-no">7039</span><span id="line-7039">    * @throws NumberFormatException If the number is negative.</span>
<span class="source-line-no">7040</span><span id="line-7040">    */</span>
<span class="source-line-no">7041</span><span id="line-7041">   public static char[] toHex4(int num) {</span>
<span class="source-line-no">7042</span><span id="line-7042">      if (num &lt; 0)</span>
<span class="source-line-no">7043</span><span id="line-7043">         throw new NumberFormatException("toHex4 can only be used on non-negative numbers");</span>
<span class="source-line-no">7044</span><span id="line-7044">      var n = new char[4];</span>
<span class="source-line-no">7045</span><span id="line-7045">      var a = num % 16;</span>
<span class="source-line-no">7046</span><span id="line-7046">      n[3] = (char)(a &gt; 9 ? 'A' + a - 10 : '0' + a);</span>
<span class="source-line-no">7047</span><span id="line-7047">      var base = 16;</span>
<span class="source-line-no">7048</span><span id="line-7048">      for (var i = 1; i &lt; 4; i++) {</span>
<span class="source-line-no">7049</span><span id="line-7049">         a = (num / base) % 16;</span>
<span class="source-line-no">7050</span><span id="line-7050">         base &lt;&lt;= 4;</span>
<span class="source-line-no">7051</span><span id="line-7051">         n[3 - i] = (char)(a &gt; 9 ? 'A' + a - 10 : '0' + a);</span>
<span class="source-line-no">7052</span><span id="line-7052">      }</span>
<span class="source-line-no">7053</span><span id="line-7053">      return n;</span>
<span class="source-line-no">7054</span><span id="line-7054">   }</span>
<span class="source-line-no">7055</span><span id="line-7055"></span>
<span class="source-line-no">7056</span><span id="line-7056">   /**</span>
<span class="source-line-no">7057</span><span id="line-7057">    * Converts the specified number into a 8 hexadecimal characters.</span>
<span class="source-line-no">7058</span><span id="line-7058">    *</span>
<span class="source-line-no">7059</span><span id="line-7059">    * @param num The number to convert to hex.</span>
<span class="source-line-no">7060</span><span id="line-7060">    * @return A &lt;code&gt;&lt;jk&gt;char&lt;/jk&gt;[8]&lt;/code&gt; containing the specified characters.</span>
<span class="source-line-no">7061</span><span id="line-7061">    * @throws NumberFormatException If the number is negative.</span>
<span class="source-line-no">7062</span><span id="line-7062">    */</span>
<span class="source-line-no">7063</span><span id="line-7063">   public static char[] toHex8(long num) {</span>
<span class="source-line-no">7064</span><span id="line-7064">      if (num &lt; 0)</span>
<span class="source-line-no">7065</span><span id="line-7065">         throw new NumberFormatException("toHex8 can only be used on non-negative numbers");</span>
<span class="source-line-no">7066</span><span id="line-7066">      var n = new char[8];</span>
<span class="source-line-no">7067</span><span id="line-7067">      var a = num % 16;</span>
<span class="source-line-no">7068</span><span id="line-7068">      n[7] = (char)(a &gt; 9 ? 'A' + a - 10 : '0' + a);</span>
<span class="source-line-no">7069</span><span id="line-7069">      var base = 16;</span>
<span class="source-line-no">7070</span><span id="line-7070">      for (var i = 1; i &lt; 8; i++) {</span>
<span class="source-line-no">7071</span><span id="line-7071">         a = (num / base) % 16;</span>
<span class="source-line-no">7072</span><span id="line-7072">         base &lt;&lt;= 4;</span>
<span class="source-line-no">7073</span><span id="line-7073">         n[7 - i] = (char)(a &gt; 9 ? 'A' + a - 10 : '0' + a);</span>
<span class="source-line-no">7074</span><span id="line-7074">      }</span>
<span class="source-line-no">7075</span><span id="line-7075">      return n;</span>
<span class="source-line-no">7076</span><span id="line-7076">   }</span>
<span class="source-line-no">7077</span><span id="line-7077"></span>
<span class="source-line-no">7078</span><span id="line-7078">   /**</span>
<span class="source-line-no">7079</span><span id="line-7079">    * Converts the specified object to an ISO8601 date string.</span>
<span class="source-line-no">7080</span><span id="line-7080">    *</span>
<span class="source-line-no">7081</span><span id="line-7081">    * @param c The object to convert.</span>
<span class="source-line-no">7082</span><span id="line-7082">    * @return The converted object.</span>
<span class="source-line-no">7083</span><span id="line-7083">    */</span>
<span class="source-line-no">7084</span><span id="line-7084">   public static String toIsoDate(Calendar c) {</span>
<span class="source-line-no">7085</span><span id="line-7085">      if (c == null) {</span>
<span class="source-line-no">7086</span><span id="line-7086">         return null;</span>
<span class="source-line-no">7087</span><span id="line-7087">      }</span>
<span class="source-line-no">7088</span><span id="line-7088">      // Convert Calendar to ZonedDateTime and format as ISO8601 date (YYYY-MM-DD)</span>
<span class="source-line-no">7089</span><span id="line-7089">      ZonedDateTime zdt = c.toInstant().atZone(c.getTimeZone().toZoneId());</span>
<span class="source-line-no">7090</span><span id="line-7090">      return zdt.format(DateTimeFormatter.ISO_LOCAL_DATE);</span>
<span class="source-line-no">7091</span><span id="line-7091">   }</span>
<span class="source-line-no">7092</span><span id="line-7092"></span>
<span class="source-line-no">7093</span><span id="line-7093">   /**</span>
<span class="source-line-no">7094</span><span id="line-7094">    * Converts the specified object to an ISO8601 date-time string.</span>
<span class="source-line-no">7095</span><span id="line-7095">    *</span>
<span class="source-line-no">7096</span><span id="line-7096">    * @param c The object to convert.</span>
<span class="source-line-no">7097</span><span id="line-7097">    * @return The converted object.</span>
<span class="source-line-no">7098</span><span id="line-7098">    */</span>
<span class="source-line-no">7099</span><span id="line-7099">   public static String toIsoDateTime(Calendar c) {</span>
<span class="source-line-no">7100</span><span id="line-7100">      if (c == null) {</span>
<span class="source-line-no">7101</span><span id="line-7101">         return null;</span>
<span class="source-line-no">7102</span><span id="line-7102">      }</span>
<span class="source-line-no">7103</span><span id="line-7103">      // Convert Calendar to ZonedDateTime and format as ISO8601 date-time with timezone</span>
<span class="source-line-no">7104</span><span id="line-7104">      ZonedDateTime zdt = c.toInstant().atZone(c.getTimeZone().toZoneId());</span>
<span class="source-line-no">7105</span><span id="line-7105">      return zdt.format(DateTimeFormatter.ISO_OFFSET_DATE_TIME);</span>
<span class="source-line-no">7106</span><span id="line-7106">   }</span>
<span class="source-line-no">7107</span><span id="line-7107"></span>
<span class="source-line-no">7108</span><span id="line-7108">   /**</span>
<span class="source-line-no">7109</span><span id="line-7109">    * Converts the specified bytes into a readable string.</span>
<span class="source-line-no">7110</span><span id="line-7110">    *</span>
<span class="source-line-no">7111</span><span id="line-7111">    * @param b The number to convert to hex.</span>
<span class="source-line-no">7112</span><span id="line-7112">    * @return A &lt;code&gt;&lt;jk&gt;char&lt;/jk&gt;[2]&lt;/code&gt; containing the specified characters.</span>
<span class="source-line-no">7113</span><span id="line-7113">    */</span>
<span class="source-line-no">7114</span><span id="line-7114">   public static String toReadableBytes(byte[] b) {</span>
<span class="source-line-no">7115</span><span id="line-7115">      var sb = new StringBuilder();</span>
<span class="source-line-no">7116</span><span id="line-7116">      for (var b2 : b)</span>
<span class="source-line-no">7117</span><span id="line-7117">         sb.append((b2 &lt; ' ' || b2 &gt; 'z') ? String.format("[%02X]", b2) : (char)b2 + "   ");</span>
<span class="source-line-no">7118</span><span id="line-7118">      sb.append("\n");</span>
<span class="source-line-no">7119</span><span id="line-7119">      for (var b2 : b)</span>
<span class="source-line-no">7120</span><span id="line-7120">         sb.append(String.format("[%02X]", b2));</span>
<span class="source-line-no">7121</span><span id="line-7121">      return sb.toString();</span>
<span class="source-line-no">7122</span><span id="line-7122">   }</span>
<span class="source-line-no">7123</span><span id="line-7123"></span>
<span class="source-line-no">7124</span><span id="line-7124">   /**</span>
<span class="source-line-no">7125</span><span id="line-7125">    * Same as {@link #toHex(byte[])} but puts spaces between the byte strings.</span>
<span class="source-line-no">7126</span><span id="line-7126">    *</span>
<span class="source-line-no">7127</span><span id="line-7127">    * @param bytes The bytes to convert to hexadecimal.</span>
<span class="source-line-no">7128</span><span id="line-7128">    * @return A new string consisting of hexadecimal characters.</span>
<span class="source-line-no">7129</span><span id="line-7129">    */</span>
<span class="source-line-no">7130</span><span id="line-7130">   public static String toSpacedHex(byte[] bytes) {</span>
<span class="source-line-no">7131</span><span id="line-7131">      var sb = new StringBuilder(bytes.length * 3);</span>
<span class="source-line-no">7132</span><span id="line-7132">      for (var j = 0; j &lt; bytes.length; j++) {</span>
<span class="source-line-no">7133</span><span id="line-7133">         if (j &gt; 0)</span>
<span class="source-line-no">7134</span><span id="line-7134">            sb.append(' ');</span>
<span class="source-line-no">7135</span><span id="line-7135">         var v = bytes[j] &amp; 0xFF;</span>
<span class="source-line-no">7136</span><span id="line-7136">         sb.append(HEX[v &gt;&gt;&gt; 4]).append(HEX[v &amp; 0x0F]);</span>
<span class="source-line-no">7137</span><span id="line-7137">      }</span>
<span class="source-line-no">7138</span><span id="line-7138">      return sb.toString();</span>
<span class="source-line-no">7139</span><span id="line-7139">   }</span>
<span class="source-line-no">7140</span><span id="line-7140"></span>
<span class="source-line-no">7141</span><span id="line-7141">   /**</span>
<span class="source-line-no">7142</span><span id="line-7142">    * Safely converts an object to a string, returning &lt;jk&gt;null&lt;/jk&gt; if the object is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">7143</span><span id="line-7143">    *</span>
<span class="source-line-no">7144</span><span id="line-7144">    * @param obj The object to convert to a string.</span>
<span class="source-line-no">7145</span><span id="line-7145">    * @return The string representation of the object, or &lt;jk&gt;null&lt;/jk&gt; if the object is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">7146</span><span id="line-7146">    */</span>
<span class="source-line-no">7147</span><span id="line-7147">   public static String toString(Object obj) {</span>
<span class="source-line-no">7148</span><span id="line-7148">      return obj == null ? null : obj.toString();</span>
<span class="source-line-no">7149</span><span id="line-7149">   }</span>
<span class="source-line-no">7150</span><span id="line-7150"></span>
<span class="source-line-no">7151</span><span id="line-7151">   /**</span>
<span class="source-line-no">7152</span><span id="line-7152">    * Safely converts an object to a string, returning the default string if the object is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">7153</span><span id="line-7153">    *</span>
<span class="source-line-no">7154</span><span id="line-7154">    * @param obj The object to convert to a string.</span>
<span class="source-line-no">7155</span><span id="line-7155">    * @param defaultStr The default string to return if the object is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">7156</span><span id="line-7156">    * @return The string representation of the object, or the default string if the object is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">7157</span><span id="line-7157">    */</span>
<span class="source-line-no">7158</span><span id="line-7158">   public static String toString(Object obj, String defaultStr) {</span>
<span class="source-line-no">7159</span><span id="line-7159">      return obj == null ? defaultStr : obj.toString();</span>
<span class="source-line-no">7160</span><span id="line-7160">   }</span>
<span class="source-line-no">7161</span><span id="line-7161"></span>
<span class="source-line-no">7162</span><span id="line-7162">   /**</span>
<span class="source-line-no">7163</span><span id="line-7163">    * Converts a collection of strings to a string array.</span>
<span class="source-line-no">7164</span><span id="line-7164">    *</span>
<span class="source-line-no">7165</span><span id="line-7165">    * &lt;p&gt;</span>
<span class="source-line-no">7166</span><span id="line-7166">    * Returns &lt;jk&gt;null&lt;/jk&gt; if the collection is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">7167</span><span id="line-7167">    * Returns an empty array if the collection is empty.</span>
<span class="source-line-no">7168</span><span id="line-7168">    *</span>
<span class="source-line-no">7169</span><span id="line-7169">    * @param collection The collection to convert. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">7170</span><span id="line-7170">    * @return A new string array containing the collection elements, or &lt;jk&gt;null&lt;/jk&gt; if the collection was &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">7171</span><span id="line-7171">    */</span>
<span class="source-line-no">7172</span><span id="line-7172">   public static String[] toStringArray(Collection&lt;String&gt; collection) {</span>
<span class="source-line-no">7173</span><span id="line-7173">      if (collection == null)</span>
<span class="source-line-no">7174</span><span id="line-7174">         return null;  // NOSONAR - Intentional.</span>
<span class="source-line-no">7175</span><span id="line-7175">      return collection.toArray(new String[collection.size()]);</span>
<span class="source-line-no">7176</span><span id="line-7176">   }</span>
<span class="source-line-no">7177</span><span id="line-7177"></span>
<span class="source-line-no">7178</span><span id="line-7178">   /**</span>
<span class="source-line-no">7179</span><span id="line-7179">    * Converts the specified object to a URI.</span>
<span class="source-line-no">7180</span><span id="line-7180">    *</span>
<span class="source-line-no">7181</span><span id="line-7181">    * @param o The object to convert to a URI.</span>
<span class="source-line-no">7182</span><span id="line-7182">    * @return A new URI, or the same object if the object was already a URI, or</span>
<span class="source-line-no">7183</span><span id="line-7183">    */</span>
<span class="source-line-no">7184</span><span id="line-7184">   public static URI toUri(Object o) {</span>
<span class="source-line-no">7185</span><span id="line-7185">      if (o == null || o instanceof URI)</span>
<span class="source-line-no">7186</span><span id="line-7186">         return (URI)o;</span>
<span class="source-line-no">7187</span><span id="line-7187">      try {</span>
<span class="source-line-no">7188</span><span id="line-7188">         return new URI(o.toString());</span>
<span class="source-line-no">7189</span><span id="line-7189">      } catch (URISyntaxException e) {</span>
<span class="source-line-no">7190</span><span id="line-7190">         throw toRex(e);</span>
<span class="source-line-no">7191</span><span id="line-7191">      }</span>
<span class="source-line-no">7192</span><span id="line-7192">   }</span>
<span class="source-line-no">7193</span><span id="line-7193"></span>
<span class="source-line-no">7194</span><span id="line-7194">   /**</span>
<span class="source-line-no">7195</span><span id="line-7195">    * Converts the specified byte array to a UTF-8 string.</span>
<span class="source-line-no">7196</span><span id="line-7196">    *</span>
<span class="source-line-no">7197</span><span id="line-7197">    * @param b The byte array to convert.</span>
<span class="source-line-no">7198</span><span id="line-7198">    * @return The UTF-8 string representation, or &lt;jk&gt;null&lt;/jk&gt; if the array is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">7199</span><span id="line-7199">    */</span>
<span class="source-line-no">7200</span><span id="line-7200">   public static String toUtf8(byte[] b) {</span>
<span class="source-line-no">7201</span><span id="line-7201">      return b == null ? null : new String(b, UTF8);</span>
<span class="source-line-no">7202</span><span id="line-7202">   }</span>
<span class="source-line-no">7203</span><span id="line-7203"></span>
<span class="source-line-no">7204</span><span id="line-7204">   /**</span>
<span class="source-line-no">7205</span><span id="line-7205">    * Converts the contents of the specified input stream to a UTF-8 string.</span>
<span class="source-line-no">7206</span><span id="line-7206">    *</span>
<span class="source-line-no">7207</span><span id="line-7207">    * @param is The input stream to convert.</span>
<span class="source-line-no">7208</span><span id="line-7208">    * @return The UTF-8 string representation of the input stream contents, or &lt;jk&gt;null&lt;/jk&gt; if the stream is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">7209</span><span id="line-7209">    */</span>
<span class="source-line-no">7210</span><span id="line-7210">   public static String toUtf8(InputStream is) {</span>
<span class="source-line-no">7211</span><span id="line-7211">      return safe(() -&gt; is == null ? null : new String(readBytes(is), UTF8));</span>
<span class="source-line-no">7212</span><span id="line-7212">   }</span>
<span class="source-line-no">7213</span><span id="line-7213"></span>
<span class="source-line-no">7214</span><span id="line-7214">   /**</span>
<span class="source-line-no">7215</span><span id="line-7215">    * Transliterates characters in a string by mapping characters from one set to another.</span>
<span class="source-line-no">7216</span><span id="line-7216">    *</span>
<span class="source-line-no">7217</span><span id="line-7217">    * &lt;p&gt;</span>
<span class="source-line-no">7218</span><span id="line-7218">    * Performs character-by-character translation. If a character is found in &lt;c&gt;fromChars&lt;/c&gt;,</span>
<span class="source-line-no">7219</span><span id="line-7219">    * it is replaced with the corresponding character at the same position in &lt;c&gt;toChars&lt;/c&gt;.</span>
<span class="source-line-no">7220</span><span id="line-7220">    * Characters not found in &lt;c&gt;fromChars&lt;/c&gt; are left unchanged.</span>
<span class="source-line-no">7221</span><span id="line-7221">    *</span>
<span class="source-line-no">7222</span><span id="line-7222">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">7223</span><span id="line-7223">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">7224</span><span id="line-7224">    *    transliterate(&lt;js&gt;"hello"&lt;/js&gt;, &lt;js&gt;"aeiou"&lt;/js&gt;, &lt;js&gt;"12345"&lt;/js&gt;);</span>
<span class="source-line-no">7225</span><span id="line-7225">    *    &lt;jc&gt;// "h2ll4"&lt;/jc&gt;</span>
<span class="source-line-no">7226</span><span id="line-7226">    *    transliterate(&lt;js&gt;"ABC"&lt;/js&gt;, &lt;js&gt;"ABC"&lt;/js&gt;, &lt;js&gt;"XYZ"&lt;/js&gt;);</span>
<span class="source-line-no">7227</span><span id="line-7227">    *    &lt;jc&gt;// "XYZ"&lt;/jc&gt;</span>
<span class="source-line-no">7228</span><span id="line-7228">    * &lt;/p&gt;</span>
<span class="source-line-no">7229</span><span id="line-7229">    *</span>
<span class="source-line-no">7230</span><span id="line-7230">    * @param str The string to transliterate. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">7231</span><span id="line-7231">    * @param fromChars The source character set. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">7232</span><span id="line-7232">    * @param toChars The target character set. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">7233</span><span id="line-7233">    * @return The transliterated string, or &lt;jk&gt;null&lt;/jk&gt; if input is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">7234</span><span id="line-7234">    * @throws IllegalArgumentException If &lt;c&gt;fromChars&lt;/c&gt; and &lt;c&gt;toChars&lt;/c&gt; have different lengths.</span>
<span class="source-line-no">7235</span><span id="line-7235">    */</span>
<span class="source-line-no">7236</span><span id="line-7236">   public static String transliterate(String str, String fromChars, String toChars) {</span>
<span class="source-line-no">7237</span><span id="line-7237">      if (str == null)</span>
<span class="source-line-no">7238</span><span id="line-7238">         return null;</span>
<span class="source-line-no">7239</span><span id="line-7239">      if (fromChars == null || toChars == null || fromChars.isEmpty() || toChars.isEmpty())</span>
<span class="source-line-no">7240</span><span id="line-7240">         return str;</span>
<span class="source-line-no">7241</span><span id="line-7241">      if (fromChars.length() != toChars.length())</span>
<span class="source-line-no">7242</span><span id="line-7242">         throw new IllegalArgumentException("fromChars and toChars must have the same length");</span>
<span class="source-line-no">7243</span><span id="line-7243"></span>
<span class="source-line-no">7244</span><span id="line-7244">      var sb = new StringBuilder(str.length());</span>
<span class="source-line-no">7245</span><span id="line-7245">      for (var i = 0; i &lt; str.length(); i++) {</span>
<span class="source-line-no">7246</span><span id="line-7246">         var c = str.charAt(i);</span>
<span class="source-line-no">7247</span><span id="line-7247">         var index = fromChars.indexOf(c);</span>
<span class="source-line-no">7248</span><span id="line-7248">         if (index &gt;= 0)</span>
<span class="source-line-no">7249</span><span id="line-7249">            sb.append(toChars.charAt(index));</span>
<span class="source-line-no">7250</span><span id="line-7250">         else</span>
<span class="source-line-no">7251</span><span id="line-7251">            sb.append(c);</span>
<span class="source-line-no">7252</span><span id="line-7252">      }</span>
<span class="source-line-no">7253</span><span id="line-7253">      return sb.toString();</span>
<span class="source-line-no">7254</span><span id="line-7254">   }</span>
<span class="source-line-no">7255</span><span id="line-7255"></span>
<span class="source-line-no">7256</span><span id="line-7256">   /**</span>
<span class="source-line-no">7257</span><span id="line-7257">    * Same as {@link String#trim()} but prevents &lt;c&gt;NullPointerExceptions&lt;/c&gt;.</span>
<span class="source-line-no">7258</span><span id="line-7258">    *</span>
<span class="source-line-no">7259</span><span id="line-7259">    * @param s The string to trim.</span>
<span class="source-line-no">7260</span><span id="line-7260">    * @return The trimmed string, or &lt;jk&gt;null&lt;/jk&gt; if the string was &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">7261</span><span id="line-7261">    */</span>
<span class="source-line-no">7262</span><span id="line-7262">   public static String trim(String s) {</span>
<span class="source-line-no">7263</span><span id="line-7263">      if (s == null)</span>
<span class="source-line-no">7264</span><span id="line-7264">         return null;</span>
<span class="source-line-no">7265</span><span id="line-7265">      return s.trim();</span>
<span class="source-line-no">7266</span><span id="line-7266">   }</span>
<span class="source-line-no">7267</span><span id="line-7267"></span>
<span class="source-line-no">7268</span><span id="line-7268">   /**</span>
<span class="source-line-no">7269</span><span id="line-7269">    * Trims whitespace characters from the end of the specified string.</span>
<span class="source-line-no">7270</span><span id="line-7270">    *</span>
<span class="source-line-no">7271</span><span id="line-7271">    * @param s The string to trim.</span>
<span class="source-line-no">7272</span><span id="line-7272">    * @return The trimmed string, or &lt;jk&gt;null&lt;/jk&gt; if the string was &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">7273</span><span id="line-7273">    */</span>
<span class="source-line-no">7274</span><span id="line-7274">   public static String trimEnd(String s) {</span>
<span class="source-line-no">7275</span><span id="line-7275">      if (nn(s))</span>
<span class="source-line-no">7276</span><span id="line-7276">         while (ne(s) &amp;&amp; isWhitespace(s.charAt(s.length() - 1)))</span>
<span class="source-line-no">7277</span><span id="line-7277">            s = s.substring(0, s.length() - 1);</span>
<span class="source-line-no">7278</span><span id="line-7278">      return s;</span>
<span class="source-line-no">7279</span><span id="line-7279">   }</span>
<span class="source-line-no">7280</span><span id="line-7280"></span>
<span class="source-line-no">7281</span><span id="line-7281">   /**</span>
<span class="source-line-no">7282</span><span id="line-7282">    * Trims &lt;js&gt;'/'&lt;/js&gt; characters from the beginning of the specified string.</span>
<span class="source-line-no">7283</span><span id="line-7283">    *</span>
<span class="source-line-no">7284</span><span id="line-7284">    * @param s The string to trim.</span>
<span class="source-line-no">7285</span><span id="line-7285">    * @return A new trimmed string, or the same string if no trimming was necessary.</span>
<span class="source-line-no">7286</span><span id="line-7286">    */</span>
<span class="source-line-no">7287</span><span id="line-7287">   public static String trimLeadingSlashes(String s) {</span>
<span class="source-line-no">7288</span><span id="line-7288">      if (s == null)</span>
<span class="source-line-no">7289</span><span id="line-7289">         return null;</span>
<span class="source-line-no">7290</span><span id="line-7290">      while (ne(s) &amp;&amp; s.charAt(0) == '/')</span>
<span class="source-line-no">7291</span><span id="line-7291">         s = s.substring(1);</span>
<span class="source-line-no">7292</span><span id="line-7292">      return s;</span>
<span class="source-line-no">7293</span><span id="line-7293">   }</span>
<span class="source-line-no">7294</span><span id="line-7294"></span>
<span class="source-line-no">7295</span><span id="line-7295">   /**</span>
<span class="source-line-no">7296</span><span id="line-7296">    * Trims &lt;js&gt;'/'&lt;/js&gt; characters from both the start and end of the specified string.</span>
<span class="source-line-no">7297</span><span id="line-7297">    *</span>
<span class="source-line-no">7298</span><span id="line-7298">    * @param s The string to trim.</span>
<span class="source-line-no">7299</span><span id="line-7299">    * @return A new trimmed string, or the same string if no trimming was necessary.</span>
<span class="source-line-no">7300</span><span id="line-7300">    */</span>
<span class="source-line-no">7301</span><span id="line-7301">   public static String trimSlashes(String s) {</span>
<span class="source-line-no">7302</span><span id="line-7302">      if (s == null)</span>
<span class="source-line-no">7303</span><span id="line-7303">         return null;</span>
<span class="source-line-no">7304</span><span id="line-7304">      if (s.isEmpty())</span>
<span class="source-line-no">7305</span><span id="line-7305">         return s;</span>
<span class="source-line-no">7306</span><span id="line-7306">      while (endsWith(s, '/'))</span>
<span class="source-line-no">7307</span><span id="line-7307">         s = s.substring(0, s.length() - 1);</span>
<span class="source-line-no">7308</span><span id="line-7308">      while (ne(s) &amp;&amp; s.charAt(0) == '/')  // NOSONAR - NPE not possible here.</span>
<span class="source-line-no">7309</span><span id="line-7309">         s = s.substring(1);</span>
<span class="source-line-no">7310</span><span id="line-7310">      return s;</span>
<span class="source-line-no">7311</span><span id="line-7311">   }</span>
<span class="source-line-no">7312</span><span id="line-7312"></span>
<span class="source-line-no">7313</span><span id="line-7313">   /**</span>
<span class="source-line-no">7314</span><span id="line-7314">    * Trims &lt;js&gt;'/'&lt;/js&gt; and space characters from both the start and end of the specified string.</span>
<span class="source-line-no">7315</span><span id="line-7315">    *</span>
<span class="source-line-no">7316</span><span id="line-7316">    * @param s The string to trim.</span>
<span class="source-line-no">7317</span><span id="line-7317">    * @return A new trimmed string, or the same string if no trimming was necessary.</span>
<span class="source-line-no">7318</span><span id="line-7318">    */</span>
<span class="source-line-no">7319</span><span id="line-7319">   public static String trimSlashesAndSpaces(String s) {</span>
<span class="source-line-no">7320</span><span id="line-7320">      if (s == null)</span>
<span class="source-line-no">7321</span><span id="line-7321">         return null;</span>
<span class="source-line-no">7322</span><span id="line-7322">      while (ne(s) &amp;&amp; (s.charAt(s.length() - 1) == '/' || isWhitespace(s.charAt(s.length() - 1))))</span>
<span class="source-line-no">7323</span><span id="line-7323">         s = s.substring(0, s.length() - 1);</span>
<span class="source-line-no">7324</span><span id="line-7324">      while (ne(s) &amp;&amp; (s.charAt(0) == '/' || isWhitespace(s.charAt(0))))</span>
<span class="source-line-no">7325</span><span id="line-7325">         s = s.substring(1);</span>
<span class="source-line-no">7326</span><span id="line-7326">      return s;</span>
<span class="source-line-no">7327</span><span id="line-7327">   }</span>
<span class="source-line-no">7328</span><span id="line-7328"></span>
<span class="source-line-no">7329</span><span id="line-7329">   /**</span>
<span class="source-line-no">7330</span><span id="line-7330">    * Trims whitespace characters from the beginning of the specified string.</span>
<span class="source-line-no">7331</span><span id="line-7331">    *</span>
<span class="source-line-no">7332</span><span id="line-7332">    * @param s The string to trim.</span>
<span class="source-line-no">7333</span><span id="line-7333">    * @return The trimmed string, or &lt;jk&gt;null&lt;/jk&gt; if the string was &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">7334</span><span id="line-7334">    */</span>
<span class="source-line-no">7335</span><span id="line-7335">   public static String trimStart(String s) {</span>
<span class="source-line-no">7336</span><span id="line-7336">      if (nn(s))</span>
<span class="source-line-no">7337</span><span id="line-7337">         while (ne(s) &amp;&amp; isWhitespace(s.charAt(0)))</span>
<span class="source-line-no">7338</span><span id="line-7338">            s = s.substring(1);</span>
<span class="source-line-no">7339</span><span id="line-7339">      return s;</span>
<span class="source-line-no">7340</span><span id="line-7340">   }</span>
<span class="source-line-no">7341</span><span id="line-7341"></span>
<span class="source-line-no">7342</span><span id="line-7342">   /**</span>
<span class="source-line-no">7343</span><span id="line-7343">    * Trims &lt;js&gt;'/'&lt;/js&gt; characters from the end of the specified string.</span>
<span class="source-line-no">7344</span><span id="line-7344">    *</span>
<span class="source-line-no">7345</span><span id="line-7345">    * @param s The string to trim.</span>
<span class="source-line-no">7346</span><span id="line-7346">    * @return A new trimmed string, or the same string if no trimming was necessary.</span>
<span class="source-line-no">7347</span><span id="line-7347">    */</span>
<span class="source-line-no">7348</span><span id="line-7348">   public static String trimTrailingSlashes(String s) {</span>
<span class="source-line-no">7349</span><span id="line-7349">      if (s == null)</span>
<span class="source-line-no">7350</span><span id="line-7350">         return null;</span>
<span class="source-line-no">7351</span><span id="line-7351">      while (endsWith(s, '/'))</span>
<span class="source-line-no">7352</span><span id="line-7352">         s = s.substring(0, s.length() - 1);</span>
<span class="source-line-no">7353</span><span id="line-7353">      return s;</span>
<span class="source-line-no">7354</span><span id="line-7354">   }</span>
<span class="source-line-no">7355</span><span id="line-7355"></span>
<span class="source-line-no">7356</span><span id="line-7356">   /**</span>
<span class="source-line-no">7357</span><span id="line-7357">    * Uncapitalizes the first character of a string.</span>
<span class="source-line-no">7358</span><span id="line-7358">    *</span>
<span class="source-line-no">7359</span><span id="line-7359">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">7360</span><span id="line-7360">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">7361</span><span id="line-7361">    *    uncapitalize(&lt;jk&gt;null&lt;/jk&gt;);          &lt;jc&gt;// null&lt;/jc&gt;</span>
<span class="source-line-no">7362</span><span id="line-7362">    *    uncapitalize(&lt;js&gt;""&lt;/js&gt;);            &lt;jc&gt;// ""&lt;/jc&gt;</span>
<span class="source-line-no">7363</span><span id="line-7363">    *    uncapitalize(&lt;js&gt;"Hello"&lt;/js&gt;);       &lt;jc&gt;// "hello"&lt;/jc&gt;</span>
<span class="source-line-no">7364</span><span id="line-7364">    *    uncapitalize(&lt;js&gt;"hello"&lt;/js&gt;);       &lt;jc&gt;// "hello"&lt;/jc&gt;</span>
<span class="source-line-no">7365</span><span id="line-7365">    *    uncapitalize(&lt;js&gt;"HELLO"&lt;/js&gt;);       &lt;jc&gt;// "hELLO"&lt;/jc&gt;</span>
<span class="source-line-no">7366</span><span id="line-7366">    * &lt;/p&gt;</span>
<span class="source-line-no">7367</span><span id="line-7367">    *</span>
<span class="source-line-no">7368</span><span id="line-7368">    * @param str The string to uncapitalize.</span>
<span class="source-line-no">7369</span><span id="line-7369">    * @return The string with the first character uncapitalized, or &lt;jk&gt;null&lt;/jk&gt; if input is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">7370</span><span id="line-7370">    */</span>
<span class="source-line-no">7371</span><span id="line-7371">   public static String uncapitalize(String str) {</span>
<span class="source-line-no">7372</span><span id="line-7372">      if (isEmpty(str))</span>
<span class="source-line-no">7373</span><span id="line-7373">         return str;</span>
<span class="source-line-no">7374</span><span id="line-7374">      return Character.toLowerCase(str.charAt(0)) + str.substring(1);</span>
<span class="source-line-no">7375</span><span id="line-7375">   }</span>
<span class="source-line-no">7376</span><span id="line-7376"></span>
<span class="source-line-no">7377</span><span id="line-7377">   /**</span>
<span class="source-line-no">7378</span><span id="line-7378">    * Removes escape characters from the specified characters.</span>
<span class="source-line-no">7379</span><span id="line-7379">    *</span>
<span class="source-line-no">7380</span><span id="line-7380">    * @param s The string to remove escape characters from.</span>
<span class="source-line-no">7381</span><span id="line-7381">    * @param escaped The characters escaped.</span>
<span class="source-line-no">7382</span><span id="line-7382">    * @return A new string if characters were removed, or the same string if not or if the input was &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">7383</span><span id="line-7383">    */</span>
<span class="source-line-no">7384</span><span id="line-7384">   public static String unescapeChars(String s, AsciiSet escaped) {</span>
<span class="source-line-no">7385</span><span id="line-7385">      if (s == null || s.isEmpty())</span>
<span class="source-line-no">7386</span><span id="line-7386">         return s;</span>
<span class="source-line-no">7387</span><span id="line-7387">      var count = 0;</span>
<span class="source-line-no">7388</span><span id="line-7388">      for (var i = 0; i &lt; s.length(); i++)</span>
<span class="source-line-no">7389</span><span id="line-7389">         if (escaped.contains(s.charAt(i)))</span>
<span class="source-line-no">7390</span><span id="line-7390">            count++;</span>
<span class="source-line-no">7391</span><span id="line-7391">      if (count == 0)</span>
<span class="source-line-no">7392</span><span id="line-7392">         return s;</span>
<span class="source-line-no">7393</span><span id="line-7393">      var sb = new StringBuffer(s.length() - count);</span>
<span class="source-line-no">7394</span><span id="line-7394">      for (var i = 0; i &lt; s.length(); i++) {</span>
<span class="source-line-no">7395</span><span id="line-7395">         var c = s.charAt(i);</span>
<span class="source-line-no">7396</span><span id="line-7396"></span>
<span class="source-line-no">7397</span><span id="line-7397">         if (c == '\\') {</span>
<span class="source-line-no">7398</span><span id="line-7398">            if (i + 1 != s.length()) {  // NOSONAR - Intentional.</span>
<span class="source-line-no">7399</span><span id="line-7399">               var c2 = s.charAt(i + 1);</span>
<span class="source-line-no">7400</span><span id="line-7400">               if (escaped.contains(c2)) {</span>
<span class="source-line-no">7401</span><span id="line-7401">                  i++;  // NOSONAR - Intentional.</span>
<span class="source-line-no">7402</span><span id="line-7402">               }</span>
<span class="source-line-no">7403</span><span id="line-7403">            }</span>
<span class="source-line-no">7404</span><span id="line-7404">         }</span>
<span class="source-line-no">7405</span><span id="line-7405">         sb.append(s.charAt(i));</span>
<span class="source-line-no">7406</span><span id="line-7406">      }</span>
<span class="source-line-no">7407</span><span id="line-7407">      return sb.toString();</span>
<span class="source-line-no">7408</span><span id="line-7408">   }</span>
<span class="source-line-no">7409</span><span id="line-7409"></span>
<span class="source-line-no">7410</span><span id="line-7410">   /**</span>
<span class="source-line-no">7411</span><span id="line-7411">    * Unescapes HTML entities in a string.</span>
<span class="source-line-no">7412</span><span id="line-7412">    *</span>
<span class="source-line-no">7413</span><span id="line-7413">    * &lt;p&gt;</span>
<span class="source-line-no">7414</span><span id="line-7414">    * Unescapes the following HTML entities:</span>
<span class="source-line-no">7415</span><span id="line-7415">    * &lt;ul&gt;</span>
<span class="source-line-no">7416</span><span id="line-7416">    *   &lt;li&gt;&lt;js&gt;"&amp;amp;amp;"&lt;/js&gt;  &lt;js&gt;'&amp;amp;'&lt;/js&gt;&lt;/li&gt;</span>
<span class="source-line-no">7417</span><span id="line-7417">    *   &lt;li&gt;&lt;js&gt;"&amp;amp;lt;"&lt;/js&gt;  &lt;js&gt;'&amp;lt;'&lt;/js&gt;&lt;/li&gt;</span>
<span class="source-line-no">7418</span><span id="line-7418">    *   &lt;li&gt;&lt;js&gt;"&amp;amp;gt;"&lt;/js&gt;  &lt;js&gt;'&amp;gt;'&lt;/js&gt;&lt;/li&gt;</span>
<span class="source-line-no">7419</span><span id="line-7419">    *   &lt;li&gt;&lt;js&gt;"&amp;amp;quot;"&lt;/js&gt;  &lt;js&gt;'"'&lt;/js&gt;&lt;/li&gt;</span>
<span class="source-line-no">7420</span><span id="line-7420">    *   &lt;li&gt;&lt;js&gt;"&amp;amp;#39;"&lt;/js&gt; or &lt;js&gt;"&amp;amp;apos;"&lt;/js&gt;  &lt;js&gt;'\''&lt;/js&gt;&lt;/li&gt;</span>
<span class="source-line-no">7421</span><span id="line-7421">    * &lt;/ul&gt;</span>
<span class="source-line-no">7422</span><span id="line-7422">    *</span>
<span class="source-line-no">7423</span><span id="line-7423">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">7424</span><span id="line-7424">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">7425</span><span id="line-7425">    *    unescapeHtml(&lt;js&gt;"&amp;amp;lt;script&amp;amp;gt;"&lt;/js&gt;);     &lt;jc&gt;// Returns: "&amp;lt;script&amp;gt;"&lt;/jc&gt;</span>
<span class="source-line-no">7426</span><span id="line-7426">    * &lt;/p&gt;</span>
<span class="source-line-no">7427</span><span id="line-7427">    *</span>
<span class="source-line-no">7428</span><span id="line-7428">    * @param str The string to unescape.</span>
<span class="source-line-no">7429</span><span id="line-7429">    * @return The unescaped string, or &lt;jk&gt;null&lt;/jk&gt; if input is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">7430</span><span id="line-7430">    */</span>
<span class="source-line-no">7431</span><span id="line-7431">   public static String unescapeHtml(String str) {</span>
<span class="source-line-no">7432</span><span id="line-7432">      if (str == null)</span>
<span class="source-line-no">7433</span><span id="line-7433">         return null;</span>
<span class="source-line-no">7434</span><span id="line-7434">      // Must unescape &amp;amp; last to avoid interfering with other entities</span>
<span class="source-line-no">7435</span><span id="line-7435">      return str.replace("&amp;lt;", "&lt;").replace("&amp;gt;", "&gt;").replace("&amp;quot;", "\"").replace("&amp;#39;", "'").replace("&amp;apos;", "'").replace("&amp;amp;", "&amp;");</span>
<span class="source-line-no">7436</span><span id="line-7436">   }</span>
<span class="source-line-no">7437</span><span id="line-7437"></span>
<span class="source-line-no">7438</span><span id="line-7438">   /**</span>
<span class="source-line-no">7439</span><span id="line-7439">    * Unescapes XML entities in a string.</span>
<span class="source-line-no">7440</span><span id="line-7440">    *</span>
<span class="source-line-no">7441</span><span id="line-7441">    * &lt;p&gt;</span>
<span class="source-line-no">7442</span><span id="line-7442">    * Unescapes the following XML entities:</span>
<span class="source-line-no">7443</span><span id="line-7443">    * &lt;ul&gt;</span>
<span class="source-line-no">7444</span><span id="line-7444">    *   &lt;li&gt;&lt;js&gt;"&amp;amp;amp;"&lt;/js&gt;  &lt;js&gt;'&amp;amp;'&lt;/js&gt;&lt;/li&gt;</span>
<span class="source-line-no">7445</span><span id="line-7445">    *   &lt;li&gt;&lt;js&gt;"&amp;amp;lt;"&lt;/js&gt;  &lt;js&gt;'&amp;lt;'&lt;/js&gt;&lt;/li&gt;</span>
<span class="source-line-no">7446</span><span id="line-7446">    *   &lt;li&gt;&lt;js&gt;"&amp;amp;gt;"&lt;/js&gt;  &lt;js&gt;'&amp;gt;'&lt;/js&gt;&lt;/li&gt;</span>
<span class="source-line-no">7447</span><span id="line-7447">    *   &lt;li&gt;&lt;js&gt;"&amp;amp;quot;"&lt;/js&gt;  &lt;js&gt;'"'&lt;/js&gt;&lt;/li&gt;</span>
<span class="source-line-no">7448</span><span id="line-7448">    *   &lt;li&gt;&lt;js&gt;"&amp;amp;apos;"&lt;/js&gt;  &lt;js&gt;'\''&lt;/js&gt;&lt;/li&gt;</span>
<span class="source-line-no">7449</span><span id="line-7449">    * &lt;/ul&gt;</span>
<span class="source-line-no">7450</span><span id="line-7450">    *</span>
<span class="source-line-no">7451</span><span id="line-7451">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">7452</span><span id="line-7452">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">7453</span><span id="line-7453">    *    unescapeXml(&lt;js&gt;"&amp;amp;lt;tag&amp;amp;gt;"&lt;/js&gt;);     &lt;jc&gt;// Returns: "&amp;lt;tag&amp;gt;"&lt;/jc&gt;</span>
<span class="source-line-no">7454</span><span id="line-7454">    * &lt;/p&gt;</span>
<span class="source-line-no">7455</span><span id="line-7455">    *</span>
<span class="source-line-no">7456</span><span id="line-7456">    * @param str The string to unescape.</span>
<span class="source-line-no">7457</span><span id="line-7457">    * @return The unescaped string, or &lt;jk&gt;null&lt;/jk&gt; if input is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">7458</span><span id="line-7458">    */</span>
<span class="source-line-no">7459</span><span id="line-7459">   public static String unescapeXml(String str) {</span>
<span class="source-line-no">7460</span><span id="line-7460">      if (str == null)</span>
<span class="source-line-no">7461</span><span id="line-7461">         return null;</span>
<span class="source-line-no">7462</span><span id="line-7462">      // Must unescape &amp;amp; last to avoid interfering with other entities</span>
<span class="source-line-no">7463</span><span id="line-7463">      return str.replace("&amp;lt;", "&lt;").replace("&amp;gt;", "&gt;").replace("&amp;quot;", "\"").replace("&amp;apos;", "'").replace("&amp;amp;", "&amp;");</span>
<span class="source-line-no">7464</span><span id="line-7464">   }</span>
<span class="source-line-no">7465</span><span id="line-7465"></span>
<span class="source-line-no">7466</span><span id="line-7466">   /**</span>
<span class="source-line-no">7467</span><span id="line-7467">    * Creates an escaped-unicode sequence (e.g. &lt;js&gt;"\\u1234"&lt;/js&gt;) for the specified character.</span>
<span class="source-line-no">7468</span><span id="line-7468">    *</span>
<span class="source-line-no">7469</span><span id="line-7469">    * @param c The character to create a sequence for.</span>
<span class="source-line-no">7470</span><span id="line-7470">    * @return An escaped-unicode sequence.</span>
<span class="source-line-no">7471</span><span id="line-7471">    */</span>
<span class="source-line-no">7472</span><span id="line-7472">   public static String unicodeSequence(char c) {</span>
<span class="source-line-no">7473</span><span id="line-7473">      var sb = new StringBuilder(6);</span>
<span class="source-line-no">7474</span><span id="line-7474">      sb.append('\\').append('u');</span>
<span class="source-line-no">7475</span><span id="line-7475">      for (var cc : toHex4(c))</span>
<span class="source-line-no">7476</span><span id="line-7476">         sb.append(cc);</span>
<span class="source-line-no">7477</span><span id="line-7477">      return sb.toString();</span>
<span class="source-line-no">7478</span><span id="line-7478">   }</span>
<span class="source-line-no">7479</span><span id="line-7479"></span>
<span class="source-line-no">7480</span><span id="line-7480">   /**</span>
<span class="source-line-no">7481</span><span id="line-7481">    * Null-safe convenience method for {@link String#toUpperCase()}.</span>
<span class="source-line-no">7482</span><span id="line-7482">    *</span>
<span class="source-line-no">7483</span><span id="line-7483">    * &lt;p&gt;</span>
<span class="source-line-no">7484</span><span id="line-7484">    * Converts the string to uppercase if not null.</span>
<span class="source-line-no">7485</span><span id="line-7485">    *</span>
<span class="source-line-no">7486</span><span id="line-7486">    * @param s The string to convert.</span>
<span class="source-line-no">7487</span><span id="line-7487">    * @return The uppercase string, or &lt;jk&gt;null&lt;/jk&gt; if the input was &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">7488</span><span id="line-7488">    * @see #lowerCase(String)</span>
<span class="source-line-no">7489</span><span id="line-7489">    * @see Utils#uc(String)</span>
<span class="source-line-no">7490</span><span id="line-7490">    */</span>
<span class="source-line-no">7491</span><span id="line-7491">   public static String upperCase(String s) {</span>
<span class="source-line-no">7492</span><span id="line-7492">      return s == null ? null : s.toUpperCase();</span>
<span class="source-line-no">7493</span><span id="line-7493">   }</span>
<span class="source-line-no">7494</span><span id="line-7494"></span>
<span class="source-line-no">7495</span><span id="line-7495">   /**</span>
<span class="source-line-no">7496</span><span id="line-7496">    * Decodes a &lt;c&gt;application/x-www-form-urlencoded&lt;/c&gt; string using &lt;c&gt;UTF-8&lt;/c&gt; encoding scheme.</span>
<span class="source-line-no">7497</span><span id="line-7497">    *</span>
<span class="source-line-no">7498</span><span id="line-7498">    * @param s The string to decode.</span>
<span class="source-line-no">7499</span><span id="line-7499">    * @return The decoded string, or &lt;jk&gt;null&lt;/jk&gt; if input is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">7500</span><span id="line-7500">    */</span>
<span class="source-line-no">7501</span><span id="line-7501">   public static String urlDecode(String s) {</span>
<span class="source-line-no">7502</span><span id="line-7502"></span>
<span class="source-line-no">7503</span><span id="line-7503">      if (s == null)</span>
<span class="source-line-no">7504</span><span id="line-7504">         return s;</span>
<span class="source-line-no">7505</span><span id="line-7505"></span>
<span class="source-line-no">7506</span><span id="line-7506">      var needsDecode = false;</span>
<span class="source-line-no">7507</span><span id="line-7507">      for (var i = 0; i &lt; s.length() &amp;&amp; ! needsDecode; i++) {</span>
<span class="source-line-no">7508</span><span id="line-7508">         var c = s.charAt(i);</span>
<span class="source-line-no">7509</span><span id="line-7509">         if (c == '+' || c == '%')</span>
<span class="source-line-no">7510</span><span id="line-7510">            needsDecode = true;</span>
<span class="source-line-no">7511</span><span id="line-7511">      }</span>
<span class="source-line-no">7512</span><span id="line-7512"></span>
<span class="source-line-no">7513</span><span id="line-7513">      if (needsDecode) {</span>
<span class="source-line-no">7514</span><span id="line-7514">         return safe(()-&gt;URLDecoder.decode(s, "UTF-8"));</span>
<span class="source-line-no">7515</span><span id="line-7515">      }</span>
<span class="source-line-no">7516</span><span id="line-7516">      return s;</span>
<span class="source-line-no">7517</span><span id="line-7517">   }</span>
<span class="source-line-no">7518</span><span id="line-7518"></span>
<span class="source-line-no">7519</span><span id="line-7519">   /**</span>
<span class="source-line-no">7520</span><span id="line-7520">    * Encodes a &lt;c&gt;application/x-www-form-urlencoded&lt;/c&gt; string using &lt;c&gt;UTF-8&lt;/c&gt; encoding scheme.</span>
<span class="source-line-no">7521</span><span id="line-7521">    *</span>
<span class="source-line-no">7522</span><span id="line-7522">    * @param s The string to encode.</span>
<span class="source-line-no">7523</span><span id="line-7523">    * @return The encoded string, or &lt;jk&gt;null&lt;/jk&gt; if input is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">7524</span><span id="line-7524">    */</span>
<span class="source-line-no">7525</span><span id="line-7525">   public static String urlEncode(String s) {</span>
<span class="source-line-no">7526</span><span id="line-7526"></span>
<span class="source-line-no">7527</span><span id="line-7527">      if (s == null)</span>
<span class="source-line-no">7528</span><span id="line-7528">         return null;</span>
<span class="source-line-no">7529</span><span id="line-7529"></span>
<span class="source-line-no">7530</span><span id="line-7530">      var needsEncode = false;</span>
<span class="source-line-no">7531</span><span id="line-7531"></span>
<span class="source-line-no">7532</span><span id="line-7532">      for (var i = 0; i &lt; s.length() &amp;&amp; ! needsEncode; i++)</span>
<span class="source-line-no">7533</span><span id="line-7533">         needsEncode |= (! URL_UNENCODED_CHARS.contains(s.charAt(i)));</span>
<span class="source-line-no">7534</span><span id="line-7534"></span>
<span class="source-line-no">7535</span><span id="line-7535">      if (needsEncode) {</span>
<span class="source-line-no">7536</span><span id="line-7536">         return safe(()-&gt;URLEncoder.encode(s, "UTF-8"));</span>
<span class="source-line-no">7537</span><span id="line-7537">      }</span>
<span class="source-line-no">7538</span><span id="line-7538"></span>
<span class="source-line-no">7539</span><span id="line-7539">      return s;</span>
<span class="source-line-no">7540</span><span id="line-7540">   }</span>
<span class="source-line-no">7541</span><span id="line-7541"></span>
<span class="source-line-no">7542</span><span id="line-7542">   /**</span>
<span class="source-line-no">7543</span><span id="line-7543">    * Same as {@link #urlEncode(String)} except only escapes characters that absolutely need to be escaped.</span>
<span class="source-line-no">7544</span><span id="line-7544">    *</span>
<span class="source-line-no">7545</span><span id="line-7545">    * @param s The string to escape.</span>
<span class="source-line-no">7546</span><span id="line-7546">    * @return The encoded string, or &lt;jk&gt;null&lt;/jk&gt; if input is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">7547</span><span id="line-7547">    */</span>
<span class="source-line-no">7548</span><span id="line-7548">   public static String urlEncodeLax(String s) {</span>
<span class="source-line-no">7549</span><span id="line-7549">      if (s == null)</span>
<span class="source-line-no">7550</span><span id="line-7550">         return null;</span>
<span class="source-line-no">7551</span><span id="line-7551">      var needsEncode = false;</span>
<span class="source-line-no">7552</span><span id="line-7552">      for (var i = 0; i &lt; s.length() &amp;&amp; ! needsEncode; i++)</span>
<span class="source-line-no">7553</span><span id="line-7553">         needsEncode |= (! URL_UNENCODED_LAX_CHARS.contains(s.charAt(i)));</span>
<span class="source-line-no">7554</span><span id="line-7554">      if (needsEncode) {</span>
<span class="source-line-no">7555</span><span id="line-7555">         var sb = new StringBuilder(s.length() * 2);</span>
<span class="source-line-no">7556</span><span id="line-7556">         for (var i = 0; i &lt; s.length(); i++) {</span>
<span class="source-line-no">7557</span><span id="line-7557">            var c = s.charAt(i);</span>
<span class="source-line-no">7558</span><span id="line-7558">            if (URL_UNENCODED_LAX_CHARS.contains(c))</span>
<span class="source-line-no">7559</span><span id="line-7559">               sb.append(c);</span>
<span class="source-line-no">7560</span><span id="line-7560">            else if (c == ' ')</span>
<span class="source-line-no">7561</span><span id="line-7561">               sb.append("+");</span>
<span class="source-line-no">7562</span><span id="line-7562">            else if (c &lt;= 127)</span>
<span class="source-line-no">7563</span><span id="line-7563">               sb.append('%').append(toHex2(c));</span>
<span class="source-line-no">7564</span><span id="line-7564">            else</span>
<span class="source-line-no">7565</span><span id="line-7565">               safe(()-&gt;sb.append(URLEncoder.encode("" + c, "UTF-8")));  // Yuck.</span>
<span class="source-line-no">7566</span><span id="line-7566">         }</span>
<span class="source-line-no">7567</span><span id="line-7567">         s = sb.toString();</span>
<span class="source-line-no">7568</span><span id="line-7568">      }</span>
<span class="source-line-no">7569</span><span id="line-7569">      return s;</span>
<span class="source-line-no">7570</span><span id="line-7570">   }</span>
<span class="source-line-no">7571</span><span id="line-7571"></span>
<span class="source-line-no">7572</span><span id="line-7572">   /**</span>
<span class="source-line-no">7573</span><span id="line-7573">    * Similar to {@link URLEncoder#encode(String, String)} but doesn't encode &lt;js&gt;"/"&lt;/js&gt; characters.</span>
<span class="source-line-no">7574</span><span id="line-7574">    *</span>
<span class="source-line-no">7575</span><span id="line-7575">    * @param o The object to encode.</span>
<span class="source-line-no">7576</span><span id="line-7576">    * @return The URL encoded string, or &lt;jk&gt;null&lt;/jk&gt; if the object was null.</span>
<span class="source-line-no">7577</span><span id="line-7577">    */</span>
<span class="source-line-no">7578</span><span id="line-7578">   public static String urlEncodePath(Object o) {</span>
<span class="source-line-no">7579</span><span id="line-7579"></span>
<span class="source-line-no">7580</span><span id="line-7580">      if (o == null)</span>
<span class="source-line-no">7581</span><span id="line-7581">         return null;</span>
<span class="source-line-no">7582</span><span id="line-7582"></span>
<span class="source-line-no">7583</span><span id="line-7583">      var s = s(o);</span>
<span class="source-line-no">7584</span><span id="line-7584"></span>
<span class="source-line-no">7585</span><span id="line-7585">      var needsEncode = false;</span>
<span class="source-line-no">7586</span><span id="line-7586">      for (var i = 0; i &lt; s.length() &amp;&amp; ! needsEncode; i++)</span>
<span class="source-line-no">7587</span><span id="line-7587">         needsEncode = URL_ENCODE_PATHINFO_VALIDCHARS.contains(s.charAt(i));</span>
<span class="source-line-no">7588</span><span id="line-7588">      if (! needsEncode)</span>
<span class="source-line-no">7589</span><span id="line-7589">         return s;</span>
<span class="source-line-no">7590</span><span id="line-7590"></span>
<span class="source-line-no">7591</span><span id="line-7591">      var sb = new StringBuilder();</span>
<span class="source-line-no">7592</span><span id="line-7592">      var caw = new CharArrayWriter();</span>
<span class="source-line-no">7593</span><span id="line-7593">      var caseDiff = ('a' - 'A');</span>
<span class="source-line-no">7594</span><span id="line-7594"></span>
<span class="source-line-no">7595</span><span id="line-7595">      for (var i = 0; i &lt; s.length();) {</span>
<span class="source-line-no">7596</span><span id="line-7596">         var c = s.charAt(i);</span>
<span class="source-line-no">7597</span><span id="line-7597">         if (URL_ENCODE_PATHINFO_VALIDCHARS.contains(c)) {</span>
<span class="source-line-no">7598</span><span id="line-7598">            sb.append(c);</span>
<span class="source-line-no">7599</span><span id="line-7599">            i++;  // NOSONAR - Intentional.</span>
<span class="source-line-no">7600</span><span id="line-7600">         } else {</span>
<span class="source-line-no">7601</span><span id="line-7601">            if (c == ' ') {</span>
<span class="source-line-no">7602</span><span id="line-7602">               sb.append('+');</span>
<span class="source-line-no">7603</span><span id="line-7603">               i++;  // NOSONAR - Intentional.</span>
<span class="source-line-no">7604</span><span id="line-7604">            } else {</span>
<span class="source-line-no">7605</span><span id="line-7605">               do {</span>
<span class="source-line-no">7606</span><span id="line-7606">                  caw.write(c);</span>
<span class="source-line-no">7607</span><span id="line-7607">                  if (c &gt;= 0xD800 &amp;&amp; c &lt;= 0xDBFF) {</span>
<span class="source-line-no">7608</span><span id="line-7608">                     if ((i + 1) &lt; s.length()) {  // NOSONAR - Intentional.</span>
<span class="source-line-no">7609</span><span id="line-7609">                        int d = s.charAt(i + 1);</span>
<span class="source-line-no">7610</span><span id="line-7610">                        if (d &gt;= 0xDC00 &amp;&amp; d &lt;= 0xDFFF) {</span>
<span class="source-line-no">7611</span><span id="line-7611">                           caw.write(d);</span>
<span class="source-line-no">7612</span><span id="line-7612">                           i++;  // NOSONAR - Intentional.</span>
<span class="source-line-no">7613</span><span id="line-7613">                        }</span>
<span class="source-line-no">7614</span><span id="line-7614">                     }</span>
<span class="source-line-no">7615</span><span id="line-7615">                  }</span>
<span class="source-line-no">7616</span><span id="line-7616">                  i++;  // NOSONAR - Intentional.</span>
<span class="source-line-no">7617</span><span id="line-7617">               } while (i &lt; s.length() &amp;&amp; ! URL_ENCODE_PATHINFO_VALIDCHARS.contains((c = s.charAt(i))));   // NOSONAR - Intentional.</span>
<span class="source-line-no">7618</span><span id="line-7618"></span>
<span class="source-line-no">7619</span><span id="line-7619">               caw.flush();</span>
<span class="source-line-no">7620</span><span id="line-7620">               var s2 = new String(caw.toCharArray());</span>
<span class="source-line-no">7621</span><span id="line-7621">               var ba = s2.getBytes(UTF8);</span>
<span class="source-line-no">7622</span><span id="line-7622">               for (var element : ba) {</span>
<span class="source-line-no">7623</span><span id="line-7623">                  sb.append('%');</span>
<span class="source-line-no">7624</span><span id="line-7624">                  var ch = forDigit((element &gt;&gt; 4) &amp; 0xF, 16);</span>
<span class="source-line-no">7625</span><span id="line-7625">                  if (isLetter(ch)) {</span>
<span class="source-line-no">7626</span><span id="line-7626">                     ch -= caseDiff;</span>
<span class="source-line-no">7627</span><span id="line-7627">                  }</span>
<span class="source-line-no">7628</span><span id="line-7628">                  sb.append(ch);</span>
<span class="source-line-no">7629</span><span id="line-7629">                  ch = forDigit(element &amp; 0xF, 16);</span>
<span class="source-line-no">7630</span><span id="line-7630">                  if (isLetter(ch)) {</span>
<span class="source-line-no">7631</span><span id="line-7631">                     ch -= caseDiff;</span>
<span class="source-line-no">7632</span><span id="line-7632">                  }</span>
<span class="source-line-no">7633</span><span id="line-7633">                  sb.append(ch);</span>
<span class="source-line-no">7634</span><span id="line-7634">               }</span>
<span class="source-line-no">7635</span><span id="line-7635">               caw.reset();</span>
<span class="source-line-no">7636</span><span id="line-7636">            }</span>
<span class="source-line-no">7637</span><span id="line-7637">         }</span>
<span class="source-line-no">7638</span><span id="line-7638">      }</span>
<span class="source-line-no">7639</span><span id="line-7639">      return sb.toString();</span>
<span class="source-line-no">7640</span><span id="line-7640">   }</span>
<span class="source-line-no">7641</span><span id="line-7641"></span>
<span class="source-line-no">7642</span><span id="line-7642">   /**</span>
<span class="source-line-no">7643</span><span id="line-7643">    * Counts the number of words in a string.</span>
<span class="source-line-no">7644</span><span id="line-7644">    *</span>
<span class="source-line-no">7645</span><span id="line-7645">    * &lt;p&gt;</span>
<span class="source-line-no">7646</span><span id="line-7646">    * A word is defined as a sequence of one or more word characters (letters, digits, underscores)</span>
<span class="source-line-no">7647</span><span id="line-7647">    * separated by non-word characters.</span>
<span class="source-line-no">7648</span><span id="line-7648">    *</span>
<span class="source-line-no">7649</span><span id="line-7649">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">7650</span><span id="line-7650">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">7651</span><span id="line-7651">    *    wordCount(&lt;js&gt;"Hello world"&lt;/js&gt;);              &lt;jc&gt;// 2&lt;/jc&gt;</span>
<span class="source-line-no">7652</span><span id="line-7652">    *    wordCount(&lt;js&gt;"The quick brown fox"&lt;/js&gt;);      &lt;jc&gt;// 4&lt;/jc&gt;</span>
<span class="source-line-no">7653</span><span id="line-7653">    *    wordCount(&lt;js&gt;"Hello, world! How are you?"&lt;/js&gt;); &lt;jc&gt;// 5&lt;/jc&gt;</span>
<span class="source-line-no">7654</span><span id="line-7654">    * &lt;/p&gt;</span>
<span class="source-line-no">7655</span><span id="line-7655">    *</span>
<span class="source-line-no">7656</span><span id="line-7656">    * @param str The string to count words in. Can be &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">7657</span><span id="line-7657">    * @return The number of words, or &lt;c&gt;0&lt;/c&gt; if the string is &lt;jk&gt;null&lt;/jk&gt; or empty.</span>
<span class="source-line-no">7658</span><span id="line-7658">    */</span>
<span class="source-line-no">7659</span><span id="line-7659">   public static int wordCount(String str) {</span>
<span class="source-line-no">7660</span><span id="line-7660">      if (isEmpty(str))</span>
<span class="source-line-no">7661</span><span id="line-7661">         return 0;</span>
<span class="source-line-no">7662</span><span id="line-7662"></span>
<span class="source-line-no">7663</span><span id="line-7663">      var count = 0;</span>
<span class="source-line-no">7664</span><span id="line-7664">      var inWord = false;</span>
<span class="source-line-no">7665</span><span id="line-7665"></span>
<span class="source-line-no">7666</span><span id="line-7666">      for (var i = 0; i &lt; str.length(); i++) {</span>
<span class="source-line-no">7667</span><span id="line-7667">         var c = str.charAt(i);</span>
<span class="source-line-no">7668</span><span id="line-7668">         if ((LETTER.contains(c) || DIGIT.contains(c)) || c == '_') {</span>
<span class="source-line-no">7669</span><span id="line-7669">            if (! inWord) {</span>
<span class="source-line-no">7670</span><span id="line-7670">               count++;</span>
<span class="source-line-no">7671</span><span id="line-7671">               inWord = true;</span>
<span class="source-line-no">7672</span><span id="line-7672">            }</span>
<span class="source-line-no">7673</span><span id="line-7673">         } else {</span>
<span class="source-line-no">7674</span><span id="line-7674">            inWord = false;</span>
<span class="source-line-no">7675</span><span id="line-7675">         }</span>
<span class="source-line-no">7676</span><span id="line-7676">      }</span>
<span class="source-line-no">7677</span><span id="line-7677"></span>
<span class="source-line-no">7678</span><span id="line-7678">      return count;</span>
<span class="source-line-no">7679</span><span id="line-7679">   }</span>
<span class="source-line-no">7680</span><span id="line-7680"></span>
<span class="source-line-no">7681</span><span id="line-7681">   /**</span>
<span class="source-line-no">7682</span><span id="line-7682">    * Wraps text to a specified line length.</span>
<span class="source-line-no">7683</span><span id="line-7683">    *</span>
<span class="source-line-no">7684</span><span id="line-7684">    * &lt;p&gt;</span>
<span class="source-line-no">7685</span><span id="line-7685">    * Wraps text by breaking at word boundaries (spaces). Words longer than the wrap length</span>
<span class="source-line-no">7686</span><span id="line-7686">    * will be broken at the wrap length. Existing newlines are preserved.</span>
<span class="source-line-no">7687</span><span id="line-7687">    *</span>
<span class="source-line-no">7688</span><span id="line-7688">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">7689</span><span id="line-7689">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">7690</span><span id="line-7690">    *    wrap(&lt;js&gt;"hello world test"&lt;/js&gt;, 10);  &lt;jc&gt;// "hello world\ntest"&lt;/jc&gt;</span>
<span class="source-line-no">7691</span><span id="line-7691">    *    wrap(&lt;jk&gt;null&lt;/jk&gt;, 10);                &lt;jc&gt;// null&lt;/jc&gt;</span>
<span class="source-line-no">7692</span><span id="line-7692">    * &lt;/p&gt;</span>
<span class="source-line-no">7693</span><span id="line-7693">    *</span>
<span class="source-line-no">7694</span><span id="line-7694">    * @param str The string to wrap.</span>
<span class="source-line-no">7695</span><span id="line-7695">    * @param wrapLength The maximum line length (must be &amp;gt; 0).</span>
<span class="source-line-no">7696</span><span id="line-7696">    * @return The wrapped string, or &lt;jk&gt;null&lt;/jk&gt; if input is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">7697</span><span id="line-7697">    * @throws IllegalArgumentException if wrapLength is &amp;lt;= 0.</span>
<span class="source-line-no">7698</span><span id="line-7698">    */</span>
<span class="source-line-no">7699</span><span id="line-7699">   public static String wrap(String str, int wrapLength) {</span>
<span class="source-line-no">7700</span><span id="line-7700">      return wrap(str, wrapLength, "\n");</span>
<span class="source-line-no">7701</span><span id="line-7701">   }</span>
<span class="source-line-no">7702</span><span id="line-7702"></span>
<span class="source-line-no">7703</span><span id="line-7703">   /**</span>
<span class="source-line-no">7704</span><span id="line-7704">    * Wraps text to a specified line length with a custom newline string.</span>
<span class="source-line-no">7705</span><span id="line-7705">    *</span>
<span class="source-line-no">7706</span><span id="line-7706">    * &lt;p&gt;</span>
<span class="source-line-no">7707</span><span id="line-7707">    * Wraps text by breaking at word boundaries (spaces). Words longer than the wrap length</span>
<span class="source-line-no">7708</span><span id="line-7708">    * will be broken at the wrap length. Existing newlines are preserved.</span>
<span class="source-line-no">7709</span><span id="line-7709">    *</span>
<span class="source-line-no">7710</span><span id="line-7710">    * &lt;h5 class='section'&gt;Example:&lt;/h5&gt;</span>
<span class="source-line-no">7711</span><span id="line-7711">    * &lt;p class='bjava'&gt;</span>
<span class="source-line-no">7712</span><span id="line-7712">    *    wrap(&lt;js&gt;"hello world test"&lt;/js&gt;, 10, &lt;js&gt;"&lt;br&gt;"&lt;/js&gt;);  &lt;jc&gt;// "hello world&lt;br&gt;test"&lt;/jc&gt;</span>
<span class="source-line-no">7713</span><span id="line-7713">    *    wrap(&lt;jk&gt;null&lt;/jk&gt;, 10, &lt;js&gt;"\n"&lt;/js&gt;);                  &lt;jc&gt;// null&lt;/jc&gt;</span>
<span class="source-line-no">7714</span><span id="line-7714">    * &lt;/p&gt;</span>
<span class="source-line-no">7715</span><span id="line-7715">    *</span>
<span class="source-line-no">7716</span><span id="line-7716">    * @param str The string to wrap.</span>
<span class="source-line-no">7717</span><span id="line-7717">    * @param wrapLength The maximum line length (must be &amp;gt; 0).</span>
<span class="source-line-no">7718</span><span id="line-7718">    * @param newline The string to use as line separator.</span>
<span class="source-line-no">7719</span><span id="line-7719">    * @return The wrapped string, or &lt;jk&gt;null&lt;/jk&gt; if input is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">7720</span><span id="line-7720">    * @throws IllegalArgumentException if wrapLength is &amp;lt;= 0 or newline is &lt;jk&gt;null&lt;/jk&gt;.</span>
<span class="source-line-no">7721</span><span id="line-7721">    */</span>
<span class="source-line-no">7722</span><span id="line-7722">   public static String wrap(String str, int wrapLength, String newline) {</span>
<span class="source-line-no">7723</span><span id="line-7723">      if (str == null)</span>
<span class="source-line-no">7724</span><span id="line-7724">         return null;</span>
<span class="source-line-no">7725</span><span id="line-7725">      if (isEmpty(str))</span>
<span class="source-line-no">7726</span><span id="line-7726">         return str;</span>
<span class="source-line-no">7727</span><span id="line-7727">      if (wrapLength &lt;= 0)</span>
<span class="source-line-no">7728</span><span id="line-7728">         throw illegalArg("wrapLength must be &gt; 0: {0}", wrapLength);</span>
<span class="source-line-no">7729</span><span id="line-7729">      if (newline == null)</span>
<span class="source-line-no">7730</span><span id="line-7730">         throw illegalArg("newline cannot be null");</span>
<span class="source-line-no">7731</span><span id="line-7731"></span>
<span class="source-line-no">7732</span><span id="line-7732">      var result = new StringBuilder();</span>
<span class="source-line-no">7733</span><span id="line-7733">      var lines = str.split("\r?\n", -1);  // Preserve empty lines</span>
<span class="source-line-no">7734</span><span id="line-7734"></span>
<span class="source-line-no">7735</span><span id="line-7735">      for (var lineIdx = 0; lineIdx &lt; lines.length; lineIdx++) {</span>
<span class="source-line-no">7736</span><span id="line-7736">         var line = lines[lineIdx];</span>
<span class="source-line-no">7737</span><span id="line-7737">         if (line.isEmpty()) {</span>
<span class="source-line-no">7738</span><span id="line-7738">            if (lineIdx &lt; lines.length - 1)</span>
<span class="source-line-no">7739</span><span id="line-7739">               result.append(newline);</span>
<span class="source-line-no">7740</span><span id="line-7740">            continue;</span>
<span class="source-line-no">7741</span><span id="line-7741">         }</span>
<span class="source-line-no">7742</span><span id="line-7742"></span>
<span class="source-line-no">7743</span><span id="line-7743">         // Split into words first, then combine words that fit</span>
<span class="source-line-no">7744</span><span id="line-7744">         var words = line.split(" +");  // Split on one or more spaces</span>
<span class="source-line-no">7745</span><span id="line-7745">         var currentLine = new StringBuilder();</span>
<span class="source-line-no">7746</span><span id="line-7746"></span>
<span class="source-line-no">7747</span><span id="line-7747">         for (var word : words) {</span>
<span class="source-line-no">7748</span><span id="line-7748">            if (word.isEmpty())</span>
<span class="source-line-no">7749</span><span id="line-7749">               continue;</span>
<span class="source-line-no">7750</span><span id="line-7750"></span>
<span class="source-line-no">7751</span><span id="line-7751">            var wordLength = word.length();</span>
<span class="source-line-no">7752</span><span id="line-7752">            var currentLength = currentLine.length();</span>
<span class="source-line-no">7753</span><span id="line-7753"></span>
<span class="source-line-no">7754</span><span id="line-7754">            if (currentLength == 0) {</span>
<span class="source-line-no">7755</span><span id="line-7755">               // First word on line</span>
<span class="source-line-no">7756</span><span id="line-7756">               // Only break single words if there are multiple words in the input</span>
<span class="source-line-no">7757</span><span id="line-7757">               // (single long words should not be broken for readability)</span>
<span class="source-line-no">7758</span><span id="line-7758">               if (wordLength &gt; wrapLength &amp;&amp; words.length &gt; 1) {</span>
<span class="source-line-no">7759</span><span id="line-7759">                  // Word is too long and there are other words, break it</span>
<span class="source-line-no">7760</span><span id="line-7760">                  if (result.length() &gt; 0)</span>
<span class="source-line-no">7761</span><span id="line-7761">                     result.append(newline);</span>
<span class="source-line-no">7762</span><span id="line-7762">                  var wordPos = 0;</span>
<span class="source-line-no">7763</span><span id="line-7763">                  while (wordPos &lt; wordLength) {</span>
<span class="source-line-no">7764</span><span id="line-7764">                     if (wordPos &gt; 0)</span>
<span class="source-line-no">7765</span><span id="line-7765">                        result.append(newline);</span>
<span class="source-line-no">7766</span><span id="line-7766">                     var remaining = wordLength - wordPos;</span>
<span class="source-line-no">7767</span><span id="line-7767">                     if (remaining &lt;= wrapLength) {</span>
<span class="source-line-no">7768</span><span id="line-7768">                        result.append(word.substring(wordPos));</span>
<span class="source-line-no">7769</span><span id="line-7769">                        break;</span>
<span class="source-line-no">7770</span><span id="line-7770">                     }</span>
<span class="source-line-no">7771</span><span id="line-7771">                     result.append(word.substring(wordPos, wordPos + wrapLength));</span>
<span class="source-line-no">7772</span><span id="line-7772">                     wordPos += wrapLength;</span>
<span class="source-line-no">7773</span><span id="line-7773">                  }</span>
<span class="source-line-no">7774</span><span id="line-7774">               } else {</span>
<span class="source-line-no">7775</span><span id="line-7775">                  currentLine.append(word);</span>
<span class="source-line-no">7776</span><span id="line-7776">               }</span>
<span class="source-line-no">7777</span><span id="line-7777">            } else {</span>
<span class="source-line-no">7778</span><span id="line-7778">               // Check if we can add this word to current line</span>
<span class="source-line-no">7779</span><span id="line-7779">               var neededLength = currentLength + 1 + wordLength;  // current + space + word</span>
<span class="source-line-no">7780</span><span id="line-7780">               // Break if it would fit exactly or exceed - prefer breaking for readability</span>
<span class="source-line-no">7781</span><span id="line-7781">               if (neededLength &lt; wrapLength) {</span>
<span class="source-line-no">7782</span><span id="line-7782">                  // Fits with room to spare</span>
<span class="source-line-no">7783</span><span id="line-7783">                  currentLine.append(' ').append(word);</span>
<span class="source-line-no">7784</span><span id="line-7784">               } else {</span>
<span class="source-line-no">7785</span><span id="line-7785">                  // Doesn't fit or fits exactly - start new line</span>
<span class="source-line-no">7786</span><span id="line-7786">                  if (result.length() &gt; 0)</span>
<span class="source-line-no">7787</span><span id="line-7787">                     result.append(newline);</span>
<span class="source-line-no">7788</span><span id="line-7788">                  result.append(currentLine);</span>
<span class="source-line-no">7789</span><span id="line-7789">                  currentLine.setLength(0);</span>
<span class="source-line-no">7790</span><span id="line-7790">                  if (wordLength &gt; wrapLength &amp;&amp; words.length &gt; 1) {</span>
<span class="source-line-no">7791</span><span id="line-7791">                     // Word is too long and there are other words, break it</span>
<span class="source-line-no">7792</span><span id="line-7792">                     result.append(newline);</span>
<span class="source-line-no">7793</span><span id="line-7793">                     var wordPos = 0;</span>
<span class="source-line-no">7794</span><span id="line-7794">                     while (wordPos &lt; wordLength) {</span>
<span class="source-line-no">7795</span><span id="line-7795">                        if (wordPos &gt; 0)</span>
<span class="source-line-no">7796</span><span id="line-7796">                           result.append(newline);</span>
<span class="source-line-no">7797</span><span id="line-7797">                        var remaining = wordLength - wordPos;</span>
<span class="source-line-no">7798</span><span id="line-7798">                        if (remaining &lt;= wrapLength) {</span>
<span class="source-line-no">7799</span><span id="line-7799">                           result.append(word.substring(wordPos));</span>
<span class="source-line-no">7800</span><span id="line-7800">                           break;</span>
<span class="source-line-no">7801</span><span id="line-7801">                        }</span>
<span class="source-line-no">7802</span><span id="line-7802">                        result.append(word.substring(wordPos, wordPos + wrapLength));</span>
<span class="source-line-no">7803</span><span id="line-7803">                        wordPos += wrapLength;</span>
<span class="source-line-no">7804</span><span id="line-7804">                     }</span>
<span class="source-line-no">7805</span><span id="line-7805">                  } else {</span>
<span class="source-line-no">7806</span><span id="line-7806">                     currentLine.append(word);</span>
<span class="source-line-no">7807</span><span id="line-7807">                  }</span>
<span class="source-line-no">7808</span><span id="line-7808">               }</span>
<span class="source-line-no">7809</span><span id="line-7809">            }</span>
<span class="source-line-no">7810</span><span id="line-7810">         }</span>
<span class="source-line-no">7811</span><span id="line-7811"></span>
<span class="source-line-no">7812</span><span id="line-7812">         // Append any remaining line</span>
<span class="source-line-no">7813</span><span id="line-7813">         if (currentLine.length() &gt; 0) {</span>
<span class="source-line-no">7814</span><span id="line-7814">            if (result.length() &gt; 0)</span>
<span class="source-line-no">7815</span><span id="line-7815">               result.append(newline);</span>
<span class="source-line-no">7816</span><span id="line-7816">            result.append(currentLine);</span>
<span class="source-line-no">7817</span><span id="line-7817">         }</span>
<span class="source-line-no">7818</span><span id="line-7818">      }</span>
<span class="source-line-no">7819</span><span id="line-7819"></span>
<span class="source-line-no">7820</span><span id="line-7820">      return result.toString();</span>
<span class="source-line-no">7821</span><span id="line-7821">   }</span>
<span class="source-line-no">7822</span><span id="line-7822"></span>
<span class="source-line-no">7823</span><span id="line-7823">   /**</span>
<span class="source-line-no">7824</span><span id="line-7824">    * Helper method to estimate the number of syllables in a word.</span>
<span class="source-line-no">7825</span><span id="line-7825">    */</span>
<span class="source-line-no">7826</span><span id="line-7826">   private static int estimateSyllables(String word) {</span>
<span class="source-line-no">7827</span><span id="line-7827"></span>
<span class="source-line-no">7828</span><span id="line-7828">      var lower = word.toLowerCase();</span>
<span class="source-line-no">7829</span><span id="line-7829">      var count = 0;</span>
<span class="source-line-no">7830</span><span id="line-7830">      var prevWasVowel = false;</span>
<span class="source-line-no">7831</span><span id="line-7831"></span>
<span class="source-line-no">7832</span><span id="line-7832">      for (var i = 0; i &lt; lower.length(); i++) {</span>
<span class="source-line-no">7833</span><span id="line-7833">         var c = lower.charAt(i);</span>
<span class="source-line-no">7834</span><span id="line-7834">         var isVowel = (VOWEL.contains(c) || c == 'y');</span>
<span class="source-line-no">7835</span><span id="line-7835"></span>
<span class="source-line-no">7836</span><span id="line-7836">         if (isVowel &amp;&amp; ! prevWasVowel) {</span>
<span class="source-line-no">7837</span><span id="line-7837">            count++;</span>
<span class="source-line-no">7838</span><span id="line-7838">         }</span>
<span class="source-line-no">7839</span><span id="line-7839">         prevWasVowel = isVowel;</span>
<span class="source-line-no">7840</span><span id="line-7840">      }</span>
<span class="source-line-no">7841</span><span id="line-7841"></span>
<span class="source-line-no">7842</span><span id="line-7842">      // Handle silent 'e' at the end</span>
<span class="source-line-no">7843</span><span id="line-7843">      if (lower.endsWith("e") &amp;&amp; count &gt; 1) {</span>
<span class="source-line-no">7844</span><span id="line-7844">         count--;</span>
<span class="source-line-no">7845</span><span id="line-7845">      }</span>
<span class="source-line-no">7846</span><span id="line-7846"></span>
<span class="source-line-no">7847</span><span id="line-7847">      // At least one syllable</span>
<span class="source-line-no">7848</span><span id="line-7848">      return Math.max(1, count);</span>
<span class="source-line-no">7849</span><span id="line-7849">   }</span>
<span class="source-line-no">7850</span><span id="line-7850"></span>
<span class="source-line-no">7851</span><span id="line-7851">   /**</span>
<span class="source-line-no">7852</span><span id="line-7852">    * Finds the first non-whitespace, non-comment character in a string.</span>
<span class="source-line-no">7853</span><span id="line-7853">    *</span>
<span class="source-line-no">7854</span><span id="line-7854">    * @param s The string to analyze.</span>
<span class="source-line-no">7855</span><span id="line-7855">    * @return The first real character, or &lt;c&gt;-1&lt;/c&gt; if none found.</span>
<span class="source-line-no">7856</span><span id="line-7856">    */</span>
<span class="source-line-no">7857</span><span id="line-7857">   private static int firstRealCharacter(String s) {</span>
<span class="source-line-no">7858</span><span id="line-7858">      return safe(()-&gt; {</span>
<span class="source-line-no">7859</span><span id="line-7859">         var r = new StringReader(s);</span>
<span class="source-line-no">7860</span><span id="line-7860">         var c = 0;</span>
<span class="source-line-no">7861</span><span id="line-7861">         while ((c = r.read()) != -1) {</span>
<span class="source-line-no">7862</span><span id="line-7862">            if (! isWhitespace(c)) {</span>
<span class="source-line-no">7863</span><span id="line-7863">               if (c == '/') {</span>
<span class="source-line-no">7864</span><span id="line-7864">                  skipComments(r);</span>
<span class="source-line-no">7865</span><span id="line-7865">               } else {</span>
<span class="source-line-no">7866</span><span id="line-7866">                  return c;</span>
<span class="source-line-no">7867</span><span id="line-7867">               }</span>
<span class="source-line-no">7868</span><span id="line-7868">            }</span>
<span class="source-line-no">7869</span><span id="line-7869">         }</span>
<span class="source-line-no">7870</span><span id="line-7870">         return -1;</span>
<span class="source-line-no">7871</span><span id="line-7871">      });</span>
<span class="source-line-no">7872</span><span id="line-7872">   }</span>
<span class="source-line-no">7873</span><span id="line-7873"></span>
<span class="source-line-no">7874</span><span id="line-7874">   /**</span>
<span class="source-line-no">7875</span><span id="line-7875">    * Helper method to get Soundex code for a character.</span>
<span class="source-line-no">7876</span><span id="line-7876">    */</span>
<span class="source-line-no">7877</span><span id="line-7877">   private static char getSoundexCode(char c) {</span>
<span class="source-line-no">7878</span><span id="line-7878">      if (c == 'A' || c == 'E' || c == 'I' || c == 'O' || c == 'U' || c == 'H' || c == 'W' || c == 'Y')</span>
<span class="source-line-no">7879</span><span id="line-7879">         return '0';</span>
<span class="source-line-no">7880</span><span id="line-7880">      if (c == 'B' || c == 'F' || c == 'P' || c == 'V')</span>
<span class="source-line-no">7881</span><span id="line-7881">         return '1';</span>
<span class="source-line-no">7882</span><span id="line-7882">      if (c == 'C' || c == 'G' || c == 'J' || c == 'K' || c == 'Q' || c == 'S' || c == 'X' || c == 'Z')</span>
<span class="source-line-no">7883</span><span id="line-7883">         return '2';</span>
<span class="source-line-no">7884</span><span id="line-7884">      if (c == 'D' || c == 'T')</span>
<span class="source-line-no">7885</span><span id="line-7885">         return '3';</span>
<span class="source-line-no">7886</span><span id="line-7886">      if (c == 'L')</span>
<span class="source-line-no">7887</span><span id="line-7887">         return '4';</span>
<span class="source-line-no">7888</span><span id="line-7888">      if (c == 'M' || c == 'N')</span>
<span class="source-line-no">7889</span><span id="line-7889">         return '5';</span>
<span class="source-line-no">7890</span><span id="line-7890">      if (c == 'R')</span>
<span class="source-line-no">7891</span><span id="line-7891">         return '6';</span>
<span class="source-line-no">7892</span><span id="line-7892">      return '0'; // Non-letter characters</span>
<span class="source-line-no">7893</span><span id="line-7893">   }</span>
<span class="source-line-no">7894</span><span id="line-7894"></span>
<span class="source-line-no">7895</span><span id="line-7895">   /**</span>
<span class="source-line-no">7896</span><span id="line-7896">    * Validates if a string is a valid IPv6 address format (without network operations).</span>
<span class="source-line-no">7897</span><span id="line-7897">    *</span>
<span class="source-line-no">7898</span><span id="line-7898">    * &lt;p&gt;</span>
<span class="source-line-no">7899</span><span id="line-7899">    * This method performs pure string-based validation and does not perform any DNS lookups</span>
<span class="source-line-no">7900</span><span id="line-7900">    * or network operations, making it fast and suitable for validation purposes.</span>
<span class="source-line-no">7901</span><span id="line-7901">    *</span>
<span class="source-line-no">7902</span><span id="line-7902">    * @param ip The IPv6 address string to validate.</span>
<span class="source-line-no">7903</span><span id="line-7903">    * @return &lt;jk&gt;true&lt;/jk&gt; if the string is a valid IPv6 address format, &lt;jk&gt;false&lt;/jk&gt; otherwise.</span>
<span class="source-line-no">7904</span><span id="line-7904">    */</span>
<span class="source-line-no">7905</span><span id="line-7905">   public static boolean isValidIPv6Address(String ip) {</span>
<span class="source-line-no">7906</span><span id="line-7906">      if (ip == null || ip.isEmpty())</span>
<span class="source-line-no">7907</span><span id="line-7907">         return false;</span>
<span class="source-line-no">7908</span><span id="line-7908"></span>
<span class="source-line-no">7909</span><span id="line-7909">      // IPv6 addresses can be:</span>
<span class="source-line-no">7910</span><span id="line-7910">      // 1. Full format: 2001:0db8:85a3:0000:0000:8a2e:0370:7334 (8 groups of 4 hex digits)</span>
<span class="source-line-no">7911</span><span id="line-7911">      // 2. Compressed format: 2001:db8::1 (uses :: to represent consecutive zeros)</span>
<span class="source-line-no">7912</span><span id="line-7912">      // 3. IPv4-mapped: ::ffff:192.168.1.1 (last 32 bits as IPv4)</span>
<span class="source-line-no">7913</span><span id="line-7913">      // 4. Loopback: ::1</span>
<span class="source-line-no">7914</span><span id="line-7914">      // 5. Unspecified: ::</span>
<span class="source-line-no">7915</span><span id="line-7915"></span>
<span class="source-line-no">7916</span><span id="line-7916">      // Cannot start or end with a single colon (except ::)</span>
<span class="source-line-no">7917</span><span id="line-7917">      if (ip.startsWith(":") &amp;&amp; !ip.startsWith("::"))</span>
<span class="source-line-no">7918</span><span id="line-7918">         return false;</span>
<span class="source-line-no">7919</span><span id="line-7919">      if (ip.endsWith(":") &amp;&amp; !ip.endsWith("::"))</span>
<span class="source-line-no">7920</span><span id="line-7920">         return false;</span>
<span class="source-line-no">7921</span><span id="line-7921"></span>
<span class="source-line-no">7922</span><span id="line-7922">      // Check for IPv4-mapped format (contains both : and .)</span>
<span class="source-line-no">7923</span><span id="line-7923">      if (ip.contains(".")) {</span>
<span class="source-line-no">7924</span><span id="line-7924">         // Must be in format ::ffff:x.x.x.x or similar</span>
<span class="source-line-no">7925</span><span id="line-7925">         var lastColon = ip.lastIndexOf(":");</span>
<span class="source-line-no">7926</span><span id="line-7926">         if (lastColon &lt; 0)</span>
<span class="source-line-no">7927</span><span id="line-7927">            return false;</span>
<span class="source-line-no">7928</span><span id="line-7928">         var ipv4Part = ip.substring(lastColon + 1);</span>
<span class="source-line-no">7929</span><span id="line-7929">         // Validate IPv4 part</span>
<span class="source-line-no">7930</span><span id="line-7930">         var ipv4Parts = ipv4Part.split("\\.");</span>
<span class="source-line-no">7931</span><span id="line-7931">         if (ipv4Parts.length != 4)</span>
<span class="source-line-no">7932</span><span id="line-7932">            return false;</span>
<span class="source-line-no">7933</span><span id="line-7933">         for (var part : ipv4Parts) {</span>
<span class="source-line-no">7934</span><span id="line-7934">            try {</span>
<span class="source-line-no">7935</span><span id="line-7935">               var num = Integer.parseInt(part);</span>
<span class="source-line-no">7936</span><span id="line-7936">               if (num &lt; 0 || num &gt; 255)</span>
<span class="source-line-no">7937</span><span id="line-7937">                  return false;</span>
<span class="source-line-no">7938</span><span id="line-7938">            } catch (@SuppressWarnings("unused") NumberFormatException e) {</span>
<span class="source-line-no">7939</span><span id="line-7939">               return false;</span>
<span class="source-line-no">7940</span><span id="line-7940">            }</span>
<span class="source-line-no">7941</span><span id="line-7941">         }</span>
<span class="source-line-no">7942</span><span id="line-7942">         // Validate IPv6 part before the IPv4</span>
<span class="source-line-no">7943</span><span id="line-7943">         var ipv6Part = ip.substring(0, lastColon);</span>
<span class="source-line-no">7944</span><span id="line-7944">         // Accept empty, ::, ::ffff, ::FFFF, or : (when string starts with ::)</span>
<span class="source-line-no">7945</span><span id="line-7945">         if (ipv6Part.isEmpty() || ipv6Part.equals("::") || ipv6Part.equals("::ffff") || ipv6Part.equals("::FFFF") || (ipv6Part.equals(":") &amp;&amp; ip.startsWith("::")))</span>
<span class="source-line-no">7946</span><span id="line-7946">            return true;</span>
<span class="source-line-no">7947</span><span id="line-7947">         // More complex validation would be needed for other IPv4-mapped formats</span>
<span class="source-line-no">7948</span><span id="line-7948">         // For now, accept common formats</span>
<span class="source-line-no">7949</span><span id="line-7949">      }</span>
<span class="source-line-no">7950</span><span id="line-7950"></span>
<span class="source-line-no">7951</span><span id="line-7951">      // Check for :: (compression) - only one allowed</span>
<span class="source-line-no">7952</span><span id="line-7952">      var doubleColonCount = 0;</span>
<span class="source-line-no">7953</span><span id="line-7953">      for (var i = 1; i &lt; ip.length(); i++) {</span>
<span class="source-line-no">7954</span><span id="line-7954">         if (ip.charAt(i) == ':' &amp;&amp; ip.charAt(i - 1) == ':') {</span>
<span class="source-line-no">7955</span><span id="line-7955">            doubleColonCount++;</span>
<span class="source-line-no">7956</span><span id="line-7956">            if (doubleColonCount &gt; 1)</span>
<span class="source-line-no">7957</span><span id="line-7957">               return false; // Only one :: allowed</span>
<span class="source-line-no">7958</span><span id="line-7958">         }</span>
<span class="source-line-no">7959</span><span id="line-7959">      }</span>
<span class="source-line-no">7960</span><span id="line-7960"></span>
<span class="source-line-no">7961</span><span id="line-7961">      // Split by ::</span>
<span class="source-line-no">7962</span><span id="line-7962">      var parts = ip.split("::", -1);</span>
<span class="source-line-no">7963</span><span id="line-7963"></span>
<span class="source-line-no">7964</span><span id="line-7964">      if (parts.length == 2) {</span>
<span class="source-line-no">7965</span><span id="line-7965">         // Compressed format</span>
<span class="source-line-no">7966</span><span id="line-7966">         var leftParts = parts[0].isEmpty() ? new String[0] : parts[0].split(":");</span>
<span class="source-line-no">7967</span><span id="line-7967">         var rightParts = parts[1].isEmpty() ? new String[0] : parts[1].split(":");</span>
<span class="source-line-no">7968</span><span id="line-7968">         var totalParts = leftParts.length + rightParts.length;</span>
<span class="source-line-no">7969</span><span id="line-7969">         if (totalParts &gt; 7)</span>
<span class="source-line-no">7970</span><span id="line-7970">            return false; // Too many groups (max 8, but :: counts as one or more)</span>
<span class="source-line-no">7971</span><span id="line-7971">      } else {</span>
<span class="source-line-no">7972</span><span id="line-7972">         // Full format (no compression)</span>
<span class="source-line-no">7973</span><span id="line-7973">         var groups = ip.split(":");</span>
<span class="source-line-no">7974</span><span id="line-7974">         if (groups.length != 8)</span>
<span class="source-line-no">7975</span><span id="line-7975">            return false;</span>
<span class="source-line-no">7976</span><span id="line-7976">      }</span>
<span class="source-line-no">7977</span><span id="line-7977"></span>
<span class="source-line-no">7978</span><span id="line-7978">      // Validate each hex group</span>
<span class="source-line-no">7979</span><span id="line-7979">      var groups = ip.split("::");</span>
<span class="source-line-no">7980</span><span id="line-7980">      for (var groupSection : groups) {</span>
<span class="source-line-no">7981</span><span id="line-7981">         if (groupSection.isEmpty())</span>
<span class="source-line-no">7982</span><span id="line-7982">            continue; // Skip empty section from ::</span>
<span class="source-line-no">7983</span><span id="line-7983">         var groupParts = groupSection.split(":");</span>
<span class="source-line-no">7984</span><span id="line-7984">         for (var group : groupParts) {</span>
<span class="source-line-no">7985</span><span id="line-7985">            if (group.length() &gt; 4)</span>
<span class="source-line-no">7986</span><span id="line-7986">               return false; // Each group is max 4 hex digits</span>
<span class="source-line-no">7987</span><span id="line-7987">            // Validate hex digits</span>
<span class="source-line-no">7988</span><span id="line-7988">            for (var i = 0; i &lt; group.length(); i++) {</span>
<span class="source-line-no">7989</span><span id="line-7989">               var c = group.charAt(i);</span>
<span class="source-line-no">7990</span><span id="line-7990">               if (! HEXADECIMAL_CHARS.contains(c))</span>
<span class="source-line-no">7991</span><span id="line-7991">                  return false;</span>
<span class="source-line-no">7992</span><span id="line-7992">            }</span>
<span class="source-line-no">7993</span><span id="line-7993">         }</span>
<span class="source-line-no">7994</span><span id="line-7994">      }</span>
<span class="source-line-no">7995</span><span id="line-7995"></span>
<span class="source-line-no">7996</span><span id="line-7996">      return true;</span>
<span class="source-line-no">7997</span><span id="line-7997">   }</span>
<span class="source-line-no">7998</span><span id="line-7998"></span>
<span class="source-line-no">7999</span><span id="line-7999"></span>
<span class="source-line-no">8000</span><span id="line-8000">   private static class Readifier {</span>
<span class="source-line-no">8001</span><span id="line-8001">      private final Class&lt;?&gt; type;</span>
<span class="source-line-no">8002</span><span id="line-8002">      private final Function&lt;Object,String&gt; bridge;</span>
<span class="source-line-no">8003</span><span id="line-8003"></span>
<span class="source-line-no">8004</span><span id="line-8004">      private &lt;T&gt; Readifier(Class&lt;T&gt; type, Function&lt;? super T,String&gt; converter) {</span>
<span class="source-line-no">8005</span><span id="line-8005">         this.type = type;</span>
<span class="source-line-no">8006</span><span id="line-8006">         this.bridge = o -&gt; converter.apply(type.cast(o));</span>
<span class="source-line-no">8007</span><span id="line-8007">      }</span>
<span class="source-line-no">8008</span><span id="line-8008"></span>
<span class="source-line-no">8009</span><span id="line-8009">      Class&lt;?&gt; forClass() {</span>
<span class="source-line-no">8010</span><span id="line-8010">         return type;</span>
<span class="source-line-no">8011</span><span id="line-8011">      }</span>
<span class="source-line-no">8012</span><span id="line-8012"></span>
<span class="source-line-no">8013</span><span id="line-8013">      Function&lt;Object,String&gt; toFunction() {</span>
<span class="source-line-no">8014</span><span id="line-8014">         return bridge;</span>
<span class="source-line-no">8015</span><span id="line-8015">      }</span>
<span class="source-line-no">8016</span><span id="line-8016">   }</span>
<span class="source-line-no">8017</span><span id="line-8017"></span>
<span class="source-line-no">8018</span><span id="line-8018">   private static &lt;T&gt; Readifier readifier(Class&lt;T&gt; type, Function&lt;? super T,String&gt; converter) {</span>
<span class="source-line-no">8019</span><span id="line-8019">      return new Readifier(type, converter);</span>
<span class="source-line-no">8020</span><span id="line-8020">   }</span>
<span class="source-line-no">8021</span><span id="line-8021"></span>
<span class="source-line-no">8022</span><span id="line-8022">   private static List&lt;Readifier&gt; loadReadifiers() {</span>
<span class="source-line-no">8023</span><span id="line-8023">      var list = new ArrayList&lt;Readifier&gt;();</span>
<span class="source-line-no">8024</span><span id="line-8024"></span>
<span class="source-line-no">8025</span><span id="line-8025">      // More specific types first - order matters!</span>
<span class="source-line-no">8026</span><span id="line-8026">      list.add(readifier(Map.Entry.class, x -&gt; readable(x.getKey()) + '=' + readable(x.getValue())));</span>
<span class="source-line-no">8027</span><span id="line-8027">      list.add(readifier(Collection.class, x -&gt; ((Collection&lt;?&gt;)x).stream().map(StringUtils::readable).collect(joining(",", "[", "]"))));</span>
<span class="source-line-no">8028</span><span id="line-8028">      list.add(readifier(Map.class, x -&gt; ((Map&lt;?,?&gt;)x).entrySet().stream().map(StringUtils::readable).collect(joining(",", "{", "}"))));</span>
<span class="source-line-no">8029</span><span id="line-8029">      list.add(readifier(Iterable.class, x -&gt; readable(toList(x))));</span>
<span class="source-line-no">8030</span><span id="line-8030">      list.add(readifier(Iterator.class, x -&gt; readable(toList(x))));</span>
<span class="source-line-no">8031</span><span id="line-8031">      list.add(readifier(Enumeration.class, x -&gt; readable(toList(x))));</span>
<span class="source-line-no">8032</span><span id="line-8032">      list.add(readifier(Optional.class, x -&gt; readable(((Optional&lt;?&gt;)x).orElse(null))));</span>
<span class="source-line-no">8033</span><span id="line-8033">      list.add(readifier(GregorianCalendar.class, x -&gt; x.toZonedDateTime().format(DateTimeFormatter.ISO_INSTANT)));</span>
<span class="source-line-no">8034</span><span id="line-8034">      list.add(readifier(Date.class, x -&gt; x.toInstant().toString()));</span>
<span class="source-line-no">8035</span><span id="line-8035">      list.add(readifier(InputStream.class, x -&gt; toHex(x)));</span>
<span class="source-line-no">8036</span><span id="line-8036">      list.add(readifier(Reader.class, (Reader x) -&gt; safe(() -&gt; read(x))));</span>
<span class="source-line-no">8037</span><span id="line-8037">      list.add(readifier(File.class, (File x) -&gt; safe(() -&gt; read(x))));</span>
<span class="source-line-no">8038</span><span id="line-8038">      list.add(readifier(byte[].class, x -&gt; toHex(x)));</span>
<span class="source-line-no">8039</span><span id="line-8039">      list.add(readifier(Enum.class, x -&gt; ((Enum&lt;?&gt;)x).name()));</span>
<span class="source-line-no">8040</span><span id="line-8040">      list.add(readifier(Class.class, x -&gt; cns(x)));</span>
<span class="source-line-no">8041</span><span id="line-8041">      list.add(readifier(Constructor.class, x -&gt; ConstructorInfo.of(x).getFullName()));</span>
<span class="source-line-no">8042</span><span id="line-8042">      list.add(readifier(Method.class, x -&gt; MethodInfo.of(x).getFullName()));</span>
<span class="source-line-no">8043</span><span id="line-8043">      list.add(readifier(Field.class, x -&gt; FieldInfo.of(x).toString()));</span>
<span class="source-line-no">8044</span><span id="line-8044">      list.add(readifier(Parameter.class, x -&gt; ParameterInfo.of(x).toString()));</span>
<span class="source-line-no">8045</span><span id="line-8045">      list.add(readifier(ClassInfo.class, ClassInfo::toString));</span>
<span class="source-line-no">8046</span><span id="line-8046">      list.add(readifier(MethodInfo.class, MethodInfo::toString));</span>
<span class="source-line-no">8047</span><span id="line-8047">      list.add(readifier(ConstructorInfo.class, ConstructorInfo::toString));</span>
<span class="source-line-no">8048</span><span id="line-8048">      list.add(readifier(FieldInfo.class, FieldInfo::toString));</span>
<span class="source-line-no">8049</span><span id="line-8049">      list.add(readifier(ParameterInfo.class, ParameterInfo::toString));</span>
<span class="source-line-no">8050</span><span id="line-8050"></span>
<span class="source-line-no">8051</span><span id="line-8051">      return Collections.unmodifiableList(list);</span>
<span class="source-line-no">8052</span><span id="line-8052">   }</span>
<span class="source-line-no">8053</span><span id="line-8053"></span>
<span class="source-line-no">8054</span><span id="line-8054">   /**</span>
<span class="source-line-no">8055</span><span id="line-8055">    * Determines the multiplier value based on the suffix character in a string.</span>
<span class="source-line-no">8056</span><span id="line-8056">    *</span>
<span class="source-line-no">8057</span><span id="line-8057">    * @param s The string to analyze for multiplier suffix.</span>
<span class="source-line-no">8058</span><span id="line-8058">    * @return The multiplier value (1 if no valid suffix found).</span>
<span class="source-line-no">8059</span><span id="line-8059">    */</span>
<span class="source-line-no">8060</span><span id="line-8060">   private static int multiplierInt(String s) {</span>
<span class="source-line-no">8061</span><span id="line-8061">      var c = isEmpty(s) ? 'z' : s.charAt(s.length() - 1);</span>
<span class="source-line-no">8062</span><span id="line-8062">      if (c == 'G')</span>
<span class="source-line-no">8063</span><span id="line-8063">         return 1024 * 1024 * 1024;</span>
<span class="source-line-no">8064</span><span id="line-8064">      if (c == 'M')</span>
<span class="source-line-no">8065</span><span id="line-8065">         return 1024 * 1024;</span>
<span class="source-line-no">8066</span><span id="line-8066">      if (c == 'K')</span>
<span class="source-line-no">8067</span><span id="line-8067">         return 1024;</span>
<span class="source-line-no">8068</span><span id="line-8068">      if (c == 'g')</span>
<span class="source-line-no">8069</span><span id="line-8069">         return 1000 * 1000 * 1000;</span>
<span class="source-line-no">8070</span><span id="line-8070">      if (c == 'm')</span>
<span class="source-line-no">8071</span><span id="line-8071">         return 1000 * 1000;</span>
<span class="source-line-no">8072</span><span id="line-8072">      if (c == 'k')</span>
<span class="source-line-no">8073</span><span id="line-8073">         return 1000;</span>
<span class="source-line-no">8074</span><span id="line-8074">      return 1;</span>
<span class="source-line-no">8075</span><span id="line-8075">   }</span>
<span class="source-line-no">8076</span><span id="line-8076"></span>
<span class="source-line-no">8077</span><span id="line-8077">   /**</span>
<span class="source-line-no">8078</span><span id="line-8078">    * Determines the long multiplier value based on the suffix character in a string.</span>
<span class="source-line-no">8079</span><span id="line-8079">    *</span>
<span class="source-line-no">8080</span><span id="line-8080">    * @param s The string to analyze for multiplier suffix.</span>
<span class="source-line-no">8081</span><span id="line-8081">    * @return The multiplier value (1 if no valid suffix found).</span>
<span class="source-line-no">8082</span><span id="line-8082">    */</span>
<span class="source-line-no">8083</span><span id="line-8083">   private static long multiplierLong(String s) {</span>
<span class="source-line-no">8084</span><span id="line-8084">      if (isEmpty(s))</span>
<span class="source-line-no">8085</span><span id="line-8085">         return 1;</span>
<span class="source-line-no">8086</span><span id="line-8086">      var c = s.charAt(s.length() - 1);</span>
<span class="source-line-no">8087</span><span id="line-8087">      if (c == 'P')</span>
<span class="source-line-no">8088</span><span id="line-8088">         return 1125899906842624L;  // 1024^5</span>
<span class="source-line-no">8089</span><span id="line-8089">      if (c == 'T')</span>
<span class="source-line-no">8090</span><span id="line-8090">         return 1099511627776L;  // 1024^4</span>
<span class="source-line-no">8091</span><span id="line-8091">      if (c == 'G')</span>
<span class="source-line-no">8092</span><span id="line-8092">         return 1073741824L;  // 1024^3</span>
<span class="source-line-no">8093</span><span id="line-8093">      if (c == 'M')</span>
<span class="source-line-no">8094</span><span id="line-8094">         return 1048576L;  // 1024^2</span>
<span class="source-line-no">8095</span><span id="line-8095">      if (c == 'K')</span>
<span class="source-line-no">8096</span><span id="line-8096">         return 1024L;</span>
<span class="source-line-no">8097</span><span id="line-8097">      if (c == 'p')</span>
<span class="source-line-no">8098</span><span id="line-8098">         return 1000000000000000L;  // 1000^5</span>
<span class="source-line-no">8099</span><span id="line-8099">      if (c == 't')</span>
<span class="source-line-no">8100</span><span id="line-8100">         return 1000000000000L;  // 1000^4</span>
<span class="source-line-no">8101</span><span id="line-8101">      if (c == 'g')</span>
<span class="source-line-no">8102</span><span id="line-8102">         return 1000000000L;  // 1000^3</span>
<span class="source-line-no">8103</span><span id="line-8103">      if (c == 'm')</span>
<span class="source-line-no">8104</span><span id="line-8104">         return 1000000L;  // 1000^2</span>
<span class="source-line-no">8105</span><span id="line-8105">      if (c == 'k')</span>
<span class="source-line-no">8106</span><span id="line-8106">         return 1000L;</span>
<span class="source-line-no">8107</span><span id="line-8107">      return 1;</span>
<span class="source-line-no">8108</span><span id="line-8108">   }</span>
<span class="source-line-no">8109</span><span id="line-8109"></span>
<span class="source-line-no">8110</span><span id="line-8110">   /**</span>
<span class="source-line-no">8111</span><span id="line-8111">    * Parses a unit string and converts the value to milliseconds.</span>
<span class="source-line-no">8112</span><span id="line-8112">    *</span>
<span class="source-line-no">8113</span><span id="line-8113">    * @param unit The unit string (case-insensitive, already lowercased).</span>
<span class="source-line-no">8114</span><span id="line-8114">    * @param value The numeric value.</span>
<span class="source-line-no">8115</span><span id="line-8115">    * @return The value in milliseconds, or &lt;c&gt;-1&lt;/c&gt; if the unit is invalid.</span>
<span class="source-line-no">8116</span><span id="line-8116">    */</span>
<span class="source-line-no">8117</span><span id="line-8117">   private static long parseUnit(String unit, double value) {</span>
<span class="source-line-no">8118</span><span id="line-8118">      if (isEmpty(unit)) {</span>
<span class="source-line-no">8119</span><span id="line-8119">         // No unit means milliseconds</span>
<span class="source-line-no">8120</span><span id="line-8120">         return (long)value;</span>
<span class="source-line-no">8121</span><span id="line-8121">      }</span>
<span class="source-line-no">8122</span><span id="line-8122"></span>
<span class="source-line-no">8123</span><span id="line-8123">      // Check milliseconds first (before minutes) - must check exact "ms" before checking "m"</span>
<span class="source-line-no">8124</span><span id="line-8124">      if (unit.equals("ms") || unit.equals("millis") || unit.equals("milliseconds"))</span>
<span class="source-line-no">8125</span><span id="line-8125">         return (long)value;</span>
<span class="source-line-no">8126</span><span id="line-8126"></span>
<span class="source-line-no">8127</span><span id="line-8127">      // Seconds</span>
<span class="source-line-no">8128</span><span id="line-8128">      if (unit.startsWith("s") &amp;&amp; !unit.startsWith("sec"))</span>
<span class="source-line-no">8129</span><span id="line-8129">         return (long)(value * 1000);</span>
<span class="source-line-no">8130</span><span id="line-8130">      if (unit.startsWith("sec") || unit.startsWith("second"))</span>
<span class="source-line-no">8131</span><span id="line-8131">         return (long)(value * 1000);</span>
<span class="source-line-no">8132</span><span id="line-8132"></span>
<span class="source-line-no">8133</span><span id="line-8133">      // Minutes (must check after milliseconds and months)</span>
<span class="source-line-no">8134</span><span id="line-8134">      if (unit.startsWith("m") &amp;&amp; !unit.startsWith("mo") &amp;&amp; !unit.startsWith("mill") &amp;&amp; !unit.startsWith("ms"))</span>
<span class="source-line-no">8135</span><span id="line-8135">         return (long)(value * 1000 * 60);</span>
<span class="source-line-no">8136</span><span id="line-8136">      if (unit.startsWith("min") || unit.startsWith("minute"))</span>
<span class="source-line-no">8137</span><span id="line-8137">         return (long)(value * 1000 * 60);</span>
<span class="source-line-no">8138</span><span id="line-8138"></span>
<span class="source-line-no">8139</span><span id="line-8139">      // Hours</span>
<span class="source-line-no">8140</span><span id="line-8140">      if (unit.startsWith("h") || unit.startsWith("hour"))</span>
<span class="source-line-no">8141</span><span id="line-8141">         return (long)(value * 1000 * 60 * 60);</span>
<span class="source-line-no">8142</span><span id="line-8142"></span>
<span class="source-line-no">8143</span><span id="line-8143">      // Days</span>
<span class="source-line-no">8144</span><span id="line-8144">      if (unit.startsWith("d") &amp;&amp; !unit.startsWith("da"))</span>
<span class="source-line-no">8145</span><span id="line-8145">         return (long)(value * 1000 * 60 * 60 * 24);</span>
<span class="source-line-no">8146</span><span id="line-8146">      if (unit.startsWith("day"))</span>
<span class="source-line-no">8147</span><span id="line-8147">         return (long)(value * 1000 * 60 * 60 * 24);</span>
<span class="source-line-no">8148</span><span id="line-8148"></span>
<span class="source-line-no">8149</span><span id="line-8149">      // Weeks</span>
<span class="source-line-no">8150</span><span id="line-8150">      if (unit.startsWith("w") || unit.startsWith("week"))</span>
<span class="source-line-no">8151</span><span id="line-8151">         return (long)(value * 1000 * 60 * 60 * 24 * 7);</span>
<span class="source-line-no">8152</span><span id="line-8152"></span>
<span class="source-line-no">8153</span><span id="line-8153">      // Months (30 days)</span>
<span class="source-line-no">8154</span><span id="line-8154">      if (unit.startsWith("mo") || unit.startsWith("month"))</span>
<span class="source-line-no">8155</span><span id="line-8155">         return (long)(value * 1000 * 60 * 60 * 24 * 30);</span>
<span class="source-line-no">8156</span><span id="line-8156"></span>
<span class="source-line-no">8157</span><span id="line-8157">      // Years (365 days)</span>
<span class="source-line-no">8158</span><span id="line-8158">      if (unit.startsWith("y") &amp;&amp; !unit.startsWith("yr"))</span>
<span class="source-line-no">8159</span><span id="line-8159">         return (long)(value * 1000 * 60 * 60 * 24 * 365);</span>
<span class="source-line-no">8160</span><span id="line-8160">      if (unit.startsWith("yr") || unit.startsWith("year"))</span>
<span class="source-line-no">8161</span><span id="line-8161">         return (long)(value * 1000 * 60 * 60 * 24 * 365);</span>
<span class="source-line-no">8162</span><span id="line-8162"></span>
<span class="source-line-no">8163</span><span id="line-8163">      // Unknown unit</span>
<span class="source-line-no">8164</span><span id="line-8164">      return -1;</span>
<span class="source-line-no">8165</span><span id="line-8165">   }</span>
<span class="source-line-no">8166</span><span id="line-8166"></span>
<span class="source-line-no">8167</span><span id="line-8167">   /**</span>
<span class="source-line-no">8168</span><span id="line-8168">    * Skips over a single comment sequence in a StringReader.</span>
<span class="source-line-no">8169</span><span id="line-8169">    *</span>
<span class="source-line-no">8170</span><span id="line-8170">    * &lt;p&gt;</span>
<span class="source-line-no">8171</span><span id="line-8171">    * The reader must be positioned at the first &lt;js&gt;'/'&lt;/js&gt; character of a comment.</span>
<span class="source-line-no">8172</span><span id="line-8172">    * This method will skip only the comment it's currently positioned on, not all comments in the reader.</span>
<span class="source-line-no">8173</span><span id="line-8173">    *</span>
<span class="source-line-no">8174</span><span id="line-8174">    * &lt;p&gt;</span>
<span class="source-line-no">8175</span><span id="line-8175">    * Supports both &lt;js&gt;"/* * /"&lt;/js&gt; style block comments and &lt;js&gt;"//"&lt;/js&gt; style line comments.</span>
<span class="source-line-no">8176</span><span id="line-8176">    *</span>
<span class="source-line-no">8177</span><span id="line-8177">    * @param r The StringReader positioned at the start of a comment (at the first &lt;js&gt;'/'&lt;/js&gt;).</span>
<span class="source-line-no">8178</span><span id="line-8178">    * @throws IOException If an I/O error occurs.</span>
<span class="source-line-no">8179</span><span id="line-8179">    */</span>
<span class="source-line-no">8180</span><span id="line-8180">   public static void skipComments(StringReader r) throws IOException {</span>
<span class="source-line-no">8181</span><span id="line-8181">      var c = r.read();</span>
<span class="source-line-no">8182</span><span id="line-8182">      //  "/* */" style comments</span>
<span class="source-line-no">8183</span><span id="line-8183">      if (c == '*') {</span>
<span class="source-line-no">8184</span><span id="line-8184">         c = r.read();</span>
<span class="source-line-no">8185</span><span id="line-8185">         while (c != -1) {</span>
<span class="source-line-no">8186</span><span id="line-8186">            if (c == '*') {</span>
<span class="source-line-no">8187</span><span id="line-8187">               c = r.read();</span>
<span class="source-line-no">8188</span><span id="line-8188">               if (c == '/')</span>
<span class="source-line-no">8189</span><span id="line-8189">                  return;</span>
<span class="source-line-no">8190</span><span id="line-8190">               // If not '/', continue checking from this character</span>
<span class="source-line-no">8191</span><span id="line-8191">               // Don't read again, just continue the loop</span>
<span class="source-line-no">8192</span><span id="line-8192">            } else {</span>
<span class="source-line-no">8193</span><span id="line-8193">               c = r.read();</span>
<span class="source-line-no">8194</span><span id="line-8194">            }</span>
<span class="source-line-no">8195</span><span id="line-8195">         }</span>
<span class="source-line-no">8196</span><span id="line-8196">         //  "//" style comments</span>
<span class="source-line-no">8197</span><span id="line-8197">      } else if (c == '/') {</span>
<span class="source-line-no">8198</span><span id="line-8198">         while ((c = r.read()) != -1) {</span>
<span class="source-line-no">8199</span><span id="line-8199">            if (c == '\n')</span>
<span class="source-line-no">8200</span><span id="line-8200">               return;</span>
<span class="source-line-no">8201</span><span id="line-8201">         }</span>
<span class="source-line-no">8202</span><span id="line-8202">      }</span>
<span class="source-line-no">8203</span><span id="line-8203">   }</span>
<span class="source-line-no">8204</span><span id="line-8204"></span>
<span class="source-line-no">8205</span><span id="line-8205">   /**</span>
<span class="source-line-no">8206</span><span id="line-8206">    * Gets or creates an AsciiSet for escaping the specified character.</span>
<span class="source-line-no">8207</span><span id="line-8207">    *</span>
<span class="source-line-no">8208</span><span id="line-8208">    * @param c The character to create an escape set for.</span>
<span class="source-line-no">8209</span><span id="line-8209">    * @return An AsciiSet containing the character and backslash.</span>
<span class="source-line-no">8210</span><span id="line-8210">    */</span>
<span class="source-line-no">8211</span><span id="line-8211">   private static AsciiSet getEscapeSet(char c) {</span>
<span class="source-line-no">8212</span><span id="line-8212">      return ESCAPE_SETS.computeIfAbsent(c, key -&gt; AsciiSet.create().chars(key, '\\').build());</span>
<span class="source-line-no">8213</span><span id="line-8213">   }</span>
<span class="source-line-no">8214</span><span id="line-8214"></span>
<span class="source-line-no">8215</span><span id="line-8215">   /**</span>
<span class="source-line-no">8216</span><span id="line-8216">    * Helper method to split a string into words.</span>
<span class="source-line-no">8217</span><span id="line-8217">    * Detects word boundaries from separators (spaces, underscores, hyphens) and case changes.</span>
<span class="source-line-no">8218</span><span id="line-8218">    *</span>
<span class="source-line-no">8219</span><span id="line-8219">    * @param str The string to split.</span>
<span class="source-line-no">8220</span><span id="line-8220">    * @return A list of words, or empty list if input is null or empty.</span>
<span class="source-line-no">8221</span><span id="line-8221">    */</span>
<span class="source-line-no">8222</span><span id="line-8222">   private static List&lt;String&gt; splitWords(String str) {</span>
<span class="source-line-no">8223</span><span id="line-8223">      if (str == null || isEmpty(str))</span>
<span class="source-line-no">8224</span><span id="line-8224">         return Collections.emptyList();</span>
<span class="source-line-no">8225</span><span id="line-8225"></span>
<span class="source-line-no">8226</span><span id="line-8226">      var words = new ArrayList&lt;String&gt;();</span>
<span class="source-line-no">8227</span><span id="line-8227">      var sb = new StringBuilder();</span>
<span class="source-line-no">8228</span><span id="line-8228">      var wasLowerCase = false;</span>
<span class="source-line-no">8229</span><span id="line-8229">      var wasUpperCase = false;</span>
<span class="source-line-no">8230</span><span id="line-8230">      var consecutiveUpperCount = 0;</span>
<span class="source-line-no">8231</span><span id="line-8231"></span>
<span class="source-line-no">8232</span><span id="line-8232">      for (var i = 0; i &lt; str.length(); i++) {</span>
<span class="source-line-no">8233</span><span id="line-8233">         var c = str.charAt(i);</span>
<span class="source-line-no">8234</span><span id="line-8234">         var isSeparator = (c == ' ' || c == '_' || c == '-' || c == '\t');</span>
<span class="source-line-no">8235</span><span id="line-8235">         var isUpperCase = LETTER_UC.contains(c);</span>
<span class="source-line-no">8236</span><span id="line-8236">         var isLowerCase = LETTER_LC.contains(c);</span>
<span class="source-line-no">8237</span><span id="line-8237">         var isLetter = LETTER.contains(c);</span>
<span class="source-line-no">8238</span><span id="line-8238"></span>
<span class="source-line-no">8239</span><span id="line-8239">         if (isSeparator) {</span>
<span class="source-line-no">8240</span><span id="line-8240">            if (sb.length() &gt; 0) {</span>
<span class="source-line-no">8241</span><span id="line-8241">               words.add(sb.toString());</span>
<span class="source-line-no">8242</span><span id="line-8242">               sb.setLength(0);</span>
<span class="source-line-no">8243</span><span id="line-8243">            }</span>
<span class="source-line-no">8244</span><span id="line-8244">            wasLowerCase = false;</span>
<span class="source-line-no">8245</span><span id="line-8245">            wasUpperCase = false;</span>
<span class="source-line-no">8246</span><span id="line-8246">            consecutiveUpperCount = 0;</span>
<span class="source-line-no">8247</span><span id="line-8247">         } else if (isLetter) {</span>
<span class="source-line-no">8248</span><span id="line-8248">            // Detect word boundary:</span>
<span class="source-line-no">8249</span><span id="line-8249">            // 1. Uppercase after lowercase (e.g., "helloWorld"  "hello", "World")</span>
<span class="source-line-no">8250</span><span id="line-8250">            // 2. Uppercase after consecutive uppercase when next is lowercase (e.g., "XMLHttp"  "XML", "Http")</span>
<span class="source-line-no">8251</span><span id="line-8251">            // 3. Lowercase after 2+ consecutive uppercase (e.g., "XMLHttp"  "XML", "Http")</span>
<span class="source-line-no">8252</span><span id="line-8252">            if (sb.length() &gt; 0) {</span>
<span class="source-line-no">8253</span><span id="line-8253">               if (isUpperCase &amp;&amp; wasLowerCase) {</span>
<span class="source-line-no">8254</span><span id="line-8254">                  // Case 1: uppercase after lowercase (e.g., "helloWorld"  "hello", "World")</span>
<span class="source-line-no">8255</span><span id="line-8255">                  words.add(sb.toString());</span>
<span class="source-line-no">8256</span><span id="line-8256">                  sb.setLength(0);</span>
<span class="source-line-no">8257</span><span id="line-8257">                  consecutiveUpperCount = 0;</span>
<span class="source-line-no">8258</span><span id="line-8258">               } else if (isUpperCase &amp;&amp; wasUpperCase &amp;&amp; consecutiveUpperCount &gt;= 2) {</span>
<span class="source-line-no">8259</span><span id="line-8259">                  // Case 2: uppercase after uppercase - check if this starts a new word</span>
<span class="source-line-no">8260</span><span id="line-8260">                  // Look ahead to see if next character is lowercase</span>
<span class="source-line-no">8261</span><span id="line-8261">                  // This handles "XMLHttp" where 'H' starts "Http"</span>
<span class="source-line-no">8262</span><span id="line-8262">                  // We need at least 2 consecutive uppercase letters before this one to split</span>
<span class="source-line-no">8263</span><span id="line-8263">                  if (i + 1 &lt; str.length()) {</span>
<span class="source-line-no">8264</span><span id="line-8264">                     var nextChar = str.charAt(i + 1);</span>
<span class="source-line-no">8265</span><span id="line-8265">                     if (LETTER_LC.contains(nextChar)) {</span>
<span class="source-line-no">8266</span><span id="line-8266">                        // This uppercase starts a new word, split before it</span>
<span class="source-line-no">8267</span><span id="line-8267">                        words.add(sb.toString());</span>
<span class="source-line-no">8268</span><span id="line-8268">                        sb.setLength(0);</span>
<span class="source-line-no">8269</span><span id="line-8269">                        consecutiveUpperCount = 0;</span>
<span class="source-line-no">8270</span><span id="line-8270">                     }</span>
<span class="source-line-no">8271</span><span id="line-8271">                  }</span>
<span class="source-line-no">8272</span><span id="line-8272">               } else if (isLowerCase &amp;&amp; wasUpperCase &amp;&amp; consecutiveUpperCount &gt;= 2) {</span>
<span class="source-line-no">8273</span><span id="line-8273">                  // Case 3: lowercase after 2+ consecutive uppercase</span>
<span class="source-line-no">8274</span><span id="line-8274">                  // Split all but the last uppercase (e.g., "XMLH"  "XML" + "H")</span>
<span class="source-line-no">8275</span><span id="line-8275">                  var splitPoint = sb.length() - 1;</span>
<span class="source-line-no">8276</span><span id="line-8276">                  words.add(sb.substring(0, splitPoint));</span>
<span class="source-line-no">8277</span><span id="line-8277">                  sb.delete(0, splitPoint);</span>
<span class="source-line-no">8278</span><span id="line-8278">                  consecutiveUpperCount = 0;</span>
<span class="source-line-no">8279</span><span id="line-8279">               }</span>
<span class="source-line-no">8280</span><span id="line-8280">            }</span>
<span class="source-line-no">8281</span><span id="line-8281">            sb.append(c);</span>
<span class="source-line-no">8282</span><span id="line-8282">            // Update state AFTER appending</span>
<span class="source-line-no">8283</span><span id="line-8283">            wasLowerCase = isLowerCase;</span>
<span class="source-line-no">8284</span><span id="line-8284">            wasUpperCase = isUpperCase;</span>
<span class="source-line-no">8285</span><span id="line-8285">            if (isUpperCase) {</span>
<span class="source-line-no">8286</span><span id="line-8286">               consecutiveUpperCount++;</span>
<span class="source-line-no">8287</span><span id="line-8287">            } else {</span>
<span class="source-line-no">8288</span><span id="line-8288">               consecutiveUpperCount = 0;</span>
<span class="source-line-no">8289</span><span id="line-8289">            }</span>
<span class="source-line-no">8290</span><span id="line-8290">         } else {</span>
<span class="source-line-no">8291</span><span id="line-8291">            // Non-letter characters (digits, etc.) - treat as part of current word</span>
<span class="source-line-no">8292</span><span id="line-8292">            sb.append(c);</span>
<span class="source-line-no">8293</span><span id="line-8293">            wasLowerCase = false;</span>
<span class="source-line-no">8294</span><span id="line-8294">            wasUpperCase = false;</span>
<span class="source-line-no">8295</span><span id="line-8295">            consecutiveUpperCount = 0;</span>
<span class="source-line-no">8296</span><span id="line-8296">         }</span>
<span class="source-line-no">8297</span><span id="line-8297">      }</span>
<span class="source-line-no">8298</span><span id="line-8298"></span>
<span class="source-line-no">8299</span><span id="line-8299">      if (sb.length() &gt; 0)</span>
<span class="source-line-no">8300</span><span id="line-8300">         words.add(sb.toString());</span>
<span class="source-line-no">8301</span><span id="line-8301"></span>
<span class="source-line-no">8302</span><span id="line-8302">      return words;</span>
<span class="source-line-no">8303</span><span id="line-8303">   }</span>
<span class="source-line-no">8304</span><span id="line-8304"></span>
<span class="source-line-no">8305</span><span id="line-8305">   /**</span>
<span class="source-line-no">8306</span><span id="line-8306">    * Constructor.</span>
<span class="source-line-no">8307</span><span id="line-8307">    */</span>
<span class="source-line-no">8308</span><span id="line-8308">   protected StringUtils() {}</span>
<span class="source-line-no">8309</span><span id="line-8309">}</span>




























































</pre>
</div>
</main>
</body>
</html>

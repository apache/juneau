---
title: "Release 8.1.0"
---

# Release 8.1.0

**Date:** Aug 21, 2019

8.1.0 introduces some significant new features including:

- ~~Configurable Annotations~~
- ~~Default PojoSwaps~~
- ~~Config Imports~~
- ~~BasicRest~~, ~~BasicRestGroup~~ classes
- ~~Path variables on resource paths~~
- ~~Request Attributes API~~
- ~~Role Guards~~
- ~~Improved REST logging/debugging~~
- New MockRest API

### juneau-marshall

- New utility class for diffing beans:
  <tree>
  <node-0><java-class>[BeanDiff]({{API_DOCS}}/org/apache/juneau/utils/BeanDiff.html)</java-class></node-0>
  </tree>

- New annotation for defining bean property names:
  <tree>
  <node-0><java-annotation>[Name]({{API_DOCS}}/org/apache/juneau/annotation/Name.html)</java-annotation></node-0>
  </tree>

- New serializer properties:
  <tree>
  <node-0><java-class>[WriterSerializer]({{API_DOCS}}/org/apache/juneau/serializer/WriterSerializer.html)</java-class></node-0>
  <node-1><javac-field> ~~WSERIALIZER_fileCharset~~</javac-field> <javac-field> ~~WSERIALIZER_streamCharset~~</javac-field></node-1>
  </tree>

- The following POJO methods can be used to convert a POJO to/from a Map before serialization and after parsing.
  It's a convenient way of defining a POJO transform.

  <tree>
  <node-0><java-method>`public Map<String,Object> toMap()`</java-method> - Can be any type of map with string keys and object vals.</node-0>
  <node-0><java-method>`public ObjectMap toMap()`</java-method></node-0>
  <node-0><java-method>`public Map<String,Object> toMap(BeanSession bs)`</java-method> - Can be any type of map with string keys and object vals.</node-0>
  <node-0><java-method>`public ObjectMap toMap(BeanSession bs)`</java-method></node-0>
  <node-0><java-method>`public static T fromMap(Map<String,Object> m)`</java-method> - Can be any type of map with string keys and object vals.</node-0>
  <node-0><java-method>`public static T fromMap(ObjectMap m)`</java-method></node-0>
  <node-0><java-method>`public static T fromMap(BeanSession bs, Map<String,Object> m)`</java-method> - Can be any type of map with string keys and object vals.</node-0>
  <node-0><java-method>`public static T fromMap(BeanSession bs, ObjectMap m)`</java-method></node-0>
  </tree>

- New convenience debugging methods on Marshall API:

  <tree>
  <node-0><java-class> ~~Marshall~~</java-class></node-0>
  <node-1><java-method>~~oaj.marshall.Marshall.format(String,Object...) format(String,Object...)~~</java-method> - `MessageFormat`-style formatter.</node-1>
  <node-1><java-method>~~oaj.marshall.Marshall.out(String,Object...) out(String,Object...)~~</java-method> - Prints `MessageFormat`-style messages to STDOUT.</node-1>
  <node-1><java-method>~~oaj.marshall.Marshall.err(String,Object...) err(String,Object...)~~</java-method> - Prints `MessageFormat`-style messages to STDERR.</node-1>
  </tree>

- Serializer and parser APIs now throw `IOExceptions` in addition to `SerializeException` and `ParseException` to make it easier to determine if problems are stream based or syntax based.

- New Java 8 date-time transforms:
  -  ~~TemporalSwap~~ - For all Java 8 temporal types (e.g. [ZonedDateTime](https://docs.oracle.com/javase/8/docs/api/java/time/ZonedDateTime.html))
  -  ~~TemporalDateSwap~~ - For [Date](https://docs.oracle.com/javase/8/docs/api/java/util/Date.html)
  -  ~~TemporalCalendarSwap~~ - For [Calendar](https://docs.oracle.com/javase/8/docs/api/java/util/Calendar.html)

- All serializers and parsers now have built-in default swaps for common class types:
  <tree>
  <node-0><java-class>[Enumeration]({{API_DOCS}}/java/util/Enumeration.html)</java-class></node-0>
  <node-0><java-class>[Iterator]({{API_DOCS}}/java/util/Iterator.html)</java-class></node-0>
  <node-0><java-class>[Locale]({{API_DOCS}}/java/util/Locale.html)</java-class></node-0>
  <node-0><java-class>[Calendar]({{API_DOCS}}/java/util/Calendar.html)</java-class> - ISO offset date-time.</node-0>
  <node-0><java-class>[Date]({{API_DOCS}}/java/util/Date.html)</java-class> - Local date-time</node-0>
  <node-0><java-class>[Instant]({{API_DOCS}}/java/time/Instant.html)</java-class> - ISO instant.</node-0>
  <node-0><java-class>[ZonedDateTime]({{API_DOCS}}/java/time/ZonedDateTime.html)</java-class> - ISO offset date-time.</node-0>
  <node-0><java-class>[LocalDate]({{API_DOCS}}/java/time/LocalDate.html)</java-class> - ISO local date.</node-0>
  <node-0><java-class>[LocalDateTime]({{API_DOCS}}/java/time/LocalDateTime.html)</java-class> - ISO local date-time.</node-0>
  <node-0><java-class>[LocalTime]({{API_DOCS}}/java/time/LocalTime.html)</java-class> - ISO local time.</node-0>
  <node-0><java-class>[OffsetDateTime]({{API_DOCS}}/java/time/OffsetDateTime.html)</java-class> - ISO offset date-time.</node-0>
  <node-0><java-class>[OffsetTime]({{API_DOCS}}/java/time/OffsetTime.html)</java-class> - ISO offset time.</node-0>
  <node-0><java-class>[Year]({{API_DOCS}}/java/time/Year.html)</java-class> - ISO year.</node-0>
  <node-0><java-class>[YearMonth]({{API_DOCS}}/java/time/YearMonth.html)</java-class> - ISO year-month.</node-0>
  <node-0><java-class>[Temporal]({{API_DOCS}}/java/time/temporal/Temporal.html)</java-class> - ISO instant.</node-0>
  <node-0><java-class>[TimeZone]({{API_DOCS}}/java/util/TimeZone.html)</java-class></node-0>
  <node-0><java-class>[XMLGregorianCalendar]({{API_DOCS}}/javax/xml/datatype/XMLGregorianCalendar.html)</java-class></node-0>
  <node-0><java-class>[ZoneId]({{API_DOCS}}/java/time/ZoneId.html)</java-class></node-0>
  </tree>

### juneau-config

- Support for import statements:

  ```ini
  // Import values from another configuration:
  <ParentConfig1>
  
  [Foo]
  bar = baz
  ```

- The ~~ConfigFileStore~~ now automatically resolves file extensions.
  New configuration property for specifying search paths for file extensions:  ~~FILESTORE_extensions~~

- Fixed a bug where instances of  ~~ConfigMemoryStore~~ ended up resolving to the same object.

- Uses `application.properties` file as a system default if present.
  Useful when being used in a Spring Boot application.

- New [Config.setSystemProperties]({{API_DOCS}}/org/apache/juneau/config/Config.html#setSystemProperties()) method for quickly moving configuration settings into the system properties.

- Entries in the system config are automatically set as system properties.
  This means you can set any of the various serializer and parser settings (e.g. `JsonSerializer.simpleMode.b`) in the default configuration area or `application.properties`.

### juneau-rest-server

- New annotations that can be applied to REST classes and methods to configure serializers and parsers.

  Old way using generic properties:

  ```java
  @RestResource(
      path="/atom",
      title="Sample ATOM feed resource",
      properties={
          @Property(name=WSERIALIZER_quoteChar, value="'"),
          @Property(name=RDF_rdfxml_tab, value="5"),
          @Property(name=RDF_addRootProperty, value="true"),
          @Property(name=BEAN_examples, value="{'org.apache.juneau.dto.atom.Feed': $F{AtomFeedResource_example.json}}")
      }
      ...
  )
  public class AtomFeedResource extends BasicRestServletJena {
      ...
  }
  ```

  New way using specific annotations:

  ```java
  @RestResource(
      path="/atom",
      title="Sample ATOM feed resource"
      ...
  )
  @SerializerConfig(quoteChar="'")
  @RdfConfig(rdfxml_tab="5", addRootProperty="true")
  @BeanConfig(examples="Feed: $F{AtomFeedResource_example.json}")
  public class AtomFeedResource extends BasicRestServletJena {
      ...
  }
  ```

  Config annotations are provided for all serializers and parsers:

  <tree>
  <node-0><java-annotation>[BeanConfig]({{API_DOCS}}/org/apache/juneau/annotation/BeanConfig.html)</java-annotation></node-0>
  <node-0><java-annotation>[CsvConfig]({{API_DOCS}}/org/apache/juneau/csv/annotation/CsvConfig.html)</java-annotation></node-0>
  <node-0><java-annotation>[HtmlConfig]({{API_DOCS}}/org/apache/juneau/html/annotation/HtmlConfig.html)</java-annotation></node-0>
  <node-0><java-annotation>[HtmlDocConfig]({{API_DOCS}}/org/apache/juneau/html/annotation/HtmlDocConfig.html)</java-annotation></node-0>
  <node-0><java-annotation> ~~JsoConfig~~</java-annotation></node-0>
  <node-0><java-annotation>[JsonConfig]({{API_DOCS}}/org/apache/juneau/json/annotation/JsonConfig.html)</java-annotation></node-0>
  <node-0><java-annotation>[JsonSchemaConfig]({{API_DOCS}}/org/apache/juneau/jsonschema/annotation/JsonSchemaConfig.html)</java-annotation></node-0>
  <node-0><java-annotation>[MsgPackConfig]({{API_DOCS}}/org/apache/juneau/msgpack/annotation/MsgPackConfig.html)</java-annotation></node-0>
  <node-0><java-annotation>[OpenApiConfig]({{API_DOCS}}/org/apache/juneau/oapi/annotation/OpenApiConfig.html)</java-annotation></node-0>
  <node-0><java-annotation>[ParserConfig]({{API_DOCS}}/org/apache/juneau/parser/annotation/ParserConfig.html)</java-annotation></node-0>
  <node-0><java-annotation>[PlainTextConfig]({{API_DOCS}}/org/apache/juneau/plaintext/annotation/PlainTextConfig.html)</java-annotation></node-0>
  <node-0><java-annotation> ~~RdfConfig~~</java-annotation></node-0>
  <node-0><java-annotation>[SerializerConfig]({{API_DOCS}}/org/apache/juneau/serializer/annotation/SerializerConfig.html)</java-annotation></node-0>
  <node-0><java-annotation>[SoapXmlConfig]({{API_DOCS}}/org/apache/juneau/soap/annotation/SoapXmlConfig.html)</java-annotation></node-0>
  <node-0><java-annotation>[UonConfig]({{API_DOCS}}/org/apache/juneau/uon/annotation/UonConfig.html)</java-annotation></node-0>
  <node-0><java-annotation>[UrlEncodingConfig]({{API_DOCS}}/org/apache/juneau/urlencoding/annotation/UrlEncodingConfig.html)</java-annotation></node-0>
  <node-0><java-annotation>[XmlConfig]({{API_DOCS}}/org/apache/juneau/xml/annotation/XmlConfig.html)</java-annotation></node-0>
  </tree>

- New support for using Servlet request attributes:

  <tree>
  <node-0><java-class> ~~RequestAttributes~~</java-class></node-0>
  <node-0><java-class>[RestContext]({{API_DOCS}}/org/apache/juneau/rest/RestContext.html)</java-class></node-0>
  <node-1><java-field> ~~REST_attrs~~</java-field></node-1>
  <node-0><java-class>[RestContext.Builder]({{API_DOCS}}/org/apache/juneau/rest/RestContext.Builder.html)</java-class></node-0>
  <node-1><java-method> ~~attrs(String...)~~</java-method></node-1>
  <node-1><java-method> ~~attr(String,Object)~~</java-method></node-1>
  <node-0><java-class> ~~RestMethodContext~~</java-class></node-0>
  <node-1><java-field> ~~RestMethodContext.RESTMETHOD_attrs RESTMETHOD_attrs~~</java-field></node-1>
  <node-0><java-class>[RestRequest]({{API_DOCS}}/org/apache/juneau/rest/RestRequest.html)</java-class></node-0>
  <node-1><java-method>[getAttributes()]({{API_DOCS}}/org/apache/juneau/rest/RestRequest.html#getAttributes())</java-method></node-1>
  <node-0><java-class>[RestResponse]({{API_DOCS}}/org/apache/juneau/rest/RestResponse.html)</java-class></node-0>
  <node-1><java-method>[getAttributes()]({{API_DOCS}}/org/apache/juneau/rest/RestResponse.html#getAttributes())</java-method></node-1>
  <node-1><java-method> ~~RestResponse.attr(String,Object) attr(String,Object)~~</java-method></node-1>
  <node-0><java-annotation>[Attr]({{API_DOCS}}/org/apache/juneau/rest/annotation/Attr.html)</java-annotation></node-0>
  <node-0><java-annotation> ~~RestMethod.attrs()~~</java-annotation></node-0>
  <node-0><java-annotation> ~~RestResource.attrs()~~</java-annotation></node-0>
  </tree>

  This deprecates the following APIs:

  <tree>
  <node-0><java-class> ~~RequestProperties~~</java-class></node-0>
  <node-0><java-class> ~~RestMethodProperties~~</java-class></node-0>
  <node-0><java-class>[RestRequest]({{API_DOCS}}/org/apache/juneau/rest/RestRequest.html)</java-class></node-0>
  <node-1><java-method> ~~RestRequest.getProperties() getProperties()~~</java-method></node-1>
  <node-1><java-method> ~~RestRequest.prop(String,Object) prop(String,Object)~~</java-method></node-1>
  </tree>

- Added the following classes that provide the same support as the servlet classes but doesn't extend from `HttpServlet`.
  This fixes an issue where instances of  ~~BasicRestServlet~~ are registered as top-level servlets even though you don't want them to be.

  <tree>
  <node-0><java-class> ~~BasicRest~~</java-class> - Non-servlet equivalent to  ~~BasicRestServlet~~</node-0>
  <node-0><java-class> ~~BasicRestGroup~~</java-class> - Non-servlet equivalent to  ~~BasicRestServletGroup~~</node-0>
  <node-0><java-class> ~~BasicRestJena~~</java-class> - Non-servlet equivalent to  ~~BasicRestServletJena~~</node-0>
  <node-0><java-class> ~~BasicRestJenaGroup~~</java-class> - Non-servlet equivalent to  ~~BasicRestServletJenaGroup~~</node-0>
  </tree>

- HTML widgets now have access to the `RestResponse` object if they need access to the output bean.

- New annotations for simplified role-based guards on classes and methods:

  <tree>
  <node-0><java-annotation> ~~RestResource~~</java-annotation></node-0>
  <node-1><java-method> ~~roleGuard()~~</java-method></node-1>
  <node-1><java-method> ~~rolesDeclared()~~</java-method></node-1>
  <node-0><java-annotation> ~~RestMethod~~</java-annotation></node-0>
  <node-1><java-method> ~~RestMethod.roleGuard roleGuard()~~</java-method></node-1>
  <node-1><java-method> ~~RestMethod.rolesDeclared rolesDeclared()~~</java-method></node-1>
  </tree>

- New annotations for fine-tuned handling of http-methods/http-headers as query parameters and others:

  <tree>
  <node-0><java-annotation> ~~RestResource~~</java-annotation></node-0>
  <node-1><java-method> ~~allowedHeaderParams()~~</java-method></node-1>
  <node-1><java-method> ~~allowedMethodHeaders()~~</java-method></node-1>
  <node-1><java-method> ~~allowedMethodParams()~~</java-method></node-1>
  </tree>

- The  ~~@RestResource(path)~~ annotation can now use variables:

  ```java
  @RestResource(
      path="/myResource/{foo}/{bar}"
  )
  public class MyResource extends BasicRestServlet {...}
  ```

- New methods:

  <tree>
  <node-0><java-class>[RestRequest]({{API_DOCS}}/org/apache/juneau/rest/RestRequest.html)</java-class></node-0>
  <node-1><java-method>[getCharset()]({{API_DOCS}}/org/apache/juneau/rest/RestRequest.html#getCharset())</java-method></node-1>
  <node-0><java-class>[RestResponse]({{API_DOCS}}/org/apache/juneau/rest/RestResponse.html)</java-class></node-0>
  <node-1><java-method>[getCharset()]({{API_DOCS}}/org/apache/juneau/rest/RestResponse.html#getCharset())</java-method></node-1>
  </tree>

- New interface method for catching arbitrary thrown objects and converting them to other throwables:

  <tree>
  <node-0><java-class> ~~RestCallHandler~~</java-class></node-0>
  <node-1><java-method> ~~RestCallHandler.convertThrowable(Throwable) convertThrowable(Throwable)~~</java-method></node-1>
  <node-0><java-class> ~~BasicRestCallHandler~~</java-class></node-0>
  <node-1><java-method> ~~convertThrowable(Throwable)~~</java-method></node-1>
  </tree>

- Support for fine-tuned logging of HTTP requests and responses:

  ```java
  @RestResource(
      debug="per-request",
      logging=@Logging(
          level="info",
          rules={
              @LoggingRule(codes="400-499", level="warning", req="short", res="short"),
              @LoggingRule(codes="500-", level="severe", req="long", res="long")
          }
      )
  )
  public class MyRest {

      @RestMethod(
          method="POST", 
          path="foo",
          logging=@Logging(
              level="info",
              rules={
                  @LoggingRule(exceptions="NotFound*", level="info"),
                  @LoggingRule(codes="200", disabled="true")
              }
          )
      )
      public String myMethod() throws Exception {...}
  }
  ```

  See ~~RestLoggingAndDebugging~~ for details.

- Fixed a bug where the HTTP response was returning 405 (method not found) but should really be 404 (not found) when no path patterns match on any of the Java methods.

### juneau-rest-client

- PATCH support added.
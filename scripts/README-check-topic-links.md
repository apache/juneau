# Check Topic Links Script

## Overview

`check-topic-links.py` validates that all documentation topic links in the Juneau source code are correct and point to valid topics with matching titles.

## What It Does

The script performs three main operations:

1. **Extracts Topic Information** - Scans `/juneau-docs/docs/topics` for all markdown files and extracts:
   - Slug names from the frontmatter
   - Page titles from the frontmatter

2. **Finds Topic Links** - Scans the entire Juneau source tree for links in the format:
   ```
   https://juneau.apache.org/docs/topics/SLUG">TITLE</a>
   ```

3. **Validates Links** - Reports any issues:
   - **Title mismatches**: Link title doesn't match the actual topic title
   - **Unknown slugs**: Link points to a topic that doesn't exist

## Usage

### Check all topic links

```bash
cd /Users/james.bognar/git/juneau
python3 scripts/check-topic-links.py
```

The script will automatically:
- Scan `/juneau-docs/docs/topics` for topic definitions
- Scan the entire Juneau source tree for topic links
- Report any issues found

## File Types Scanned

The script checks the following file types:
- `.java` - Java source files
- `.md` - Markdown files
- `.xml` - XML configuration files
- `.properties` - Properties files
- `.txt` - Text files
- `.adoc` - AsciiDoc files
- `.rst` - reStructuredText files

## Directories Skipped

The script automatically skips:
- Hidden directories (starting with `.`)
- `target/` - Maven build output
- `node_modules/` - Node.js dependencies
- `build/` - Build directories
- `dist/` - Distribution directories

## Output Examples

### Success (No Issues)

```
Juneau Topic Link Checker
==================================================

Extracting topic information from juneau-docs...
Found topic: BeanSubTypes -> Bean Subtypes
Found topic: Guards -> Guards
...

Found 247 topics

Scanning source tree for topic links...
Found 89 topic links

Checking links for issues...

âœ“ All topic links are correct!
```

### Title Mismatch

```
WARNINGS (2 found):
==================================================
TITLE MISMATCH:
  File: juneau-rest/juneau-rest-server/src/main/java/RestContext.java:142
  Slug: Guards
  Expected title: 'Guards'
  Actual title:   'Guard Classes'
  Link: https://juneau.apache.org/docs/topics/Guards">Guard Classes</a>

UNKNOWN SLUG:
  File: juneau-examples/src/main/java/Example.java:56
  Slug: OldTopic
  Title: 'Removed Topic'
  Link: https://juneau.apache.org/docs/topics/OldTopic">Removed Topic</a>

Total warnings: 2
```

## Exit Codes

- `0` - Success, no issues found
- `1` - Warnings/errors found

## When to Use

Run this script:
- Before committing changes that add or modify documentation links
- After renaming or reorganizing documentation topics
- As part of CI/CD validation
- When updating topic titles in markdown files
- To audit all documentation links in the codebase

## Common Issues Fixed

### Title Mismatch
When a link uses an outdated or incorrect title for a topic:
```java
// Wrong
<a href="https://juneau.apache.org/docs/topics/Guards">Guard Classes</a>

// Correct
<a href="https://juneau.apache.org/docs/topics/Guards">Guards</a>
```

### Unknown Slug
When a link points to a topic that no longer exists:
- Remove the link, or
- Update the slug to point to a valid topic, or
- Create the missing topic markdown file

## Requirements

- Python 3.6 or higher
- No external dependencies (uses only standard library)

## Notes

- The script uses the topic's frontmatter (title and slug) as the source of truth
- Links are expected to follow the exact format: `https://juneau.apache.org/docs/topics/SLUG">TITLE</a>`
- The script is case-sensitive for both slugs and titles
- Report files generated by this script (`topic-link-check-*.txt`) are automatically skipped during scanning


"use strict";(globalThis.webpackChunkjuneau_documentation=globalThis.webpackChunkjuneau_documentation||[]).push([[7972],{28453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>o});var s=n(96540);const a={},r=s.createContext(a);function i(e){const t=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),s.createElement(r.Provider,{value:t},e.children)}},76817:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"topics/06.02.04.JuneauCommonsSettings","title":"Settings Package","description":"The org.apache.juneau.commons.settings package provides a thread-safe way to access system properties with support for global and per-thread overrides, making it useful for unit tests and configuration management.","source":"@site/pages/topics/06.02.04.JuneauCommonsSettings.md","sourceDirName":"topics","slug":"/topics/JuneauCommonsSettings","permalink":"/docs/topics/JuneauCommonsSettings","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/juneau/tree/master/docs/pages/topics/06.02.04.JuneauCommonsSettings.md","tags":[],"version":"current","frontMatter":{"title":"Settings Package","slug":"JuneauCommonsSettings"},"sidebar":"mainSidebar","previous":{"title":"6.2.3. Reflection Package","permalink":"/docs/topics/JuneauCommonsReflection"},"next":{"title":"6.2.5. Lang Package","permalink":"/docs/topics/JuneauCommonsLang"}}');var a=n(74848),r=n(28453);const i={title:"Settings Package",slug:"JuneauCommonsSettings"},o=void 0,l={},c=[{value:"Key Classes",id:"key-classes",level:2},{value:"<java-class><a>Settings</a></java-class>",id:"settings",level:3},{value:"Per-Thread Overrides",id:"per-thread-overrides",level:3},{value:"Global Overrides",id:"global-overrides",level:3},{value:"Custom Settings Instance",id:"custom-settings-instance",level:3},{value:"Lookup Order",id:"lookup-order",level:2},{value:"Setting Sources and Stores",id:"setting-sources-and-stores",level:2},{value:"<java-interface><a>SettingSource</a></java-interface>",id:"settingsource",level:3},{value:"<java-interface><a>SettingStore</a></java-interface>",id:"settingstore",level:3},{value:"<java-class><a>StringSetting</a></java-class>",id:"stringsetting",level:2},{value:"Common Patterns",id:"common-patterns",level:2},{value:"Unit Testing with Thread-Local Overrides",id:"unit-testing-with-thread-local-overrides",level:3},{value:"Configuration with Custom Sources",id:"configuration-with-custom-sources",level:3},{value:"System Properties",id:"system-properties",level:2},{value:"See Also",id:"see-also",level:2}];function g(e){const t={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(t.p,{children:["The ",(0,a.jsx)(t.code,{children:"org.apache.juneau.commons.settings"})," package provides a thread-safe way to access system properties with support for global and per-thread overrides, making it useful for unit tests and configuration management."]}),"\n",(0,a.jsx)(t.h2,{id:"key-classes",children:"Key Classes"}),"\n",(0,a.jsx)(t.h3,{id:"settings",children:(0,a.jsx)("java-class",{children:(0,a.jsx)("a",{href:"/site/apidocs/org/apache/juneau/commons/settings/Settings.html",target:"_blank",children:"Settings"})})}),"\n",(0,a.jsx)(t.p,{children:"Encapsulates Java system properties with support for global and per-thread overrides."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-java",children:'// Get a system property as a StringSetting (using singleton instance)\nStringSetting setting = Settings.get().get("my.property");\nString value = setting.get();  // Get the string value\n\n// Get with type conversion using StringSetting methods\nSetting<Integer> intSetting = Settings.get().get("my.int.property").asInteger();\nSetting<Long> longSetting = Settings.get().get("my.long.property").asLong();\nSetting<Boolean> boolSetting = Settings.get().get("my.bool.property").asBoolean();\nSetting<Double> doubleSetting = Settings.get().get("my.double.property").asDouble();\nSetting<Float> floatSetting = Settings.get().get("my.float.property").asFloat();\nSetting<File> fileSetting = Settings.get().get("my.file.property").asFile();\nSetting<Path> pathSetting = Settings.get().get("my.path.property").asPath();\nSetting<URI> uriSetting = Settings.get().get("my.uri.property").asURI();\nSetting<Charset> charsetSetting = Settings.get().get("my.charset.property").asCharset();\n\n// Use custom type conversion\nSetting<MyCustomType> customSetting = Settings.get().get("my.custom.property")\n    .asType(MyCustomType.class);\n\n// Reset a setting to force recomputation\nsetting.reset();\n'})}),"\n",(0,a.jsx)(t.h3,{id:"per-thread-overrides",children:"Per-Thread Overrides"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-java",children:'// Override for current thread (useful in unit tests)\nSettings.get().setLocal("my.property", "test-value");\n// ... test code that uses the override ...\nSettings.get().unsetLocal("my.property");  // Remove specific override\n// OR\nSettings.get().clearLocal();  // Clear all thread-local overrides\n'})}),"\n",(0,a.jsx)(t.h3,{id:"global-overrides",children:"Global Overrides"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-java",children:'// Set global override (applies to all threads)\nSettings.get().setGlobal("my.property", "global-value");\n// ... code that uses the global override ...\nSettings.get().unsetGlobal("my.property");  // Remove specific override\n// OR\nSettings.get().clearGlobal();  // Clear all global overrides\n'})}),"\n",(0,a.jsx)(t.h3,{id:"custom-settings-instance",children:"Custom Settings Instance"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-java",children:'// Create a custom Settings instance with custom sources\n<java-class><a href="/site/apidocs/org/apache/juneau/commons/settings/MapStore.html" target="_blank">MapStore</a></java-class> springSource = new MapStore();\nspringSource.set("spring.datasource.url", "jdbc:postgresql://localhost/db");\n\nSettings custom = Settings.create()\n    .addSource(springSource)\n    .addSource(<java-class><a href="/site/apidocs/org/apache/juneau/commons/settings/FunctionalSource.html" target="_blank">FunctionalSource</a></java-class>.of(System::getProperty))\n    .build();\n'})}),"\n",(0,a.jsx)(t.h2,{id:"lookup-order",children:"Lookup Order"}),"\n",(0,a.jsx)(t.p,{children:"When retrieving a property value, the lookup order is:"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:["Per-thread store (if set via ",(0,a.jsx)(t.code,{children:"setLocal()"}),")"]}),"\n",(0,a.jsxs)(t.li,{children:["Global store (if set via ",(0,a.jsx)(t.code,{children:"setGlobal()"}),")"]}),"\n",(0,a.jsx)(t.li,{children:"Sources in reverse order (last source added is checked first)"}),"\n",(0,a.jsx)(t.li,{children:"System property source (default, always second-to-last)"}),"\n",(0,a.jsx)(t.li,{children:"System environment variable source (default, always last)"}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"setting-sources-and-stores",children:"Setting Sources and Stores"}),"\n",(0,a.jsx)(t.h3,{id:"settingsource",children:(0,a.jsx)("java-interface",{children:(0,a.jsx)("a",{href:"/site/apidocs/org/apache/juneau/commons/settings/SettingSource.html",target:"_blank",children:"SettingSource"})})}),"\n",(0,a.jsx)(t.p,{children:"Provides read-only access to property values."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-java",children:'// Functional source\nSettingSource source = <java-class><a href="/site/apidocs/org/apache/juneau/commons/settings/FunctionalSource.html" target="_blank">FunctionalSource</a></java-class>.of(System::getProperty);\n\n// Map-based source\n<java-class><a href="/site/apidocs/org/apache/juneau/commons/settings/MapStore.html" target="_blank">MapStore</a></java-class> store = new MapStore();\nstore.set("key", "value");\nSettingSource source2 = store;  // Stores extend SettingSource\n'})}),"\n",(0,a.jsx)(t.h3,{id:"settingstore",children:(0,a.jsx)("java-interface",{children:(0,a.jsx)("a",{href:"/site/apidocs/org/apache/juneau/commons/settings/SettingStore.html",target:"_blank",children:"SettingStore"})})}),"\n",(0,a.jsx)(t.p,{children:"Provides read/write access to property values."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-java",children:'// Map store\n<java-class><a href="/site/apidocs/org/apache/juneau/commons/settings/MapStore.html" target="_blank">MapStore</a></java-class> store = new MapStore();\nstore.set("key", "value");\nString value = store.get("key");\n\n// Functional store\n<java-class><a href="/site/apidocs/org/apache/juneau/commons/settings/FunctionalStore.html" target="_blank">FunctionalStore</a></java-class> store2 = FunctionalStore.of(\n    key -> getValue(key),  // Getter\n    (key, value) -> setValue(key, value)  // Setter\n);\n'})}),"\n",(0,a.jsx)(t.h2,{id:"stringsetting",children:(0,a.jsx)("java-class",{children:(0,a.jsx)("a",{href:"/site/apidocs/org/apache/juneau/commons/settings/StringSetting.html",target:"_blank",children:"StringSetting"})})}),"\n",(0,a.jsxs)(t.p,{children:["A specialized ",(0,a.jsx)(t.code,{children:"Setting"})," for string values that provides convenience methods for type conversion."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-java",children:'StringSetting setting = Settings.get().get("my.property");\n\n// Type conversions\nSetting<Integer> intValue = setting.asInteger();\nSetting<Long> longValue = setting.asLong();\nSetting<Boolean> boolValue = setting.asBoolean();\nSetting<Double> doubleValue = setting.asDouble();\nSetting<Float> floatValue = setting.asFloat();\nSetting<File> fileValue = setting.asFile();\nSetting<Path> pathValue = setting.asPath();\nSetting<URI> uriValue = setting.asURI();\nSetting<Charset> charsetValue = setting.asCharset();\n\n// Custom type conversion\nSetting<MyType> customValue = setting.asType(MyType.class);\n\n// Reset to force recomputation\nsetting.reset();\n'})}),"\n",(0,a.jsx)(t.h2,{id:"common-patterns",children:"Common Patterns"}),"\n",(0,a.jsx)(t.h3,{id:"unit-testing-with-thread-local-overrides",children:"Unit Testing with Thread-Local Overrides"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-java",children:'@Test\nvoid testWithOverride() {\n    // Override system property for this test\n    Settings.get().setLocal("my.property", "test-value");\n    \n    try {\n        // Test code that uses the property\n        String value = Settings.get().get("my.property").get();\n        assertEquals("test-value", value);\n    } finally {\n        // Clean up\n        Settings.get().clearLocal();\n    }\n}\n'})}),"\n",(0,a.jsx)(t.h3,{id:"configuration-with-custom-sources",children:"Configuration with Custom Sources"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-java",children:'// Create settings with multiple sources\nMapStore configFile = new MapStore();\n// Load from config file\nconfigFile.set("app.name", "MyApp");\nconfigFile.set("app.version", "1.0.0");\n\nSettings settings = Settings.create()\n    .addSource(configFile)  // Check config file first\n    .addSource(FunctionalSource.of(System::getProperty))  // Then system properties\n    .build();\n\nString appName = settings.get("app.name").get();\n'})}),"\n",(0,a.jsx)(t.h2,{id:"system-properties",children:"System Properties"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"juneau.settings.disableGlobal"})," (system property) or ",(0,a.jsx)(t.code,{children:"JUNEAU_SETTINGS_DISABLEGLOBAL"})," (system env) - If set to ",(0,a.jsx)(t.code,{children:"true"}),", prevents new global overrides from being set via ",(0,a.jsx)(t.code,{children:"setGlobal()"}),". Existing global overrides will still be returned until explicitly removed."]}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"see-also",children:"See Also"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.a,{href:"JuneauCommonsBasics",children:"Juneau Commons Basics"})}),"\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.a,{href:"https://juneau.apache.org/javadocs/org/apache/juneau/commons/settings/package-summary.html",children:"JavaDoc: Settings Package"})}),"\n"]})]})}function u(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(g,{...e})}):g(e)}}}]);
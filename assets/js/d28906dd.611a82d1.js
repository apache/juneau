"use strict";(self.webpackChunkjuneau_documentation=self.webpackChunkjuneau_documentation||[]).push([[2318],{28453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>l});var s=n(96540);const a={},r=s.createContext(a);function i(e){const t=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),s.createElement(r.Provider,{value:t},e.children)}},48741:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"topics/11.01.00.JuneauRestClientBasics","title":"juneau-rest-client Basics","description":"Maven Dependency","source":"@site/docs/topics/11.01.00.JuneauRestClientBasics.md","sourceDirName":"topics","slug":"/topics/JuneauRestClientBasics","permalink":"/docs/topics/JuneauRestClientBasics","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/juneau/tree/master/juneau-docs/docs/topics/11.01.00.JuneauRestClientBasics.md","tags":[],"version":"current","frontMatter":{"title":"juneau-rest-client Basics","slug":"JuneauRestClientBasics"},"sidebar":"mainSidebar","previous":{"title":"10.2. Spring Boot Overview","permalink":"/docs/topics/SpringBootOverview"},"next":{"title":"11.2. POJO Marshalling","permalink":"/docs/topics/PojoMarshalling"}}');var a=n(74848),r=n(28453);const i={title:"juneau-rest-client Basics",slug:"JuneauRestClientBasics"},l=void 0,c={},o=[{value:"Maven Dependency",id:"maven-dependency",level:4},{value:"Java Library",id:"java-library",level:4},{value:"OSGi Module",id:"osgi-module",level:4},{value:"Contents/Features",id:"contentsfeatures",level:4},{value:"Resource Management with Try-With-Resources",id:"resource-management-with-try-with-resources",level:4}];function h(e){const t={admonition:"admonition",code:"code",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.h4,{id:"maven-dependency",children:"Maven Dependency"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-xml",children:"<dependency>\n    <groupId>org.apache.juneau</groupId>\n    <artifactId>juneau-rest-client</artifactId>\n    <version>${juneau.version}</version>\n</dependency>\n"})}),"\n",(0,a.jsx)(t.h4,{id:"java-library",children:"Java Library"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-text",children:"juneau-rest-client-0.0.0.jar\n"})}),"\n",(0,a.jsx)(t.h4,{id:"osgi-module",children:"OSGi Module"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-text",children:"org.apache.juneau.rest.client_0.0.0.jar\n"})}),"\n",(0,a.jsx)(t.h4,{id:"contentsfeatures",children:"Contents/Features"}),"\n",(0,a.jsx)(t.p,{children:"Built upon the feature-rich Apache HttpClient library, the Juneau RestClient API adds support for fluent-style REST\ncalls and the ability to perform marshalling of POJOs to and from HTTP parts."}),"\n",(0,a.jsx)(t.admonition,{title:"Example",type:"tip",children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-java",children:'// Create a basic REST client with JSON support and download a bean.\nMyBean bean = RestClient.create()\n    .json5()\n    .build()\n    .get(URI)\n    .run()\n    .assertStatus().asCode().is(200)\n    .assertHeader("Content-Type").matchesSimple("application/json*")\n    .getContent().as(MyBean.class);\n'})})}),"\n",(0,a.jsx)(t.p,{children:"Breaking apart the fluent call, we can see the classes being used:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-java",children:'RestClient.Builder builder = RestClient.create().json5();\nRestClient client = builder.build();\nRestRequest req = client.get(URI);\nRestResponse res = req.run();\nRestResponseStatusLineAssertion statusLineAssertion = res.assertStatus();\nFluentIntegerAssertion codeAssertion = statusLineAssertion.asCode();\nres = codeAssertion.is(200);\nFluentStringAssertion headerAssertion = res.assertHeader("Content-Type");\nres = headerAssertion.matchesSimple("application/json*");\nResponseContent content = res.getContent();\nMyBean bean = content.as(MyBean.class);\n'})}),"\n",(0,a.jsx)(t.p,{children:"It additionally provides support for creating remote proxy interfaces using REST as the transport medium."}),"\n",(0,a.jsx)(t.admonition,{title:"Example",type:"tip",children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-java",children:'// Define a Remote proxy for interacting with a REST interface.\n@Remote(path="/petstore")\npublic interface PetStore {\n\n    @RemotePost("/pets")\n    Pet addPet(\n        @Content CreatePet pet,\n        @Header("E-Tag") UUID etag,\n        @Query("debug") boolean debug\n    );\n}\n\nPetStore store = RestClient\n    .create()\n    .json5()\n    .build()\n    .getRemote(PetStore.class, "http://localhost:10000");\nCreatePet createPet = new CreatePet("Fluffy", 9.99);\nPet pet = store.addPet(createPet, UUID.randomUUID(), true);\n'})})}),"\n",(0,a.jsx)(t.p,{children:"The classes are closely tied to Apache HttpClient, yet provide lots of additional functionality:"}),"\n",(0,a.jsxs)("tree",{children:[(0,a.jsx)("node-0",{children:"REST Client Class Hierarchy"}),(0,a.jsxs)("node-1",{children:[(0,a.jsx)("java-class",{children:(0,a.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/client/RestClient.html",target:"_blank",children:"RestClient"})})," implements ",(0,a.jsx)("a",{href:"https://hc.apache.org/httpcomponents-client-4.5.x/current/httpclient/apidocs/org/apache/http/client/HttpClient.html",target:"_blank",children:"HttpClient"}),", creates ",(0,a.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/client/RestRequest.html",target:"_blank",children:"RestRequest"})," objects"]}),(0,a.jsxs)("node-1",{children:[(0,a.jsx)("java-class",{children:(0,a.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/client/RestRequest.html",target:"_blank",children:"RestRequest"})})," implements ",(0,a.jsx)("a",{href:"https://hc.apache.org/httpcomponents-client-4.5.x/current/httpclient/apidocs/org/apache/http/client/methods/HttpUriRequest.html",target:"_blank",children:"HttpUriRequest"}),", creates ",(0,a.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/client/RestResponse.html",target:"_blank",children:"RestResponse"})," objects"]}),(0,a.jsxs)("node-1",{children:[(0,a.jsx)("java-class",{children:(0,a.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/client/RestResponse.html",target:"_blank",children:"RestResponse"})})," implements ",(0,a.jsx)("a",{href:"https://hc.apache.org/httpcomponents-core-4.4.x/current/httpcore/apidocs/org/apache/http/HttpResponse.html",target:"_blank",children:"HttpResponse"}),", creates ",(0,a.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/client/ResponseContent.html",target:"_blank",children:"ResponseContent"})," and ",(0,a.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/client/ResponseHeader.html",target:"_blank",children:"ResponseHeader"})," objects"]}),(0,a.jsxs)("node-1",{children:[(0,a.jsx)("java-class",{children:(0,a.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/client/ResponseContent.html",target:"_blank",children:"ResponseContent"})})," implements ",(0,a.jsx)("a",{href:"https://hc.apache.org/httpcomponents-core-4.4.x/current/httpcore/apidocs/org/apache/http/HttpEntity.html",target:"_blank",children:"HttpEntity"})]})]}),"\n",(0,a.jsxs)(t.p,{children:["Instances of this class are built using the ",(0,a.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/client/RestClient.Builder.html",target:"_blank",children:"RestClient.Builder"}),"\nclass which can be constructed using the ",(0,a.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/client/RestClient.html#create()",target:"_blank",children:"RestClient.create()"}),"\nmethod as shown above."]}),"\n",(0,a.jsx)(t.p,{children:"Clients are typically created with a root URI so that relative URIs can be used when making requests."}),"\n",(0,a.jsxs)(t.p,{children:["This is done using the ",(0,a.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/client/RestClient.Builder.html#rootUrl(java.lang.Object)",target:"_blank",children:"RestClient.Builder.rootUrl(Object)"}),"\nmethod."]}),"\n",(0,a.jsx)(t.admonition,{title:"Example",type:"tip",children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-java",children:'// Create a client where all URIs are relative to localhost.\nRestClient client = RestClient.create().json().rootUrl("http://localhost:10000").build();\n\n// Use relative paths.\nString content = client.get("/subpath").run().getContent().asString();\n'})})}),"\n",(0,a.jsxs)(t.p,{children:["The ",(0,a.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/client/RestClient.html",target:"_blank",children:"RestClient"})," class creates ",(0,a.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/client/RestRequest.html",target:"_blank",children:"RestRequest"}),"\nobjects using the following methods:"]}),"\n",(0,a.jsxs)("tree",{children:[(0,a.jsx)("node-0",{children:(0,a.jsx)("java-class",{children:(0,a.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/client/RestClient.html",target:"_blank",children:"RestClient"})})}),(0,a.jsx)("node-1",{children:(0,a.jsxs)("java-method",{children:[(0,a.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/client/RestClient.html#get()",target:"_blank",children:"get(uri)"})," / ",(0,a.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/client/RestClient.html#get()",target:"_blank",children:"get()"})]})}),(0,a.jsx)("node-1",{children:(0,a.jsxs)("java-method",{children:[(0,a.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/client/RestClient.html#put(java.lang.Object)",target:"_blank",children:"put(uri,body)"})," / ",(0,a.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/client/RestClient.html#put(java.lang.Object)",target:"_blank",children:"put(uri)"})]})}),(0,a.jsx)("node-1",{children:(0,a.jsxs)("java-method",{children:[(0,a.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/client/RestClient.html#post(java.lang.Object)",target:"_blank",children:"post(uri,body)"})," / ",(0,a.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/client/RestClient.html#post(java.lang.Object)",target:"_blank",children:"post(uri)"})]})}),(0,a.jsx)("node-1",{children:(0,a.jsxs)("java-method",{children:[(0,a.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/client/RestClient.html#patch(java.lang.Object)",target:"_blank",children:"patch(uri,body)"})," / ",(0,a.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/client/RestClient.html#patch(java.lang.Object)",target:"_blank",children:"patch(uri)"})]})}),(0,a.jsx)("node-1",{children:(0,a.jsx)("java-method",{children:(0,a.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/client/RestClient.html#delete(java.lang.Object)",target:"_blank",children:"delete(uri)"})})}),(0,a.jsx)("node-1",{children:(0,a.jsx)("java-method",{children:(0,a.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/client/RestClient.html#head(java.lang.Object)",target:"_blank",children:"head(uri)"})})}),(0,a.jsx)("node-1",{children:(0,a.jsx)("java-method",{children:(0,a.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/client/RestClient.html#options(java.lang.Object)",target:"_blank",children:"options(uri)"})})}),(0,a.jsx)("node-1",{children:(0,a.jsxs)("java-method",{children:[(0,a.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/client/RestClient.html#formPost(java.lang.Object)",target:"_blank",children:"formPost(uri,body)"})," / ",(0,a.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/client/RestClient.html#formPost(java.lang.Object)",target:"_blank",children:"formPost(uri)"})]})}),(0,a.jsx)("node-1",{children:(0,a.jsx)("java-method",{children:(0,a.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/client/RestClient.html#formPostPairs(java.lang.Object,java.lang.String...)",target:"_blank",children:"formPostPairs(uri,parameters...)"})})}),(0,a.jsx)("node-1",{children:(0,a.jsx)("java-method",{children:(0,a.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/client/RestClient.html#request(java.lang.String,java.lang.Object)",target:"_blank",children:"request(method,uri,body)"})})})]}),"\n",(0,a.jsxs)(t.p,{children:["The ",(0,a.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/client/RestRequest.html",target:"_blank",children:"RestRequest"})," class creates\n",(0,a.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/client/RestResponse.html",target:"_blank",children:"RestResponse"})," objects using the following methods:"]}),"\n",(0,a.jsxs)("tree",{children:[(0,a.jsx)("node-0",{children:(0,a.jsx)("java-class",{children:(0,a.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/client/RestRequest.html",target:"_blank",children:"RestRequest"})})}),(0,a.jsx)("node-1",{children:(0,a.jsx)("java-method",{children:(0,a.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/client/RestRequest.html#run()",target:"_blank",children:"run()"})})}),(0,a.jsx)("node-1",{children:(0,a.jsx)("java-method",{children:(0,a.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/client/RestRequest.html#complete()",target:"_blank",children:"complete()"})})})]}),"\n",(0,a.jsxs)(t.p,{children:["The distinction between the two methods is that ",(0,a.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/client/RestRequest.html#complete()",target:"_blank",children:"complete()"}),"\nautomatically consumes the response body and ",(0,a.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/client/RestRequest.html#run()",target:"_blank",children:"run()"}),"\ndoes not."]}),"\n",(0,a.jsx)(t.p,{children:"Note that you must consume response bodies in order for HTTP connections to be freed up for reuse!"}),"\n",(0,a.jsxs)(t.p,{children:["The ",(0,a.jsx)("a",{href:"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/InputStream.html",target:"_blank",children:"InputStreams"})," returned by the ",(0,a.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/client/ResponseContent.html",target:"_blank",children:"ResponseContent"}),"\nobject are auto-closing once they are exhausted, so it is often not necessary to explicitly close them."]}),"\n",(0,a.jsx)(t.p,{children:"The following examples show the distinction between the two calls:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-java",children:"// Consuming the response, so use run().\nString content = client.get(URI).run().getContent().asString();\n\n// Only interested in response status code, so use complete().\nint status = client.get(URI).complete().getStatusCode();\n"})}),"\n",(0,a.jsx)(t.h4,{id:"resource-management-with-try-with-resources",children:"Resource Management with Try-With-Resources"}),"\n",(0,a.jsxs)(t.p,{children:["Both ",(0,a.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/client/RestRequest.html",target:"_blank",children:"RestRequest"})," and\n",(0,a.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/client/RestResponse.html",target:"_blank",children:"RestResponse"})," implement\n",(0,a.jsx)("a",{href:"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/AutoCloseable.html",target:"_blank",children:"AutoCloseable"}),"\nand can be used in try-with-resources blocks for automatic resource cleanup."]}),"\n",(0,a.jsxs)(t.admonition,{title:"Recommended Pattern",type:"tip",children:[(0,a.jsx)(t.p,{children:"Use try-with-resources to ensure proper cleanup of HTTP connections:"}),(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-java",children:"// RestRequest will automatically close the response when the try block exits\ntry (RestRequest req = client.get(URI)) {\n    String content = req.run().getContent().asString();\n}\n\n// Or explicitly manage both request and response\ntry (RestRequest req = client.get(URI);\n     RestResponse res = req.run()) {\n    String content = res.getContent().asString();\n}\n"})})]}),"\n",(0,a.jsxs)(t.p,{children:["The ",(0,a.jsx)(t.code,{children:"close()"})," methods follow these rules:"]}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Unchecked exceptions"})," (",(0,a.jsx)(t.code,{children:"RuntimeException"})," and ",(0,a.jsx)(t.code,{children:"Error"}),") are allowed to propagate for debuggability"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Checked exceptions"})," are caught and logged but not thrown, following AutoCloseable best practices"]}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"This design prevents close exceptions from masking the original exception while still making programming errors visible during development."})]})}function d(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}}}]);
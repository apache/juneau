"use strict";(globalThis.webpackChunkjuneau_documentation=globalThis.webpackChunkjuneau_documentation||[]).push([[6160],{12546:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>o,default:()=>u,frontMatter:()=>s,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"topics/09.22.00.UsingWithOsgi","title":"Using with OSGi","description":"Since REST servlets are basically just HttpServlets, incorporating them into an OSGi environment is pretty","source":"@site/docs/topics/09.22.00.UsingWithOsgi.md","sourceDirName":"topics","slug":"/topics/UsingWithOsgi","permalink":"/docs/topics/UsingWithOsgi","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/juneau/tree/master/juneau-docs/docs/topics/09.22.00.UsingWithOsgi.md","tags":[],"version":"current","frontMatter":{"title":"Using with OSGi","slug":"UsingWithOsgi"},"sidebar":"mainSidebar","previous":{"title":"9.21. Built-In Parameters","permalink":"/docs/topics/BuiltInParameters"},"next":{"title":"9.23. REST Context","permalink":"/docs/topics/RestContext"}}');var i=n(74848),c=n(28453);const s={title:"Using with OSGi",slug:"UsingWithOsgi"},o=void 0,a={},l=[];function p(e){const t={code:"code",p:"p",pre:"pre",...(0,c.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(t.p,{children:["Since REST servlets are basically just ",(0,i.jsx)(t.code,{children:"HttpServlets"}),", incorporating them into an OSGi environment is pretty\nstraightforward."]}),"\n",(0,i.jsx)(t.p,{children:"The following code shows how to register your REST servlets in an OSGi Activator:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-java",children:'package org.apache.juneau.examples.rest;\n\nimport org.osgi.framework.*;\nimport org.osgi.service.http.*;\nimport org.osgi.util.tracker.*;\n\nimport org.apache.juneau.rest.samples.*;\n\n/**\n* Activator class used when running samples as a bundle in an OSGi environment.\n*/\npublic class Activator implements BundleActivator, ServiceTrackerCustomizer {\n\n    private ServiceTracker httpServiceTracker;\n    private BundleContext context;\n\n    @Override /* BundleActivator */\n    public void start(BundleContext context) throws Exception {\n        this.context = context;\n        httpServiceTracker = new ServiceTracker(context, HttpService.class.getName(), this);\n        httpServiceTracker.open();\n    }\n\n    @Override /* BundleActivator */\n    public void stop(BundleContext context) throws Exception {\n        httpServiceTracker.close();\n    }\n\n    @Override /* ServiceTrackerCustomizer */\n    public Object addingService(ServiceReference reference) {\n        Object service = context.getService(reference);\n\n        if (service instanceof HttpService) {\n            HttpService service = (HttpService)service;\n            try {\n                service.registerServlet("/sample", new MyRestServlet(), null, null);\n            } catch (Exception e) {\n                throw new RuntimeException(e);\n            }\n        }\n\n        return service;\n    }\n\n    @Override /* ServiceTrackerCustomizer */\n    public void modifiedService(ServiceReference reference, Object service) {\n    }\n\n    @Override /* ServiceTrackerCustomizer */\n    public void removedService(ServiceReference reference, Object service) {\n    }\n}\n'})})]})}function u(e={}){const{wrapper:t}={...(0,c.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(p,{...e})}):p(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>o});var r=n(96540);const i={},c=r.createContext(i);function s(e){const t=r.useContext(c);return r.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),r.createElement(c.Provider,{value:t},e.children)}}}]);
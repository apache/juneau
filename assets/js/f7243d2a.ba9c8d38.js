"use strict";(self.webpackChunkjuneau_documentation=self.webpackChunkjuneau_documentation||[]).push([[1602],{2866:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"topics/09.06.00.Marshalling","title":"Marshalling","description":"Juneau uses Parsers and Serializers for marshalling HTTP request and response bodies to POJOs using the Content-Type header to match the best parser and the Accept header to match the best serializer.","source":"@site/docs/topics/09.06.00.Marshalling.md","sourceDirName":"topics","slug":"/topics/Marshalling","permalink":"/docs/topics/Marshalling","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/juneau/tree/master/juneau-docs/docs/topics/09.06.00.Marshalling.md","tags":[],"version":"current","frontMatter":{"title":"Marshalling","slug":"Marshalling"},"sidebar":"mainSidebar","previous":{"title":"9.5.7. HTTP Part APIs","permalink":"/docs/topics/HttpPartApis"},"next":{"title":"9.7. Handling Form Posts","permalink":"/docs/topics/HandlingFormPosts"}}');var t=n(74848),r=n(28453);const i={title:"Marshalling",slug:"Marshalling"},o=void 0,l={},c=[];function h(e){const a={a:"a",admonition:"admonition",code:"code",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(a.p,{children:["Juneau uses ",(0,t.jsx)("a",{href:"/site/apidocs/org/apache/juneau/parser/Parser.html",target:"_blank",children:"Parsers"})," and ",(0,t.jsx)("a",{href:"/site/apidocs/org/apache/juneau/serializer/Serializer.html",target:"_blank",children:"Serializers"})," for marshalling HTTP request and response bodies to POJOs using the ",(0,t.jsx)(a.code,{children:"Content-Type"})," header to match the best parser and the ",(0,t.jsx)(a.code,{children:"Accept"})," header to match the best serializer."]}),"\n",(0,t.jsx)(a.p,{children:"Serializers and parsers can be associated with REST servlets using the following annotations:"}),"\n",(0,t.jsxs)("tree",{children:[(0,t.jsx)("node-0",{children:(0,t.jsx)("java-annotation",{children:(0,t.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/annotation/Rest.html",target:"_blank",children:"Rest"})})}),(0,t.jsx)("node-1",{children:(0,t.jsx)("java-method-annotation",{children:(0,t.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/annotation/Rest.html#serializers()",target:"_blank",children:"serializers"})})}),(0,t.jsx)("node-1",{children:(0,t.jsx)("java-method-annotation",{children:(0,t.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/annotation/Rest.html#serializers()",target:"_blank",children:"parsers"})})}),(0,t.jsx)("node-0",{children:(0,t.jsx)("java-annotation",{children:(0,t.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/annotation/RestOp.html",target:"_blank",children:"RestOp"})})}),(0,t.jsx)("node-1",{children:(0,t.jsx)("java-method-annotation",{children:(0,t.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/annotation/RestOp.html#serializers()",target:"_blank",children:"serializers"})})}),(0,t.jsx)("node-1",{children:(0,t.jsx)("java-method-annotation",{children:(0,t.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/annotation/RestOp.html#serializers()",target:"_blank",children:"parsers"})})})]}),"\n",(0,t.jsxs)(a.p,{children:["Request bodies are parsed and passed in via ",(0,t.jsx)("a",{href:"/site/apidocs/org/apache/juneau/http/annotation/Content.html",target:"_blank",children:"@Content"}),"-annotated parameters, and response bodies are returned or thrown by ",(0,t.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/annotation/RestOp.html",target:"_blank",children:"@RestOp"}),"-annotated methods and serialized."]}),"\n",(0,t.jsx)(a.admonition,{title:"Example",type:"tip",children:(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-java",children:"@Rest(\n    serializers={JsonParser.class, HtmlSerializer.class},\n    parsers={JsonParser.class, HtmlParser.class}\n)\npublic class MyResource {\n\n    // Override at the method level.\n    @RestPost(parsers={XmlParser.class})\n    public MyPojo myMethod(@Content MyPojo myPojo) {\n        // Do something with your parsed POJO.\n        // Then return it and serialize the POJO.\n    }\n}\n"})})}),"\n",(0,t.jsx)(a.p,{children:"The following classes provide common default serializers and parsers that can be\nused as-is or augmented by child classes:"}),"\n",(0,t.jsxs)("tree",{children:[(0,t.jsx)("node-0",{children:(0,t.jsx)(a.strong,{children:"Classes:"})}),(0,t.jsxs)("node-1",{children:[(0,t.jsx)("javac-abstract-class",{children:(0,t.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/servlet/BasicRestServlet.html",target:"_blank",children:"BasicRestServlet"})})," ",(0,t.jsx)("javac-abstract-class",{children:(0,t.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/servlet/BasicRestServletGroup.html",target:"_blank",children:"BasicRestServletGroup"})})," ",(0,t.jsx)("javac-abstract-class",{children:(0,t.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/servlet/BasicRestObject.html",target:"_blank",children:"BasicRestObject"})})," ",(0,t.jsx)("javac-abstract-class",{children:(0,t.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/servlet/BasicRestObjectGroup.html",target:"_blank",children:"BasicRestObjectGroup"})})]}),(0,t.jsx)("node-0",{children:(0,t.jsx)(a.strong,{children:"Interfaces:"})}),(0,t.jsxs)("node-1",{children:[(0,t.jsx)("javac-interface",{children:(0,t.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/config/BasicJsonConfig.html",target:"_blank",children:"BasicJsonConfig"})})," ",(0,t.jsx)("javac-interface",{children:(0,t.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/config/BasicJsonHtmlConfig.html",target:"_blank",children:"BasicJsonHtmlConfig"})})," ",(0,t.jsx)("javac-interface",{children:(0,t.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/config/BasicJson5Config.html",target:"_blank",children:"BasicJson5Config"})})," ",(0,t.jsx)("javac-interface",{children:(0,t.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/config/BasicOpenApiConfig.html",target:"_blank",children:"BasicOpenApiConfig"})})," ",(0,t.jsx)("javac-interface",{children:(0,t.jsx)("a",{href:"/site/apidocs/org/apache/juneau/rest/config/BasicUniversalConfig.html",target:"_blank",children:"BasicUniversalConfig"})})]})]}),"\n",(0,t.jsx)(a.p,{children:"Serializers and parsers can also be defined programmatically using an INIT hook method like shown below:"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-java",children:"@Rest\npublic class MyResource {\n\n    @RestInit\n    public void init(RestContext.Builder builder) {\n        builder.serializers().add(JsonSerializer.class, HtmlSerializer.class);\n        builder.parsers().add(JsonParser.class, HtmlParser.class);\n    }\n}\n"})}),"\n",(0,t.jsxs)(a.p,{children:["They can also be defined through ",(0,t.jsx)(a.a,{href:"/docs/topics/RestContext",children:"custom REST contexts and builders"}),"."]}),"\n",(0,t.jsx)(a.p,{children:"Config annotations allow you to define serializer and parser properties using specialized annotations at either the\nclass or operation levels:"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-java",children:'@Rest(\n    ...\n)\n@BeanConfig(sortProperties="true")\n@SerializerConfig(trimNulls="true")\n@JsonConfig(escapeSolidus="true")\npublic class MyResource extends BasicRestServlet {\n\n    @RestPost\n    @BeanConfig(sortProperties="false")\n    @SerializerConfig(trimNulls="false")\n    public MyPojo myMethod(@Content MyPojo myPojo) {\n        ...\n    }\n}\n'})}),"\n",(0,t.jsxs)(a.p,{children:["Swaps are associated serializers and parsers registered on a REST resource via the ",(0,t.jsx)("a",{href:"/site/apidocs/org/apache/juneau/annotation/BeanConfig.html",target:"_blank",children:"BeanConfig"})," annotation on either the class or method level:"]}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-java",children:"// Servlet with transforms applied\n@Rest(\n    ...\n)\n@BeanConfig(\n    swaps={\n        // Calendars should be serialized/parsed as ISO8601 date-time strings\n        TemporalCalendarSwap.IsoInstant.class,\n\n        // Byte arrays should be serialized/parsed as BASE64-encoded strings\n        ByteArraySwap.Base64.class\n    },\n    beanFilters={\n        // Subclasses of MyInterface will be treated as MyInterface objects.\n        // Bean properties not defined on that interface will be ignored.\n        MyInterface.class\n    }\n)\npublic MyResource extends BasicRestServlet {...}\n"})}),"\n",(0,t.jsx)(a.p,{children:"Config annotations are defined for all serializers and parsers:"}),"\n",(0,t.jsx)("tree",{children:(0,t.jsxs)("node-0",{children:[(0,t.jsx)("javac-annotation",{children:(0,t.jsx)("a",{href:"/site/apidocs/org/apache/juneau/annotation/BeanConfig.html",target:"_blank",children:"BeanConfig"})})," ",(0,t.jsx)("javac-annotation",{children:(0,t.jsx)("a",{href:"/site/apidocs/org/apache/juneau/csv/annotation/CsvConfig.html",target:"_blank",children:"CsvConfig"})})," ",(0,t.jsx)("javac-annotation",{children:(0,t.jsx)("a",{href:"/site/apidocs/org/apache/juneau/html/annotation/HtmlConfig.html",target:"_blank",children:"HtmlConfig"})})," ",(0,t.jsx)("javac-annotation",{children:(0,t.jsx)("a",{href:"/site/apidocs/org/apache/juneau/html/annotation/HtmlDocConfig.html",target:"_blank",children:"HtmlDocConfig"})})," ",(0,t.jsx)("javac-annotation",{children:(0,t.jsx)("a",{href:"/site/apidocs/org/apache/juneau/json/annotation/JsonConfig.html",target:"_blank",children:"JsonConfig"})})," ",(0,t.jsx)("javac-annotation",{children:(0,t.jsx)("a",{href:"/site/apidocs/org/apache/juneau/jsonschema/annotation/JsonSchemaConfig.html",target:"_blank",children:"JsonSchemaConfig"})})," ",(0,t.jsx)("javac-annotation",{children:(0,t.jsx)("a",{href:"/site/apidocs/org/apache/juneau/msgpack/annotation/MsgPackConfig.html",target:"_blank",children:"MsgPackConfig"})})," ",(0,t.jsx)("javac-annotation",{children:(0,t.jsx)("a",{href:"/site/apidocs/org/apache/juneau/oapi/annotation/OpenApiConfig.html",target:"_blank",children:"OpenApiConfig"})})," ",(0,t.jsx)("javac-annotation",{children:(0,t.jsx)("a",{href:"/site/apidocs/org/apache/juneau/parser/annotation/ParserConfig.html",target:"_blank",children:"ParserConfig"})})," ",(0,t.jsx)("javac-annotation",{children:(0,t.jsx)("a",{href:"/site/apidocs/org/apache/juneau/plaintext/annotation/PlainTextConfig.html",target:"_blank",children:"PlainTextConfig"})})," ",(0,t.jsx)("javac-annotation",{children:(0,t.jsx)("a",{href:"/site/apidocs/org/apache/juneau/serializer/annotation/SerializerConfig.html",target:"_blank",children:"SerializerConfig"})})," ",(0,t.jsx)("javac-annotation",{children:(0,t.jsx)("a",{href:"/site/apidocs/org/apache/juneau/soap/annotation/SoapXmlConfig.html",target:"_blank",children:"SoapXmlConfig"})})," ",(0,t.jsx)("javac-annotation",{children:(0,t.jsx)("a",{href:"/site/apidocs/org/apache/juneau/uon/annotation/UonConfig.html",target:"_blank",children:"UonConfig"})})," ",(0,t.jsx)("javac-annotation",{children:(0,t.jsx)("a",{href:"/site/apidocs/org/apache/juneau/urlencoding/annotation/UrlEncodingConfig.html",target:"_blank",children:"UrlEncodingConfig"})})," ",(0,t.jsx)("javac-annotation",{children:(0,t.jsx)("a",{href:"/site/apidocs/org/apache/juneau/xml/annotation/XmlConfig.html",target:"_blank",children:"XmlConfig"})})]})}),"\n",(0,t.jsx)(a.admonition,{title:"See Also",type:"info",children:(0,t.jsx)("tree",{children:(0,t.jsxs)("node-0",{children:[(0,t.jsx)("java-class",{children:(0,t.jsx)("a",{href:"/site/apidocs/org/apache/juneau/examples/rest/PhotosResource.html",target:"_blank",children:"PhotosResource"})})," - An example of a REST resource that uses a custom serializer and parser."]})})})]})}function d(e={}){const{wrapper:a}={...(0,r.R)(),...e.components};return a?(0,t.jsx)(a,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},28453:(e,a,n)=>{n.d(a,{R:()=>i,x:()=>o});var s=n(96540);const t={},r=s.createContext(t);function i(e){const a=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function o(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),s.createElement(r.Provider,{value:a},e.children)}}}]);
"use strict";(globalThis.webpackChunkjuneau_documentation=globalThis.webpackChunkjuneau_documentation||[]).push([[5067],{10586:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"topics/23.05.00.ScriptReleaseDocs","title":"release-docs.py","description":"release-docs.py promotes documentation from the asf-staging branch to the asf-site branch, making it live on the production website.","source":"@site/pages/topics/23.05.00.ScriptReleaseDocs.md","sourceDirName":"topics","slug":"/topics/ScriptReleaseDocs","permalink":"/docs/topics/ScriptReleaseDocs","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/juneau/tree/master/docs/pages/topics/23.05.00.ScriptReleaseDocs.md","tags":[],"version":"current","frontMatter":{"title":"release-docs.py","slug":"ScriptReleaseDocs"},"sidebar":"mainSidebar","previous":{"title":"23.4. release-docs-stage.py","permalink":"/docs/topics/ScriptReleaseDocsStage"},"next":{"title":"23.6. prompt-pgp-passphrase.py","permalink":"/docs/topics/ScriptPromptPgpPassphrase"}}');var i=t(74848),o=t(28453);const r={title:"release-docs.py",slug:"ScriptReleaseDocs"},c=void 0,l={},d=[{value:"What It Does",id:"what-it-does",level:2},{value:"Usage",id:"usage",level:2},{value:"Promote to Production",id:"promote-to-production",level:3},{value:"Test Without Pushing",id:"test-without-pushing",level:3},{value:"Command-Line Options",id:"command-line-options",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Exit Codes",id:"exit-codes",level:2},{value:"Notes",id:"notes",level:2},{value:"Workflow",id:"workflow",level:2},{value:"Safety",id:"safety",level:2}];function a(e){const s={code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"release-docs.py"})," promotes documentation from the ",(0,i.jsx)(s.code,{children:"asf-staging"})," branch to the ",(0,i.jsx)(s.code,{children:"asf-site"})," branch, making it live on the production website."]}),"\n",(0,i.jsx)(s.h2,{id:"what-it-does",children:"What It Does"}),"\n",(0,i.jsx)(s.p,{children:"The script:"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsx)(s.li,{children:"Clones the repository to a temporary directory"}),"\n",(0,i.jsxs)(s.li,{children:["Fetches the ",(0,i.jsx)(s.code,{children:"asf-staging"})," branch"]}),"\n",(0,i.jsxs)(s.li,{children:["Switches to a detached HEAD at ",(0,i.jsx)(s.code,{children:"origin/asf-staging"})]}),"\n",(0,i.jsxs)(s.li,{children:["Force pushes to the ",(0,i.jsx)(s.code,{children:"asf-site"})," branch"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"usage",children:"Usage"}),"\n",(0,i.jsx)(s.h3,{id:"promote-to-production",children:"Promote to Production"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"python3 scripts/release-docs.py\n"})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"\u26a0\ufe0f  WARNING:"})," This will make the documentation live on the production website."]}),"\n",(0,i.jsx)(s.h3,{id:"test-without-pushing",children:"Test Without Pushing"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"python3 scripts/release-docs.py --no-push\n"})}),"\n",(0,i.jsx)(s.h2,{id:"command-line-options",children:"Command-Line Options"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"--no-push"})," - Perform all steps except the final git push"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Python 3.6 or higher"}),"\n",(0,i.jsx)(s.li,{children:"Git (git command must be in PATH)"}),"\n",(0,i.jsx)(s.li,{children:"Write access to the remote repository"}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"exit-codes",children:"Exit Codes"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"0"})," - Success"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"1"})," - Error occurred"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"notes",children:"Notes"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"The script uses a temporary directory for git operations"}),"\n",(0,i.jsx)(s.li,{children:"The temp directory is automatically cleaned up after successful push"}),"\n",(0,i.jsxs)(s.li,{children:["If ",(0,i.jsx)(s.code,{children:"--no-push"})," is used, the temp directory is not cleaned up (for manual inspection)"]}),"\n",(0,i.jsx)(s.li,{children:"A success sound is played when the script completes successfully"}),"\n",(0,i.jsxs)(s.li,{children:["This script does NOT build documentation - it only promotes what's already in ",(0,i.jsx)(s.code,{children:"asf-staging"})]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"workflow",children:"Workflow"}),"\n",(0,i.jsx)(s.p,{children:"This script is typically used as the final step in the documentation release workflow:"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsx)(s.li,{children:"Make documentation changes"}),"\n",(0,i.jsxs)(s.li,{children:["Run ",(0,i.jsx)(s.code,{children:"release-docs-stage.py"})," to deploy to staging"]}),"\n",(0,i.jsxs)(s.li,{children:["Review the staging site at ",(0,i.jsx)(s.code,{children:"https://juneau.staged.apache.org"})]}),"\n",(0,i.jsxs)(s.li,{children:["Run ",(0,i.jsx)(s.code,{children:"release-docs.py"})," to promote to production at ",(0,i.jsx)(s.code,{children:"https://juneau.apache.org"})]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"safety",children:"Safety"}),"\n",(0,i.jsx)(s.p,{children:"The script includes a warning message before promoting to production to ensure you understand the impact."})]})}function h(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},28453:(e,s,t)=>{t.d(s,{R:()=>r,x:()=>c});var n=t(96540);const i={},o=n.createContext(i);function r(e){const s=n.useContext(o);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),n.createElement(o.Provider,{value:s},e.children)}}}]);
"use strict";(self.webpackChunkjuneau_documentation=self.webpackChunkjuneau_documentation||[]).push([[2469],{28453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>l});var a=s(96540);const i={},t=a.createContext(i);function o(e){const n=a.useContext(t);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),a.createElement(t.Provider,{value:n},e.children)}},73793:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>r,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"topics/02.11.03.AutoSwaps","title":"Auto-detected swaps","description":"Various methods can be defined on a class directly to affect how it gets serialized.","source":"@site/docs-staging/topics/02.11.03.AutoSwaps.md","sourceDirName":"topics","slug":"/topics/02.11.03.AutoSwaps","permalink":"/docs/topics/02.11.03.AutoSwaps","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/juneau/tree/main/juneau-docs/docs-staging/topics/02.11.03.AutoSwaps.md","tags":[],"version":"current","frontMatter":{"title":"Auto-detected swaps"},"sidebar":"mainSidebar","previous":{"title":"2.11.2. Default Swaps","permalink":"/docs/topics/02.11.02.DefaultSwaps"},"next":{"title":"2.11.4. Per-media-type Swaps","permalink":"/docs/topics/02.11.04.PerMediaTypeSwaps"}}');var i=s(74848),t=s(28453);const o={title:"Auto-detected swaps"},l=void 0,r={},c=[];function d(e){const n={a:"a",code:"code",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["Various methods can be defined on a class directly to affect how it gets serialized.\nThis can often be simpler than using ",(0,i.jsx)(n.code,{children:"ObjectSwaps"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Objects serialized as ",(0,i.jsx)(n.code,{children:"Strings"})," can be parsed back into their original objects by implementing one of the following methods on the class:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"public static T fromString(String)"})," method."]}),"\n",(0,i.jsx)(n.p,{children:"Any of the following method names also work:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"valueOf(String)"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"parse(String)"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"parseString(String)"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"forName(String)"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"forString(String)"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"public T(String)"})," constructor."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Note that these methods cover conversion from several built-in Java types, meaning the parsers can automatically construct these objects from strings:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"fromString(String)"})," - ",(0,i.jsx)(n.a,{href:"../apidocs/java/util/UUID.html",children:"UUID"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"valueOf(String)"})," - ",(0,i.jsx)(n.a,{href:"../apidocs/java/lang/Boolean.html",children:"Boolean"}),", ",(0,i.jsx)(n.a,{href:"../apidocs/java/lang/Byte.html",children:"Byte"}),", ",(0,i.jsx)(n.a,{href:"../apidocs/java/lang/Double.html",children:"Double"}),", ",(0,i.jsx)(n.a,{href:"../apidocs/java/lang/Float.html",children:"Float"}),", ",(0,i.jsx)(n.a,{href:"../apidocs/java/lang/Integer.html",children:"Integer"}),", ",(0,i.jsx)(n.a,{href:"../apidocs/java/lang/Long.html",children:"Long"}),", ",(0,i.jsx)(n.a,{href:"../apidocs/java/lang/Short.html",children:"Short"}),", ",(0,i.jsx)(n.a,{href:"../apidocs/java/sql/Date.html",children:"Date"}),", ",(0,i.jsx)(n.a,{href:"../apidocs/java/sql/Time.html",children:"Time"}),", ",(0,i.jsx)(n.a,{href:"../apidocs/java/sql/Timestamp.html",children:"Timestamp"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"parse(String)"})," - ",(0,i.jsx)(n.a,{href:"../apidocs/java/text/DateFormat.html",children:"DateFormat"}),", ",(0,i.jsx)(n.a,{href:"../apidocs/java/text/MessageFormat.html",children:"MessageFormat"}),", ",(0,i.jsx)(n.a,{href:"../apidocs/java/text/NumberFormat.html",children:"NumberFormat"}),", ",(0,i.jsx)(n.a,{href:"../apidocs/java/util/Date.html",children:"Date"}),", ",(0,i.jsx)(n.a,{href:"../apidocs/java/util/logging/Level.html",children:"Level"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"parseString(String)"})," - ",(0,i.jsx)(n.a,{href:"../apidocs/javax/xml/bind/DatatypeConverter.html",children:"DatatypeConverter"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"forName(String)"})," - ",(0,i.jsx)(n.a,{href:"../apidocs/java/lang/Class.html",children:"Class"})]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["If you want to force a bean-like class to be serialized as a string, you can use the ",(0,i.jsx)(n.a,{href:"../apidocs/org/apache/juneau/annotation/BeanIgnore.html",children:"@BeanIgnore"})," annotation on the class to force it to be serialized to a string using the ",(0,i.jsx)(n.code,{children:"toString()"})," method."]}),"\n",(0,i.jsx)(n.p,{children:"Serializing to other intermediate objects can be accomplished by defining a swap method directly on the class:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"public X swap()"})," method, where ",(0,i.jsx)(n.code,{children:"X"})," is any serializable object."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"public X swap(BeanSession)"})," method, where ",(0,i.jsx)(n.code,{children:"X"})," is any serializable object."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"public static MyPojo unswap(X)"})," method, where ",(0,i.jsx)(n.code,{children:"X"})," is any serializable object."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"public static MyPojo unswap(X,BeanSession)"})," method, where ",(0,i.jsx)(n.code,{children:"X"})," is any serializable object."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Serializing to and from ",(0,i.jsx)(n.code,{children:"Maps"})," can be accomplished by defining any of the following methods:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"public Map toMap()"})," method."]}),"\n",(0,i.jsx)(n.p,{children:"Can be any type of map with string keys and object vals."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"public JsonMap toMap()"})," method."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"public Map toMap(BeanSession)"})," method."]}),"\n",(0,i.jsx)(n.p,{children:"Can be any type of map with string keys and object vals."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"public JsonMap toMap(BeanSession)"})," method."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"public static MyPojo fromMap(Map)"})," method."]}),"\n",(0,i.jsx)(n.p,{children:"Can be any type of map with string keys and object vals."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"public static MyPojo fromMap(JsonMap)"})," method."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"public static MyPojo fromMap(Map,BeanSession)"})," method."]}),"\n",(0,i.jsx)(n.p,{children:"Can be any type of map with string keys and object vals."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"public static MyPojo fromMap(JsonMap,BeanSession)"})," method."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"BeanSession"})," parameter allows you access to various information about the current serialization session.\nFor example, you could provide customized results based on the media type being produced (",(0,i.jsx)(n.a,{href:"../apidocs/org/apache/juneau/BeanSession.html#getMediaType()",children:"BeanSession.getMediaType()"}),")."]}),"\n",(0,i.jsxs)(n.p,{children:["The following example shows how an HTML5 form template object can be created that gets serialized as a populated HTML5 ",(0,i.jsx)(n.a,{href:"../apidocs/org/apache/juneau/dto/html5/Form.html",children:"Form"})," bean."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'import static org.apache.juneau.dto.html5.HtmlBuilder.*;\n\n/**\n * A simple HTML form template whose serialized form is an HTML5 Form object.\n */\npublic class FormTemplate {\n\n    private String action;\n    private int value1;\n    private boolean value2;\n\n    // Some constructor that initializes our fields.\n    public FormTemplate(String action, int value1, boolean value2) {\n        this.action = action;\n        this.value1 = value1;\n        this.value2 = value2;\n    }\n\n    // Special swap method that converts this template to a serializable bean\n    public Form swap(BeanSession session) {\n        return form(action,\n            input("text").name("v1").value(value1),\n            input("text").name("v2").value(value2)\n        );\n    }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"Swapped objects can be converted back into their original form by the parsers by specifying one of the following methods:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"public static T unswap(BeanSession, X)"})," method where ",(0,i.jsx)(n.code,{children:"X"})," is the swap class type."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"public T(X)"})," constructor where ",(0,i.jsx)(n.code,{children:"X"})," is the swap class type."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"The following shows how our form template class can be modified to allow the parsers to reconstruct our original object:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'import static org.apache.juneau.dto.html5.HtmlBuilder.*;\n\n/**\n * A simple HTML form template whose serialized form is an HTML5 Form object.\n * This time with parsing support.\n */\n@Bean(dictionary=HtmlBeanDictionary.class)\npublic class FormTemplate {\n\n    private String action;\n    private int value1;\n    private boolean value2;\n\n    // Our \'unswap\' constructor\n    public FormTemplate(Form form) {\n        this.action = form.getAttr("action");\n        this.value1 = form.getChild(Input.class, 0)\n            .getAttr(int.class, "value");\n        this.value2 = form.getChild(Input.class, 1)\n            .getAttr(boolean.class, "value");\n    }\n\n    public FormTemplate(String action, int value1, boolean value2) {\n        this.action = action;\n        this.value1 = value1;\n        this.value2 = value2;\n    }\n\n    public Form swap(BeanSession session) {\n        return form(action,\n            input("text").name("v1").value(value1),\n            input("text").name("v2").value(value2)\n        );\n    }\n}\n'})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);
"use strict";(globalThis.webpackChunkjuneau_documentation=globalThis.webpackChunkjuneau_documentation||[]).push([[1572],{18122:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"topics/08.03.00.Customization","title":"Customization","description":"BCT provides flexible customization options through the @BctConfig annotation and the BctConfiguration class. These tools allow you to configure assertion behavior, customize property access, and extend BCT\'s capabilities to match your testing needs.","source":"@site/docs/topics/08.03.00.Customization.md","sourceDirName":"topics","slug":"/topics/Customization","permalink":"/docs/topics/Customization","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/juneau/tree/master/juneau-docs/docs/topics/08.03.00.Customization.md","tags":[],"version":"current","frontMatter":{"title":"Customization","slug":"Customization"},"sidebar":"mainSidebar","previous":{"title":"8.2. Custom Error Messages","permalink":"/docs/topics/CustomErrorMessages"},"next":{"title":"8.3.1. Stringifiers","permalink":"/docs/topics/Stringifiers"}}');var i=t(74848),r=t(28453);const a={title:"Customization",slug:"Customization"},o="Customization",l={},c=[{value:"\ud83d\udccb Table of Contents",id:"-table-of-contents",level:2},{value:"@BctConfig Annotation",id:"bctconfig-annotation",level:2},{value:"Basic Usage",id:"basic-usage",level:3},{value:"Annotation Properties",id:"annotation-properties",level:3},{value:"sortMaps",id:"sortmaps",level:4},{value:"sortCollections",id:"sortcollections",level:4},{value:"beanConverter",id:"beanconverter",level:4},{value:"Class-Level vs Method-Level",id:"class-level-vs-method-level",level:3},{value:"Using Default Converter",id:"using-default-converter",level:3},{value:"BctConfiguration Class",id:"bctconfiguration-class",level:2},{value:"Setting Configuration Values",id:"setting-configuration-values",level:3},{value:"Getting Configuration Values",id:"getting-configuration-values",level:3},{value:"Global vs Thread-Local Settings",id:"global-vs-thread-local-settings",level:3},{value:"Configuration Properties",id:"configuration-properties",level:2},{value:"BCT_SORT_MAPS",id:"bct_sort_maps",level:3},{value:"BCT_SORT_COLLECTIONS",id:"bct_sort_collections",level:3},{value:"Custom Bean Converters",id:"custom-bean-converters",level:2},{value:"Creating a Custom Converter",id:"creating-a-custom-converter",level:3},{value:"Using via Annotation",id:"using-via-annotation",level:3},{value:"Using via Programmatic API",id:"using-via-programmatic-api",level:3},{value:"Converter Requirements",id:"converter-requirements",level:3},{value:"Thread Safety",id:"thread-safety",level:2},{value:"Thread-Local Storage",id:"thread-local-storage",level:3},{value:"Automatic Cleanup",id:"automatic-cleanup",level:3},{value:"Advanced Customization Topics",id:"advanced-customization-topics",level:2},{value:"See Also",id:"see-also",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"customization",children:"Customization"})}),"\n",(0,i.jsxs)(n.p,{children:["BCT provides flexible customization options through the ",(0,i.jsx)(n.code,{children:"@BctConfig"})," annotation and the ",(0,i.jsx)(n.code,{children:"BctConfiguration"})," class. These tools allow you to configure assertion behavior, customize property access, and extend BCT's capabilities to match your testing needs."]}),"\n",(0,i.jsx)(n.h2,{id:"-table-of-contents",children:"\ud83d\udccb Table of Contents"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#bctconfig-annotation",children:"@BctConfig Annotation"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#bctconfiguration-class",children:"BctConfiguration Class"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#configuration-properties",children:"Configuration Properties"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#custom-bean-converters",children:"Custom Bean Converters"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#thread-safety",children:"Thread Safety"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#advanced-customization-topics",children:"Advanced Customization Topics"})}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"bctconfig-annotation",children:"@BctConfig Annotation"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"@BctConfig"})," annotation provides a declarative way to configure BCT settings for your tests. It can be applied at both the class level and method level, with method-level annotations taking precedence over class-level annotations."]}),"\n",(0,i.jsx)(n.h3,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'import org.apache.juneau.junit.bct.annotations.BctConfig;\nimport org.apache.juneau.commons.lang.TriState;\n\n@BctConfig(sortMaps=TriState.TRUE)\nclass MyTest {\n    @Test\n    @BctConfig(sortCollections=TriState.TRUE)\n    void testSomething() {\n        // sortMaps=true (from class), sortCollections=true (from method)\n        assertBean(order, "items{0{name}}", "{{Laptop}}");\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"annotation-properties",children:"Annotation Properties"}),"\n",(0,i.jsx)(n.h4,{id:"sortmaps",children:"sortMaps"}),"\n",(0,i.jsx)(n.p,{children:"Controls whether map entries are sorted by key before comparison in assertions."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@BctConfig(sortMaps=TriState.TRUE)\nclass MyTest {\n    @Test\n    void testMap() {\n        // Map entries will be sorted before comparison\n        Map<String, String> map = Map.of("zebra", "animal", "apple", "fruit");\n        assertBean(map, "apple,zebra", "fruit,animal");\n    }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Values:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"TriState.TRUE"})," - Enable map sorting"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"TriState.FALSE"})," - Disable map sorting"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"TriState.UNSET"})," - Inherit from class-level annotation (default for method-level)"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"sortcollections",children:"sortCollections"}),"\n",(0,i.jsx)(n.p,{children:"Controls whether collection elements are sorted before comparison in assertions."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@BctConfig(sortCollections=TriState.TRUE)\nclass MyTest {\n    @Test\n    void testList() {\n        // List elements will be sorted before comparison\n        List<String> list = Arrays.asList("zebra", "apple", "banana");\n        assertList(list, "apple", "banana", "zebra");\n    }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Values:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"TriState.TRUE"})," - Enable collection sorting"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"TriState.FALSE"})," - Disable collection sorting"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"TriState.UNSET"})," - Inherit from class-level annotation (default for method-level)"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"beanconverter",children:"beanConverter"}),"\n",(0,i.jsx)(n.p,{children:"Specifies a custom bean converter class to use for all assertions in the test."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'public static class MyCustomConverter extends BasicBeanConverter {\n    public MyCustomConverter() {\n        super(BasicBeanConverter.builder()\n            .defaultSettings()\n            .addStringifier(LocalDate.class, date -> \n                date.format(DateTimeFormatter.ISO_LOCAL_DATE))\n            .build());\n    }\n}\n\n@BctConfig(beanConverter=MyCustomConverter.class)\nclass MyTest {\n    @Test\n    void testWithCustomConverter() {\n        // All assertions use MyCustomConverter\n        assertBean(event, "date", "2023-12-01");\n    }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Requirements:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"The converter class must have a no-arg constructor"}),"\n",(0,i.jsx)(n.li,{children:"The constructor will be made accessible if needed (for nested classes, etc.)"}),"\n",(0,i.jsx)(n.li,{children:"If instantiation fails, the test will fail with a descriptive error message"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"class-level-vs-method-level",children:"Class-Level vs Method-Level"}),"\n",(0,i.jsx)(n.p,{children:"Method-level annotations override class-level annotations for the same property. Properties not specified in the method annotation inherit from the class annotation."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"@BctConfig(sortMaps=TriState.TRUE, beanConverter=MyConverter.class)\nclass MyTest {\n    @Test\n    @BctConfig(sortMaps=TriState.FALSE, sortCollections=TriState.TRUE)\n    void testMethod() {\n        // sortMaps=false (from method, overrides class)\n        // sortCollections=true (from method)\n        // beanConverter=MyConverter (from class, inherited)\n    }\n    \n    @Test\n    void testAnotherMethod() {\n        // sortMaps=true (from class)\n        // sortCollections=UNSET (default, not set)\n        // beanConverter=MyConverter (from class)\n    }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"using-default-converter",children:"Using Default Converter"}),"\n",(0,i.jsxs)(n.p,{children:["To explicitly use the default converter when a class-level converter is set, use ",(0,i.jsx)(n.code,{children:"BasicBeanConverter.class"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"@BctConfig(beanConverter=MyConverter.class)\nclass MyTest {\n    @Test\n    @BctConfig(beanConverter=BasicBeanConverter.class)\n    void testWithDefaultConverter() {\n        // Uses default converter, not MyConverter\n    }\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"bctconfiguration-class",children:"BctConfiguration Class"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"BctConfiguration"})," class provides a programmatic API for configuring BCT settings. It's useful when you need dynamic configuration or want to set up converters in test setup methods."]}),"\n",(0,i.jsx)(n.h3,{id:"setting-configuration-values",children:"Setting Configuration Values"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"import static org.apache.juneau.junit.bct.BctConfiguration.*;\n\n@BeforeEach\nvoid setUp() {\n    // Enable map sorting\n    set(BCT_SORT_MAPS, true);\n    \n    // Enable collection sorting\n    set(BCT_SORT_COLLECTIONS, true);\n    \n    // Set custom converter\n    var converter = BasicBeanConverter.builder()\n        .defaultSettings()\n        .addStringifier(LocalDate.class, date -> \n            date.format(DateTimeFormatter.ISO_LOCAL_DATE))\n        .build();\n    set(converter);\n}\n\n@AfterEach\nvoid tearDown() {\n    // Clear all thread-local settings\n    clear();\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"getting-configuration-values",children:"Getting Configuration Values"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"// Get a setting with a default value\nboolean sortMaps = BctConfiguration.get(BCT_SORT_MAPS, false);\n\n// Get a setting object (can check if set)\nStringSetting setting = BctConfiguration.get(BCT_SORT_MAPS);\nif (setting != null && setting.asBoolean()) {\n    // Map sorting is enabled\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"global-vs-thread-local-settings",children:"Global vs Thread-Local Settings"}),"\n",(0,i.jsx)(n.p,{children:"Settings can be set globally (affecting all threads) or thread-locally (affecting only the current thread). Thread-local settings take precedence."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"// Set global setting (affects all threads)\nBctConfiguration.setGlobal(BCT_SORT_MAPS, true);\n\n// Set thread-local setting (overrides global for this thread)\nBctConfiguration.set(BCT_SORT_MAPS, false);\n\n// Clear thread-local settings\nBctConfiguration.clear();\n\n// Clear global settings\nBctConfiguration.clearGlobal();\n"})}),"\n",(0,i.jsx)(n.h2,{id:"configuration-properties",children:"Configuration Properties"}),"\n",(0,i.jsx)(n.h3,{id:"bct_sort_maps",children:"BCT_SORT_MAPS"}),"\n",(0,i.jsxs)(n.p,{children:["Property name: ",(0,i.jsx)(n.code,{children:'"Bct.sortMaps"'})]}),"\n",(0,i.jsx)(n.p,{children:"When enabled, map entries are sorted by key before comparison, ensuring consistent assertion results regardless of map implementation or insertion order."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"BctConfiguration.set(BctConfiguration.BCT_SORT_MAPS, true);\n"})}),"\n",(0,i.jsx)(n.h3,{id:"bct_sort_collections",children:"BCT_SORT_COLLECTIONS"}),"\n",(0,i.jsxs)(n.p,{children:["Property name: ",(0,i.jsx)(n.code,{children:'"Bct.sortCollections"'})]}),"\n",(0,i.jsx)(n.p,{children:"When enabled, collection elements are sorted before comparison, ensuring consistent assertion results regardless of collection implementation or insertion order."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"BctConfiguration.set(BctConfiguration.BCT_SORT_COLLECTIONS, true);\n"})}),"\n",(0,i.jsx)(n.h2,{id:"custom-bean-converters",children:"Custom Bean Converters"}),"\n",(0,i.jsxs)(n.p,{children:["Bean converters control how objects are accessed and converted to strings for comparison. BCT uses ",(0,i.jsx)(n.code,{children:"BasicBeanConverter.DEFAULT"})," by default, but you can provide custom converters for specialized needs."]}),"\n",(0,i.jsx)(n.h3,{id:"creating-a-custom-converter",children:"Creating a Custom Converter"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"public static class MyCustomConverter extends BasicBeanConverter {\n    public MyCustomConverter() {\n        super(BasicBeanConverter.builder()\n            .defaultSettings()\n            // Add custom stringifier for LocalDate\n            .addStringifier(LocalDate.class, date -> \n                date.format(DateTimeFormatter.ISO_LOCAL_DATE))\n            // Add custom stringifier for Money\n            .addStringifier(Money.class, money -> \n                money.getAmount().toPlainString())\n            .build());\n    }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"using-via-annotation",children:"Using via Annotation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@BctConfig(beanConverter=MyCustomConverter.class)\nclass MyTest {\n    @Test\n    void testWithCustomConverter() {\n        assertBean(order, "date,total", "2023-12-01,99.99");\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"using-via-programmatic-api",children:"Using via Programmatic API"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"@BeforeEach\nvoid setUp() {\n    var converter = BasicBeanConverter.builder()\n        .defaultSettings()\n        .addStringifier(LocalDate.class, date -> \n            date.format(DateTimeFormatter.ISO_LOCAL_DATE))\n        .build();\n    BctConfiguration.set(converter);\n}\n\n@AfterEach\nvoid tearDown() {\n    BctConfiguration.clear(); // Also clears converter\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"converter-requirements",children:"Converter Requirements"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Must have a no-arg constructor"}),"\n",(0,i.jsx)(n.li,{children:"Constructor will be made accessible if needed (for nested classes, private constructors, etc.)"}),"\n",(0,i.jsxs)(n.li,{children:["If instantiation fails, a ",(0,i.jsx)(n.code,{children:"RuntimeException"})," is thrown with a descriptive message"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"thread-safety",children:"Thread Safety"}),"\n",(0,i.jsx)(n.p,{children:"All configuration in BCT is thread-safe and uses thread-local storage. This ensures that:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Parallel test execution"})," doesn't interfere with each other's settings"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Each test thread"})," has its own isolated configuration"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Settings are automatically cleared"})," after each test when using ",(0,i.jsx)(n.code,{children:"@BctConfig"})]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"thread-local-storage",children:"Thread-Local Storage"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"// Thread 1\nBctConfiguration.set(BCT_SORT_MAPS, true);\n\n// Thread 2 (running in parallel)\nBctConfiguration.set(BCT_SORT_MAPS, false);\n\n// Each thread has its own setting - no interference\n"})}),"\n",(0,i.jsx)(n.h3,{id:"automatic-cleanup",children:"Automatic Cleanup"}),"\n",(0,i.jsxs)(n.p,{children:["When using ",(0,i.jsx)(n.code,{children:"@BctConfig"}),", settings are automatically cleared after each test method:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"@BctConfig(sortMaps=TriState.TRUE)\nclass MyTest {\n    @Test\n    void test1() {\n        // sortMaps is enabled\n    }\n    \n    @Test\n    void test2() {\n        // sortMaps is still enabled (from class annotation)\n        // But if test1 had method-level annotation, it would be cleared\n    }\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"advanced-customization-topics",children:"Advanced Customization Topics"}),"\n",(0,i.jsx)(n.p,{children:"For more advanced customization options, see:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"Stringifiers",children:"Stringifiers"})})," - Define how objects are converted to strings for comparison"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"Listifiers",children:"Listifiers"})})," - Convert collection-like objects to lists for testing"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"Swappers",children:"Swappers"})})," - Transform objects before processing (unwrap Optional, Supplier, etc.)"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"JuneauBctBasics",children:"juneau-bct Basics"})," - Main BCT documentation"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"CustomErrorMessages",children:"Custom Error Messages"})," - Enhanced error reporting"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"PropertyExtractors",children:"Property Extractors"})," - Custom property access logic"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>o});var s=t(96540);const i={},r=s.createContext(i);function a(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);